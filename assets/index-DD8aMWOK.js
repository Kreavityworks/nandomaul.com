(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}})();function ab(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wy={exports:{}},Rp={};var VS;function XA(){if(VS)return Rp;VS=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,c){var f=null;if(c!==void 0&&(f=""+c),s.key!==void 0&&(f=""+s.key),"key"in s){c={};for(var h in s)h!=="key"&&(c[h]=s[h])}else c=s;return s=c.ref,{$$typeof:r,type:i,key:f,ref:s!==void 0?s:null,props:c}}return Rp.Fragment=e,Rp.jsx=t,Rp.jsxs=t,Rp}var HS;function jA(){return HS||(HS=1,wy.exports=XA()),wy.exports}var W=jA(),Cy={exports:{}},Zt={};var GS;function qA(){if(GS)return Zt;GS=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function M(X){return X===null||typeof X!="object"?null:(X=b&&X[b]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,w={};function E(X,re,_e){this.props=X,this.context=re,this.refs=w,this.updater=_e||A}E.prototype.isReactComponent={},E.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function N(){}N.prototype=E.prototype;function L(X,re,_e){this.props=X,this.context=re,this.refs=w,this.updater=_e||A}var U=L.prototype=new N;U.constructor=L,R(U,E.prototype),U.isPureReactComponent=!0;var B=Array.isArray;function z(){}var H={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function I(X,re,_e){var Pe=_e.ref;return{$$typeof:r,type:X,key:re,ref:Pe!==void 0?Pe:null,props:_e}}function P(X,re){return I(X.type,re,X.props)}function q(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function se(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(_e){return re[_e]})}var ee=/\/+/g;function de(X,re){return typeof X=="object"&&X!==null&&X.key!=null?se(""+X.key):re.toString(36)}function oe(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(z,z):(X.status="pending",X.then(function(re){X.status==="pending"&&(X.status="fulfilled",X.value=re)},function(re){X.status==="pending"&&(X.status="rejected",X.reason=re)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Q(X,re,_e,Pe,it){var he=typeof X;(he==="undefined"||he==="boolean")&&(X=null);var Ae=!1;if(X===null)Ae=!0;else switch(he){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(X.$$typeof){case r:case e:Ae=!0;break;case y:return Ae=X._init,Q(Ae(X._payload),re,_e,Pe,it)}}if(Ae)return it=it(X),Ae=Pe===""?"."+de(X,0):Pe,B(it)?(_e="",Ae!=null&&(_e=Ae.replace(ee,"$&/")+"/"),Q(it,re,_e,"",function($e){return $e})):it!=null&&(q(it)&&(it=P(it,_e+(it.key==null||X&&X.key===it.key?"":(""+it.key).replace(ee,"$&/")+"/")+Ae)),re.push(it)),1;Ae=0;var qe=Pe===""?".":Pe+":";if(B(X))for(var nt=0;nt<X.length;nt++)Pe=X[nt],he=qe+de(Pe,nt),Ae+=Q(Pe,re,_e,he,it);else if(nt=M(X),typeof nt=="function")for(X=nt.call(X),nt=0;!(Pe=X.next()).done;)Pe=Pe.value,he=qe+de(Pe,nt++),Ae+=Q(Pe,re,_e,he,it);else if(he==="object"){if(typeof X.then=="function")return Q(oe(X),re,_e,Pe,it);throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function J(X,re,_e){if(X==null)return X;var Pe=[],it=0;return Q(X,Pe,"","",function(he){return re.call(_e,he,it++)}),Pe}function fe(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(_e){(X._status===0||X._status===-1)&&(X._status=1,X._result=_e)},function(_e){(X._status===0||X._status===-1)&&(X._status=2,X._result=_e)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var we=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Ce={map:J,forEach:function(X,re,_e){J(X,function(){re.apply(this,arguments)},_e)},count:function(X){var re=0;return J(X,function(){re++}),re},toArray:function(X){return J(X,function(re){return re})||[]},only:function(X){if(!q(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Zt.Activity=_,Zt.Children=Ce,Zt.Component=E,Zt.Fragment=t,Zt.Profiler=s,Zt.PureComponent=L,Zt.StrictMode=i,Zt.Suspense=m,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return H.H.useMemoCache(X)}},Zt.cache=function(X){return function(){return X.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(X,re,_e){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Pe=R({},X.props),it=X.key;if(re!=null)for(he in re.key!==void 0&&(it=""+re.key),re)!j.call(re,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&re.ref===void 0||(Pe[he]=re[he]);var he=arguments.length-2;if(he===1)Pe.children=_e;else if(1<he){for(var Ae=Array(he),qe=0;qe<he;qe++)Ae[qe]=arguments[qe+2];Pe.children=Ae}return I(X.type,it,Pe)},Zt.createContext=function(X){return X={$$typeof:f,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:c,_context:X},X},Zt.createElement=function(X,re,_e){var Pe,it={},he=null;if(re!=null)for(Pe in re.key!==void 0&&(he=""+re.key),re)j.call(re,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(it[Pe]=re[Pe]);var Ae=arguments.length-2;if(Ae===1)it.children=_e;else if(1<Ae){for(var qe=Array(Ae),nt=0;nt<Ae;nt++)qe[nt]=arguments[nt+2];it.children=qe}if(X&&X.defaultProps)for(Pe in Ae=X.defaultProps,Ae)it[Pe]===void 0&&(it[Pe]=Ae[Pe]);return I(X,he,it)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(X){return{$$typeof:h,render:X}},Zt.isValidElement=q,Zt.lazy=function(X){return{$$typeof:y,_payload:{_status:-1,_result:X},_init:fe}},Zt.memo=function(X,re){return{$$typeof:g,type:X,compare:re===void 0?null:re}},Zt.startTransition=function(X){var re=H.T,_e={};H.T=_e;try{var Pe=X(),it=H.S;it!==null&&it(_e,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(z,we)}catch(he){we(he)}finally{re!==null&&_e.types!==null&&(re.types=_e.types),H.T=re}},Zt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Zt.use=function(X){return H.H.use(X)},Zt.useActionState=function(X,re,_e){return H.H.useActionState(X,re,_e)},Zt.useCallback=function(X,re){return H.H.useCallback(X,re)},Zt.useContext=function(X){return H.H.useContext(X)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(X,re){return H.H.useDeferredValue(X,re)},Zt.useEffect=function(X,re){return H.H.useEffect(X,re)},Zt.useEffectEvent=function(X){return H.H.useEffectEvent(X)},Zt.useId=function(){return H.H.useId()},Zt.useImperativeHandle=function(X,re,_e){return H.H.useImperativeHandle(X,re,_e)},Zt.useInsertionEffect=function(X,re){return H.H.useInsertionEffect(X,re)},Zt.useLayoutEffect=function(X,re){return H.H.useLayoutEffect(X,re)},Zt.useMemo=function(X,re){return H.H.useMemo(X,re)},Zt.useOptimistic=function(X,re){return H.H.useOptimistic(X,re)},Zt.useReducer=function(X,re,_e){return H.H.useReducer(X,re,_e)},Zt.useRef=function(X){return H.H.useRef(X)},Zt.useState=function(X){return H.H.useState(X)},Zt.useSyncExternalStore=function(X,re,_e){return H.H.useSyncExternalStore(X,re,_e)},Zt.useTransition=function(){return H.H.useTransition()},Zt.version="19.2.3",Zt}var WS;function bm(){return WS||(WS=1,Cy.exports=qA()),Cy.exports}var Oe=bm();const Ph=ab(Oe);var Ry={exports:{}},Np={},Ny={exports:{}},Dy={};var XS;function YA(){return XS||(XS=1,(function(r){function e(Q,J){var fe=Q.length;Q.push(J);e:for(;0<fe;){var we=fe-1>>>1,Ce=Q[we];if(0<s(Ce,J))Q[we]=J,Q[fe]=Ce,fe=we;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var J=Q[0],fe=Q.pop();if(fe!==J){Q[0]=fe;e:for(var we=0,Ce=Q.length,X=Ce>>>1;we<X;){var re=2*(we+1)-1,_e=Q[re],Pe=re+1,it=Q[Pe];if(0>s(_e,fe))Pe<Ce&&0>s(it,_e)?(Q[we]=it,Q[Pe]=fe,we=Pe):(Q[we]=_e,Q[re]=fe,we=re);else if(Pe<Ce&&0>s(it,fe))Q[we]=it,Q[Pe]=fe,we=Pe;else break e}}return J}function s(Q,J){var fe=Q.sortIndex-J.sortIndex;return fe!==0?fe:Q.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();r.unstable_now=function(){return f.now()-h}}var m=[],g=[],y=1,_=null,b=3,M=!1,A=!1,R=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function U(Q){for(var J=t(g);J!==null;){if(J.callback===null)i(g);else if(J.startTime<=Q)i(g),J.sortIndex=J.expirationTime,e(m,J);else break;J=t(g)}}function B(Q){if(R=!1,U(Q),!A)if(t(m)!==null)A=!0,z||(z=!0,se());else{var J=t(g);J!==null&&oe(B,J.startTime-Q)}}var z=!1,H=-1,j=5,I=-1;function P(){return w?!0:!(r.unstable_now()-I<j)}function q(){if(w=!1,z){var Q=r.unstable_now();I=Q;var J=!0;try{e:{A=!1,R&&(R=!1,N(H),H=-1),M=!0;var fe=b;try{t:{for(U(Q),_=t(m);_!==null&&!(_.expirationTime>Q&&P());){var we=_.callback;if(typeof we=="function"){_.callback=null,b=_.priorityLevel;var Ce=we(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof Ce=="function"){_.callback=Ce,U(Q),J=!0;break t}_===t(m)&&i(m),U(Q)}else i(m);_=t(m)}if(_!==null)J=!0;else{var X=t(g);X!==null&&oe(B,X.startTime-Q),J=!1}}break e}finally{_=null,b=fe,M=!1}J=void 0}}finally{J?se():z=!1}}}var se;if(typeof L=="function")se=function(){L(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,de=ee.port2;ee.port1.onmessage=q,se=function(){de.postMessage(null)}}else se=function(){E(q,0)};function oe(Q,J){H=E(function(){Q(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var fe=b;b=J;try{return Q()}finally{b=fe}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(Q,J){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var fe=b;b=Q;try{return J()}finally{b=fe}},r.unstable_scheduleCallback=function(Q,J,fe){var we=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?we+fe:we):fe=we,Q){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=fe+Ce,Q={id:y++,callback:J,priorityLevel:Q,startTime:fe,expirationTime:Ce,sortIndex:-1},fe>we?(Q.sortIndex=fe,e(g,Q),t(m)===null&&Q===t(g)&&(R?(N(H),H=-1):R=!0,oe(B,fe-we))):(Q.sortIndex=Ce,e(m,Q),A||M||(A=!0,z||(z=!0,se()))),Q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Q){var J=b;return function(){var fe=b;b=J;try{return Q.apply(this,arguments)}finally{b=fe}}}})(Dy)),Dy}var jS;function QM(){return jS||(jS=1,Ny.exports=YA()),Ny.exports}var Ly={exports:{}},Rs={};var qS;function ZA(){if(qS)return Rs;qS=1;var r=bm();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(m,g,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:m,containerInfo:g,implementation:y}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Rs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rs.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(m,g,null,y)},Rs.flushSync=function(m){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,m)return m()}finally{f.T=g,i.p=y,i.d.f()}},Rs.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Rs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Rs.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:M}):y==="script"&&i.d.X(m,{crossOrigin:_,integrity:b,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Rs.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Rs.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin);i.d.L(m,y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Rs.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Rs.requestFormReset=function(m){i.d.r(m)},Rs.unstable_batchedUpdates=function(m,g){return m(g)},Rs.useFormState=function(m,g,y){return f.H.useFormState(m,g,y)},Rs.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rs.version="19.2.3",Rs}var YS;function QA(){if(YS)return Ly.exports;YS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ly.exports=ZA(),Ly.exports}var ZS;function JA(){if(ZS)return Np;ZS=1;var r=QM(),e=bm(),t=QA();function i(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,u=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(u=a.return),n=a.return;while(n)}return a.tag===3?u:null}function f(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(i(188));return a!==n?null:n}for(var u=n,d=a;;){var x=u.return;if(x===null)break;var S=x.alternate;if(S===null){if(d=x.return,d!==null){u=d;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===u)return m(x),n;if(S===d)return m(x),a;S=S.sibling}throw Error(i(188))}if(u.return!==d.return)u=x,d=S;else{for(var D=!1,V=x.child;V;){if(V===u){D=!0,u=x,d=S;break}if(V===d){D=!0,d=x,u=S;break}V=V.sibling}if(!D){for(V=S.child;V;){if(V===u){D=!0,u=S,d=x;break}if(V===d){D=!0,d=S,u=x;break}V=V.sibling}if(!D)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?n:a}function y(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=y(n),a!==null)return a;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var ee=Symbol.for("react.client.reference");function de(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ee?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case L:return n.displayName||"Context";case N:return(n._context.displayName||"Context")+".Consumer";case U:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return a=n.displayName||null,a!==null?a:de(n.type)||"Memo";case j:a=n._payload,n=n._init;try{return de(n(a))}catch{}}return null}var oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},we=[],Ce=-1;function X(n){return{current:n}}function re(n){0>Ce||(n.current=we[Ce],we[Ce]=null,Ce--)}function _e(n,a){Ce++,we[Ce]=n.current,n.current=a}var Pe=X(null),it=X(null),he=X(null),Ae=X(null);function qe(n,a){switch(_e(he,a),_e(it,n),_e(Pe,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?uS(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=uS(a),n=fS(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(Pe),_e(Pe,n)}function nt(){re(Pe),re(it),re(he)}function $e(n){n.memoizedState!==null&&_e(Ae,n);var a=Pe.current,u=fS(a,n.type);a!==u&&(_e(it,n),_e(Pe,u))}function xt(n){it.current===n&&(re(Pe),re(it)),Ae.current===n&&(re(Ae),Tp._currentValue=fe)}var Wt,Tt;function Ne(n){if(Wt===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Wt=a&&a[1]||"",Tt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+n+Tt}var Be=!1;function Le(n,a){if(!n||Be)return"";Be=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Te){var xe=Te}Reflect.construct(n,[],ze)}else{try{ze.call()}catch(Te){xe=Te}n.call(ze.prototype)}}else{try{throw Error()}catch(Te){xe=Te}(ze=n())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Te){if(Te&&xe&&typeof Te.stack=="string")return[Te.stack,xe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=d.DetermineComponentFrameRoot(),D=S[0],V=S[1];if(D&&V){var K=D.split(`
`),me=V.split(`
`);for(x=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;x<me.length&&!me[x].includes("DetermineComponentFrameRoot");)x++;if(d===K.length||x===me.length)for(d=K.length-1,x=me.length-1;1<=d&&0<=x&&K[d]!==me[x];)x--;for(;1<=d&&0<=x;d--,x--)if(K[d]!==me[x]){if(d!==1||x!==1)do if(d--,x--,0>x||K[d]!==me[x]){var Re=`
`+K[d].replace(" at new "," at ");return n.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",n.displayName)),Re}while(1<=d&&0<=x);break}}}finally{Be=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?Ne(u):""}function Ye(n,a){switch(n.tag){case 26:case 27:case 5:return Ne(n.type);case 16:return Ne("Lazy");case 13:return n.child!==a&&a!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Le(n.type,!1);case 11:return Le(n.type.render,!1);case 1:return Le(n.type,!0);case 31:return Ne("Activity");default:return""}}function Z(n){try{var a="",u=null;do a+=Ye(n,u),u=n,n=n.return;while(n);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var St=Object.prototype.hasOwnProperty,st=r.unstable_scheduleCallback,At=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,G=r.unstable_requestPaint,O=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,Se=r.unstable_ImmediatePriority,De=r.unstable_UserBlockingPriority,Ee=r.unstable_NormalPriority,ht=r.unstable_LowPriority,Ke=r.unstable_IdlePriority,yt=r.log,Dt=r.unstable_setDisableYieldValue,Ve=null,Ze=null;function dt(n){if(typeof yt=="function"&&Dt(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Ve,n)}catch{}}var ft=Math.clz32?Math.clz32:ie,at=Math.log,Jt=Math.LN2;function ie(n){return n>>>=0,n===0?32:31-(at(n)/Jt|0)|0}var rt=256,je=262144,lt=4194304;function He(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ie(n,a,u){var d=n.pendingLanes;if(d===0)return 0;var x=0,S=n.suspendedLanes,D=n.pingedLanes;n=n.warmLanes;var V=d&134217727;return V!==0?(d=V&~S,d!==0?x=He(d):(D&=V,D!==0?x=He(D):u||(u=V&~n,u!==0&&(x=He(u))))):(V=d&~S,V!==0?x=He(V):D!==0?x=He(D):u||(u=d&~n,u!==0&&(x=He(u)))),x===0?0:a!==0&&a!==x&&(a&S)===0&&(S=x&-x,u=a&-a,S>=u||S===32&&(u&4194048)!==0)?a:x}function et(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function kt(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pn(){var n=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),n}function vn(n){for(var a=[],u=0;31>u;u++)a.push(n);return a}function ji(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xs(n,a,u,d,x,S){var D=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var V=n.entanglements,K=n.expirationTimes,me=n.hiddenUpdates;for(u=D&~u;0<u;){var Re=31-ft(u),ze=1<<Re;V[Re]=0,K[Re]=-1;var xe=me[Re];if(xe!==null)for(me[Re]=null,Re=0;Re<xe.length;Re++){var Te=xe[Re];Te!==null&&(Te.lane&=-536870913)}u&=~ze}d!==0&&Jr(n,d,0),S!==0&&x===0&&n.tag!==0&&(n.suspendedLanes|=S&~(D&~a))}function Jr(n,a,u){n.pendingLanes|=a,n.suspendedLanes&=~a;var d=31-ft(a);n.entangledLanes|=a,n.entanglements[d]=n.entanglements[d]|1073741824|u&261930}function Kr(n,a){var u=n.entangledLanes|=a;for(n=n.entanglements;u;){var d=31-ft(u),x=1<<d;x&a|n[d]&a&&(n[d]|=a),u&=~x}}function Vo(n,a){var u=a&-a;return u=(u&42)!==0?1:$r(u),(u&(n.suspendedLanes|a))!==0?0:u}function $r(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ho(){var n=J.p;return n!==0?n:(n=window.event,n===void 0?32:IS(n.type))}function es(n,a){var u=J.p;try{return J.p=n,a()}finally{J.p=u}}var Bs=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Bs,Ai="__reactProps$"+Bs,Fs="__reactContainer$"+Bs,ks="__reactEvents$"+Bs,Vs="__reactListeners$"+Bs,eo="__reactHandles$"+Bs,Go="__reactResources$"+Bs,Da="__reactMarker$"+Bs;function _r(n){delete n[Kn],delete n[Ai],delete n[ks],delete n[Vs],delete n[eo]}function br(n){var a=n[Kn];if(a)return a;for(var u=n.parentNode;u;){if(a=u[Fs]||u[Kn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(n=xS(n);n!==null;){if(u=n[Kn])return u;n=xS(n)}return a}n=u,u=n.parentNode}return null}function Sr(n){if(n=n[Kn]||n[Fs]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function to(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(i(33))}function Ga(n){var a=n[Go];return a||(a=n[Go]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function k(n){n[Da]=!0}var ae=new Set,ye={};function ge(n,a){ce(n,a),ce(n+"Capture",a)}function ce(n,a){for(ye[n]=a,n=0;n<a.length;n++)ae.add(a[n])}var Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pt={},We={};function vt(n){return St.call(We,n)?!0:St.call(pt,n)?!1:Qe.test(n)?We[n]=!0:(pt[n]=!0,!1)}function _t(n,a,u){if(vt(a))if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+u)}}function Nt(n,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+u)}}function Mt(n,a,u,d){if(d===null)n.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(a,u,""+d)}}function Ot(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sn(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zn(n,a,u){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return x.call(this)},set:function(D){u=""+D,S.call(this,D)}}),Object.defineProperty(n,a,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(D){u=""+D},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Un(n){if(!n._valueTracker){var a=Sn(n)?"checked":"value";n._valueTracker=zn(n,a,""+n[a])}}function Xt(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return n&&(d=Sn(n)?n.checked?"true":"false":n.value),n=d,n!==u?(a.setValue(n),!0):!1}function ot(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xn=/[\n"\\]/g;function zt(n){return n.replace(xn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function xi(n,a,u,d,x,S,D,V){n.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.type=D:n.removeAttribute("type"),a!=null?D==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Ot(a)):n.value!==""+Ot(a)&&(n.value=""+Ot(a)):D!=="submit"&&D!=="reset"||n.removeAttribute("value"),a!=null?Wn(n,D,Ot(a)):u!=null?Wn(n,D,Ot(u)):d!=null&&n.removeAttribute("value"),x==null&&S!=null&&(n.defaultChecked=!!S),x!=null&&(n.checked=x&&typeof x!="function"&&typeof x!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?n.name=""+Ot(V):n.removeAttribute("name")}function La(n,a,u,d,x,S,D,V){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.type=S),a!=null||u!=null){if(!(S!=="submit"&&S!=="reset"||a!=null)){Un(n);return}u=u!=null?""+Ot(u):"",a=a!=null?""+Ot(a):u,V||a===n.value||(n.value=a),n.defaultValue=a}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=V?n.checked:!!d,n.defaultChecked=!!d,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(n.name=D),Un(n)}function Wn(n,a,u){a==="number"&&ot(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function rs(n,a,u,d){if(n=n.options,a){a={};for(var x=0;x<u.length;x++)a["$"+u[x]]=!0;for(u=0;u<n.length;u++)x=a.hasOwnProperty("$"+n[u].value),n[u].selected!==x&&(n[u].selected=x),x&&d&&(n[u].defaultSelected=!0)}else{for(u=""+Ot(u),a=null,x=0;x<n.length;x++){if(n[x].value===u){n[x].selected=!0,d&&(n[x].defaultSelected=!0);return}a!==null||n[x].disabled||(a=n[x])}a!==null&&(a.selected=!0)}}function Tn(n,a,u){if(a!=null&&(a=""+Ot(a),a!==n.value&&(n.value=a),u==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=u!=null?""+Ot(u):""}function wi(n,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(oe(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=Ot(a),n.defaultValue=u,d=n.textContent,d===u&&d!==""&&d!==null&&(n.value=d),Un(n)}function yi(n,a){if(a){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=a;return}}n.textContent=a}var Oi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pi(n,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":d?n.setProperty(a,u):typeof u!="number"||u===0||Oi.has(a)?a==="float"?n.cssFloat=u:n[a]=(""+u).trim():n[a]=u+"px"}function Wo(n,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(n=n.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var x in a)d=a[x],a.hasOwnProperty(x)&&u[x]!==d&&Pi(n,x,d)}else for(var S in a)a.hasOwnProperty(S)&&Pi(n,S,a[S])}function sa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ad=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gc(n){return ad.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Mr(){}var rf=null;function of(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xo=null,no=null;function rd(n){var a=Sr(n);if(a&&(n=a.stateNode)){var u=n[Ai]||null;e:switch(n=a.stateNode,a.type){case"input":if(xi(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+zt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==n&&d.form===n.form){var x=d[Ai]||null;if(!x)throw Error(i(90));xi(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===n.form&&Xt(d)}break e;case"textarea":Tn(n,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&rs(n,!!u.multiple,a,!1)}}}var lf=!1;function od(n,a,u){if(lf)return n(a,u);lf=!0;try{var d=n(a);return d}finally{if(lf=!1,(Xo!==null||no!==null)&&(za(),Xo&&(a=Xo,n=no,no=Xo=null,rd(a),n)))for(a=0;a<n.length;a++)rd(n[a])}}function Dl(n,a){var u=n.stateNode;if(u===null)return null;var d=u[Ai]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=!1;if(Wa)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){ld=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{ld=!1}var Hs=null,cf=null,jo=null;function Wc(){if(jo)return jo;var n,a=cf,u=a.length,d,x="value"in Hs?Hs.value:Hs.textContent,S=x.length;for(n=0;n<u&&a[n]===x[n];n++);var D=u-n;for(d=1;d<=D&&a[u-d]===x[S-d];d++);return jo=x.slice(n,1<d?1-d:void 0)}function Xc(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ul(){return!0}function Im(){return!1}function os(n){function a(u,d,x,S,D){this._reactName=u,this._targetInst=x,this.type=d,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var V in n)n.hasOwnProperty(V)&&(u=n[V],this[V]=u?u(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ul:Im,this.isPropagationStopped=Im,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),a}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jc=os(io),Il=_({},io,{view:0,detail:0}),Om=os(Il),qc,uf,Ol,Pl=_({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ol&&(Ol&&n.type==="mousemove"?(qc=n.screenX-Ol.screenX,uf=n.screenY-Ol.screenY):uf=qc=0,Ol=n),qc)},movementY:function(n){return"movementY"in n?n.movementY:uf}}),cd=os(Pl),Pm=_({},Pl,{dataTransfer:0}),zm=os(Pm),ud=_({},Il,{relatedTarget:0}),ff=os(ud),Bm=_({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),qx=os(Bm),Yx=_({},io,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fm=os(Yx),Yc=_({},io,{data:0}),hf=os(Yc),df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Vm[n])?!!a[n]:!1}function pf(){return fd}var Hm=_({},Il,{key:function(n){if(n.key){var a=df[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Xc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?km[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pf,charCode:function(n){return n.type==="keypress"?Xc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qo=os(Hm),mf=_({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=os(mf),dd=_({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pf}),Gm=os(dd),Wm=_({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zx=os(Wm),qi=_({},Pl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xm=os(qi),jm=_({},io,{newState:0,oldState:0}),qm=os(jm),Ym=[9,13,27,32],Yo=Wa&&"CompositionEvent"in window,zl=null;Wa&&"documentMode"in document&&(zl=document.documentMode);var gf=Wa&&"TextEvent"in window&&!zl,pd=Wa&&(!Yo||zl&&8<zl&&11>=zl),Zm=" ",Zc=!1;function vf(n,a){switch(n){case"keyup":return Ym.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function md(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zo=!1;function Qm(n,a){switch(n){case"compositionend":return md(a);case"keypress":return a.which!==32?null:(Zc=!0,Zm);case"textInput":return n=a.data,n===Zm&&Zc?null:n;default:return null}}function gd(n,a){if(Zo)return n==="compositionend"||!Yo&&vf(n,a)?(n=Wc(),jo=cf=Hs=null,Zo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return pd&&a.locale!=="ko"?null:a.data;default:return null}}var vd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!vd[n.type]:a==="textarea"}function xf(n,a,u,d){Xo?no?no.push(d):no=[d]:Xo=d,a=t0(a,"onChange"),0<a.length&&(u=new jc("onChange","change",null,u,d),n.push({event:u,listeners:a}))}var so=null,Qo=null;function Jm(n){sS(n,0)}function Bl(n){var a=to(n);if(Xt(a))return n}function yd(n,a){if(n==="change")return a}var Xa=!1;if(Wa){var Qc;if(Wa){var _d="oninput"in document;if(!_d){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),_d=typeof bd.oninput=="function"}Qc=_d}else Qc=!1;Xa=Qc&&(!document.documentMode||9<document.documentMode)}function aa(){so&&(so.detachEvent("onpropertychange",Jc),Qo=so=null)}function Jc(n){if(n.propertyName==="value"&&Bl(Qo)){var a=[];xf(a,Qo,n,of(n)),od(Jm,a)}}function Km(n,a,u){n==="focusin"?(aa(),so=a,Qo=u,so.attachEvent("onpropertychange",Jc)):n==="focusout"&&aa()}function Sd(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bl(Qo)}function $m(n,a){if(n==="click")return Bl(a)}function eg(n,a){if(n==="input"||n==="change")return Bl(a)}function Md(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var ls=typeof Object.is=="function"?Object.is:Md;function Fl(n,a){if(ls(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var u=Object.keys(n),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var x=u[d];if(!St.call(a,x)||!ls(n[x],a[x]))return!1}return!0}function Kc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kl(n,a){var u=Kc(n);n=0;for(var d;u;){if(u.nodeType===3){if(d=n+u.textContent.length,n<=a&&d>=a)return{node:u,offset:a-n};n=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Kc(u)}}function Bn(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Bn(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function tg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=ot(n.document);a instanceof n.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)n=a.contentWindow;else break;a=ot(n.document)}return a}function Ed(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var ng=Wa&&"documentMode"in document&&11>=document.documentMode,ja=null,qa=null,Vl=null,yf=!1;function Hl(n,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;yf||ja==null||ja!==ot(d)||(d=ja,"selectionStart"in d&&Ed(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Vl&&Fl(Vl,d)||(Vl=d,d=t0(qa,"onSelect"),0<d.length&&(a=new jc("onSelect","select",null,a,u),n.push({event:a,listeners:d}),a.target=ja)))}function ts(n,a){var u={};return u[n.toLowerCase()]=a.toLowerCase(),u["Webkit"+n]="webkit"+a,u["Moz"+n]="moz"+a,u}var Jo={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},$c={},Td={};Wa&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Er(n){if($c[n])return $c[n];if(!Jo[n])return n;var a=Jo[n],u;for(u in a)if(a.hasOwnProperty(u)&&u in Td)return $c[n]=a[u];return n}var _f=Er("animationend"),eu=Er("animationiteration"),Ad=Er("animationstart"),ig=Er("transitionrun"),Qx=Er("transitionstart"),sg=Er("transitioncancel"),wd=Er("transitionend"),ra=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function oa(n,a){ra.set(n,a),ge(a,[n])}var nu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},la=[],Tr=0,zi=0;function iu(){for(var n=Tr,a=zi=Tr=0;a<n;){var u=la[a];la[a++]=null;var d=la[a];la[a++]=null;var x=la[a];la[a++]=null;var S=la[a];if(la[a++]=null,d!==null&&x!==null){var D=d.pending;D===null?x.next=x:(x.next=D.next,D.next=x),d.pending=x}S!==0&&ao(u,x,S)}}function Bi(n,a,u,d){la[Tr++]=n,la[Tr++]=a,la[Tr++]=u,la[Tr++]=d,zi|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function bf(n,a,u,d){return Bi(n,a,u,d),ca(n)}function cs(n,a){return Bi(n,null,null,a),ca(n)}function ao(n,a,u){n.lanes|=u;var d=n.alternate;d!==null&&(d.lanes|=u);for(var x=!1,S=n.return;S!==null;)S.childLanes|=u,d=S.alternate,d!==null&&(d.childLanes|=u),S.tag===22&&(n=S.stateNode,n===null||n._visibility&1||(x=!0)),n=S,S=S.return;return n.tag===3?(S=n.stateNode,x&&a!==null&&(x=31-ft(u),n=S.hiddenUpdates,d=n[x],d===null?n[x]=[a]:d.push(a),a.lane=u|536870912),S):null}function ca(n){if(50<To)throw To=0,gl=null,Error(i(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var ro={};function Cd(n,a,u,d){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(n,a,u,d){return new Cd(n,a,u,d)}function Sf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ys(n,a){var u=n.alternate;return u===null?(u=$n(n.tag,a,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=a,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&65011712,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,a=n.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Gl(n,a){n.flags&=65011714;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,a=u.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Ya(n,a,u,d,x,S){var D=0;if(d=n,typeof n=="function")Sf(n)&&(D=1);else if(typeof n=="string")D=UA(n,u,Pe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=$n(31,u,a,x),n.elementType=I,n.lanes=S,n;case R:return oo(u.children,x,S,a);case w:D=8,x|=24;break;case E:return n=$n(12,u,a,x|2),n.elementType=E,n.lanes=S,n;case B:return n=$n(13,u,a,x),n.elementType=B,n.lanes=S,n;case z:return n=$n(19,u,a,x),n.elementType=z,n.lanes=S,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case L:D=10;break e;case N:D=9;break e;case U:D=11;break e;case H:D=14;break e;case j:D=16,d=null;break e}D=29,u=Error(i(130,n===null?"null":typeof n,"")),d=null}return a=$n(D,u,a,x),a.elementType=n,a.type=d,a.lanes=S,a}function oo(n,a,u,d){return n=$n(7,n,d,a),n.lanes=u,n}function Mf(n,a,u){return n=$n(6,n,null,a),n.lanes=u,n}function Wl(n){var a=$n(18,null,null,0);return a.stateNode=n,a}function Ef(n,a,u){return a=$n(4,n.children!==null?n.children:[],n.key,a),a.lanes=u,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var su=new WeakMap;function Gs(n,a){if(typeof n=="object"&&n!==null){var u=su.get(n);return u!==void 0?u:(a={value:n,source:a,stack:Z(a)},su.set(n,a),a)}return{value:n,source:a,stack:Z(a)}}var lo=[],co=0,Xl=null,jl=0,_s=[],Yn=0,Ar=null,ei=1,Ua="";function Za(n,a){lo[co++]=jl,lo[co++]=Xl,Xl=n,jl=a}function ag(n,a,u){_s[Yn++]=ei,_s[Yn++]=Ua,_s[Yn++]=Ar,Ar=n;var d=ei;n=Ua;var x=32-ft(d)-1;d&=~(1<<x),u+=1;var S=32-ft(a)+x;if(30<S){var D=x-x%5;S=(d&(1<<D)-1).toString(32),d>>=D,x-=D,ei=1<<32-ft(a)+x|u<<x|d,Ua=S+n}else ei=1<<S|u<<x|d,Ua=n}function Qa(n){n.return!==null&&(Za(n,1),ag(n,1,0))}function Tf(n){for(;n===Xl;)Xl=lo[--co],lo[co]=null,jl=lo[--co],lo[co]=null;for(;n===Ar;)Ar=_s[--Yn],_s[Yn]=null,Ua=_s[--Yn],_s[Yn]=null,ei=_s[--Yn],_s[Yn]=null}function Af(n,a){_s[Yn++]=ei,_s[Yn++]=Ua,_s[Yn++]=Ar,ei=a.id,Ua=a.overflow,Ar=n}var ri=null,Fn=null,hn=!1,wr=null,Ws=!1,ql=Error(i(519));function Ja(n){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ka(Gs(a,n)),ql}function rg(n){var a=n.stateNode,u=n.type,d=n.memoizedProps;switch(a[Kn]=n,a[Ai]=d,u){case"dialog":gn("cancel",a),gn("close",a);break;case"iframe":case"object":case"embed":gn("load",a);break;case"video":case"audio":for(u=0;u<Sa.length;u++)gn(Sa[u],a);break;case"source":gn("error",a);break;case"img":case"image":case"link":gn("error",a),gn("load",a);break;case"details":gn("toggle",a);break;case"input":gn("invalid",a),La(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":gn("invalid",a);break;case"textarea":gn("invalid",a),wi(a,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||lS(a.textContent,u)?(d.popover!=null&&(gn("beforetoggle",a),gn("toggle",a)),d.onScroll!=null&&gn("scroll",a),d.onScrollEnd!=null&&gn("scrollend",a),d.onClick!=null&&(a.onclick=Mr),a=!0):a=!1,a||Ja(n,!0)}function og(n){for(ri=n.return;ri;)switch(ri.tag){case 5:case 31:case 13:Ws=!1;return;case 27:case 3:Ws=!0;return;default:ri=ri.return}}function Yl(n){if(n!==ri)return!1;if(!hn)return og(n),hn=!0,!1;var a=n.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||hy(n.type,n.memoizedProps)),u=!u),u&&Fn&&Ja(n),og(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Fn=vS(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Fn=vS(n)}else a===27?(a=Fn,pc(n.type)?(n=vy,vy=null,Fn=n):Fn=a):Fn=ri?hr(n.stateNode.nextSibling):null;return!0}function uo(){Fn=ri=null,hn=!1}function wf(){var n=wr;return n!==null&&(li===null?li=n:li.push.apply(li,n),wr=null),n}function Ka(n){wr===null?wr=[n]:wr.push(n)}var Zl=X(null),fo=null,$a=null;function Cr(n,a,u){_e(Zl,a._currentValue),a._currentValue=u}function er(n){n._currentValue=Zl.current,re(Zl)}function Cf(n,a,u){for(;n!==null;){var d=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),n===u)break;n=n.return}}function Rf(n,a,u,d){var x=n.child;for(x!==null&&(x.return=n);x!==null;){var S=x.dependencies;if(S!==null){var D=x.child;S=S.firstContext;e:for(;S!==null;){var V=S;S=x;for(var K=0;K<a.length;K++)if(V.context===a[K]){S.lanes|=u,V=S.alternate,V!==null&&(V.lanes|=u),Cf(S.return,u,n),d||(D=null);break e}S=V.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(i(341));D.lanes|=u,S=D.alternate,S!==null&&(S.lanes|=u),Cf(D,u,n),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===n){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function tr(n,a,u,d){n=null;for(var x=a,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var V=x.type;ls(x.pendingProps.value,D.value)||(n!==null?n.push(V):n=[V])}}else if(x===Ae.current){if(D=x.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(n!==null?n.push(Tp):n=[Tp])}x=x.return}n!==null&&Rf(a,n,u,d),a.flags|=262144}function au(n){for(n=n.firstContext;n!==null;){if(!ls(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ho(n){fo=n,$a=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ft(n){return lg(fo,n)}function Ql(n,a){return fo===null&&ho(n),lg(n,a)}function lg(n,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},$a===null){if(n===null)throw Error(i(308));$a=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else $a=$a.next=a;return u}var cg=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(u,d){n.push(d)}};this.abort=function(){a.aborted=!0,n.forEach(function(u){return u()})}},Jx=r.unstable_scheduleCallback,Kx=r.unstable_NormalPriority,_i={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rd(){return{controller:new cg,data:new Map,refCount:0}}function Ko(n){n.refCount--,n.refCount===0&&Jx(Kx,function(){n.controller.abort()})}var Xs=null,Nf=0,Rr=0,ua=null;function Nd(n,a){if(Xs===null){var u=Xs=[];Nf=0,Rr=be(),ua={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Nf++,a.then(Dd,Dd),a}function Dd(){if(--Nf===0&&Xs!==null){ua!==null&&(ua.status="fulfilled");var n=Xs;Xs=null,Rr=0,ua=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function Ld(n,a){var u=[],d={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return n.then(function(){d.status="fulfilled",d.value=a;for(var x=0;x<u.length;x++)(0,u[x])(a)},function(x){for(d.status="rejected",d.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),d}var ug=Q.S;Q.S=function(n,a){yp=O(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Nd(n,a),ug!==null&&ug(n,a)};var po=X(null);function Df(){var n=po.current;return n!==null?n:Ht.pooledCache}function ru(n,a){a===null?_e(po,po.current):_e(po,a.pool)}function Ud(){var n=Df();return n===null?null:{parent:_i._currentValue,pool:n}}var $o=Error(i(460)),ou=Error(i(474)),en=Error(i(542)),Lf={then:function(){}};function bs(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Uf(n,a,u){switch(u=n[u],u===void 0?n.push(a):u!==a&&(a.then(Mr,Mr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,nl(n),n;default:if(typeof a.status=="string")a.then(Mr,Mr);else{if(n=Ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=a,n.status="pending",n.then(function(d){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=d}},function(d){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,nl(n),n}throw nr=a,$o}}function el(n){try{var a=n._init;return a(n._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(nr=u,$o):u}}var nr=null;function tl(){if(nr===null)throw Error(i(459));var n=nr;return nr=null,n}function nl(n){if(n===$o||n===en)throw Error(i(483))}var il=null,sl=0;function lu(n){var a=sl;return sl+=1,il===null&&(il=[]),Uf(il,n,a)}function fa(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Jl(n,a){throw a.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(a),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function If(n){function a(le,te){if(n){var pe=le.deletions;pe===null?(le.deletions=[te],le.flags|=16):pe.push(te)}}function u(le,te){if(!n)return null;for(;te!==null;)a(le,te),te=te.sibling;return null}function d(le){for(var te=new Map;le!==null;)le.key!==null?te.set(le.key,le):te.set(le.index,le),le=le.sibling;return te}function x(le,te){return le=ys(le,te),le.index=0,le.sibling=null,le}function S(le,te,pe){return le.index=pe,n?(pe=le.alternate,pe!==null?(pe=pe.index,pe<te?(le.flags|=67108866,te):pe):(le.flags|=67108866,te)):(le.flags|=1048576,te)}function D(le){return n&&le.alternate===null&&(le.flags|=67108866),le}function V(le,te,pe,Ue){return te===null||te.tag!==6?(te=Mf(pe,le.mode,Ue),te.return=le,te):(te=x(te,pe),te.return=le,te)}function K(le,te,pe,Ue){var Ut=pe.type;return Ut===R?Re(le,te,pe.props.children,Ue,pe.key):te!==null&&(te.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===j&&el(Ut)===te.type)?(te=x(te,pe.props),fa(te,pe),te.return=le,te):(te=Ya(pe.type,pe.key,pe.props,null,le.mode,Ue),fa(te,pe),te.return=le,te)}function me(le,te,pe,Ue){return te===null||te.tag!==4||te.stateNode.containerInfo!==pe.containerInfo||te.stateNode.implementation!==pe.implementation?(te=Ef(pe,le.mode,Ue),te.return=le,te):(te=x(te,pe.children||[]),te.return=le,te)}function Re(le,te,pe,Ue,Ut){return te===null||te.tag!==7?(te=oo(pe,le.mode,Ue,Ut),te.return=le,te):(te=x(te,pe),te.return=le,te)}function ze(le,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Mf(""+te,le.mode,pe),te.return=le,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case M:return pe=Ya(te.type,te.key,te.props,null,le.mode,pe),fa(pe,te),pe.return=le,pe;case A:return te=Ef(te,le.mode,pe),te.return=le,te;case j:return te=el(te),ze(le,te,pe)}if(oe(te)||se(te))return te=oo(te,le.mode,pe,null),te.return=le,te;if(typeof te.then=="function")return ze(le,lu(te),pe);if(te.$$typeof===L)return ze(le,Ql(le,te),pe);Jl(le,te)}return null}function xe(le,te,pe,Ue){var Ut=te!==null?te.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Ut!==null?null:V(le,te,""+pe,Ue);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case M:return pe.key===Ut?K(le,te,pe,Ue):null;case A:return pe.key===Ut?me(le,te,pe,Ue):null;case j:return pe=el(pe),xe(le,te,pe,Ue)}if(oe(pe)||se(pe))return Ut!==null?null:Re(le,te,pe,Ue,null);if(typeof pe.then=="function")return xe(le,te,lu(pe),Ue);if(pe.$$typeof===L)return xe(le,te,Ql(le,pe),Ue);Jl(le,pe)}return null}function Te(le,te,pe,Ue,Ut){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return le=le.get(pe)||null,V(te,le,""+Ue,Ut);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case M:return le=le.get(Ue.key===null?pe:Ue.key)||null,K(te,le,Ue,Ut);case A:return le=le.get(Ue.key===null?pe:Ue.key)||null,me(te,le,Ue,Ut);case j:return Ue=el(Ue),Te(le,te,pe,Ue,Ut)}if(oe(Ue)||se(Ue))return le=le.get(pe)||null,Re(te,le,Ue,Ut,null);if(typeof Ue.then=="function")return Te(le,te,pe,lu(Ue),Ut);if(Ue.$$typeof===L)return Te(le,te,pe,Ql(te,Ue),Ut);Jl(te,Ue)}return null}function Et(le,te,pe,Ue){for(var Ut=null,Cn=null,wt=te,an=te=0,_n=null;wt!==null&&an<pe.length;an++){wt.index>an?(_n=wt,wt=null):_n=wt.sibling;var Rn=xe(le,wt,pe[an],Ue);if(Rn===null){wt===null&&(wt=_n);break}n&&wt&&Rn.alternate===null&&a(le,wt),te=S(Rn,te,an),Cn===null?Ut=Rn:Cn.sibling=Rn,Cn=Rn,wt=_n}if(an===pe.length)return u(le,wt),hn&&Za(le,an),Ut;if(wt===null){for(;an<pe.length;an++)wt=ze(le,pe[an],Ue),wt!==null&&(te=S(wt,te,an),Cn===null?Ut=wt:Cn.sibling=wt,Cn=wt);return hn&&Za(le,an),Ut}for(wt=d(wt);an<pe.length;an++)_n=Te(wt,le,an,pe[an],Ue),_n!==null&&(n&&_n.alternate!==null&&wt.delete(_n.key===null?an:_n.key),te=S(_n,te,an),Cn===null?Ut=_n:Cn.sibling=_n,Cn=_n);return n&&wt.forEach(function(yc){return a(le,yc)}),hn&&Za(le,an),Ut}function Bt(le,te,pe,Ue){if(pe==null)throw Error(i(151));for(var Ut=null,Cn=null,wt=te,an=te=0,_n=null,Rn=pe.next();wt!==null&&!Rn.done;an++,Rn=pe.next()){wt.index>an?(_n=wt,wt=null):_n=wt.sibling;var yc=xe(le,wt,Rn.value,Ue);if(yc===null){wt===null&&(wt=_n);break}n&&wt&&yc.alternate===null&&a(le,wt),te=S(yc,te,an),Cn===null?Ut=yc:Cn.sibling=yc,Cn=yc,wt=_n}if(Rn.done)return u(le,wt),hn&&Za(le,an),Ut;if(wt===null){for(;!Rn.done;an++,Rn=pe.next())Rn=ze(le,Rn.value,Ue),Rn!==null&&(te=S(Rn,te,an),Cn===null?Ut=Rn:Cn.sibling=Rn,Cn=Rn);return hn&&Za(le,an),Ut}for(wt=d(wt);!Rn.done;an++,Rn=pe.next())Rn=Te(wt,le,an,Rn.value,Ue),Rn!==null&&(n&&Rn.alternate!==null&&wt.delete(Rn.key===null?an:Rn.key),te=S(Rn,te,an),Cn===null?Ut=Rn:Cn.sibling=Rn,Cn=Rn);return n&&wt.forEach(function(WA){return a(le,WA)}),hn&&Za(le,an),Ut}function Hn(le,te,pe,Ue){if(typeof pe=="object"&&pe!==null&&pe.type===R&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case M:e:{for(var Ut=pe.key;te!==null;){if(te.key===Ut){if(Ut=pe.type,Ut===R){if(te.tag===7){u(le,te.sibling),Ue=x(te,pe.props.children),Ue.return=le,le=Ue;break e}}else if(te.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===j&&el(Ut)===te.type){u(le,te.sibling),Ue=x(te,pe.props),fa(Ue,pe),Ue.return=le,le=Ue;break e}u(le,te);break}else a(le,te);te=te.sibling}pe.type===R?(Ue=oo(pe.props.children,le.mode,Ue,pe.key),Ue.return=le,le=Ue):(Ue=Ya(pe.type,pe.key,pe.props,null,le.mode,Ue),fa(Ue,pe),Ue.return=le,le=Ue)}return D(le);case A:e:{for(Ut=pe.key;te!==null;){if(te.key===Ut)if(te.tag===4&&te.stateNode.containerInfo===pe.containerInfo&&te.stateNode.implementation===pe.implementation){u(le,te.sibling),Ue=x(te,pe.children||[]),Ue.return=le,le=Ue;break e}else{u(le,te);break}else a(le,te);te=te.sibling}Ue=Ef(pe,le.mode,Ue),Ue.return=le,le=Ue}return D(le);case j:return pe=el(pe),Hn(le,te,pe,Ue)}if(oe(pe))return Et(le,te,pe,Ue);if(se(pe)){if(Ut=se(pe),typeof Ut!="function")throw Error(i(150));return pe=Ut.call(pe),Bt(le,te,pe,Ue)}if(typeof pe.then=="function")return Hn(le,te,lu(pe),Ue);if(pe.$$typeof===L)return Hn(le,te,Ql(le,pe),Ue);Jl(le,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,te!==null&&te.tag===6?(u(le,te.sibling),Ue=x(te,pe),Ue.return=le,le=Ue):(u(le,te),Ue=Mf(pe,le.mode,Ue),Ue.return=le,le=Ue),D(le)):u(le,te)}return function(le,te,pe,Ue){try{sl=0;var Ut=Hn(le,te,pe,Ue);return il=null,Ut}catch(wt){if(wt===$o||wt===en)throw wt;var Cn=$n(29,wt,null,le.mode);return Cn.lanes=Ue,Cn.return=le,Cn}}}var Nr=If(!0),Of=If(!1),us=!1;function cu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Dr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function mo(n,a,u){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ct&2)!==0){var x=d.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),d.pending=a,a=ca(n),ao(n,null,u),a}return Bi(n,d,a,u),ca(n)}function go(n,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=n.pendingLanes,u|=d,a.lanes=u,Kr(n,u)}}function Lt(n,a){var u=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var x=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};S===null?x=S=D:S=S.next=D,u=u.next}while(u!==null);S===null?x=S=a:S=S.next=a}else x=S=a;u={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:d.shared,callbacks:d.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=a:n.next=a,u.lastBaseUpdate=a}var Od=!1;function uu(){if(Od){var n=ua;if(n!==null)throw n}}function Kl(n,a,u,d){Od=!1;var x=n.updateQueue;us=!1;var S=x.firstBaseUpdate,D=x.lastBaseUpdate,V=x.shared.pending;if(V!==null){x.shared.pending=null;var K=V,me=K.next;K.next=null,D===null?S=me:D.next=me,D=K;var Re=n.alternate;Re!==null&&(Re=Re.updateQueue,V=Re.lastBaseUpdate,V!==D&&(V===null?Re.firstBaseUpdate=me:V.next=me,Re.lastBaseUpdate=K))}if(S!==null){var ze=x.baseState;D=0,Re=me=K=null,V=S;do{var xe=V.lane&-536870913,Te=xe!==V.lane;if(Te?(Kt&xe)===xe:(d&xe)===xe){xe!==0&&xe===Rr&&(Od=!0),Re!==null&&(Re=Re.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var Et=n,Bt=V;xe=a;var Hn=u;switch(Bt.tag){case 1:if(Et=Bt.payload,typeof Et=="function"){ze=Et.call(Hn,ze,xe);break e}ze=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Bt.payload,xe=typeof Et=="function"?Et.call(Hn,ze,xe):Et,xe==null)break e;ze=_({},ze,xe);break e;case 2:us=!0}}xe=V.callback,xe!==null&&(n.flags|=64,Te&&(n.flags|=8192),Te=x.callbacks,Te===null?x.callbacks=[xe]:Te.push(xe))}else Te={lane:xe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Re===null?(me=Re=Te,K=ze):Re=Re.next=Te,D|=xe;if(V=V.next,V===null){if(V=x.shared.pending,V===null)break;Te=V,V=Te.next,Te.next=null,x.lastBaseUpdate=Te,x.shared.pending=null}}while(!0);Re===null&&(K=ze),x.baseState=K,x.firstBaseUpdate=me,x.lastBaseUpdate=Re,S===null&&(x.shared.lanes=0),cr|=D,n.lanes=D,n.memoizedState=ze}}function $l(n,a){if(typeof n!="function")throw Error(i(191,n));n.call(a)}function fg(n,a){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)$l(u[n],a)}var ec=X(null),Pf=X(0);function hg(n,a){n=Zs,_e(Pf,n),_e(ec,a),Zs=n|a.baseLanes}function Pd(){_e(Pf,Zs),_e(ec,ec.current)}function fu(){Zs=Pf.current,re(ec),re(Pf)}var Ss=X(null),fs=null;function Lr(n){var a=n.alternate;_e(dn,dn.current&1),_e(Ss,n),fs===null&&(a===null||ec.current!==null||a.memoizedState!==null)&&(fs=n)}function zd(n){_e(dn,dn.current),_e(Ss,n),fs===null&&(fs=n)}function dg(n){n.tag===22?(_e(dn,dn.current),_e(Ss,n),fs===null&&(fs=n)):Ms()}function Ms(){_e(dn,dn.current),_e(Ss,Ss.current)}function ui(n){re(Ss),fs===n&&(fs=null),re(dn)}var dn=X(0);function js(n){for(var a=n;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||my(u)||gy(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zn=0,qt=null,In=null,cn=null,ha=!1,tc=!1,al=!1,zf=0,hu=0,nc=null,Bd=0;function ti(){throw Error(i(321))}function Fd(n,a){if(a===null)return!1;for(var u=0;u<a.length&&u<n.length;u++)if(!ls(n[u],a[u]))return!1;return!0}function Bf(n,a,u,d,x,S){return Zn=S,qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=n===null||n.memoizedState===null?Xg:ap,al=!1,S=u(d,x),al=!1,tc&&(S=rl(a,u,d,x)),pg(n),S}function pg(n){Q.H=ic;var a=In!==null&&In.next!==null;if(Zn=0,cn=In=qt=null,ha=!1,hu=0,nc=null,a)throw Error(i(300));n===null||bi||(n=n.dependencies,n!==null&&au(n)&&(bi=!0))}function rl(n,a,u,d){qt=n;var x=0;do{if(tc&&(nc=null),hu=0,tc=!1,25<=x)throw Error(i(301));if(x+=1,cn=In=null,n.updateQueue!=null){var S=n.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}Q.H=da,S=a(u,d)}while(tc);return S}function ol(){var n=Q.H,a=n.useState()[0];return a=typeof a.then=="function"?du(a):a,n=n.useState()[0],(In!==null?In.memoizedState:null)!==n&&(qt.flags|=1024),a}function kd(){var n=zf!==0;return zf=0,n}function Vd(n,a,u){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~u}function Hd(n){if(ha){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ha=!1}Zn=0,cn=In=qt=null,tc=!1,hu=zf=0,nc=null}function Ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?qt.memoizedState=cn=n:cn=cn.next=n,cn}function fi(){if(In===null){var n=qt.alternate;n=n!==null?n.memoizedState:null}else n=In.next;var a=cn===null?qt.memoizedState:cn.next;if(a!==null)cn=a,In=n;else{if(n===null)throw qt.alternate===null?Error(i(467)):Error(i(310));In=n,n={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},cn===null?qt.memoizedState=cn=n:cn=cn.next=n}return cn}function Ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(n){var a=hu;return hu+=1,nc===null&&(nc=[]),n=Uf(nc,n,a),a=qt,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?Xg:ap),n}function vo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return du(n);if(n.$$typeof===L)return Ft(n)}throw Error(i(438,String(n)))}function Gd(n){var a=null,u=qt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=qt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Ff(),qt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(n),d=0;d<n;d++)u[d]=P;return a.index++,u}function Ur(n,a){return typeof a=="function"?a(n):a}function kf(n){var a=fi();return Wd(a,In,n)}function Wd(n,a,u){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var x=n.baseQueue,S=d.pending;if(S!==null){if(x!==null){var D=x.next;x.next=S.next,S.next=D}a.baseQueue=x=S,d.pending=null}if(S=n.baseState,x===null)n.memoizedState=S;else{a=x.next;var V=D=null,K=null,me=a,Re=!1;do{var ze=me.lane&-536870913;if(ze!==me.lane?(Kt&ze)===ze:(Zn&ze)===ze){var xe=me.revertLane;if(xe===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),ze===Rr&&(Re=!0);else if((Zn&xe)===xe){me=me.next,xe===Rr&&(Re=!0);continue}else ze={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},K===null?(V=K=ze,D=S):K=K.next=ze,qt.lanes|=xe,cr|=xe;ze=me.action,al&&u(S,ze),S=me.hasEagerState?me.eagerState:u(S,ze)}else xe={lane:ze,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},K===null?(V=K=xe,D=S):K=K.next=xe,qt.lanes|=ze,cr|=ze;me=me.next}while(me!==null&&me!==a);if(K===null?D=S:K.next=V,!ls(S,n.memoizedState)&&(bi=!0,Re&&(u=ua,u!==null)))throw u;n.memoizedState=S,n.baseState=D,n.baseQueue=K,d.lastRenderedState=S}return x===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Xd(n){var a=fi(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=n;var d=u.dispatch,x=u.pending,S=a.memoizedState;if(x!==null){u.pending=null;var D=x=x.next;do S=n(S,D.action),D=D.next;while(D!==x);ls(S,a.memoizedState)||(bi=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),u.lastRenderedState=S}return[S,d]}function mg(n,a,u){var d=qt,x=fi(),S=hn;if(S){if(u===void 0)throw Error(i(407));u=u()}else u=a();var D=!ls((In||x).memoizedState,u);if(D&&(x.memoizedState=u,bi=!0),x=x.queue,$d(xg.bind(null,d,x,n),[n]),x.getSnapshot!==a||D||cn!==null&&cn.memoizedState.tag&1){if(d.flags|=2048,xo(9,{destroy:void 0},vg.bind(null,d,x,u,a),null),Ht===null)throw Error(i(349));S||(Zn&127)!==0||gg(d,a,u)}return u}function gg(n,a,u){n.flags|=16384,n={getSnapshot:a,value:u},a=qt.updateQueue,a===null?(a=Ff(),qt.updateQueue=a,a.stores=[n]):(u=a.stores,u===null?a.stores=[n]:u.push(n))}function vg(n,a,u,d){a.value=u,a.getSnapshot=d,yg(a)&&_g(n)}function xg(n,a,u){return u(function(){yg(a)&&_g(n)})}function yg(n){var a=n.getSnapshot;n=n.value;try{var u=a();return!ls(n,u)}catch{return!0}}function _g(n){var a=cs(n,2);a!==null&&nn(a,n,2)}function jd(n){var a=Ci();if(typeof n=="function"){var u=n;if(n=u(),al){dt(!0);try{u()}finally{dt(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:n},a}function qd(n,a,u,d){return n.baseState=u,Wd(n,In,typeof d=="function"?d:Ur)}function $x(n,a,u,d,x){if(Wf(n))throw Error(i(485));if(n=a.action,n!==null){var S={payload:x,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){S.listeners.push(D)}};Q.T!==null?u(!0):S.isTransition=!1,d(S),u=a.pending,u===null?(S.next=a.pending=S,bg(a,S)):(S.next=u.next,a.pending=u.next=S)}}function bg(n,a){var u=a.action,d=a.payload,x=n.state;if(a.isTransition){var S=Q.T,D={};Q.T=D;try{var V=u(x,d),K=Q.S;K!==null&&K(D,V),Sg(n,a,V)}catch(me){Yd(n,a,me)}finally{S!==null&&D.types!==null&&(S.types=D.types),Q.T=S}}else try{S=u(x,d),Sg(n,a,S)}catch(me){Yd(n,a,me)}}function Sg(n,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Mg(n,a,d)},function(d){return Yd(n,a,d)}):Mg(n,a,u)}function Mg(n,a,u){a.status="fulfilled",a.value=u,Eg(a),n.state=u,a=n.pending,a!==null&&(u=a.next,u===a?n.pending=null:(u=u.next,a.next=u,bg(n,u)))}function Yd(n,a,u){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,Eg(a),a=a.next;while(a!==d)}n.action=null}function Eg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Zd(n,a){return a}function Qd(n,a){if(hn){var u=Ht.formState;if(u!==null){e:{var d=qt;if(hn){if(Fn){t:{for(var x=Fn,S=Ws;x.nodeType!==8;){if(!S){x=null;break t}if(x=hr(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Fn=hr(x.nextSibling),d=x.data==="F!";break e}}Ja(d)}d=!1}d&&(a=u[0])}}return u=Ci(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:a},u.queue=d,u=Hg.bind(null,qt,d),d.dispatch=u,d=jd(!1),S=sp.bind(null,qt,!1,d.queue),d=Ci(),x={state:a,dispatch:null,action:n,pending:null},d.queue=x,u=$x.bind(null,qt,x,S,u),x.dispatch=u,d.memoizedState=n,[a,u,!1]}function Tg(n){var a=fi();return Jd(a,In,n)}function Jd(n,a,u){if(a=Wd(n,a,Zd)[0],n=kf(Ur)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=du(a)}catch(D){throw D===$o?en:D}else d=a;a=fi();var x=a.queue,S=x.dispatch;return u!==a.memoizedState&&(qt.flags|=2048,xo(9,{destroy:void 0},Ag.bind(null,x,u),null)),[d,S,n]}function Ag(n,a){n.action=a}function Kd(n){var a=fi(),u=In;if(u!==null)return Jd(a,u,n);fi(),a=a.memoizedState,u=fi();var d=u.queue.dispatch;return u.memoizedState=n,[a,d,!1]}function xo(n,a,u,d){return n={tag:n,create:u,deps:d,inst:a,next:null},a=qt.updateQueue,a===null&&(a=Ff(),qt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=n.next=n:(d=u.next,u.next=n,n.next=d,a.lastEffect=n),n}function Vf(){return fi().memoizedState}function Hf(n,a,u,d){var x=Ci();qt.flags|=n,x.memoizedState=xo(1|a,{destroy:void 0},u,d===void 0?null:d)}function Gf(n,a,u,d){var x=fi();d=d===void 0?null:d;var S=x.memoizedState.inst;In!==null&&d!==null&&Fd(d,In.memoizedState.deps)?x.memoizedState=xo(a,S,u,d):(qt.flags|=n,x.memoizedState=xo(1|a,S,u,d))}function wg(n,a){Hf(8390656,8,n,a)}function $d(n,a){Gf(2048,8,n,a)}function Cg(n){qt.flags|=4;var a=qt.updateQueue;if(a===null)a=Ff(),qt.updateQueue=a,a.events=[n];else{var u=a.events;u===null?a.events=[n]:u.push(n)}}function Rg(n){var a=fi().memoizedState;return Cg({ref:a,nextImpl:n}),function(){if((Ct&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Ng(n,a){return Gf(4,2,n,a)}function Dg(n,a){return Gf(4,4,n,a)}function Lg(n,a){if(typeof a=="function"){n=n();var u=a(n);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Ug(n,a,u){u=u!=null?u.concat([n]):null,Gf(4,4,Lg.bind(null,a,n),u)}function ep(){}function Ig(n,a){var u=fi();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Fd(a,d[1])?d[0]:(u.memoizedState=[n,a],n)}function Og(n,a){var u=fi();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Fd(a,d[1]))return d[0];if(d=n(),al){dt(!0);try{n()}finally{dt(!1)}}return u.memoizedState=[d,a],d}function tp(n,a,u){return u===void 0||(Zn&1073741824)!==0&&(Kt&261930)===0?n.memoizedState=a:(n.memoizedState=u,n=on(),qt.lanes|=n,cr|=n,u)}function Pg(n,a,u,d){return ls(u,a)?u:ec.current!==null?(n=tp(n,u,d),ls(n,a)||(bi=!0),n):(Zn&42)===0||(Zn&1073741824)!==0&&(Kt&261930)===0?(bi=!0,n.memoizedState=u):(n=on(),qt.lanes|=n,cr|=n,a)}function zg(n,a,u,d,x){var S=J.p;J.p=S!==0&&8>S?S:8;var D=Q.T,V={};Q.T=V,sp(n,!1,a,u);try{var K=x(),me=Q.S;if(me!==null&&me(V,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Re=Ld(K,d);pu(n,a,Re,Js(n))}else pu(n,a,d,Js(n))}catch(ze){pu(n,a,{then:function(){},status:"rejected",reason:ze},Js())}finally{J.p=S,D!==null&&V.types!==null&&(D.types=V.types),Q.T=D}}function ey(){}function np(n,a,u,d){if(n.tag!==5)throw Error(i(476));var x=Bg(n).queue;zg(n,x,a,fe,u===null?ey:function(){return Fg(n),u(d)})}function Bg(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:fe},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:u},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Fg(n){var a=Bg(n);a.next===null&&(a=n.alternate.memoizedState),pu(n,a.next.queue,{},Js())}function ip(){return Ft(Tp)}function kg(){return fi().memoizedState}function Vg(){return fi().memoizedState}function ty(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var u=Js();n=Dr(u);var d=mo(a,n,u);d!==null&&(nn(d,a,u),go(d,a,u)),a={cache:Rd()},n.payload=a;return}a=a.return}}function ny(n,a,u){var d=Js();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wf(n)?Gg(a,u):(u=bf(n,a,u,d),u!==null&&(nn(u,n,d),Wg(u,a,d)))}function Hg(n,a,u){var d=Js();pu(n,a,u,d)}function pu(n,a,u,d){var x={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Wf(n))Gg(a,x);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var D=a.lastRenderedState,V=S(D,u);if(x.hasEagerState=!0,x.eagerState=V,ls(V,D))return Bi(n,a,x,0),Ht===null&&iu(),!1}catch{}if(u=bf(n,a,x,d),u!==null)return nn(u,n,d),Wg(u,a,d),!0}return!1}function sp(n,a,u,d){if(d={lane:2,revertLane:be(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Wf(n)){if(a)throw Error(i(479))}else a=bf(n,u,d,2),a!==null&&nn(a,n,2)}function Wf(n){var a=n.alternate;return n===qt||a!==null&&a===qt}function Gg(n,a){tc=ha=!0;var u=n.pending;u===null?a.next=a:(a.next=u.next,u.next=a),n.pending=a}function Wg(n,a,u){if((u&4194048)!==0){var d=a.lanes;d&=n.pendingLanes,u|=d,a.lanes=u,Kr(n,u)}}var ic={readContext:Ft,use:vo,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti,useHostTransitionStatus:ti,useFormState:ti,useActionState:ti,useOptimistic:ti,useMemoCache:ti,useCacheRefresh:ti};ic.useEffectEvent=ti;var Xg={readContext:Ft,use:vo,useCallback:function(n,a){return Ci().memoizedState=[n,a===void 0?null:a],n},useContext:Ft,useEffect:wg,useImperativeHandle:function(n,a,u){u=u!=null?u.concat([n]):null,Hf(4194308,4,Lg.bind(null,a,n),u)},useLayoutEffect:function(n,a){return Hf(4194308,4,n,a)},useInsertionEffect:function(n,a){Hf(4,2,n,a)},useMemo:function(n,a){var u=Ci();a=a===void 0?null:a;var d=n();if(al){dt(!0);try{n()}finally{dt(!1)}}return u.memoizedState=[d,a],d},useReducer:function(n,a,u){var d=Ci();if(u!==void 0){var x=u(a);if(al){dt(!0);try{u(a)}finally{dt(!1)}}}else x=a;return d.memoizedState=d.baseState=x,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:x},d.queue=n,n=n.dispatch=ny.bind(null,qt,n),[d.memoizedState,n]},useRef:function(n){var a=Ci();return n={current:n},a.memoizedState=n},useState:function(n){n=jd(n);var a=n.queue,u=Hg.bind(null,qt,a);return a.dispatch=u,[n.memoizedState,u]},useDebugValue:ep,useDeferredValue:function(n,a){var u=Ci();return tp(u,n,a)},useTransition:function(){var n=jd(!1);return n=zg.bind(null,qt,n.queue,!0,!1),Ci().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,u){var d=qt,x=Ci();if(hn){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Ht===null)throw Error(i(349));(Kt&127)!==0||gg(d,a,u)}x.memoizedState=u;var S={value:u,getSnapshot:a};return x.queue=S,wg(xg.bind(null,d,S,n),[n]),d.flags|=2048,xo(9,{destroy:void 0},vg.bind(null,d,S,u,a),null),u},useId:function(){var n=Ci(),a=Ht.identifierPrefix;if(hn){var u=Ua,d=ei;u=(d&~(1<<32-ft(d)-1)).toString(32)+u,a="_"+a+"R_"+u,u=zf++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Bd++,a="_"+a+"r_"+u.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:ip,useFormState:Qd,useActionState:Qd,useOptimistic:function(n){var a=Ci();a.memoizedState=a.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=sp.bind(null,qt,!0,u),u.dispatch=a,[n,a]},useMemoCache:Gd,useCacheRefresh:function(){return Ci().memoizedState=ty.bind(null,qt)},useEffectEvent:function(n){var a=Ci(),u={impl:n};return a.memoizedState=u,function(){if((Ct&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},ap={readContext:Ft,use:vo,useCallback:Ig,useContext:Ft,useEffect:$d,useImperativeHandle:Ug,useInsertionEffect:Ng,useLayoutEffect:Dg,useMemo:Og,useReducer:kf,useRef:Vf,useState:function(){return kf(Ur)},useDebugValue:ep,useDeferredValue:function(n,a){var u=fi();return Pg(u,In.memoizedState,n,a)},useTransition:function(){var n=kf(Ur)[0],a=fi().memoizedState;return[typeof n=="boolean"?n:du(n),a]},useSyncExternalStore:mg,useId:kg,useHostTransitionStatus:ip,useFormState:Tg,useActionState:Tg,useOptimistic:function(n,a){var u=fi();return qd(u,In,n,a)},useMemoCache:Gd,useCacheRefresh:Vg};ap.useEffectEvent=Rg;var da={readContext:Ft,use:vo,useCallback:Ig,useContext:Ft,useEffect:$d,useImperativeHandle:Ug,useInsertionEffect:Ng,useLayoutEffect:Dg,useMemo:Og,useReducer:Xd,useRef:Vf,useState:function(){return Xd(Ur)},useDebugValue:ep,useDeferredValue:function(n,a){var u=fi();return In===null?tp(u,n,a):Pg(u,In.memoizedState,n,a)},useTransition:function(){var n=Xd(Ur)[0],a=fi().memoizedState;return[typeof n=="boolean"?n:du(n),a]},useSyncExternalStore:mg,useId:kg,useHostTransitionStatus:ip,useFormState:Kd,useActionState:Kd,useOptimistic:function(n,a){var u=fi();return In!==null?qd(u,In,n,a):(u.baseState=n,[n,u.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:Vg};da.useEffectEvent=Rg;function Xf(n,a,u,d){a=n.memoizedState,u=u(d,a),u=u==null?a:_({},a,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var mu={enqueueSetState:function(n,a,u){n=n._reactInternals;var d=Js(),x=Dr(d);x.payload=a,u!=null&&(x.callback=u),a=mo(n,x,d),a!==null&&(nn(a,n,d),go(a,n,d))},enqueueReplaceState:function(n,a,u){n=n._reactInternals;var d=Js(),x=Dr(d);x.tag=1,x.payload=a,u!=null&&(x.callback=u),a=mo(n,x,d),a!==null&&(nn(a,n,d),go(a,n,d))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var u=Js(),d=Dr(u);d.tag=2,a!=null&&(d.callback=a),a=mo(n,d,u),a!==null&&(nn(a,n,u),go(a,n,u))}};function rp(n,a,u,d,x,S,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,S,D):a.prototype&&a.prototype.isPureReactComponent?!Fl(u,d)||!Fl(x,S):!0}function op(n,a,u,d){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==n&&mu.enqueueReplaceState(a,a.state,null)}function yo(n,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(n=n.defaultProps){u===a&&(u=_({},u));for(var x in n)u[x]===void 0&&(u[x]=n[x])}return u}function jg(n){nu(n)}function lp(n){console.error(n)}function cp(n){nu(n)}function jf(n,a){try{var u=n.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function qg(n,a,u){try{var d=n.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function up(n,a,u){return u=Dr(u),u.tag=3,u.payload={element:null},u.callback=function(){jf(n,a)},u}function fp(n){return n=Dr(n),n.tag=3,n}function Yg(n,a,u,d){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var S=d.value;n.payload=function(){return x(S)},n.callback=function(){qg(a,u,d)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(n.callback=function(){qg(a,u,d),typeof x!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})})}function Ri(n,a,u,d,x){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&tr(a,u,x,!0),u=Ss.current,u!==null){switch(u.tag){case 31:case 13:return fs===null?uc():u.alternate===null&&ni===0&&(ni=3),u.flags&=-257,u.flags|=65536,u.lanes=x,d===Lf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),wu(n,d,x)),!1;case 22:return u.flags|=65536,d===Lf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),wu(n,d,x)),!1}throw Error(i(435,u.tag))}return wu(n,d,x),uc(),!1}if(hn)return a=Ss.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,d!==ql&&(n=Error(i(422),{cause:d}),Ka(Gs(n,u)))):(d!==ql&&(a=Error(i(423),{cause:d}),Ka(Gs(a,u))),n=n.current.alternate,n.flags|=65536,x&=-x,n.lanes|=x,d=Gs(d,u),x=up(n.stateNode,d,x),Lt(n,x),ni!==4&&(ni=2)),!1;var S=Error(i(520),{cause:d});if(S=Gs(S,u),ml===null?ml=[S]:ml.push(S),ni!==4&&(ni=2),a===null)return!0;d=Gs(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,n=x&-x,u.lanes|=n,n=up(u.stateNode,d,n),Lt(u,n),!1;case 1:if(a=u.type,S=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(pi===null||!pi.has(S))))return u.flags|=65536,x&=-x,u.lanes|=x,x=fp(x),Yg(x,n,u,d),Lt(u,x),!1}u=u.return}while(u!==null);return!1}var qf=Error(i(461)),bi=!1;function Fi(n,a,u,d){a.child=n===null?Of(a,null,u,d):Nr(a,n.child,u,d)}function hp(n,a,u,d,x){u=u.render;var S=a.ref;if("ref"in d){var D={};for(var V in d)V!=="ref"&&(D[V]=d[V])}else D=d;return ho(a),d=Bf(n,a,u,D,S,x),V=kd(),n!==null&&!bi?(Vd(n,a,x),hi(n,a,x)):(hn&&V&&Qa(a),a.flags|=1,Fi(n,a,d,x),a.child)}function ll(n,a,u,d,x){if(n===null){var S=u.type;return typeof S=="function"&&!Sf(S)&&S.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=S,Yf(n,a,S,d,x)):(n=Ya(u.type,null,d,a,a.mode,x),n.ref=a.ref,n.return=a,a.child=n)}if(S=n.child,!eh(n,x)){var D=S.memoizedProps;if(u=u.compare,u=u!==null?u:Fl,u(D,d)&&n.ref===a.ref)return hi(n,a,x)}return a.flags|=1,n=ys(S,d),n.ref=a.ref,n.return=a,a.child=n}function Yf(n,a,u,d,x){if(n!==null){var S=n.memoizedProps;if(Fl(S,d)&&n.ref===a.ref)if(bi=!1,a.pendingProps=d=S,eh(n,x))(n.flags&131072)!==0&&(bi=!0);else return a.lanes=n.lanes,hi(n,a,x)}return sc(n,a,u,d,x)}function cl(n,a,u,d){var x=d.children,S=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(S=S!==null?S.baseLanes|u:u,n!==null){for(d=a.child=n.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~S}else d=0,a.child=null;return Es(n,a,S,u,d)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&ru(a,S!==null?S.cachePool:null),S!==null?hg(a,S):Pd(),dg(a);else return d=a.lanes=536870912,Es(n,a,S!==null?S.baseLanes|u:u,u,d)}else S!==null?(ru(a,S.cachePool),hg(a,S),Ms(),a.memoizedState=null):(n!==null&&ru(a,null),Pd(),Ms());return Fi(n,a,x,u),a.child}function ir(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Es(n,a,u,d,x){var S=Df();return S=S===null?null:{parent:_i._currentValue,pool:S},a.memoizedState={baseLanes:u,cachePool:S},n!==null&&ru(a,null),Pd(),dg(a),n!==null&&tr(n,a,d,!0),a.childLanes=x,null}function Zf(n,a){return a=$f({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function Zg(n,a,u){return Nr(a,n.child,null,u),n=Zf(a,a.pendingProps),n.flags|=2,ui(a),a.memoizedState=null,n}function Qf(n,a,u){var d=a.pendingProps,x=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(hn){if(d.mode==="hidden")return n=Zf(a,d),a.lanes=536870912,ir(null,n);if(zd(a),(n=Fn)?(n=gS(n,Ws),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ar!==null?{id:ei,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},u=Wl(n),u.return=a,a.child=u,ri=a,Fn=null)):n=null,n===null)throw Ja(a);return a.lanes=536870912,null}return Zf(a,d)}var S=n.memoizedState;if(S!==null){var D=S.dehydrated;if(zd(a),x)if(a.flags&256)a.flags&=-257,a=Zg(n,a,u);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(i(558));else if(bi||tr(n,a,u,!1),x=(u&n.childLanes)!==0,bi||x){if(d=Ht,d!==null&&(D=Vo(d,u),D!==0&&D!==S.retryLane))throw S.retryLane=D,cs(n,D),nn(d,n,D),qf;uc(),a=Zg(n,a,u)}else n=S.treeContext,Fn=hr(D.nextSibling),ri=a,hn=!0,wr=null,Ws=!1,n!==null&&Af(a,n),a=Zf(a,d),a.flags|=4096;return a}return n=ys(n.child,{mode:d.mode,children:d.children}),n.ref=a.ref,a.child=n,n.return=a,n}function ul(n,a){var u=a.ref;if(u===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(n===null||n.ref!==u)&&(a.flags|=4194816)}}function sc(n,a,u,d,x){return ho(a),u=Bf(n,a,u,d,void 0,x),d=kd(),n!==null&&!bi?(Vd(n,a,x),hi(n,a,x)):(hn&&d&&Qa(a),a.flags|=1,Fi(n,a,u,x),a.child)}function gu(n,a,u,d,x,S){return ho(a),a.updateQueue=null,u=rl(a,d,u,x),pg(n),d=kd(),n!==null&&!bi?(Vd(n,a,S),hi(n,a,S)):(hn&&d&&Qa(a),a.flags|=1,Fi(n,a,u,S),a.child)}function Jf(n,a,u,d,x){if(ho(a),a.stateNode===null){var S=ro,D=u.contextType;typeof D=="object"&&D!==null&&(S=Ft(D)),S=new u(d,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=mu,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=d,S.state=a.memoizedState,S.refs={},cu(a),D=u.contextType,S.context=typeof D=="object"&&D!==null?Ft(D):ro,S.state=a.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Xf(a,u,D,d),S.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(D=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),D!==S.state&&mu.enqueueReplaceState(S,S.state,null),Kl(a,d,S,x),uu(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(n===null){S=a.stateNode;var V=a.memoizedProps,K=yo(u,V);S.props=K;var me=S.context,Re=u.contextType;D=ro,typeof Re=="object"&&Re!==null&&(D=Ft(Re));var ze=u.getDerivedStateFromProps;Re=typeof ze=="function"||typeof S.getSnapshotBeforeUpdate=="function",V=a.pendingProps!==V,Re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V||me!==D)&&op(a,S,d,D),us=!1;var xe=a.memoizedState;S.state=xe,Kl(a,d,S,x),uu(),me=a.memoizedState,V||xe!==me||us?(typeof ze=="function"&&(Xf(a,u,ze,d),me=a.memoizedState),(K=us||rp(a,u,K,d,xe,me,D))?(Re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=me),S.props=d,S.state=me,S.context=D,d=K):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{S=a.stateNode,Id(n,a),D=a.memoizedProps,Re=yo(u,D),S.props=Re,ze=a.pendingProps,xe=S.context,me=u.contextType,K=ro,typeof me=="object"&&me!==null&&(K=Ft(me)),V=u.getDerivedStateFromProps,(me=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==ze||xe!==K)&&op(a,S,d,K),us=!1,xe=a.memoizedState,S.state=xe,Kl(a,d,S,x),uu();var Te=a.memoizedState;D!==ze||xe!==Te||us||n!==null&&n.dependencies!==null&&au(n.dependencies)?(typeof V=="function"&&(Xf(a,u,V,d),Te=a.memoizedState),(Re=us||rp(a,u,Re,d,xe,Te,K)||n!==null&&n.dependencies!==null&&au(n.dependencies))?(me||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,Te,K),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,Te,K)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===n.memoizedProps&&xe===n.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&xe===n.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=Te),S.props=d,S.state=Te,S.context=K,d=Re):(typeof S.componentDidUpdate!="function"||D===n.memoizedProps&&xe===n.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&xe===n.memoizedState||(a.flags|=1024),d=!1)}return S=d,ul(n,a),d=(a.flags&128)!==0,S||d?(S=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,n!==null&&d?(a.child=Nr(a,n.child,null,x),a.child=Nr(a,null,u,x)):Fi(n,a,u,x),a.memoizedState=S.state,n=a.child):n=hi(n,a,x),n}function Qg(n,a,u,d){return uo(),a.flags|=256,Fi(n,a,u,d),a.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ns(n){return{baseLanes:n,cachePool:Ud()}}function Kf(n,a,u){return n=n!==null?n.childLanes&~u:0,a&&(n|=ps),n}function Jg(n,a,u){var d=a.pendingProps,x=!1,S=(a.flags&128)!==0,D;if((D=S)||(D=n!==null&&n.memoizedState===null?!1:(dn.current&2)!==0),D&&(x=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,n===null){if(hn){if(x?Lr(a):Ms(),(n=Fn)?(n=gS(n,Ws),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ar!==null?{id:ei,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},u=Wl(n),u.return=a,a.child=u,ri=a,Fn=null)):n=null,n===null)throw Ja(a);return gy(n)?a.lanes=32:a.lanes=536870912,null}var V=d.children;return d=d.fallback,x?(Ms(),x=a.mode,V=$f({mode:"hidden",children:V},x),d=oo(d,x,u,null),V.return=a,d.return=a,V.sibling=d,a.child=V,d=a.child,d.memoizedState=ns(u),d.childLanes=Kf(n,D,u),a.memoizedState=dp,ir(null,d)):(Lr(a),vu(a,V))}var K=n.memoizedState;if(K!==null&&(V=K.dehydrated,V!==null)){if(S)a.flags&256?(Lr(a),a.flags&=-257,a=pp(n,a,u)):a.memoizedState!==null?(Ms(),a.child=n.child,a.flags|=128,a=null):(Ms(),V=d.fallback,x=a.mode,d=$f({mode:"visible",children:d.children},x),V=oo(V,x,u,null),V.flags|=2,d.return=a,V.return=a,d.sibling=V,a.child=d,Nr(a,n.child,null,u),d=a.child,d.memoizedState=ns(u),d.childLanes=Kf(n,D,u),a.memoizedState=dp,a=ir(null,d));else if(Lr(a),gy(V)){if(D=V.nextSibling&&V.nextSibling.dataset,D)var me=D.dgst;D=me,d=Error(i(419)),d.stack="",d.digest=D,Ka({value:d,source:null,stack:null}),a=pp(n,a,u)}else if(bi||tr(n,a,u,!1),D=(u&n.childLanes)!==0,bi||D){if(D=Ht,D!==null&&(d=Vo(D,u),d!==0&&d!==K.retryLane))throw K.retryLane=d,cs(n,d),nn(D,n,d),qf;my(V)||uc(),a=pp(n,a,u)}else my(V)?(a.flags|=192,a.child=n.child,a=null):(n=K.treeContext,Fn=hr(V.nextSibling),ri=a,hn=!0,wr=null,Ws=!1,n!==null&&Af(a,n),a=vu(a,d.children),a.flags|=4096);return a}return x?(Ms(),V=d.fallback,x=a.mode,K=n.child,me=K.sibling,d=ys(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,me!==null?V=ys(me,V):(V=oo(V,x,u,null),V.flags|=2),V.return=a,d.return=a,d.sibling=V,a.child=d,ir(null,d),d=a.child,V=n.child.memoizedState,V===null?V=ns(u):(x=V.cachePool,x!==null?(K=_i._currentValue,x=x.parent!==K?{parent:K,pool:K}:x):x=Ud(),V={baseLanes:V.baseLanes|u,cachePool:x}),d.memoizedState=V,d.childLanes=Kf(n,D,u),a.memoizedState=dp,ir(n.child,d)):(Lr(a),u=n.child,n=u.sibling,u=ys(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,n!==null&&(D=a.deletions,D===null?(a.deletions=[n],a.flags|=16):D.push(n)),a.child=u,a.memoizedState=null,u)}function vu(n,a){return a=$f({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function $f(n,a){return n=$n(22,n,null,a),n.lanes=0,n}function pp(n,a,u){return Nr(a,n.child,null,u),n=vu(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Kg(n,a,u){n.lanes|=a;var d=n.alternate;d!==null&&(d.lanes|=a),Cf(n.return,a,u)}function fl(n,a,u,d,x,S){var D=n.memoizedState;D===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:x,treeForkCount:S}:(D.isBackwards=a,D.rendering=null,D.renderingStartTime=0,D.last=d,D.tail=u,D.tailMode=x,D.treeForkCount=S)}function Ts(n,a,u){var d=a.pendingProps,x=d.revealOrder,S=d.tail;d=d.children;var D=dn.current,V=(D&2)!==0;if(V?(D=D&1|2,a.flags|=128):D&=1,_e(dn,D),Fi(n,a,d,u),d=hn?jl:0,!V&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kg(n,u,a);else if(n.tag===19)Kg(n,u,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(x){case"forwards":for(u=a.child,x=null;u!==null;)n=u.alternate,n!==null&&js(n)===null&&(x=u),u=u.sibling;u=x,u===null?(x=a.child,a.child=null):(x=u.sibling,u.sibling=null),fl(a,!1,x,u,S,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,x=a.child,a.child=null;x!==null;){if(n=x.alternate,n!==null&&js(n)===null){a.child=x;break}n=x.sibling,x.sibling=u,u=x,x=n}fl(a,!0,u,null,S,d);break;case"together":fl(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function hi(n,a,u){if(n!==null&&(a.dependencies=n.dependencies),cr|=a.lanes,(u&a.childLanes)===0)if(n!==null){if(tr(n,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(i(153));if(a.child!==null){for(n=a.child,u=ys(n,n.pendingProps),a.child=u,u.return=a;n.sibling!==null;)n=n.sibling,u=u.sibling=ys(n,n.pendingProps),u.return=a;u.sibling=null}return a.child}function eh(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&au(n)))}function iy(n,a,u){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),Cr(a,_i,n.memoizedState.cache),uo();break;case 27:case 5:$e(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:Cr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,zd(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Lr(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Jg(n,a,u):(Lr(a),n=hi(n,a,u),n!==null?n.sibling:null);Lr(a);break;case 19:var x=(n.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(tr(n,a,u,!1),d=(u&a.childLanes)!==0),x){if(d)return Ts(n,a,u);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),_e(dn,dn.current),d)break;return null;case 22:return a.lanes=0,cl(n,a,u,a.pendingProps);case 24:Cr(a,_i,n.memoizedState.cache)}return hi(n,a,u)}function th(n,a,u){if(n!==null)if(n.memoizedProps!==a.pendingProps)bi=!0;else{if(!eh(n,u)&&(a.flags&128)===0)return bi=!1,iy(n,a,u);bi=(n.flags&131072)!==0}else bi=!1,hn&&(a.flags&1048576)!==0&&ag(a,jl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(n=el(a.elementType),a.type=n,typeof n=="function")Sf(n)?(d=yo(n,d),a.tag=1,a=Jf(null,a,n,d,u)):(a.tag=0,a=sc(null,a,n,d,u));else{if(n!=null){var x=n.$$typeof;if(x===U){a.tag=11,a=hp(null,a,n,d,u);break e}else if(x===H){a.tag=14,a=ll(null,a,n,d,u);break e}}throw a=de(n)||n,Error(i(306,a,""))}}return a;case 0:return sc(n,a,a.type,a.pendingProps,u);case 1:return d=a.type,x=yo(d,a.pendingProps),Jf(n,a,d,x,u);case 3:e:{if(qe(a,a.stateNode.containerInfo),n===null)throw Error(i(387));d=a.pendingProps;var S=a.memoizedState;x=S.element,Id(n,a),Kl(a,d,null,u);var D=a.memoizedState;if(d=D.cache,Cr(a,_i,d),d!==S.cache&&Rf(a,[_i],u,!0),uu(),d=D.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=Qg(n,a,d,u);break e}else if(d!==x){x=Gs(Error(i(424)),a),Ka(x),a=Qg(n,a,d,u);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Fn=hr(n.firstChild),ri=a,hn=!0,wr=null,Ws=!0,u=Of(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(uo(),d===x){a=hi(n,a,u);break e}Fi(n,a,d,u)}a=a.child}return a;case 26:return ul(n,a),n===null?(u=SS(a.type,null,a.pendingProps,null))?a.memoizedState=u:hn||(u=a.type,n=a.pendingProps,d=n0(he.current).createElement(u),d[Kn]=a,d[Ai]=n,gs(d,u,n),k(d),a.stateNode=d):a.memoizedState=SS(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return $e(a),n===null&&hn&&(d=a.stateNode=yS(a.type,a.pendingProps,he.current),ri=a,Ws=!0,x=Fn,pc(a.type)?(vy=x,Fn=hr(d.firstChild)):Fn=x),Fi(n,a,a.pendingProps.children,u),ul(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&hn&&((x=d=Fn)&&(d=_A(d,a.type,a.pendingProps,Ws),d!==null?(a.stateNode=d,ri=a,Fn=hr(d.firstChild),Ws=!1,x=!0):x=!1),x||Ja(a)),$e(a),x=a.type,S=a.pendingProps,D=n!==null?n.memoizedProps:null,d=S.children,hy(x,S)?d=null:D!==null&&hy(x,D)&&(a.flags|=32),a.memoizedState!==null&&(x=Bf(n,a,ol,null,null,u),Tp._currentValue=x),ul(n,a),Fi(n,a,d,u),a.child;case 6:return n===null&&hn&&((n=u=Fn)&&(u=bA(u,a.pendingProps,Ws),u!==null?(a.stateNode=u,ri=a,Fn=null,n=!0):n=!1),n||Ja(a)),null;case 13:return Jg(n,a,u);case 4:return qe(a,a.stateNode.containerInfo),d=a.pendingProps,n===null?a.child=Nr(a,null,d,u):Fi(n,a,d,u),a.child;case 11:return hp(n,a,a.type,a.pendingProps,u);case 7:return Fi(n,a,a.pendingProps,u),a.child;case 8:return Fi(n,a,a.pendingProps.children,u),a.child;case 12:return Fi(n,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Cr(a,a.type,d.value),Fi(n,a,d.children,u),a.child;case 9:return x=a.type._context,d=a.pendingProps.children,ho(a),x=Ft(x),d=d(x),a.flags|=1,Fi(n,a,d,u),a.child;case 14:return ll(n,a,a.type,a.pendingProps,u);case 15:return Yf(n,a,a.type,a.pendingProps,u);case 19:return Ts(n,a,u);case 31:return Qf(n,a,u);case 22:return cl(n,a,u,a.pendingProps);case 24:return ho(a),d=Ft(_i),n===null?(x=Df(),x===null&&(x=Ht,S=Rd(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=u),x=S),a.memoizedState={parent:d,cache:x},cu(a),Cr(a,_i,x)):((n.lanes&u)!==0&&(Id(n,a),Kl(a,null,null,u),uu()),x=n.memoizedState,S=a.memoizedState,x.parent!==d?(x={parent:d,cache:d},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),Cr(a,_i,d)):(d=S.cache,Cr(a,_i,d),d!==x.cache&&Rf(a,[_i],u,!0))),Fi(n,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function sr(n){n.flags|=4}function xu(n,a,u,d,x){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(x&335544128)===x)if(n.stateNode.complete)n.flags|=8192;else if(si())n.flags|=8192;else throw nr=Lf,ou}else n.flags&=-16777217}function mp(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!wS(a))if(si())n.flags|=8192;else throw nr=Lf,ou}function Ir(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?pn():536870912,n.lanes|=a,Xn|=a)}function ar(n,a){if(!hn)switch(n.tailMode){case"hidden":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function On(n){var a=n.alternate!==null&&n.alternate.child===n.child,u=0,d=0;if(a)for(var x=n.child;x!==null;)u|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=n,x=x.sibling;else for(x=n.child;x!==null;)u|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=n,x=x.sibling;return n.subtreeFlags|=d,n.childLanes=u,a}function yu(n,a,u){var d=a.pendingProps;switch(Tf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(a),null;case 1:return On(a),null;case 3:return u=a.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),er(_i),nt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(Yl(a)?sr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,wf())),On(a),null;case 26:var x=a.type,S=a.memoizedState;return n===null?(sr(a),S!==null?(On(a),mp(a,S)):(On(a),xu(a,x,null,d,u))):S?S!==n.memoizedState?(sr(a),On(a),mp(a,S)):(On(a),a.flags&=-16777217):(n=n.memoizedProps,n!==d&&sr(a),On(a),xu(a,x,n,d,u)),null;case 27:if(xt(a),u=he.current,x=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==d&&sr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return On(a),null}n=Pe.current,Yl(a)?rg(a):(n=yS(x,d,u),a.stateNode=n,sr(a))}return On(a),null;case 5:if(xt(a),x=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==d&&sr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return On(a),null}if(S=Pe.current,Yl(a))rg(a);else{var D=n0(he.current);switch(S){case 1:S=D.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=D.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=D.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=D.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=D.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof d.is=="string"?D.createElement("select",{is:d.is}):D.createElement("select"),d.multiple?S.multiple=!0:d.size&&(S.size=d.size);break;default:S=typeof d.is=="string"?D.createElement(x,{is:d.is}):D.createElement(x)}}S[Kn]=a,S[Ai]=d;e:for(D=a.child;D!==null;){if(D.tag===5||D.tag===6)S.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===a)break e;for(;D.sibling===null;){if(D.return===null||D.return===a)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}a.stateNode=S;e:switch(gs(S,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&sr(a)}}return On(a),xu(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,u),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==d&&sr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(n=he.current,Yl(a)){if(n=a.stateNode,u=a.memoizedProps,d=null,x=ri,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}n[Kn]=a,n=!!(n.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||lS(n.nodeValue,u)),n||Ja(a,!0)}else n=n0(n).createTextNode(d),n[Kn]=a,a.stateNode=n}return On(a),null;case 31:if(u=a.memoizedState,n===null||n.memoizedState!==null){if(d=Yl(a),u!==null){if(n===null){if(!d)throw Error(i(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Kn]=a}else uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;On(a),n=!1}else u=wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=u),n=!0;if(!n)return a.flags&256?(ui(a),a):(ui(a),null);if((a.flags&128)!==0)throw Error(i(558))}return On(a),null;case 13:if(d=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(x=Yl(a),d!==null&&d.dehydrated!==null){if(n===null){if(!x)throw Error(i(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Kn]=a}else uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;On(a),x=!1}else x=wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(ui(a),a):(ui(a),null)}return ui(a),(a.flags&128)!==0?(a.lanes=u,a):(u=d!==null,n=n!==null&&n.memoizedState!==null,u&&(d=a.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),S=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(S=d.memoizedState.cachePool.pool),S!==x&&(d.flags|=2048)),u!==n&&u&&(a.child.flags|=8192),Ir(a,a.updateQueue),On(a),null);case 4:return nt(),n===null&&oy(a.stateNode.containerInfo),On(a),null;case 10:return er(a.type),On(a),null;case 19:if(re(dn),d=a.memoizedState,d===null)return On(a),null;if(x=(a.flags&128)!==0,S=d.rendering,S===null)if(x)ar(d,!1);else{if(ni!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(S=js(n),S!==null){for(a.flags|=128,ar(d,!1),n=S.updateQueue,a.updateQueue=n,Ir(a,n),a.subtreeFlags=0,n=u,u=a.child;u!==null;)Gl(u,n),u=u.sibling;return _e(dn,dn.current&1|2),hn&&Za(a,d.treeForkCount),a.child}n=n.sibling}d.tail!==null&&O()>di&&(a.flags|=128,x=!0,ar(d,!1),a.lanes=4194304)}else{if(!x)if(n=js(S),n!==null){if(a.flags|=128,x=!0,n=n.updateQueue,a.updateQueue=n,Ir(a,n),ar(d,!0),d.tail===null&&d.tailMode==="hidden"&&!S.alternate&&!hn)return On(a),null}else 2*O()-d.renderingStartTime>di&&u!==536870912&&(a.flags|=128,x=!0,ar(d,!1),a.lanes=4194304);d.isBackwards?(S.sibling=a.child,a.child=S):(n=d.last,n!==null?n.sibling=S:a.child=S,d.last=S)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=O(),n.sibling=null,u=dn.current,_e(dn,x?u&1|2:u&1),hn&&Za(a,d.treeForkCount),n):(On(a),null);case 22:case 23:return ui(a),fu(),d=a.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(On(a),a.subtreeFlags&6&&(a.flags|=8192)):On(a),u=a.updateQueue,u!==null&&Ir(a,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),n!==null&&re(po),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),er(_i),On(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function pa(n,a){switch(Tf(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return er(_i),nt(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return xt(a),null;case 31:if(a.memoizedState!==null){if(ui(a),a.alternate===null)throw Error(i(340));uo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(ui(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(i(340));uo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return re(dn),null;case 4:return nt(),null;case 10:return er(a.type),null;case 22:case 23:return ui(a),fu(),n!==null&&re(po),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return er(_i),null;case 25:return null;default:return null}}function qs(n,a){switch(Tf(a),a.tag){case 3:er(_i),nt();break;case 26:case 27:case 5:xt(a);break;case 4:nt();break;case 31:a.memoizedState!==null&&ui(a);break;case 13:ui(a);break;case 19:re(dn);break;case 10:er(a.type);break;case 22:case 23:ui(a),fu(),n!==null&&re(po);break;case 24:er(_i)}}function ma(n,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var x=d.next;u=x;do{if((u.tag&n)===n){d=void 0;var S=u.create,D=u.inst;d=S(),D.destroy=d}u=u.next}while(u!==x)}}catch(V){Mn(a,a.return,V)}}function Yi(n,a,u){try{var d=a.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var S=x.next;d=S;do{if((d.tag&n)===n){var D=d.inst,V=D.destroy;if(V!==void 0){D.destroy=void 0,x=a;var K=u,me=V;try{me()}catch(Re){Mn(x,K,Re)}}}d=d.next}while(d!==S)}}catch(Re){Mn(a,a.return,Re)}}function Ia(n){var a=n.updateQueue;if(a!==null){var u=n.stateNode;try{fg(a,u)}catch(d){Mn(n,n.return,d)}}}function ki(n,a,u){u.props=yo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(d){Mn(n,a,d)}}function Or(n,a){try{var u=n.ref;if(u!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof u=="function"?n.refCleanup=u(d):u.current=d}}catch(x){Mn(n,a,x)}}function Zi(n,a){var u=n.ref,d=n.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(x){Mn(n,a,x)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){Mn(n,a,x)}else u.current=null}function _u(n){var a=n.type,u=n.memoizedProps,d=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(x){Mn(n,n.return,x)}}function Ni(n,a,u){try{var d=n.stateNode;pA(d,n.type,u,a),d[Ai]=a}catch(x){Mn(n,n.return,x)}}function Qn(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&pc(n.type)||n.tag===4}function un(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qn(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&pc(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rr(n,a,u){var d=n.tag;if(d===5||d===6)n=n.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(n,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(n),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Mr));else if(d!==4&&(d===27&&pc(n.type)&&(u=n.stateNode,a=null),n=n.child,n!==null))for(rr(n,a,u),n=n.sibling;n!==null;)rr(n,a,u),n=n.sibling}function hs(n,a,u){var d=n.tag;if(d===5||d===6)n=n.stateNode,a?u.insertBefore(n,a):u.appendChild(n);else if(d!==4&&(d===27&&pc(n.type)&&(u=n.stateNode),n=n.child,n!==null))for(hs(n,a,u),n=n.sibling;n!==null;)hs(n,a,u),n=n.sibling}function nh(n){var a=n.stateNode,u=n.memoizedProps;try{for(var d=n.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);gs(a,d,u),a[Kn]=n,a[Ai]=u}catch(S){Mn(n,n.return,S)}}var ga=!1,kn=!1,Oa=!1,$g=typeof WeakSet=="function"?WeakSet:Set,Vi=null;function sy(n,a){if(n=n.containerInfo,uy=c0,n=tg(n),Ed(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var x=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break e}var D=0,V=-1,K=-1,me=0,Re=0,ze=n,xe=null;t:for(;;){for(var Te;ze!==u||x!==0&&ze.nodeType!==3||(V=D+x),ze!==S||d!==0&&ze.nodeType!==3||(K=D+d),ze.nodeType===3&&(D+=ze.nodeValue.length),(Te=ze.firstChild)!==null;)xe=ze,ze=Te;for(;;){if(ze===n)break t;if(xe===u&&++me===x&&(V=D),xe===S&&++Re===d&&(K=D),(Te=ze.nextSibling)!==null)break;ze=xe,xe=ze.parentNode}ze=Te}u=V===-1||K===-1?null:{start:V,end:K}}else u=null}u=u||{start:0,end:0}}else u=null;for(fy={focusedElem:n,selectionRange:u},c0=!1,Vi=a;Vi!==null;)if(a=Vi,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Vi=n;else for(;Vi!==null;){switch(a=Vi,S=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(u=0;u<n.length;u++)x=n[u],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&S!==null){n=void 0,u=a,x=S.memoizedProps,S=S.memoizedState,d=u.stateNode;try{var Et=yo(u.type,x);n=d.getSnapshotBeforeUpdate(Et,S),d.__reactInternalSnapshotBeforeUpdate=n}catch(Bt){Mn(u,u.return,Bt)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,u=n.nodeType,u===9)py(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":py(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=a.sibling,n!==null){n.return=a.return,Vi=n;break}Vi=a.return}}function Jn(n,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:ya(n,u),d&4&&ma(5,u);break;case 1:if(ya(n,u),d&4)if(n=u.stateNode,a===null)try{n.componentDidMount()}catch(D){Mn(u,u.return,D)}else{var x=yo(u.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(x,a,n.__reactInternalSnapshotBeforeUpdate)}catch(D){Mn(u,u.return,D)}}d&64&&Ia(u),d&512&&Or(u,u.return);break;case 3:if(ya(n,u),d&64&&(n=u.updateQueue,n!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{fg(n,a)}catch(D){Mn(u,u.return,D)}}break;case 27:a===null&&d&4&&nh(u);case 26:case 5:ya(n,u),a===null&&d&4&&_u(u),d&512&&Or(u,u.return);break;case 12:ya(n,u);break;case 31:ya(n,u),d&4&&_o(n,u);break;case 13:ya(n,u),d&4&&ac(n,u),d&64&&(n=u.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(u=p.bind(null,u),SA(n,u))));break;case 22:if(d=u.memoizedState!==null||ga,!d){a=a!==null&&a.memoizedState!==null||kn,x=ga;var S=kn;ga=d,(kn=a)&&!S?ds(n,u,(u.subtreeFlags&8772)!==0):ya(n,u),ga=x,kn=S}break;case 30:break;default:ya(n,u)}}function bu(n){var a=n.alternate;a!==null&&(n.alternate=null,bu(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&_r(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nn=null,is=!1;function va(n,a,u){for(u=u.child;u!==null;)ih(n,a,u),u=u.sibling}function ih(n,a,u){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Ve,u)}catch{}switch(u.tag){case 26:kn||Zi(u,a),va(n,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:kn||Zi(u,a);var d=Nn,x=is;pc(u.type)&&(Nn=u.stateNode,is=!1),va(n,a,u),Sp(u.stateNode),Nn=d,is=x;break;case 5:kn||Zi(u,a);case 6:if(d=Nn,x=is,Nn=null,va(n,a,u),Nn=d,is=x,Nn!==null)if(is)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(u.stateNode)}catch(S){Mn(u,a,S)}else try{Nn.removeChild(u.stateNode)}catch(S){Mn(u,a,S)}break;case 18:Nn!==null&&(is?(n=Nn,pS(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,u.stateNode),fh(n)):pS(Nn,u.stateNode));break;case 4:d=Nn,x=is,Nn=u.stateNode.containerInfo,is=!0,va(n,a,u),Nn=d,is=x;break;case 0:case 11:case 14:case 15:Yi(2,u,a),kn||Yi(4,u,a),va(n,a,u);break;case 1:kn||(Zi(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&ki(u,a,d)),va(n,a,u);break;case 21:va(n,a,u);break;case 22:kn=(d=kn)||u.memoizedState!==null,va(n,a,u),kn=d;break;default:va(n,a,u)}}function _o(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{fh(n)}catch(u){Mn(a,a.return,u)}}}function ac(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fh(n)}catch(u){Mn(a,a.return,u)}}function gp(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new $g),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new $g),a;default:throw Error(i(435,n.tag))}}function Pr(n,a){var u=gp(n);a.forEach(function(d){if(!u.has(d)){u.add(d);var x=v.bind(null,n,d);d.then(x,x)}})}function Di(n,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var x=u[d],S=n,D=a,V=D;e:for(;V!==null;){switch(V.tag){case 27:if(pc(V.type)){Nn=V.stateNode,is=!1;break e}break;case 5:Nn=V.stateNode,is=!1;break e;case 3:case 4:Nn=V.stateNode.containerInfo,is=!0;break e}V=V.return}if(Nn===null)throw Error(i(160));ih(S,D,x),Nn=null,is=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)bo(a,n),a=a.sibling}var xa=null;function bo(n,a){var u=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Di(a,n),Li(n),d&4&&(Yi(3,n,n.return),ma(3,n),Yi(5,n,n.return));break;case 1:Di(a,n),Li(n),d&512&&(kn||u===null||Zi(u,u.return)),d&64&&ga&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var x=xa;if(Di(a,n),Li(n),d&512&&(kn||u===null||Zi(u,u.return)),d&4){var S=u!==null?u.memoizedState:null;if(d=n.memoizedState,u===null)if(d===null)if(n.stateNode===null){e:{d=n.type,u=n.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":S=x.getElementsByTagName("title")[0],(!S||S[Da]||S[Kn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(d),x.head.insertBefore(S,x.querySelector("head > title"))),gs(S,d,u),S[Kn]=n,k(S),d=S;break e;case"link":var D=TS("link","href",x).get(d+(u.href||""));if(D){for(var V=0;V<D.length;V++)if(S=D[V],S.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&S.getAttribute("rel")===(u.rel==null?null:u.rel)&&S.getAttribute("title")===(u.title==null?null:u.title)&&S.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(V,1);break t}}S=x.createElement(d),gs(S,d,u),x.head.appendChild(S);break;case"meta":if(D=TS("meta","content",x).get(d+(u.content||""))){for(V=0;V<D.length;V++)if(S=D[V],S.getAttribute("content")===(u.content==null?null:""+u.content)&&S.getAttribute("name")===(u.name==null?null:u.name)&&S.getAttribute("property")===(u.property==null?null:u.property)&&S.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&S.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(V,1);break t}}S=x.createElement(d),gs(S,d,u),x.head.appendChild(S);break;default:throw Error(i(468,d))}S[Kn]=n,k(S),d=S}n.stateNode=d}else AS(x,n.type,n.stateNode);else n.stateNode=ES(x,d,n.memoizedProps);else S!==d?(S===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):S.count--,d===null?AS(x,n.type,n.stateNode):ES(x,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Ni(n,n.memoizedProps,u.memoizedProps)}break;case 27:Di(a,n),Li(n),d&512&&(kn||u===null||Zi(u,u.return)),u!==null&&d&4&&Ni(n,n.memoizedProps,u.memoizedProps);break;case 5:if(Di(a,n),Li(n),d&512&&(kn||u===null||Zi(u,u.return)),n.flags&32){x=n.stateNode;try{yi(x,"")}catch(Et){Mn(n,n.return,Et)}}d&4&&n.stateNode!=null&&(x=n.memoizedProps,Ni(n,x,u!==null?u.memoizedProps:x)),d&1024&&(Oa=!0);break;case 6:if(Di(a,n),Li(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,u=n.stateNode;try{u.nodeValue=d}catch(Et){Mn(n,n.return,Et)}}break;case 3:if(a0=null,x=xa,xa=i0(a.containerInfo),Di(a,n),xa=x,Li(n),d&4&&u!==null&&u.memoizedState.isDehydrated)try{fh(a.containerInfo)}catch(Et){Mn(n,n.return,Et)}Oa&&(Oa=!1,sh(n));break;case 4:d=xa,xa=i0(n.stateNode.containerInfo),Di(a,n),Li(n),xa=d;break;case 12:Di(a,n),Li(n);break;case 31:Di(a,n),Li(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pr(n,d)));break;case 13:Di(a,n),Li(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(rc=O()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pr(n,d)));break;case 22:x=n.memoizedState!==null;var K=u!==null&&u.memoizedState!==null,me=ga,Re=kn;if(ga=me||x,kn=Re||K,Di(a,n),kn=Re,ga=me,Li(n),d&8192)e:for(a=n.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(u===null||K||ga||kn||or(n)),u=null,a=n;;){if(a.tag===5||a.tag===26){if(u===null){K=u=a;try{if(S=K.stateNode,x)D=S.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{V=K.stateNode;var ze=K.memoizedProps.style,xe=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;V.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Et){Mn(K,K.return,Et)}}}else if(a.tag===6){if(u===null){K=a;try{K.stateNode.nodeValue=x?"":K.memoizedProps}catch(Et){Mn(K,K.return,Et)}}}else if(a.tag===18){if(u===null){K=a;try{var Te=K.stateNode;x?mS(Te,!0):mS(K.stateNode,!1)}catch(Et){Mn(K,K.return,Et)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=n.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Pr(n,u))));break;case 19:Di(a,n),Li(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pr(n,d)));break;case 30:break;case 21:break;default:Di(a,n),Li(n)}}function Li(n){var a=n.flags;if(a&2){try{for(var u,d=n.return;d!==null;){if(Qn(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var x=u.stateNode,S=un(n);hs(n,S,x);break;case 5:var D=u.stateNode;u.flags&32&&(yi(D,""),u.flags&=-33);var V=un(n);hs(n,V,D);break;case 3:case 4:var K=u.stateNode.containerInfo,me=un(n);rr(n,me,K);break;default:throw Error(i(161))}}catch(Re){Mn(n,n.return,Re)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function sh(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;sh(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ya(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Jn(n,a.alternate,a),a=a.sibling}function or(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Yi(4,a,a.return),or(a);break;case 1:Zi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&ki(a,a.return,u),or(a);break;case 27:Sp(a.stateNode);case 26:case 5:Zi(a,a.return),or(a);break;case 22:a.memoizedState===null&&or(a);break;case 30:or(a);break;default:or(a)}n=n.sibling}}function ds(n,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,x=n,S=a,D=S.flags;switch(S.tag){case 0:case 11:case 15:ds(x,S,u),ma(4,S);break;case 1:if(ds(x,S,u),d=S,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(me){Mn(d,d.return,me)}if(d=S,x=d.updateQueue,x!==null){var V=d.stateNode;try{var K=x.shared.hiddenCallbacks;if(K!==null)for(x.shared.hiddenCallbacks=null,x=0;x<K.length;x++)$l(K[x],V)}catch(me){Mn(d,d.return,me)}}u&&D&64&&Ia(S),Or(S,S.return);break;case 27:nh(S);case 26:case 5:ds(x,S,u),u&&d===null&&D&4&&_u(S),Or(S,S.return);break;case 12:ds(x,S,u);break;case 31:ds(x,S,u),u&&D&4&&_o(x,S);break;case 13:ds(x,S,u),u&&D&4&&ac(x,S);break;case 22:S.memoizedState===null&&ds(x,S,u),Or(S,S.return);break;case 30:break;default:ds(x,S,u)}a=a.sibling}}function So(n,a){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Ko(u))}function hl(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ko(n))}function Qi(n,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)vp(n,a,u,d),a=a.sibling}function vp(n,a,u,d){var x=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(n,a,u,d),x&2048&&ma(9,a);break;case 1:Qi(n,a,u,d);break;case 3:Qi(n,a,u,d),x&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ko(n)));break;case 12:if(x&2048){Qi(n,a,u,d),n=a.stateNode;try{var S=a.memoizedProps,D=S.id,V=S.onPostCommit;typeof V=="function"&&V(D,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){Mn(a,a.return,K)}}else Qi(n,a,u,d);break;case 31:Qi(n,a,u,d);break;case 13:Qi(n,a,u,d);break;case 23:break;case 22:S=a.stateNode,D=a.alternate,a.memoizedState!==null?S._visibility&2?Qi(n,a,u,d):lr(n,a):S._visibility&2?Qi(n,a,u,d):(S._visibility|=2,Ji(n,a,u,d,(a.subtreeFlags&10256)!==0||!1)),x&2048&&So(D,a);break;case 24:Qi(n,a,u,d),x&2048&&hl(a.alternate,a);break;default:Qi(n,a,u,d)}}function Ji(n,a,u,d,x){for(x=x&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var S=n,D=a,V=u,K=d,me=D.flags;switch(D.tag){case 0:case 11:case 15:Ji(S,D,V,K,x),ma(8,D);break;case 23:break;case 22:var Re=D.stateNode;D.memoizedState!==null?Re._visibility&2?Ji(S,D,V,K,x):lr(S,D):(Re._visibility|=2,Ji(S,D,V,K,x)),x&&me&2048&&So(D.alternate,D);break;case 24:Ji(S,D,V,K,x),x&&me&2048&&hl(D.alternate,D);break;default:Ji(S,D,V,K,x)}a=a.sibling}}function lr(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=n,d=a,x=d.flags;switch(d.tag){case 22:lr(u,d),x&2048&&So(d.alternate,d);break;case 24:lr(u,d),x&2048&&hl(d.alternate,d);break;default:lr(u,d)}a=a.sibling}}var dl=8192;function Ys(n,a,u){if(n.subtreeFlags&dl)for(n=n.child;n!==null;)ah(n,a,u),n=n.sibling}function ah(n,a,u){switch(n.tag){case 26:Ys(n,a,u),n.flags&dl&&n.memoizedState!==null&&IA(u,xa,n.memoizedState,n.memoizedProps);break;case 5:Ys(n,a,u);break;case 3:case 4:var d=xa;xa=i0(n.stateNode.containerInfo),Ys(n,a,u),xa=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=dl,dl=16777216,Ys(n,a,u),dl=d):Ys(n,a,u));break;default:Ys(n,a,u)}}function pl(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Mo(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Vi=d,oi(d,n)}pl(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)As(n),n=n.sibling}function As(n){switch(n.tag){case 0:case 11:case 15:Mo(n),n.flags&2048&&Yi(9,n,n.return);break;case 3:Mo(n);break;case 12:Mo(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,ws(n)):Mo(n);break;default:Mo(n)}}function ws(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Vi=d,oi(d,n)}pl(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Yi(8,a,a.return),ws(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,ws(a));break;default:ws(a)}n=n.sibling}}function oi(n,a){for(;Vi!==null;){var u=Vi;switch(u.tag){case 0:case 11:case 15:Yi(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ko(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Vi=d;else e:for(u=n;Vi!==null;){d=Vi;var x=d.sibling,S=d.return;if(bu(d),d===u){Vi=null;break e}if(x!==null){x.return=S,Vi=x;break e}Vi=S}}}var zr={getCacheForType:function(n){var a=Ft(_i),u=a.data.get(n);return u===void 0&&(u=n(),a.data.set(n,u)),u},cacheSignal:function(){return Ft(_i).controller.signal}},Yt=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Ht=null,tn=null,Kt=0,mn=0,ss=null,_a=!1,Pa=!1,xp=!1,Zs=0,ni=0,cr=0,Eo=0,Su=0,ps=0,Xn=0,ml=null,li=null,ci=!1,rc=0,yp=0,di=1/0,ii=null,pi=null,Dn=0,Qs=null,oc=null,ba=0,lc=0,cc=null,Mu=null,To=0,gl=null;function Js(){return(Ct&2)!==0&&Kt!==0?Kt&-Kt:Q.T!==null?be():Ho()}function on(){if(ps===0)if((Kt&536870912)===0||hn){var n=je;je<<=1,(je&3932160)===0&&(je=262144),ps=n}else ps=536870912;return n=Ss.current,n!==null&&(n.flags|=32),ps}function nn(n,a,u){(n===Ht&&(mn===2||mn===9)||n.cancelPendingCommit!==null)&&(wo(n,0),Si(n,Kt,ps,!1)),ji(n,u),((Ct&2)===0||n!==Ht)&&(n===Ht&&((Ct&2)===0&&(Eo|=u),ni===4&&Si(n,Kt,ps,!1)),Ge(n))}function ln(n,a,u){if((Ct&6)!==0)throw Error(i(327));var d=!u&&(a&127)===0&&(a&n.expiredLanes)===0||et(n,a),x=d?Eu(n,a):ms(n,a,!0),S=d;do{if(x===0){Pa&&!d&&Si(n,a,0,!1);break}else{if(u=n.current.alternate,S&&!Ln(u)){x=ms(n,a,!1),S=!1;continue}if(x===2){if(S=a,n.errorRecoveryDisabledLanes&S)var D=0;else D=n.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var V=n;x=ml;var K=V.current.memoizedState.isDehydrated;if(K&&(wo(V,D).flags|=256),D=ms(V,D,!1),D!==2){if(xp&&!K){V.errorRecoveryDisabledLanes|=S,Eo|=S,x=4;break e}S=li,li=x,S!==null&&(li===null?li=S:li.push.apply(li,S))}x=D}if(S=!1,x!==2)continue}}if(x===1){wo(n,0),Si(n,a,0,!0);break}e:{switch(d=n,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Si(d,a,ps,!_a);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(x=rc+300-O(),10<x)){if(Si(d,a,ps,!_a),Ie(d,0,!0)!==0)break e;ba=a,d.timeoutHandle=hS(fn.bind(null,d,u,li,ii,ci,a,ps,Eo,Xn,_a,S,"Throttled",-0,0),x);break e}fn(d,u,li,ii,ci,a,ps,Eo,Xn,_a,S,null,-0,0)}}break}while(!0);Ge(n)}function fn(n,a,u,d,x,S,D,V,K,me,Re,ze,xe,Te){if(n.timeoutHandle=-1,ze=a.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},ah(a,S,ze);var Et=(S&62914560)===S?rc-O():(S&4194048)===S?yp-O():0;if(Et=OA(ze,Et),Et!==null){ba=S,n.cancelPendingCommit=Et(Fr.bind(null,n,a,S,u,d,x,D,V,K,Re,ze,null,xe,Te)),Si(n,S,D,!me);return}}Fr(n,a,S,u,d,x,D,V,K)}function Ln(n){for(var a=n;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var x=u[d],S=x.getSnapshot;x=x.value;try{if(!ls(S(),x))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Si(n,a,u,d){a&=~Su,a&=~Eo,n.suspendedLanes|=a,n.pingedLanes&=~a,d&&(n.warmLanes|=a),d=n.expirationTimes;for(var x=a;0<x;){var S=31-ft(x),D=1<<S;d[S]=-1,x&=~D}u!==0&&Jr(n,u,a)}function za(){return(Ct&6)===0?(mt(0),!1):!0}function Ao(){if(tn!==null){if(mn===0)var n=tn.return;else n=tn,$a=fo=null,Hd(n),il=null,sl=0,n=tn;for(;n!==null;)qs(n.alternate,n),n=n.return;tn=null}}function wo(n,a){var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,vA(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),ba=0,Ao(),Ht=n,tn=u=ys(n.current,null),Kt=a,mn=0,ss=null,_a=!1,Pa=et(n,a),xp=!1,Xn=ps=Su=Eo=cr=ni=0,li=ml=null,ci=!1,(a&8)!==0&&(a|=a&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=a;0<d;){var x=31-ft(d),S=1<<x;a|=n[x],d&=~S}return Zs=a,iu(),u}function ur(n,a){qt=null,Q.H=ic,a===$o||a===en?(a=tl(),mn=3):a===ou?(a=tl(),mn=4):mn=a===qf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ss=a,tn===null&&(ni=1,jf(n,Gs(a,n.current)))}function si(){var n=Ss.current;return n===null?!0:(Kt&4194048)===Kt?fs===null:(Kt&62914560)===Kt||(Kt&536870912)!==0?n===fs:!1}function Br(){var n=Q.H;return Q.H=ic,n===null?ic:n}function Co(){var n=Q.A;return Q.A=zr,n}function uc(){ni=4,_a||(Kt&4194048)!==Kt&&Ss.current!==null||(Pa=!0),(cr&134217727)===0&&(Eo&134217727)===0||Ht===null||Si(Ht,Kt,ps,!1)}function ms(n,a,u){var d=Ct;Ct|=2;var x=Br(),S=Co();(Ht!==n||Kt!==a)&&(ii=null,wo(n,a)),a=!1;var D=ni;e:do try{if(mn!==0&&tn!==null){var V=tn,K=ss;switch(mn){case 8:Ao(),D=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(a=!0);var me=mn;if(mn=0,ss=null,vl(n,V,K,me),u&&Pa){D=0;break e}break;default:me=mn,mn=0,ss=null,vl(n,V,K,me)}}fc(),D=ni;break}catch(Re){ur(n,Re)}while(!0);return a&&n.shellSuspendCounter++,$a=fo=null,Ct=d,Q.H=x,Q.A=S,tn===null&&(Ht=null,Kt=0,iu()),D}function fc(){for(;tn!==null;)rh(tn)}function Eu(n,a){var u=Ct;Ct|=2;var d=Br(),x=Co();Ht!==n||Kt!==a?(ii=null,di=O()+500,wo(n,a)):Pa=et(n,a);e:do try{if(mn!==0&&tn!==null){a=tn;var S=ss;t:switch(mn){case 1:mn=0,ss=null,vl(n,a,S,1);break;case 2:case 9:if(bs(S)){mn=0,ss=null,Tu(a);break}a=function(){mn!==2&&mn!==9||Ht!==n||(mn=7),Ge(n)},S.then(a,a);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:bs(S)?(mn=0,ss=null,Tu(a)):(mn=0,ss=null,vl(n,a,S,7));break;case 5:var D=null;switch(tn.tag){case 26:D=tn.memoizedState;case 5:case 27:var V=tn;if(D?wS(D):V.stateNode.complete){mn=0,ss=null;var K=V.sibling;if(K!==null)tn=K;else{var me=V.return;me!==null?(tn=me,Ro(me)):tn=null}break t}}mn=0,ss=null,vl(n,a,S,5);break;case 6:mn=0,ss=null,vl(n,a,S,6);break;case 8:Ao(),ni=6;break e;default:throw Error(i(462))}}Cs();break}catch(Re){ur(n,Re)}while(!0);return $a=fo=null,Q.H=d,Q.A=x,Ct=u,tn!==null?0:(Ht=null,Kt=0,iu(),ni)}function Cs(){for(;tn!==null&&!Xe();)rh(tn)}function rh(n){var a=th(n.alternate,n,Zs);n.memoizedProps=n.pendingProps,a===null?Ro(n):tn=a}function Tu(n){var a=n,u=a.alternate;switch(a.tag){case 15:case 0:a=gu(u,a,a.pendingProps,a.type,void 0,Kt);break;case 11:a=gu(u,a,a.pendingProps,a.type.render,a.ref,Kt);break;case 5:Hd(a);default:qs(u,a),a=tn=Gl(a,Zs),a=th(u,a,Zs)}n.memoizedProps=n.pendingProps,a===null?Ro(n):tn=a}function vl(n,a,u,d){$a=fo=null,Hd(a),il=null,sl=0;var x=a.return;try{if(Ri(n,x,a,u,Kt)){ni=1,jf(n,Gs(u,n.current)),tn=null;return}}catch(S){if(x!==null)throw tn=x,S;ni=1,jf(n,Gs(u,n.current)),tn=null;return}a.flags&32768?(hn||d===1?n=!0:Pa||(Kt&536870912)!==0?n=!1:(_a=n=!0,(d===2||d===9||d===3||d===6)&&(d=Ss.current,d!==null&&d.tag===13&&(d.flags|=16384))),Au(a,n)):Ro(a)}function Ro(n){var a=n;do{if((a.flags&32768)!==0){Au(a,_a);return}n=a.return;var u=yu(a.alternate,a,Zs);if(u!==null){tn=u;return}if(a=a.sibling,a!==null){tn=a;return}tn=a=n}while(a!==null);ni===0&&(ni=5)}function Au(n,a){do{var u=pa(n.alternate,n);if(u!==null){u.flags&=32767,tn=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(n=n.sibling,n!==null)){tn=n;return}tn=n=u}while(n!==null);ni=6,tn=null}function Fr(n,a,u,d,x,S,D,V,K){n.cancelPendingCommit=null;do hc();while(Dn!==0);if((Ct&6)!==0)throw Error(i(327));if(a!==null){if(a===n.current)throw Error(i(177));if(S=a.lanes|a.childLanes,S|=zi,xs(n,u,S,D,V,K),n===Ht&&(tn=Ht=null,Kt=0),oc=a,Qs=n,ba=u,lc=S,cc=x,Mu=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,T(Ee,function(){return oh(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=Q.T,Q.T=null,x=J.p,J.p=2,D=Ct,Ct|=4;try{sy(n,a,u)}finally{Ct=D,J.p=x,Q.T=d}}Dn=1,Mi(),kr(),xl()}}function Mi(){if(Dn===1){Dn=0;var n=Qs,a=oc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null;var d=J.p;J.p=2;var x=Ct;Ct|=4;try{bo(a,n);var S=fy,D=tg(n.containerInfo),V=S.focusedElem,K=S.selectionRange;if(D!==V&&V&&V.ownerDocument&&Bn(V.ownerDocument.documentElement,V)){if(K!==null&&Ed(V)){var me=K.start,Re=K.end;if(Re===void 0&&(Re=me),"selectionStart"in V)V.selectionStart=me,V.selectionEnd=Math.min(Re,V.value.length);else{var ze=V.ownerDocument||document,xe=ze&&ze.defaultView||window;if(xe.getSelection){var Te=xe.getSelection(),Et=V.textContent.length,Bt=Math.min(K.start,Et),Hn=K.end===void 0?Bt:Math.min(K.end,Et);!Te.extend&&Bt>Hn&&(D=Hn,Hn=Bt,Bt=D);var le=kl(V,Bt),te=kl(V,Hn);if(le&&te&&(Te.rangeCount!==1||Te.anchorNode!==le.node||Te.anchorOffset!==le.offset||Te.focusNode!==te.node||Te.focusOffset!==te.offset)){var pe=ze.createRange();pe.setStart(le.node,le.offset),Te.removeAllRanges(),Bt>Hn?(Te.addRange(pe),Te.extend(te.node,te.offset)):(pe.setEnd(te.node,te.offset),Te.addRange(pe))}}}}for(ze=[],Te=V;Te=Te.parentNode;)Te.nodeType===1&&ze.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ze.length;V++){var Ue=ze[V];Ue.element.scrollLeft=Ue.left,Ue.element.scrollTop=Ue.top}}c0=!!uy,fy=uy=null}finally{Ct=x,J.p=d,Q.T=u}}n.current=a,Dn=2}}function kr(){if(Dn===2){Dn=0;var n=Qs,a=oc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=Q.T,Q.T=null;var d=J.p;J.p=2;var x=Ct;Ct|=4;try{Jn(n,a.alternate,a)}finally{Ct=x,J.p=d,Q.T=u}}Dn=3}}function xl(){if(Dn===4||Dn===3){Dn=0,G();var n=Qs,a=oc,u=ba,d=Mu;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Dn=5:(Dn=0,oc=Qs=null,fr(n,n.pendingLanes));var x=n.pendingLanes;if(x===0&&(pi=null),yr(u),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Ve,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=Q.T,x=J.p,J.p=2,Q.T=null;try{for(var S=n.onRecoverableError,D=0;D<d.length;D++){var V=d[D];S(V.value,{componentStack:V.stack})}}finally{Q.T=a,J.p=x}}(ba&3)!==0&&hc(),Ge(n),x=n.pendingLanes,(u&261930)!==0&&(x&42)!==0?n===gl?To++:(To=0,gl=n):To=0,mt(0)}}function fr(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Ko(a)))}function hc(){return Mi(),kr(),xl(),oh()}function oh(){if(Dn!==5)return!1;var n=Qs,a=lc;lc=0;var u=yr(ba),d=Q.T,x=J.p;try{J.p=32>u?32:u,Q.T=null,u=cc,cc=null;var S=Qs,D=ba;if(Dn=0,oc=Qs=null,ba=0,(Ct&6)!==0)throw Error(i(331));var V=Ct;if(Ct|=4,As(S.current),vp(S,S.current,D,u),Ct=V,mt(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Ve,S)}catch{}return!0}finally{J.p=x,Q.T=d,fr(n,a)}}function _p(n,a,u){a=Gs(u,a),a=up(n.stateNode,a,2),n=mo(n,a,2),n!==null&&(ji(n,2),Ge(n))}function Mn(n,a,u){if(n.tag===3)_p(n,n,u);else for(;a!==null;){if(a.tag===3){_p(a,n,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(pi===null||!pi.has(d))){n=Gs(u,n),u=fp(2),d=mo(a,u,2),d!==null&&(Yg(u,d,a,n),ji(d,2),Ge(d));break}}a=a.return}}function wu(n,a,u){var d=n.pingCache;if(d===null){d=n.pingCache=new Yt;var x=new Set;d.set(a,x)}else x=d.get(a),x===void 0&&(x=new Set,d.set(a,x));x.has(u)||(xp=!0,x.add(u),n=o.bind(null,n,a,u),a.then(n,n))}function o(n,a,u){var d=n.pingCache;d!==null&&d.delete(a),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Ht===n&&(Kt&u)===u&&(ni===4||ni===3&&(Kt&62914560)===Kt&&300>O()-rc?(Ct&2)===0&&wo(n,0):Su|=u,Xn===Kt&&(Xn=0)),Ge(n)}function l(n,a){a===0&&(a=pn()),n=cs(n,a),n!==null&&(ji(n,a),Ge(n))}function p(n){var a=n.memoizedState,u=0;a!==null&&(u=a.retryLane),l(n,u)}function v(n,a){var u=0;switch(n.tag){case 31:case 13:var d=n.stateNode,x=n.memoizedState;x!==null&&(u=x.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),l(n,u)}function T(n,a){return st(n,a)}var C=null,F=null,$=!1,Me=!1,ke=!1,tt=0;function Ge(n){n!==F&&n.next===null&&(F===null?C=F=n:F=F.next=n),Me=!0,$||($=!0,ue())}function mt(n,a){if(!ke&&Me){ke=!0;do for(var u=!1,d=C;d!==null;){if(n!==0){var x=d.pendingLanes;if(x===0)var S=0;else{var D=d.suspendedLanes,V=d.pingedLanes;S=(1<<31-ft(42|n)+1)-1,S&=x&~(D&~V),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(u=!0,ve(d,S))}else S=Kt,S=Ie(d,d===Ht?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(S&3)===0||et(d,S)||(u=!0,ve(d,S));d=d.next}while(u);ke=!1}}function jt(){mi()}function mi(){Me=$=!1;var n=0;tt!==0&&gA()&&(n=tt);for(var a=O(),u=null,d=C;d!==null;){var x=d.next,S=dc(d,a);S===0?(d.next=null,u===null?C=x:u.next=x,x===null&&(F=u)):(u=d,(n!==0||(S&3)!==0)&&(Me=!0)),d=x}Dn!==0&&Dn!==5||mt(n),tt!==0&&(tt=0)}function dc(n,a){for(var u=n.suspendedLanes,d=n.pingedLanes,x=n.expirationTimes,S=n.pendingLanes&-62914561;0<S;){var D=31-ft(S),V=1<<D,K=x[D];K===-1?((V&u)===0||(V&d)!==0)&&(x[D]=kt(V,a)):K<=a&&(n.expiredLanes|=V),S&=~V}if(a=Ht,u=Kt,u=Ie(n,n===a?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,u===0||n===a&&(mn===2||mn===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&At(d),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||et(n,u)){if(a=u&-u,a===n.callbackPriority)return a;switch(d!==null&&At(d),yr(u)){case 2:case 8:u=De;break;case 32:u=Ee;break;case 268435456:u=Ke;break;default:u=Ee}return d=No.bind(null,n),u=st(u,d),n.callbackPriority=a,n.callbackNode=u,a}return d!==null&&d!==null&&At(d),n.callbackPriority=2,n.callbackNode=null,2}function No(n,a){if(Dn!==0&&Dn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var u=n.callbackNode;if(hc()&&n.callbackNode!==u)return null;var d=Kt;return d=Ie(n,n===Ht?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(ln(n,d,a),dc(n,O()),n.callbackNode!=null&&n.callbackNode===u?No.bind(null,n):null)}function ve(n,a){if(hc())return null;ln(n,a,!0)}function ue(){xA(function(){(Ct&6)!==0?st(Se,jt):mi()})}function be(){if(tt===0){var n=Rr;n===0&&(n=rt,rt<<=1,(rt&261888)===0&&(rt=256)),tt=n}return tt}function Je(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Gc(""+n)}function It(n,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,n.id&&u.setAttribute("form",n.id),a.parentNode.insertBefore(u,a),n=new FormData(n),u.parentNode.removeChild(u),n}function ai(n,a,u,d,x){if(a==="submit"&&u&&u.stateNode===x){var S=Je((x[Ai]||null).action),D=d.submitter;D&&(a=(a=D[Ai]||null)?Je(a.formAction):D.getAttribute("formAction"),a!==null&&(S=a,D=null));var V=new jc("action","action",null,d,x);n.push({event:V,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(tt!==0){var K=D?It(x,D):new FormData(x);np(u,{pending:!0,data:K,method:x.method,action:S},null,K)}}else typeof S=="function"&&(V.preventDefault(),K=D?It(x,D):new FormData(x),np(u,{pending:!0,data:K,method:x.method,action:S},S,K))},currentTarget:x}]})}}for(var Pt=0;Pt<tu.length;Pt++){var yn=tu[Pt],Hi=yn.toLowerCase(),En=yn[0].toUpperCase()+yn.slice(1);oa(Hi,"on"+En)}oa(_f,"onAnimationEnd"),oa(eu,"onAnimationIteration"),oa(Ad,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(ig,"onTransitionRun"),oa(Qx,"onTransitionStart"),oa(sg,"onTransitionCancel"),oa(wd,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sa));function sS(n,a){a=(a&4)!==0;for(var u=0;u<n.length;u++){var d=n[u],x=d.event;d=d.listeners;e:{var S=void 0;if(a)for(var D=d.length-1;0<=D;D--){var V=d[D],K=V.instance,me=V.currentTarget;if(V=V.listener,K!==S&&x.isPropagationStopped())break e;S=V,x.currentTarget=me;try{S(x)}catch(Re){nu(Re)}x.currentTarget=null,S=K}else for(D=0;D<d.length;D++){if(V=d[D],K=V.instance,me=V.currentTarget,V=V.listener,K!==S&&x.isPropagationStopped())break e;S=V,x.currentTarget=me;try{S(x)}catch(Re){nu(Re)}x.currentTarget=null,S=K}}}}function gn(n,a){var u=a[ks];u===void 0&&(u=a[ks]=new Set);var d=n+"__bubble";u.has(d)||(aS(a,n,2,!1),u.add(d))}function ry(n,a,u){var d=0;a&&(d|=4),aS(u,n,d,a)}var e0="_reactListening"+Math.random().toString(36).slice(2);function oy(n){if(!n[e0]){n[e0]=!0,ae.forEach(function(u){u!=="selectionchange"&&(ay.has(u)||ry(u,!1,n),ry(u,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[e0]||(a[e0]=!0,ry("selectionchange",!1,a))}}function aS(n,a,u,d){switch(IS(a)){case 2:var x=BA;break;case 8:x=FA;break;default:x=Sy}u=x.bind(null,a,u,n),x=void 0,!ld||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),d?x!==void 0?n.addEventListener(a,u,{capture:!0,passive:x}):n.addEventListener(a,u,!0):x!==void 0?n.addEventListener(a,u,{passive:x}):n.addEventListener(a,u,!1)}function ly(n,a,u,d,x){var S=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var V=d.stateNode.containerInfo;if(V===x)break;if(D===4)for(D=d.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===x)return;D=D.return}for(;V!==null;){if(D=br(V),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){d=S=D;continue e}V=V.parentNode}}d=d.return}od(function(){var me=S,Re=of(u),ze=[];e:{var xe=ra.get(n);if(xe!==void 0){var Te=jc,Et=n;switch(n){case"keypress":if(Xc(u)===0)break e;case"keydown":case"keyup":Te=qo;break;case"focusin":Et="focus",Te=ff;break;case"focusout":Et="blur",Te=ff;break;case"beforeblur":case"afterblur":Te=ff;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Gm;break;case _f:case eu:case Ad:Te=qx;break;case wd:Te=Zx;break;case"scroll":case"scrollend":Te=Om;break;case"wheel":Te=Xm;break;case"copy":case"cut":case"paste":Te=Fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=hd;break;case"toggle":case"beforetoggle":Te=qm}var Bt=(a&4)!==0,Hn=!Bt&&(n==="scroll"||n==="scrollend"),le=Bt?xe!==null?xe+"Capture":null:xe;Bt=[];for(var te=me,pe;te!==null;){var Ue=te;if(pe=Ue.stateNode,Ue=Ue.tag,Ue!==5&&Ue!==26&&Ue!==27||pe===null||le===null||(Ue=Dl(te,le),Ue!=null&&Bt.push(bp(te,Ue,pe))),Hn)break;te=te.return}0<Bt.length&&(xe=new Te(xe,Et,null,u,Re),ze.push({event:xe,listeners:Bt}))}}if((a&7)===0){e:{if(xe=n==="mouseover"||n==="pointerover",Te=n==="mouseout"||n==="pointerout",xe&&u!==rf&&(Et=u.relatedTarget||u.fromElement)&&(br(Et)||Et[Fs]))break e;if((Te||xe)&&(xe=Re.window===Re?Re:(xe=Re.ownerDocument)?xe.defaultView||xe.parentWindow:window,Te?(Et=u.relatedTarget||u.toElement,Te=me,Et=Et?br(Et):null,Et!==null&&(Hn=c(Et),Bt=Et.tag,Et!==Hn||Bt!==5&&Bt!==27&&Bt!==6)&&(Et=null)):(Te=null,Et=me),Te!==Et)){if(Bt=cd,Ue="onMouseLeave",le="onMouseEnter",te="mouse",(n==="pointerout"||n==="pointerover")&&(Bt=hd,Ue="onPointerLeave",le="onPointerEnter",te="pointer"),Hn=Te==null?xe:to(Te),pe=Et==null?xe:to(Et),xe=new Bt(Ue,te+"leave",Te,u,Re),xe.target=Hn,xe.relatedTarget=pe,Ue=null,br(Re)===me&&(Bt=new Bt(le,te+"enter",Et,u,Re),Bt.target=pe,Bt.relatedTarget=Hn,Ue=Bt),Hn=Ue,Te&&Et)t:{for(Bt=fA,le=Te,te=Et,pe=0,Ue=le;Ue;Ue=Bt(Ue))pe++;Ue=0;for(var Ut=te;Ut;Ut=Bt(Ut))Ue++;for(;0<pe-Ue;)le=Bt(le),pe--;for(;0<Ue-pe;)te=Bt(te),Ue--;for(;pe--;){if(le===te||te!==null&&le===te.alternate){Bt=le;break t}le=Bt(le),te=Bt(te)}Bt=null}else Bt=null;Te!==null&&rS(ze,xe,Te,Bt,!1),Et!==null&&Hn!==null&&rS(ze,Hn,Et,Bt,!0)}}e:{if(xe=me?to(me):window,Te=xe.nodeName&&xe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&xe.type==="file")var Cn=yd;else if(xd(xe))if(Xa)Cn=eg;else{Cn=Sd;var wt=Km}else Te=xe.nodeName,!Te||Te.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?me&&sa(me.elementType)&&(Cn=yd):Cn=$m;if(Cn&&(Cn=Cn(n,me))){xf(ze,Cn,u,Re);break e}wt&&wt(n,xe,me),n==="focusout"&&me&&xe.type==="number"&&me.memoizedProps.value!=null&&Wn(xe,"number",xe.value)}switch(wt=me?to(me):window,n){case"focusin":(xd(wt)||wt.contentEditable==="true")&&(ja=wt,qa=me,Vl=null);break;case"focusout":Vl=qa=ja=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Hl(ze,u,Re);break;case"selectionchange":if(ng)break;case"keydown":case"keyup":Hl(ze,u,Re)}var an;if(Yo)e:{switch(n){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else Zo?vf(n,u)&&(_n="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(_n="onCompositionStart");_n&&(pd&&u.locale!=="ko"&&(Zo||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&Zo&&(an=Wc()):(Hs=Re,cf="value"in Hs?Hs.value:Hs.textContent,Zo=!0)),wt=t0(me,_n),0<wt.length&&(_n=new hf(_n,n,null,u,Re),ze.push({event:_n,listeners:wt}),an?_n.data=an:(an=md(u),an!==null&&(_n.data=an)))),(an=gf?Qm(n,u):gd(n,u))&&(_n=t0(me,"onBeforeInput"),0<_n.length&&(wt=new hf("onBeforeInput","beforeinput",null,u,Re),ze.push({event:wt,listeners:_n}),wt.data=an)),ai(ze,n,me,u,Re)}sS(ze,a)})}function bp(n,a,u){return{instance:n,listener:a,currentTarget:u}}function t0(n,a){for(var u=a+"Capture",d=[];n!==null;){var x=n,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Dl(n,u),x!=null&&d.unshift(bp(n,x,S)),x=Dl(n,a),x!=null&&d.push(bp(n,x,S))),n.tag===3)return d;n=n.return}return[]}function fA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function rS(n,a,u,d,x){for(var S=a._reactName,D=[];u!==null&&u!==d;){var V=u,K=V.alternate,me=V.stateNode;if(V=V.tag,K!==null&&K===d)break;V!==5&&V!==26&&V!==27||me===null||(K=me,x?(me=Dl(u,S),me!=null&&D.unshift(bp(u,me,K))):x||(me=Dl(u,S),me!=null&&D.push(bp(u,me,K)))),u=u.return}D.length!==0&&n.push({event:a,listeners:D})}var hA=/\r\n?/g,dA=/\u0000|\uFFFD/g;function oS(n){return(typeof n=="string"?n:""+n).replace(hA,`
`).replace(dA,"")}function lS(n,a){return a=oS(a),oS(n)===a}function Vn(n,a,u,d,x,S){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||yi(n,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&yi(n,""+d);break;case"className":Nt(n,"class",d);break;case"tabIndex":Nt(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(n,u,d);break;case"style":Wo(n,d,S);break;case"data":if(a!=="object"){Nt(n,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){n.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(u);break}d=Gc(""+d),n.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(u==="formAction"?(a!=="input"&&Vn(n,a,"name",x.name,x,null),Vn(n,a,"formEncType",x.formEncType,x,null),Vn(n,a,"formMethod",x.formMethod,x,null),Vn(n,a,"formTarget",x.formTarget,x,null)):(Vn(n,a,"encType",x.encType,x,null),Vn(n,a,"method",x.method,x,null),Vn(n,a,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(u);break}d=Gc(""+d),n.setAttribute(u,d);break;case"onClick":d!=null&&(n.onclick=Mr);break;case"onScroll":d!=null&&gn("scroll",n);break;case"onScrollEnd":d!=null&&gn("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(x.children!=null)throw Error(i(60));n.innerHTML=u}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}u=Gc(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,""+d):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":d===!0?n.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,d):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(u,d):n.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(u):n.setAttribute(u,d);break;case"popover":gn("beforetoggle",n),gn("toggle",n),_t(n,"popover",d);break;case"xlinkActuate":Mt(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Mt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Mt(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Mt(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Mt(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Mt(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":_t(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Um.get(u)||u,_t(n,u,d))}}function cy(n,a,u,d,x,S){switch(u){case"style":Wo(n,d,S);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(x.children!=null)throw Error(i(60));n.innerHTML=u}}break;case"children":typeof d=="string"?yi(n,d):(typeof d=="number"||typeof d=="bigint")&&yi(n,""+d);break;case"onScroll":d!=null&&gn("scroll",n);break;case"onScrollEnd":d!=null&&gn("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ye.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),a=u.slice(2,x?u.length-7:void 0),S=n[Ai]||null,S=S!=null?S[u]:null,typeof S=="function"&&n.removeEventListener(a,S,x),typeof d=="function")){typeof S!="function"&&S!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(a,d,x);break e}u in n?n[u]=d:d===!0?n.setAttribute(u,""):_t(n,u,d)}}}function gs(n,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",n),gn("load",n);var d=!1,x=!1,S;for(S in u)if(u.hasOwnProperty(S)){var D=u[S];if(D!=null)switch(S){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Vn(n,a,S,D,u,null)}}x&&Vn(n,a,"srcSet",u.srcSet,u,null),d&&Vn(n,a,"src",u.src,u,null);return;case"input":gn("invalid",n);var V=S=D=x=null,K=null,me=null;for(d in u)if(u.hasOwnProperty(d)){var Re=u[d];if(Re!=null)switch(d){case"name":x=Re;break;case"type":D=Re;break;case"checked":K=Re;break;case"defaultChecked":me=Re;break;case"value":S=Re;break;case"defaultValue":V=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(i(137,a));break;default:Vn(n,a,d,Re,u,null)}}La(n,S,V,K,me,D,x,!1);return;case"select":gn("invalid",n),d=D=S=null;for(x in u)if(u.hasOwnProperty(x)&&(V=u[x],V!=null))switch(x){case"value":S=V;break;case"defaultValue":D=V;break;case"multiple":d=V;default:Vn(n,a,x,V,u,null)}a=S,u=D,n.multiple=!!d,a!=null?rs(n,!!d,a,!1):u!=null&&rs(n,!!d,u,!0);return;case"textarea":gn("invalid",n),S=x=d=null;for(D in u)if(u.hasOwnProperty(D)&&(V=u[D],V!=null))switch(D){case"value":d=V;break;case"defaultValue":x=V;break;case"children":S=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(91));break;default:Vn(n,a,D,V,u,null)}wi(n,d,x,S);return;case"option":for(K in u)u.hasOwnProperty(K)&&(d=u[K],d!=null)&&(K==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":Vn(n,a,K,d,u,null));return;case"dialog":gn("beforetoggle",n),gn("toggle",n),gn("cancel",n),gn("close",n);break;case"iframe":case"object":gn("load",n);break;case"video":case"audio":for(d=0;d<Sa.length;d++)gn(Sa[d],n);break;case"image":gn("error",n),gn("load",n);break;case"details":gn("toggle",n);break;case"embed":case"source":case"link":gn("error",n),gn("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in u)if(u.hasOwnProperty(me)&&(d=u[me],d!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Vn(n,a,me,d,u,null)}return;default:if(sa(a)){for(Re in u)u.hasOwnProperty(Re)&&(d=u[Re],d!==void 0&&cy(n,a,Re,d,u,void 0));return}}for(V in u)u.hasOwnProperty(V)&&(d=u[V],d!=null&&Vn(n,a,V,d,u,null))}function pA(n,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,D=null,V=null,K=null,me=null,Re=null;for(Te in u){var ze=u[Te];if(u.hasOwnProperty(Te)&&ze!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":K=ze;default:d.hasOwnProperty(Te)||Vn(n,a,Te,null,d,ze)}}for(var xe in d){var Te=d[xe];if(ze=u[xe],d.hasOwnProperty(xe)&&(Te!=null||ze!=null))switch(xe){case"type":S=Te;break;case"name":x=Te;break;case"checked":me=Te;break;case"defaultChecked":Re=Te;break;case"value":D=Te;break;case"defaultValue":V=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,a));break;default:Te!==ze&&Vn(n,a,xe,Te,d,ze)}}xi(n,D,V,K,me,Re,S,x);return;case"select":Te=D=V=xe=null;for(S in u)if(K=u[S],u.hasOwnProperty(S)&&K!=null)switch(S){case"value":break;case"multiple":Te=K;default:d.hasOwnProperty(S)||Vn(n,a,S,null,d,K)}for(x in d)if(S=d[x],K=u[x],d.hasOwnProperty(x)&&(S!=null||K!=null))switch(x){case"value":xe=S;break;case"defaultValue":V=S;break;case"multiple":D=S;default:S!==K&&Vn(n,a,x,S,d,K)}a=V,u=D,d=Te,xe!=null?rs(n,!!u,xe,!1):!!d!=!!u&&(a!=null?rs(n,!!u,a,!0):rs(n,!!u,u?[]:"",!1));return;case"textarea":Te=xe=null;for(V in u)if(x=u[V],u.hasOwnProperty(V)&&x!=null&&!d.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Vn(n,a,V,null,d,x)}for(D in d)if(x=d[D],S=u[D],d.hasOwnProperty(D)&&(x!=null||S!=null))switch(D){case"value":xe=x;break;case"defaultValue":Te=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&Vn(n,a,D,x,d,S)}Tn(n,xe,Te);return;case"option":for(var Et in u)xe=u[Et],u.hasOwnProperty(Et)&&xe!=null&&!d.hasOwnProperty(Et)&&(Et==="selected"?n.selected=!1:Vn(n,a,Et,null,d,xe));for(K in d)xe=d[K],Te=u[K],d.hasOwnProperty(K)&&xe!==Te&&(xe!=null||Te!=null)&&(K==="selected"?n.selected=xe&&typeof xe!="function"&&typeof xe!="symbol":Vn(n,a,K,xe,d,Te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in u)xe=u[Bt],u.hasOwnProperty(Bt)&&xe!=null&&!d.hasOwnProperty(Bt)&&Vn(n,a,Bt,null,d,xe);for(me in d)if(xe=d[me],Te=u[me],d.hasOwnProperty(me)&&xe!==Te&&(xe!=null||Te!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,a));break;default:Vn(n,a,me,xe,d,Te)}return;default:if(sa(a)){for(var Hn in u)xe=u[Hn],u.hasOwnProperty(Hn)&&xe!==void 0&&!d.hasOwnProperty(Hn)&&cy(n,a,Hn,void 0,d,xe);for(Re in d)xe=d[Re],Te=u[Re],!d.hasOwnProperty(Re)||xe===Te||xe===void 0&&Te===void 0||cy(n,a,Re,xe,d,Te);return}}for(var le in u)xe=u[le],u.hasOwnProperty(le)&&xe!=null&&!d.hasOwnProperty(le)&&Vn(n,a,le,null,d,xe);for(ze in d)xe=d[ze],Te=u[ze],!d.hasOwnProperty(ze)||xe===Te||xe==null&&Te==null||Vn(n,a,ze,xe,d,Te)}function cS(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var x=u[d],S=x.transferSize,D=x.initiatorType,V=x.duration;if(S&&V&&cS(D)){for(D=0,V=x.responseEnd,d+=1;d<u.length;d++){var K=u[d],me=K.startTime;if(me>V)break;var Re=K.transferSize,ze=K.initiatorType;Re&&cS(ze)&&(K=K.responseEnd,D+=Re*(K<V?1:(V-me)/(K-me)))}if(--d,a+=8*(S+D)/(x.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var uy=null,fy=null;function n0(n){return n.nodeType===9?n:n.ownerDocument}function uS(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fS(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function hy(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var dy=null;function gA(){var n=window.event;return n&&n.type==="popstate"?n===dy?!1:(dy=n,!0):(dy=null,!1)}var hS=typeof setTimeout=="function"?setTimeout:void 0,vA=typeof clearTimeout=="function"?clearTimeout:void 0,dS=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof dS<"u"?function(n){return dS.resolve(null).then(n).catch(yA)}:hS;function yA(n){setTimeout(function(){throw n})}function pc(n){return n==="head"}function pS(n,a){var u=a,d=0;do{var x=u.nextSibling;if(n.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"||u==="/&"){if(d===0){n.removeChild(x),fh(a);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Sp(n.ownerDocument.documentElement);else if(u==="head"){u=n.ownerDocument.head,Sp(u);for(var S=u.firstChild;S;){var D=S.nextSibling,V=S.nodeName;S[Da]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&S.rel.toLowerCase()==="stylesheet"||u.removeChild(S),S=D}}else u==="body"&&Sp(n.ownerDocument.body);u=x}while(u);fh(a)}function mS(n,a){var u=n;n=0;do{var d=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(n===0)break;n--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||n++;u=d}while(u)}function py(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":py(u),_r(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function _A(n,a,u,d){for(;n.nodeType===1;){var x=u;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Da])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(S=n.getAttribute("rel"),S==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(S!==x.rel||n.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||n.getAttribute("title")!==(x.title==null?null:x.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(S=n.getAttribute("src"),(S!==(x.src==null?null:x.src)||n.getAttribute("type")!==(x.type==null?null:x.type)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&n.getAttribute("name")===S)return n}else return n;if(n=hr(n.nextSibling),n===null)break}return null}function bA(n,a,u){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=hr(n.nextSibling),n===null))return null;return n}function gS(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=hr(n.nextSibling),n===null))return null;return n}function my(n){return n.data==="$?"||n.data==="$~"}function gy(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function SA(n,a){var u=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||u.readyState!=="loading")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function hr(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var vy=null;function vS(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"||u==="/&"){if(a===0)return hr(n.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}n=n.nextSibling}return null}function xS(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return n;a--}else u!=="/$"&&u!=="/&"||a++}n=n.previousSibling}return null}function yS(n,a,u){switch(a=n0(u),n){case"html":if(n=a.documentElement,!n)throw Error(i(452));return n;case"head":if(n=a.head,!n)throw Error(i(453));return n;case"body":if(n=a.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Sp(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);_r(n)}var dr=new Map,_S=new Set;function i0(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yl=J.d;J.d={f:MA,r:EA,D:TA,C:AA,L:wA,m:CA,X:NA,S:RA,M:DA};function MA(){var n=yl.f(),a=za();return n||a}function EA(n){var a=Sr(n);a!==null&&a.tag===5&&a.type==="form"?Fg(a):yl.r(n)}var lh=typeof document>"u"?null:document;function bS(n,a,u){var d=lh;if(d&&typeof a=="string"&&a){var x=zt(a);x='link[rel="'+n+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),_S.has(x)||(_S.add(x),n={rel:n,crossOrigin:u,href:a},d.querySelector(x)===null&&(a=d.createElement("link"),gs(a,"link",n),k(a),d.head.appendChild(a)))}}function TA(n){yl.D(n),bS("dns-prefetch",n,null)}function AA(n,a){yl.C(n,a),bS("preconnect",n,a)}function wA(n,a,u){yl.L(n,a,u);var d=lh;if(d&&n&&a){var x='link[rel="preload"][as="'+zt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+zt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+zt(u.imageSizes)+'"]')):x+='[href="'+zt(n)+'"]';var S=x;switch(a){case"style":S=ch(n);break;case"script":S=uh(n)}dr.has(S)||(n=_({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:n,as:a},u),dr.set(S,n),d.querySelector(x)!==null||a==="style"&&d.querySelector(Mp(S))||a==="script"&&d.querySelector(Ep(S))||(a=d.createElement("link"),gs(a,"link",n),k(a),d.head.appendChild(a)))}}function CA(n,a){yl.m(n,a);var u=lh;if(u&&n){var d=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+zt(d)+'"][href="'+zt(n)+'"]',S=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=uh(n)}if(!dr.has(S)&&(n=_({rel:"modulepreload",href:n},a),dr.set(S,n),u.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ep(S)))return}d=u.createElement("link"),gs(d,"link",n),k(d),u.head.appendChild(d)}}}function RA(n,a,u){yl.S(n,a,u);var d=lh;if(d&&n){var x=Ga(d).hoistableStyles,S=ch(n);a=a||"default";var D=x.get(S);if(!D){var V={loading:0,preload:null};if(D=d.querySelector(Mp(S)))V.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":a},u),(u=dr.get(S))&&xy(n,u);var K=D=d.createElement("link");k(K),gs(K,"link",n),K._p=new Promise(function(me,Re){K.onload=me,K.onerror=Re}),K.addEventListener("load",function(){V.loading|=1}),K.addEventListener("error",function(){V.loading|=2}),V.loading|=4,s0(D,a,d)}D={type:"stylesheet",instance:D,count:1,state:V},x.set(S,D)}}}function NA(n,a){yl.X(n,a);var u=lh;if(u&&n){var d=Ga(u).hoistableScripts,x=uh(n),S=d.get(x);S||(S=u.querySelector(Ep(x)),S||(n=_({src:n,async:!0},a),(a=dr.get(x))&&yy(n,a),S=u.createElement("script"),k(S),gs(S,"link",n),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},d.set(x,S))}}function DA(n,a){yl.M(n,a);var u=lh;if(u&&n){var d=Ga(u).hoistableScripts,x=uh(n),S=d.get(x);S||(S=u.querySelector(Ep(x)),S||(n=_({src:n,async:!0,type:"module"},a),(a=dr.get(x))&&yy(n,a),S=u.createElement("script"),k(S),gs(S,"link",n),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},d.set(x,S))}}function SS(n,a,u,d){var x=(x=he.current)?i0(x):null;if(!x)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ch(u.href),u=Ga(x).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=ch(u.href);var S=Ga(x).hoistableStyles,D=S.get(n);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(n,D),(S=x.querySelector(Mp(n)))&&!S._p&&(D.instance=S,D.state.loading=5),dr.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},dr.set(n,u),S||LA(x,n,u,D.state))),a&&d===null)throw Error(i(528,""));return D}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=uh(u),u=Ga(x).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ch(n){return'href="'+zt(n)+'"'}function Mp(n){return'link[rel="stylesheet"]['+n+"]"}function MS(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function LA(n,a,u,d){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=n.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),gs(a,"link",u),k(a),n.head.appendChild(a))}function uh(n){return'[src="'+zt(n)+'"]'}function Ep(n){return"script[async]"+n}function ES(n,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=n.querySelector('style[data-href~="'+zt(u.href)+'"]');if(d)return a.instance=d,k(d),d;var x=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),k(d),gs(d,"style",x),s0(d,u.precedence,n),a.instance=d;case"stylesheet":x=ch(u.href);var S=n.querySelector(Mp(x));if(S)return a.state.loading|=4,a.instance=S,k(S),S;d=MS(u),(x=dr.get(x))&&xy(d,x),S=(n.ownerDocument||n).createElement("link"),k(S);var D=S;return D._p=new Promise(function(V,K){D.onload=V,D.onerror=K}),gs(S,"link",d),a.state.loading|=4,s0(S,u.precedence,n),a.instance=S;case"script":return S=uh(u.src),(x=n.querySelector(Ep(S)))?(a.instance=x,k(x),x):(d=u,(x=dr.get(S))&&(d=_({},u),yy(d,x)),n=n.ownerDocument||n,x=n.createElement("script"),k(x),gs(x,"link",d),n.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,s0(d,u.precedence,n));return a.instance}function s0(n,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,S=x,D=0;D<d.length;D++){var V=d[D];if(V.dataset.precedence===a)S=V;else if(S!==x)break}S?S.parentNode.insertBefore(n,S.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(n,a.firstChild))}function xy(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function yy(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var a0=null;function TS(n,a,u){if(a0===null){var d=new Map,x=a0=new Map;x.set(u,d)}else x=a0,d=x.get(u),d||(d=new Map,x.set(u,d));if(d.has(n))return d;for(d.set(n,null),u=u.getElementsByTagName(n),x=0;x<u.length;x++){var S=u[x];if(!(S[Da]||S[Kn]||n==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var D=S.getAttribute(a)||"";D=n+D;var V=d.get(D);V?V.push(S):d.set(D,[S])}}return d}function AS(n,a,u){n=n.ownerDocument||n,n.head.insertBefore(u,a==="title"?n.querySelector("head > title"):null)}function UA(n,a,u){if(u===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function wS(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function IA(n,a,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=ch(d.href),S=a.querySelector(Mp(x));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=r0.bind(n),a.then(n,n)),u.state.loading|=4,u.instance=S,k(S);return}S=a.ownerDocument||a,d=MS(d),(x=dr.get(x))&&xy(d,x),S=S.createElement("link"),k(S);var D=S;D._p=new Promise(function(V,K){D.onload=V,D.onerror=K}),gs(S,"link",d),u.instance=S}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(n.count++,u=r0.bind(n),a.addEventListener("load",u),a.addEventListener("error",u))}}var _y=0;function OA(n,a){return n.stylesheets&&n.count===0&&l0(n,n.stylesheets),0<n.count||0<n.imgCount?function(u){var d=setTimeout(function(){if(n.stylesheets&&l0(n,n.stylesheets),n.unsuspend){var S=n.unsuspend;n.unsuspend=null,S()}},6e4+a);0<n.imgBytes&&_y===0&&(_y=62500*mA());var x=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&l0(n,n.stylesheets),n.unsuspend)){var S=n.unsuspend;n.unsuspend=null,S()}},(n.imgBytes>_y?50:800)+a);return n.unsuspend=u,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function r0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)l0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var o0=null;function l0(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,o0=new Map,a.forEach(PA,n),o0=null,r0.call(n))}function PA(n,a){if(!(a.state.loading&4)){var u=o0.get(n);if(u)var d=u.get(null);else{u=new Map,o0.set(n,u);for(var x=n.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var D=x[S];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),d=D)}d&&u.set(null,d)}x=a.instance,D=x.getAttribute("data-precedence"),S=u.get(D)||d,S===d&&u.set(null,x),u.set(D,x),this.count++,d=r0.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),S?S.parentNode.insertBefore(x,S.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(x,n.firstChild)),a.state.loading|=4}}var Tp={$$typeof:L,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function zA(n,a,u,d,x,S,D,V,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.hiddenUpdates=vn(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function CS(n,a,u,d,x,S,D,V,K,me,Re,ze){return n=new zA(n,a,u,D,K,me,Re,ze,V),a=1,S===!0&&(a|=24),S=$n(3,null,null,a),n.current=S,S.stateNode=n,a=Rd(),a.refCount++,n.pooledCache=a,a.refCount++,S.memoizedState={element:d,isDehydrated:u,cache:a},cu(S),n}function RS(n){return n?(n=ro,n):ro}function NS(n,a,u,d,x,S){x=RS(x),d.context===null?d.context=x:d.pendingContext=x,d=Dr(a),d.payload={element:u},S=S===void 0?null:S,S!==null&&(d.callback=S),u=mo(n,d,a),u!==null&&(nn(u,n,a),go(u,n,a))}function DS(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<a?u:a}}function by(n,a){DS(n,a),(n=n.alternate)&&DS(n,a)}function LS(n){if(n.tag===13||n.tag===31){var a=cs(n,67108864);a!==null&&nn(a,n,67108864),by(n,67108864)}}function US(n){if(n.tag===13||n.tag===31){var a=Js();a=$r(a);var u=cs(n,a);u!==null&&nn(u,n,a),by(n,a)}}var c0=!0;function BA(n,a,u,d){var x=Q.T;Q.T=null;var S=J.p;try{J.p=2,Sy(n,a,u,d)}finally{J.p=S,Q.T=x}}function FA(n,a,u,d){var x=Q.T;Q.T=null;var S=J.p;try{J.p=8,Sy(n,a,u,d)}finally{J.p=S,Q.T=x}}function Sy(n,a,u,d){if(c0){var x=My(d);if(x===null)ly(n,a,d,u0,u),OS(n,d);else if(VA(x,n,a,u,d))d.stopPropagation();else if(OS(n,d),a&4&&-1<kA.indexOf(n)){for(;x!==null;){var S=Sr(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var D=He(S.pendingLanes);if(D!==0){var V=S;for(V.pendingLanes|=2,V.entangledLanes|=2;D;){var K=1<<31-ft(D);V.entanglements[1]|=K,D&=~K}Ge(S),(Ct&6)===0&&(di=O()+500,mt(0))}}break;case 31:case 13:V=cs(S,2),V!==null&&nn(V,S,2),za(),by(S,2)}if(S=My(d),S===null&&ly(n,a,d,u0,u),S===x)break;x=S}x!==null&&d.stopPropagation()}else ly(n,a,d,null,u)}}function My(n){return n=of(n),Ey(n)}var u0=null;function Ey(n){if(u0=null,n=br(n),n!==null){var a=c(n);if(a===null)n=null;else{var u=a.tag;if(u===13){if(n=f(a),n!==null)return n;n=null}else if(u===31){if(n=h(a),n!==null)return n;n=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return u0=n,null}function IS(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case Se:return 2;case De:return 8;case Ee:case ht:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var Ty=!1,mc=null,gc=null,vc=null,Ap=new Map,wp=new Map,xc=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OS(n,a){switch(n){case"focusin":case"focusout":mc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":vc=null;break;case"pointerover":case"pointerout":Ap.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(a.pointerId)}}function Cp(n,a,u,d,x,S){return n===null||n.nativeEvent!==S?(n={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:S,targetContainers:[x]},a!==null&&(a=Sr(a),a!==null&&LS(a)),n):(n.eventSystemFlags|=d,a=n.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),n)}function VA(n,a,u,d,x){switch(a){case"focusin":return mc=Cp(mc,n,a,u,d,x),!0;case"dragenter":return gc=Cp(gc,n,a,u,d,x),!0;case"mouseover":return vc=Cp(vc,n,a,u,d,x),!0;case"pointerover":var S=x.pointerId;return Ap.set(S,Cp(Ap.get(S)||null,n,a,u,d,x)),!0;case"gotpointercapture":return S=x.pointerId,wp.set(S,Cp(wp.get(S)||null,n,a,u,d,x)),!0}return!1}function PS(n){var a=br(n.target);if(a!==null){var u=c(a);if(u!==null){if(a=u.tag,a===13){if(a=f(u),a!==null){n.blockedOn=a,es(n.priority,function(){US(u)});return}}else if(a===31){if(a=h(u),a!==null){n.blockedOn=a,es(n.priority,function(){US(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function f0(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var u=My(n.nativeEvent);if(u===null){u=n.nativeEvent;var d=new u.constructor(u.type,u);rf=d,u.target.dispatchEvent(d),rf=null}else return a=Sr(u),a!==null&&LS(a),n.blockedOn=u,!1;a.shift()}return!0}function zS(n,a,u){f0(n)&&u.delete(a)}function HA(){Ty=!1,mc!==null&&f0(mc)&&(mc=null),gc!==null&&f0(gc)&&(gc=null),vc!==null&&f0(vc)&&(vc=null),Ap.forEach(zS),wp.forEach(zS)}function h0(n,a){n.blockedOn===a&&(n.blockedOn=null,Ty||(Ty=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,HA)))}var d0=null;function BS(n){d0!==n&&(d0=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){d0===n&&(d0=null);for(var a=0;a<n.length;a+=3){var u=n[a],d=n[a+1],x=n[a+2];if(typeof d!="function"){if(Ey(d||u)===null)continue;break}var S=Sr(u);S!==null&&(n.splice(a,3),a-=3,np(S,{pending:!0,data:x,method:u.method,action:d},d,x))}}))}function fh(n){function a(K){return h0(K,n)}mc!==null&&h0(mc,n),gc!==null&&h0(gc,n),vc!==null&&h0(vc,n),Ap.forEach(a),wp.forEach(a);for(var u=0;u<xc.length;u++){var d=xc[u];d.blockedOn===n&&(d.blockedOn=null)}for(;0<xc.length&&(u=xc[0],u.blockedOn===null);)PS(u),u.blockedOn===null&&xc.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var x=u[d],S=u[d+1],D=x[Ai]||null;if(typeof S=="function")D||BS(u);else if(D){var V=null;if(S&&S.hasAttribute("formAction")){if(x=S,D=S[Ai]||null)V=D.formAction;else if(Ey(x)!==null)continue}else V=D.action;typeof V=="function"?u[d+1]=V:(u.splice(d,3),d-=3),BS(u)}}}function FS(){function n(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(D){return x=D})},focusReset:"manual",scroll:"manual"})}function a(){x!==null&&(x(),x=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),x!==null&&(x(),x=null)}}}function Ay(n){this._internalRoot=n}p0.prototype.render=Ay.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Js();NS(u,d,n,a,null,null)},p0.prototype.unmount=Ay.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;NS(n.current,2,null,n,null,null),za(),a[Fs]=null}};function p0(n){this._internalRoot=n}p0.prototype.unstable_scheduleHydration=function(n){if(n){var a=Ho();n={blockedOn:null,target:n,priority:a};for(var u=0;u<xc.length&&a!==0&&a<xc[u].priority;u++);xc.splice(u,0,n),u===0&&PS(n)}};var kS=e.version;if(kS!=="19.2.3")throw Error(i(527,kS,"19.2.3"));J.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(a),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var GA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{Ve=m0.inject(GA),Ze=m0}catch{}}return Np.createRoot=function(n,a){if(!s(n))throw Error(i(299));var u=!1,d="",x=jg,S=lp,D=cp;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError)),a=CS(n,1,!1,null,null,u,d,null,x,S,D,FS),n[Fs]=a.current,oy(n),new Ay(a)},Np.hydrateRoot=function(n,a,u){if(!s(n))throw Error(i(299));var d=!1,x="",S=jg,D=lp,V=cp,K=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError),u.formState!==void 0&&(K=u.formState)),a=CS(n,1,!0,a,u??null,d,x,K,S,D,V,FS),a.context=RS(null),u=a.current,d=Js(),d=$r(d),x=Dr(d),x.callback=null,mo(u,x,d),u=d,a.current.lanes=u,ji(a,u),Ge(a),n[Fs]=a.current,oy(n),new p0(a)},Np.version="19.2.3",Np}var QS;function KA(){if(QS)return Ry.exports;QS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ry.exports=JA(),Ry.exports}var JM=KA();const $A=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ew=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),JS=r=>{const e=ew(r);return e.charAt(0).toUpperCase()+e.slice(1)},KM=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),tw=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iw=Oe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:c,iconNode:f,...h},m)=>Oe.createElement("svg",{ref:m,...nw,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:KM("lucide",s),...!c&&!tw(h)&&{"aria-hidden":"true"},...h},[...f.map(([g,y])=>Oe.createElement(g,y)),...Array.isArray(c)?c:[c]]));const Zr=(r,e)=>{const t=Oe.forwardRef(({className:i,...s},c)=>Oe.createElement(iw,{ref:c,iconNode:e,className:KM(`lucide-${$A(JS(r))}`,`lucide-${r}`,i),...s}));return t.displayName=JS(r),t};const sw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],aw=Zr("activity",sw);const rw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ow=Zr("arrow-left",rw);const lw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cw=Zr("arrow-right",lw);const uw=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],fw=Zr("arrow-up-right",uw);const hw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],dw=Zr("crosshair",hw);const pw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mw=Zr("eye",pw);const gw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vw=Zr("file-text",gw);const xw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],KS=Zr("lock",xw);const yw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_w=Zr("shield",yw);const bw=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Sw=Zr("skull",bw);const Mw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$M=Zr("zap",Mw),$S=({text:r,className:e})=>{const[t,i]=Oe.useState(!1);return Oe.useEffect(()=>{const s=()=>{i(!0),setTimeout(()=>i(!1),300),setTimeout(s,Math.random()*4e3+2e3)},c=setTimeout(s,Math.random()*2e3);return()=>clearTimeout(c)},[]),W.jsxs("div",{className:`relative inline-block ${e}`,children:[W.jsx("span",{className:"relative z-10",children:r}),t&&W.jsxs(W.Fragment,{children:[W.jsx("span",{className:"absolute top-0 left-0 -z-10 w-full h-full text-red-500 opacity-70 animate-glitch-1 translate-x-[2px]",children:r}),W.jsx("span",{className:"absolute top-0 left-0 -z-10 w-full h-full text-blue-500 opacity-70 animate-glitch-2 -translate-x-[2px]",children:r})]})]})},Ew=()=>{const[r,e]=Oe.useState(0),[t,i]=Oe.useState(12),[s,c]=Oe.useState(40);Oe.useEffect(()=>{const m=setInterval(()=>{e(g=>g>=100?0:g+1),Math.random()>.5&&i(Math.floor(Math.random()*40)+10),Math.random()>.5&&c(Math.floor(Math.random()*30)+30)},50);return()=>clearInterval(m)},[]);const f=Math.floor(r/5),h="["+"|".repeat(f)+".".repeat(20-f)+"]";return W.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden pointer-events-none perspective-[1200px] z-0 -mt-8",children:W.jsxs("div",{className:"w-64 h-80 relative transform-style-3d animate-float-rotate-aggressive border-2 border-white/40 bg-black/95 shadow-[0_0_50px_rgba(255,255,255,0.15)] backdrop-blur-xl",children:[W.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[size:24px_24px]"}),W.jsxs("div",{className:"p-5 relative z-10 flex flex-col h-full justify-between",children:[W.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-white/20 pb-4",children:[W.jsxs("div",{className:"flex items-center gap-1.5",children:[W.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-none animate-pulse"}),W.jsx("div",{className:"w-2.5 h-2.5 bg-white/50 rounded-none"})]}),W.jsx("div",{className:"text-[7px] font-mono text-white font-bold tracking-widest uppercase",children:"SYSTEM BY NANDO M"})]}),W.jsxs("div",{className:"flex-1 flex items-center justify-center relative perspective-[600px]",children:[W.jsx("div",{className:"w-24 h-24 absolute transform-style-3d animate-spin-slow-3d opacity-60 border border-white/50 bg-white/5"}),W.jsx("div",{className:"w-12 h-12 absolute transform-style-3d animate-spin-reverse-3d opacity-90 border-2 border-white bg-white/20"})]}),W.jsxs("div",{className:"mt-4 font-mono text-[9px] text-white",children:[W.jsxs("div",{className:"flex justify-between mb-1 uppercase tracking-wider font-bold",children:[W.jsx("span",{children:"Processing"}),W.jsxs("span",{children:[r,"%"]})]}),W.jsx("div",{className:"text-white tracking-tighter whitespace-nowrap overflow-hidden",children:h}),W.jsxs("div",{className:"flex justify-between mt-2 opacity-70",children:[W.jsxs("span",{children:["CPU: ",t,"%"]}),W.jsxs("span",{children:["MEM: ",s,"%"]})]})]})]}),W.jsx("div",{className:"absolute top-0 left-0 w-full h-[10px] bg-white/20 animate-scan-fast z-20 mix-blend-overlay"})]})})},Tw=({text:r})=>W.jsx("div",{className:"w-full overflow-hidden bg-black text-white py-3 flex relative z-20 border-y border-white/20",children:W.jsx("div",{className:"flex whitespace-nowrap animate-marquee",children:[...Array(10)].map((e,t)=>W.jsxs("span",{className:"text-sm font-bold font-mono tracking-widest uppercase mx-8 flex items-center gap-4 hover:text-red-500 transition-colors cursor-default",children:[r," ",W.jsx($M,{size:10,className:"fill-current"})]},t))})}),Aw=({navigateTo:r,setCursorHovering:e})=>W.jsxs(W.Fragment,{children:[W.jsx("header",{className:"relative pt-32 pb-0 px-6 md:px-12 max-w-[1800px] mx-auto min-h-[90vh] flex flex-col justify-between",children:W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-0 h-full border border-black/10 relative z-10 shadow-2xl shadow-black/5 bg-white",children:[W.jsxs("div",{className:"md:col-span-8 p-8 md:p-16 border-b md:border-b-0 md:border-r border-black/10 flex flex-col justify-center relative bg-white z-10 group overflow-hidden",children:[W.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#f0f0f0_1px,transparent_1px),linear-gradient(to_bottom,#f0f0f0_1px,transparent_1px)] bg-[size:4rem_4rem] opacity-50"}),W.jsxs("div",{className:"relative z-10 mb-4",children:[W.jsxs("div",{className:"text-[10px] font-mono text-black tracking-widest flex items-center gap-2 border border-black/10 px-3 py-1 bg-white w-fit mb-4",children:[W.jsx(aw,{size:12,className:"animate-pulse"}),"SYS_INIT_V.2.0 :: ONLINE"]}),W.jsx("h2",{className:"text-2xl font-black tracking-widest uppercase text-black",children:"NANDO M"})]}),W.jsxs("div",{className:"relative z-10 mt-8",children:[W.jsxs("h1",{className:"text-5xl md:text-8xl font-bold tracking-tighter leading-[0.9] mb-8 text-black uppercase",children:[W.jsx($S,{text:"I ENGINEER",className:"block"}),W.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-black via-neutral-500 to-black animate-gradient-x",children:"HIGH-SCALE"})," ",W.jsx("br",{}),W.jsx($S,{text:"DIGITAL EXPERIENCES",className:"block"})]}),W.jsxs("p",{className:"max-w-md text-sm md:text-base text-neutral-600 leading-relaxed font-mono border-l-4 border-black pl-6 py-2",children:["Integrating advanced design systems with functional precision. ",W.jsx("span",{className:"bg-black text-white px-1 mx-1",children:"No templates."})," No shortcuts. Just surgical execution for brands that demand excellence."]})]}),W.jsx("div",{className:"mt-12 flex items-center gap-6 relative z-10",children:W.jsx("button",{onClick:()=>r("home","experience"),onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),className:"bg-black text-white px-10 py-5 text-xs font-bold tracking-widest uppercase hover:bg-white hover:text-black hover:border-black border border-transparent transition-all duration-200 flex items-center gap-3 shadow-[4px_4px_0px_rgba(0,0,0,0.2)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px]",children:W.jsx("span",{children:"VIEW PORTFOLIO"})})})]}),W.jsxs("div",{className:"md:col-span-4 bg-[#050505] text-white p-8 md:p-12 flex flex-col justify-between relative overflow-hidden group perspective-[1000px]",children:[W.jsx("div",{className:"text-center font-bold font-mono tracking-[0.2em] text-xs text-white/50 mb-4 animate-pulse",children:"FULLSTACK  UI/UX  VD  D.ARCH"}),W.jsx(Ew,{}),W.jsxs("div",{className:"relative z-10 pointer-events-none mt-auto p-6 border-t border-white/10 bg-gradient-to-t from-black via-black/80 to-transparent",children:[W.jsx("div",{className:"flex justify-between items-center mb-6 border-b border-white/20 pb-2",children:W.jsxs("h3",{className:"text-xl font-bold leading-none text-white uppercase",children:["25 GLOBAL ",W.jsx("br",{}),"PRINCIPLES"]})}),W.jsxs("div",{className:"grid grid-cols-2 gap-4 font-mono text-[10px] text-neutral-400",children:[W.jsxs("div",{className:"border-l border-white/30 pl-3",children:[W.jsx("div",{className:"text-white font-bold mb-1 uppercase",children:"> EXECUTE"}),W.jsx("div",{children:"H.E.L.P. SYSTEM"}),W.jsx("div",{className:"text-green-500 uppercase",children:"ACTIVE"})]}),W.jsxs("div",{className:"border-l border-white/30 pl-3",children:[W.jsx("div",{className:"text-white font-bold mb-1 uppercase",children:"> OPTIMIZE"}),W.jsx("div",{children:"HIERARCHY"}),W.jsx("div",{className:"text-green-500 uppercase",children:"COMPLETE"})]})]})]})]})]})}),W.jsx(Tw,{text:"UI/UX DESIGN // VISUAL STRATEGY // SYSTEM ARCHITECTURE // PRODUCT SCALABILITY // DESIGN ENGINEERING //"})]}),e1=({text:r,className:e})=>{const[t,i]=Oe.useState(!1);return Oe.useEffect(()=>{const s=()=>{i(!0),setTimeout(()=>i(!1),300),setTimeout(s,Math.random()*4e3+2e3)},c=setTimeout(s,Math.random()*2e3);return()=>clearTimeout(c)},[]),W.jsxs("div",{className:`relative inline-block ${e}`,children:[W.jsx("span",{className:"relative z-10",children:r}),t&&W.jsxs(W.Fragment,{children:[W.jsx("span",{className:"absolute top-0 left-0 -z-10 w-full h-full text-red-500 opacity-70 animate-glitch-1 translate-x-[2px]",children:r}),W.jsx("span",{className:"absolute top-0 left-0 -z-10 w-full h-full text-blue-500 opacity-70 animate-glitch-2 -translate-x-[2px]",children:r})]})]})},U_=({children:r,delay:e=0})=>{const[t,i]=Oe.useState(!1),s=Oe.useRef(null);return Oe.useEffect(()=>{const c=new IntersectionObserver(([f])=>{f?.isIntersecting&&i(!0)},{threshold:.1});return s.current&&c.observe(s.current),()=>c.disconnect()},[]),W.jsx("div",{ref:s,className:`transition-all duration-700 transform ${t?"opacity-100 translate-y-0 filter blur-0":"opacity-0 translate-y-12 filter blur-sm"}`,style:{transitionDelay:`${e}ms`},children:r})},t1=({children:r,number:e})=>W.jsx(U_,{children:W.jsxs("div",{className:"flex items-baseline gap-4 mb-12 border-b border-black/10 pb-4",children:[W.jsx("span",{className:"text-[10px] font-mono text-black bg-black/5 px-2 py-1 rounded-sm font-bold tracking-widest",children:e}),W.jsx("h2",{className:"text-3xl md:text-5xl font-light tracking-tighter uppercase text-black",children:r})]})}),ww=[{id:"p1",title:"Nexus Liquidity Systems",year:"2025",description:"Autonomous liquidity aggregation protocol designed for high-frequency institutional trading environments.",tags:["React Architecture","WebSockets","Real-time Data"],image:"https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=2600&auto=format&fit=crop"},{id:"p2",title:"Core Neural Grid",year:"2024",description:"Visualizing complex neural network node activation for private AI research facilities.",tags:["WebGL","Data Visualization","System Design"],image:"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2600&auto=format&fit=crop"},{id:"p3",title:"Velvet Logistics",year:"2024",description:"End-to-end logistics tracking dashboard featuring predictive supply chain analytics.",tags:["Dashboard Design","UX Engineering","Automation"],image:"https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?q=80&w=2600&auto=format&fit=crop"}],Cw=[{step:"UI/UX",title:"User Experience",desc:"Designing intuitive pathways that convert complex logic into seamless, high-conversion interactions."},{step:"FULLSTACK",title:"Engineering",desc:"Building robust, scalable architectures from database schema to pixel-perfect frontend execution."},{step:"VISUAL",title:"Visual Design",desc:"Crafting high-fidelity aesthetics that communicate brand authority, precision, and high value."},{step:"D.ARCH",title:"Digital Arch.",desc:"Engineering the structural foundation for high-growth digital ecosystems and autonomous systems."}],Rw=({navigateTo:r,setCursorHovering:e})=>W.jsxs("div",{className:"bg-white",children:[W.jsxs("section",{id:"experience",className:"py-24 px-6 md:px-12 max-w-[1800px] mx-auto",children:[W.jsx(t1,{number:"// 01",children:"Digital Architecture"}),W.jsx("div",{className:"grid grid-cols-1 gap-4",children:ww.map((t,i)=>W.jsx(U_,{delay:i*100,children:W.jsxs("div",{className:"group relative border border-black/10 hover:border-black transition-colors duration-300 cursor-pointer bg-white overflow-hidden p-6 md:p-8",onClick:()=>r("project",t.id),onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),children:[W.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-black scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left z-20"}),W.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center",children:[W.jsxs("div",{className:"flex-1 order-2 md:order-1 flex flex-col justify-between h-full",children:[W.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-black/5 pb-2",children:[W.jsxs("span",{className:"text-sm font-mono text-black/40 group-hover:text-black transition-colors",children:["0",i+1]}),W.jsx("span",{className:"text-sm font-mono font-bold",children:t.year})]}),W.jsxs("div",{children:[W.jsx("h3",{className:"text-2xl font-bold tracking-tighter mb-2 uppercase group-hover:translate-x-2 transition-transform",children:W.jsx(e1,{text:t.title,className:"inline-block"})}),W.jsx("p",{className:"text-sm text-neutral-600 line-clamp-3 mb-4 max-w-lg leading-relaxed",children:t.description}),W.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map(s=>W.jsx("span",{className:"text-[9px] font-mono border border-black/20 px-2 py-1 bg-neutral-50",children:s},s))})]}),W.jsx("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest mt-4 opacity-50 group-hover:opacity-100 transition-opacity",children:"[ VIEW CASE STUDY ]"})]}),W.jsxs("div",{className:"order-1 md:order-2 w-full md:w-[320px] aspect-[1.414/1] relative overflow-hidden bg-black border border-black shadow-lg group-hover:shadow-2xl transition-all duration-500",children:[W.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-700"}),W.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-30 pointer-events-none transition-opacity bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay"})]})]})]})},t.id))})]}),W.jsxs("section",{id:"skillset",className:"py-24 px-6 md:px-12 max-w-[1800px] mx-auto",children:[W.jsx(t1,{number:"// 02",children:"Technical Arsenal"}),W.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Cw.map((t,i)=>W.jsx(U_,{delay:i*100,children:W.jsxs("div",{className:"bg-white border border-black/10 p-12 min-h-[300px] flex flex-col justify-between hover:bg-black hover:text-white transition-all duration-300 group relative overflow-hidden shadow-lg hover:shadow-2xl",children:[W.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-black/10 to-transparent opacity-0 group-hover:opacity-100 animate-scan-fast pointer-events-none"}),W.jsx("div",{className:"flex justify-between items-start relative z-10",children:W.jsx("span",{className:"text-5xl font-bold text-black group-hover:text-white font-mono transition-colors",children:W.jsx(e1,{text:t.step,className:"block"})})}),W.jsxs("div",{className:"relative z-10 mt-auto",children:[W.jsx("h3",{className:"text-xl font-bold tracking-tight mb-2 uppercase",children:t.title}),W.jsx("p",{className:"text-sm text-neutral-600 group-hover:text-neutral-400 leading-relaxed font-mono",children:t.desc})]}),W.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-black/5 group-hover:bg-white/10 rounded-tl-full transition-colors"})]})},t.step))})]})]});const cx="182",Nw={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Dw={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},eE=0,I_=1,tE=2,Lw=3,nE=0,kh=1,qp=2,Wu=3,Rl=0,na=1,Xr=2,Po=0,Yu=1,O_=2,P_=3,z_=4,iE=5,Cc=100,sE=101,aE=102,rE=103,oE=104,lE=200,cE=201,uE=202,fE=203,hv=204,dv=205,hE=206,dE=207,pE=208,mE=209,gE=210,vE=211,xE=212,yE=213,_E=214,pv=0,mv=1,gv=2,Ju=3,vv=4,xv=5,yv=6,_v=7,Sm=0,bE=1,SE=2,mr=0,rb=1,ob=2,lb=3,ux=4,cb=5,ub=6,fb=7,B_="attached",ME="detached",fx=300,zo=301,Uc=302,im=303,sm=304,$h=306,am=1e3,wa=1001,rm=1002,Ii=1003,hb=1004,Uw=1004,zh=1005,Iw=1005,qn=1006,Yp=1007,Ow=1007,Io=1008,Pw=1008,ea=1009,db=1010,pb=1011,Gh=1012,hx=1013,gr=1014,Is=1015,Yr=1016,dx=1017,px=1018,Wh=1020,mb=35902,gb=35899,vb=1021,xb=1022,Os=1023,Bo=1026,Nc=1027,mx=1028,Mm=1029,Ku=1030,gx=1031,zw=1032,vx=1033,Zp=33776,Qp=33777,Jp=33778,Kp=33779,bv=35840,Sv=35841,Mv=35842,Ev=35843,Tv=36196,Av=37492,wv=37496,Cv=37488,Rv=37489,Nv=37490,Dv=37491,Lv=37808,Uv=37809,Iv=37810,Ov=37811,Pv=37812,zv=37813,Bv=37814,Fv=37815,kv=37816,Vv=37817,Hv=37818,Gv=37819,Wv=37820,Xv=37821,jv=36492,qv=36494,Yv=36495,Zv=36283,Qv=36284,Jv=36285,Kv=36286,EE=2200,TE=2201,AE=2202,om=2300,$v=2301,lv=2302,Xu=2400,ju=2401,lm=2402,xx=2500,yb=2501,Bw=0,Fw=1,kw=2,wE=3200,Vw=3201,Hw=3202,Gw=3203,zc=0,CE=1,Al="",Us="srgb",Ic="srgb-linear",cm="linear",Pn="srgb",Ww="",Xw="rg",jw="ga",qw=0,Hu=7680,Yw=7681,Zw=7682,Qw=7683,Jw=34055,Kw=34056,$w=5386,eC=512,tC=513,nC=514,iC=515,sC=516,aC=517,rC=518,F_=519,RE=512,NE=513,DE=514,yx=515,LE=516,UE=517,_x=518,IE=519,um=35044,oC=35048,lC=35040,cC=35045,uC=35049,fC=35041,hC=35046,dC=35050,pC=35042,mC="100",k_="300 es",ka=2e3,Xh=2001,gC={COMPUTE:"compute",RENDER:"render"},vC={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},xC={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function OE(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const yC={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Bh(r,e){return new yC[r](e)}function PE(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function fm(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function zE(){const r=fm("canvas");return r.style.display="block",r}const n1={};let Oc=null;function _C(r){Oc=r}function bC(){return Oc}function hm(...r){const e="THREE."+r.shift();Oc?Oc("log",e,...r):console.log(e,...r)}function ct(...r){const e="THREE."+r.shift();Oc?Oc("warn",e,...r):console.warn(e,...r)}function Rt(...r){const e="THREE."+r.shift();Oc?Oc("error",e,...r):console.error(e,...r)}function jh(...r){const e=r.join(" ");e in n1||(n1[e]=!0,ct(...r))}function SC(r,e,t){return new Promise(function(i,s){function c(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:s();break;case r.TIMEOUT_EXPIRED:setTimeout(c,t);break;default:i()}}setTimeout(c,t)})}class Fo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const c=s.indexOf(t);c!==-1&&s.splice(c,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let c=0,f=s.length;c<f;c++)s[c].call(this,e);e.target=null}}}const Ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let i1=1234567;const Zu=Math.PI/180,qh=180/Math.PI;function Va(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ns[r&255]+Ns[r>>8&255]+Ns[r>>16&255]+Ns[r>>24&255]+"-"+Ns[e&255]+Ns[e>>8&255]+"-"+Ns[e>>16&15|64]+Ns[e>>24&255]+"-"+Ns[t&63|128]+Ns[t>>8&255]+"-"+Ns[t>>16&255]+Ns[t>>24&255]+Ns[i&255]+Ns[i>>8&255]+Ns[i>>16&255]+Ns[i>>24&255]).toLowerCase()}function Vt(r,e,t){return Math.max(e,Math.min(t,r))}function _b(r,e){return(r%e+e)%e}function MC(r,e,t,i,s){return i+(r-e)*(s-i)/(t-e)}function EC(r,e,t){return r!==e?(t-r)/(e-r):0}function $p(r,e,t){return(1-t)*r+t*e}function TC(r,e,t,i){return $p(r,e,1-Math.exp(-t*i))}function AC(r,e=1){return e-Math.abs(_b(r,e*2)-e)}function wC(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function CC(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function RC(r,e){return r+Math.floor(Math.random()*(e-r+1))}function NC(r,e){return r+Math.random()*(e-r)}function DC(r){return r*(.5-Math.random())}function LC(r){r!==void 0&&(i1=r);let e=i1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function UC(r){return r*Zu}function IC(r){return r*qh}function OC(r){return(r&r-1)===0&&r!==0}function PC(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function zC(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function BC(r,e,t,i,s){const c=Math.cos,f=Math.sin,h=c(t/2),m=f(t/2),g=c((e+i)/2),y=f((e+i)/2),_=c((e-i)/2),b=f((e-i)/2),M=c((i-e)/2),A=f((i-e)/2);switch(s){case"XYX":r.set(h*y,m*_,m*b,h*g);break;case"YZY":r.set(m*b,h*y,m*_,h*g);break;case"ZXZ":r.set(m*_,m*b,h*y,h*g);break;case"XZX":r.set(h*y,m*A,m*M,h*g);break;case"YXY":r.set(m*M,h*y,m*A,h*g);break;case"ZYZ":r.set(m*A,m*M,h*y,h*g);break;default:ct("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ta(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function sn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const FC={DEG2RAD:Zu,RAD2DEG:qh,generateUUID:Va,clamp:Vt,euclideanModulo:_b,mapLinear:MC,inverseLerp:EC,lerp:$p,damp:TC,pingpong:AC,smoothstep:wC,smootherstep:CC,randInt:RC,randFloat:NC,randFloatSpread:DC,seededRandom:LC,degToRad:UC,radToDeg:IC,isPowerOfTwo:OC,ceilPowerOfTwo:PC,floorPowerOfTwo:zC,setQuaternionFromProperEuler:BC,normalize:sn,denormalize:ta};class Fe{constructor(e=0,t=0){Fe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),c=this.x-e.x,f=this.y-e.y;return this.x=c*i-f*s+e.x,this.y=c*s+f*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ca{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,c,f,h){let m=i[s+0],g=i[s+1],y=i[s+2],_=i[s+3],b=c[f+0],M=c[f+1],A=c[f+2],R=c[f+3];if(h<=0){e[t+0]=m,e[t+1]=g,e[t+2]=y,e[t+3]=_;return}if(h>=1){e[t+0]=b,e[t+1]=M,e[t+2]=A,e[t+3]=R;return}if(_!==R||m!==b||g!==M||y!==A){let w=m*b+g*M+y*A+_*R;w<0&&(b=-b,M=-M,A=-A,R=-R,w=-w);let E=1-h;if(w<.9995){const N=Math.acos(w),L=Math.sin(N);E=Math.sin(E*N)/L,h=Math.sin(h*N)/L,m=m*E+b*h,g=g*E+M*h,y=y*E+A*h,_=_*E+R*h}else{m=m*E+b*h,g=g*E+M*h,y=y*E+A*h,_=_*E+R*h;const N=1/Math.sqrt(m*m+g*g+y*y+_*_);m*=N,g*=N,y*=N,_*=N}}e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,c,f){const h=i[s],m=i[s+1],g=i[s+2],y=i[s+3],_=c[f],b=c[f+1],M=c[f+2],A=c[f+3];return e[t]=h*A+y*_+m*M-g*b,e[t+1]=m*A+y*b+g*_-h*M,e[t+2]=g*A+y*M+h*b-m*_,e[t+3]=y*A-h*_-m*b-g*M,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,c=e._z,f=e._order,h=Math.cos,m=Math.sin,g=h(i/2),y=h(s/2),_=h(c/2),b=m(i/2),M=m(s/2),A=m(c/2);switch(f){case"XYZ":this._x=b*y*_+g*M*A,this._y=g*M*_-b*y*A,this._z=g*y*A+b*M*_,this._w=g*y*_-b*M*A;break;case"YXZ":this._x=b*y*_+g*M*A,this._y=g*M*_-b*y*A,this._z=g*y*A-b*M*_,this._w=g*y*_+b*M*A;break;case"ZXY":this._x=b*y*_-g*M*A,this._y=g*M*_+b*y*A,this._z=g*y*A+b*M*_,this._w=g*y*_-b*M*A;break;case"ZYX":this._x=b*y*_-g*M*A,this._y=g*M*_+b*y*A,this._z=g*y*A-b*M*_,this._w=g*y*_+b*M*A;break;case"YZX":this._x=b*y*_+g*M*A,this._y=g*M*_+b*y*A,this._z=g*y*A-b*M*_,this._w=g*y*_-b*M*A;break;case"XZY":this._x=b*y*_-g*M*A,this._y=g*M*_-b*y*A,this._z=g*y*A+b*M*_,this._w=g*y*_+b*M*A;break;default:ct("Quaternion: .setFromEuler() encountered an unknown order: "+f)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],c=t[8],f=t[1],h=t[5],m=t[9],g=t[2],y=t[6],_=t[10],b=i+h+_;if(b>0){const M=.5/Math.sqrt(b+1);this._w=.25/M,this._x=(y-m)*M,this._y=(c-g)*M,this._z=(f-s)*M}else if(i>h&&i>_){const M=2*Math.sqrt(1+i-h-_);this._w=(y-m)/M,this._x=.25*M,this._y=(s+f)/M,this._z=(c+g)/M}else if(h>_){const M=2*Math.sqrt(1+h-i-_);this._w=(c-g)/M,this._x=(s+f)/M,this._y=.25*M,this._z=(m+y)/M}else{const M=2*Math.sqrt(1+_-i-h);this._w=(f-s)/M,this._x=(c+g)/M,this._y=(m+y)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,c=e._z,f=e._w,h=t._x,m=t._y,g=t._z,y=t._w;return this._x=i*y+f*h+s*g-c*m,this._y=s*y+f*m+c*h-i*g,this._z=c*y+f*g+i*m-s*h,this._w=f*y-i*h-s*m-c*g,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,s=e._y,c=e._z,f=e._w,h=this.dot(e);h<0&&(i=-i,s=-s,c=-c,f=-f,h=-h);let m=1-t;if(h<.9995){const g=Math.acos(h),y=Math.sin(g);m=Math.sin(m*g)/y,t=Math.sin(t*g)/y,this._x=this._x*m+i*t,this._y=this._y*m+s*t,this._z=this._z*m+c*t,this._w=this._w*m+f*t,this._onChangeCallback()}else this._x=this._x*m+i*t,this._y=this._y*m+s*t,this._z=this._z*m+c*t,this._w=this._w*m+f*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),c=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),c*Math.sin(t),c*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(s1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(s1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,c=e.elements;return this.x=c[0]*t+c[3]*i+c[6]*s,this.y=c[1]*t+c[4]*i+c[7]*s,this.z=c[2]*t+c[5]*i+c[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,c=e.elements,f=1/(c[3]*t+c[7]*i+c[11]*s+c[15]);return this.x=(c[0]*t+c[4]*i+c[8]*s+c[12])*f,this.y=(c[1]*t+c[5]*i+c[9]*s+c[13])*f,this.z=(c[2]*t+c[6]*i+c[10]*s+c[14])*f,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,c=e.x,f=e.y,h=e.z,m=e.w,g=2*(f*s-h*i),y=2*(h*t-c*s),_=2*(c*i-f*t);return this.x=t+m*g+f*_-h*y,this.y=i+m*y+h*g-c*_,this.z=s+m*_+c*y-f*g,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,c=e.elements;return this.x=c[0]*t+c[4]*i+c[8]*s,this.y=c[1]*t+c[5]*i+c[9]*s,this.z=c[2]*t+c[6]*i+c[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,c=e.z,f=t.x,h=t.y,m=t.z;return this.x=s*m-c*h,this.y=c*f-i*m,this.z=i*h-s*f,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Uy.copy(this).projectOnVector(e),this.sub(Uy)}reflect(e){return this.sub(Uy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Uy=new Y,s1=new Ca;class $t{constructor(e,t,i,s,c,f,h,m,g){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,c,f,h,m,g)}set(e,t,i,s,c,f,h,m,g){const y=this.elements;return y[0]=e,y[1]=s,y[2]=h,y[3]=t,y[4]=c,y[5]=m,y[6]=i,y[7]=f,y[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,c=this.elements,f=i[0],h=i[3],m=i[6],g=i[1],y=i[4],_=i[7],b=i[2],M=i[5],A=i[8],R=s[0],w=s[3],E=s[6],N=s[1],L=s[4],U=s[7],B=s[2],z=s[5],H=s[8];return c[0]=f*R+h*N+m*B,c[3]=f*w+h*L+m*z,c[6]=f*E+h*U+m*H,c[1]=g*R+y*N+_*B,c[4]=g*w+y*L+_*z,c[7]=g*E+y*U+_*H,c[2]=b*R+M*N+A*B,c[5]=b*w+M*L+A*z,c[8]=b*E+M*U+A*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],c=e[3],f=e[4],h=e[5],m=e[6],g=e[7],y=e[8];return t*f*y-t*h*g-i*c*y+i*h*m+s*c*g-s*f*m}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],c=e[3],f=e[4],h=e[5],m=e[6],g=e[7],y=e[8],_=y*f-h*g,b=h*m-y*c,M=g*c-f*m,A=t*_+i*b+s*M;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/A;return e[0]=_*R,e[1]=(s*g-y*i)*R,e[2]=(h*i-s*f)*R,e[3]=b*R,e[4]=(y*t-s*m)*R,e[5]=(s*c-h*t)*R,e[6]=M*R,e[7]=(i*m-g*t)*R,e[8]=(f*t-i*c)*R,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,c,f,h){const m=Math.cos(c),g=Math.sin(c);return this.set(i*m,i*g,-i*(m*f+g*h)+f+e,-s*g,s*m,-s*(-g*f+m*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply(Iy.makeScale(e,t)),this}rotate(e){return this.premultiply(Iy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Iy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Iy=new $t,a1=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),r1=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function kC(){const r={enabled:!0,workingColorSpace:Ic,spaces:{},convert:function(s,c,f){return this.enabled===!1||c===f||!c||!f||(this.spaces[c].transfer===Pn&&(s.r=Cl(s.r),s.g=Cl(s.g),s.b=Cl(s.b)),this.spaces[c].primaries!==this.spaces[f].primaries&&(s.applyMatrix3(this.spaces[c].toXYZ),s.applyMatrix3(this.spaces[f].fromXYZ)),this.spaces[f].transfer===Pn&&(s.r=Vh(s.r),s.g=Vh(s.g),s.b=Vh(s.b))),s},workingToColorSpace:function(s,c){return this.convert(s,this.workingColorSpace,c)},colorSpaceToWorking:function(s,c){return this.convert(s,c,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Al?cm:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,c=this.workingColorSpace){return s.fromArray(this.spaces[c].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,c,f){return s.copy(this.spaces[c].toXYZ).multiply(this.spaces[f].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,c){return jh("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(s,c)},toWorkingColorSpace:function(s,c){return jh("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(s,c)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return r.define({[Ic]:{primaries:e,whitePoint:i,transfer:cm,toXYZ:a1,fromXYZ:r1,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Us},outputColorSpaceConfig:{drawingBufferColorSpace:Us}},[Us]:{primaries:e,whitePoint:i,transfer:Pn,toXYZ:a1,fromXYZ:r1,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Us}}}),r}const bn=kC();function Cl(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Vh(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let hh;class BE{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{hh===void 0&&(hh=fm("canvas")),hh.width=e.width,hh.height=e.height;const s=hh.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=hh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=fm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),c=s.data;for(let f=0;f<c.length;f++)c[f]=Cl(c[f]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Cl(t[i]/255)*255):t[i]=Cl(t[i]);return{data:t,width:e.width,height:e.height}}else return ct("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let VC=0;class Dc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:VC++}),this.uuid=Va(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let c;if(Array.isArray(s)){c=[];for(let f=0,h=s.length;f<h;f++)s[f].isDataTexture?c.push(Oy(s[f].image)):c.push(Oy(s[f]))}else c=Oy(s);i.url=c}return t||(e.images[this.uuid]=i),i}}function Oy(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?BE.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(ct("Texture: Unable to serialize Texture."),{})}let HC=0;const Py=new Y;class Ti extends Fo{constructor(e=Ti.DEFAULT_IMAGE,t=Ti.DEFAULT_MAPPING,i=wa,s=wa,c=qn,f=Io,h=Os,m=ea,g=Ti.DEFAULT_ANISOTROPY,y=Al){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:HC++}),this.uuid=Va(),this.name="",this.source=new Dc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=c,this.minFilter=f,this.anisotropy=g,this.format=h,this.internalFormat=null,this.type=m,this.offset=new Fe(0,0),this.repeat=new Fe(1,1),this.center=new Fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Py).x}get height(){return this.source.getSize(Py).y}get depth(){return this.source.getSize(Py).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){ct(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ct(`Texture.setValues(): property '${t}' does not exist.`);continue}s&&i&&s.isVector2&&i.isVector2||s&&i&&s.isVector3&&i.isVector3||s&&i&&s.isMatrix3&&i.isMatrix3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case am:e.x=e.x-Math.floor(e.x);break;case wa:e.x=e.x<0?0:1;break;case rm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case am:e.y=e.y-Math.floor(e.y);break;case wa:e.y=e.y<0?0:1;break;case rm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ti.DEFAULT_IMAGE=null;Ti.DEFAULT_MAPPING=fx;Ti.DEFAULT_ANISOTROPY=1;class jn{constructor(e=0,t=0,i=0,s=1){jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,c=this.w,f=e.elements;return this.x=f[0]*t+f[4]*i+f[8]*s+f[12]*c,this.y=f[1]*t+f[5]*i+f[9]*s+f[13]*c,this.z=f[2]*t+f[6]*i+f[10]*s+f[14]*c,this.w=f[3]*t+f[7]*i+f[11]*s+f[15]*c,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,c;const m=e.elements,g=m[0],y=m[4],_=m[8],b=m[1],M=m[5],A=m[9],R=m[2],w=m[6],E=m[10];if(Math.abs(y-b)<.01&&Math.abs(_-R)<.01&&Math.abs(A-w)<.01){if(Math.abs(y+b)<.1&&Math.abs(_+R)<.1&&Math.abs(A+w)<.1&&Math.abs(g+M+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const L=(g+1)/2,U=(M+1)/2,B=(E+1)/2,z=(y+b)/4,H=(_+R)/4,j=(A+w)/4;return L>U&&L>B?L<.01?(i=0,s=.707106781,c=.707106781):(i=Math.sqrt(L),s=z/i,c=H/i):U>B?U<.01?(i=.707106781,s=0,c=.707106781):(s=Math.sqrt(U),i=z/s,c=j/s):B<.01?(i=.707106781,s=.707106781,c=0):(c=Math.sqrt(B),i=H/c,s=j/c),this.set(i,s,c,t),this}let N=Math.sqrt((w-A)*(w-A)+(_-R)*(_-R)+(b-y)*(b-y));return Math.abs(N)<.001&&(N=1),this.x=(w-A)/N,this.y=(_-R)/N,this.z=(b-y)/N,this.w=Math.acos((g+M+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bb extends Fo{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new jn(0,0,e,t),this.scissorTest=!1,this.viewport=new jn(0,0,e,t);const s={width:e,height:t,depth:i.depth},c=new Ti(s);this.textures=[];const f=i.count;for(let h=0;h<f;h++)this.textures[h]=c.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:qn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,c=this.textures.length;s<c;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i,this.textures[s].isData3DTexture!==!0&&(this.textures[s].isArrayTexture=this.textures[s].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Dc(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ra extends bb{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class bx extends Ti{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=wa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class GC extends Ra{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new bx(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Sx extends Ti{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=wa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WC extends Ra{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Sx(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Ps{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Vr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Vr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Vr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const c=i.getAttribute("position");if(t===!0&&c!==void 0&&e.isInstancedMesh!==!0)for(let f=0,h=c.count;f<h;f++)e.isMesh===!0?e.getVertexPosition(f,Vr):Vr.fromBufferAttribute(c,f),Vr.applyMatrix4(e.matrixWorld),this.expandByPoint(Vr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),g0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),g0.copy(i.boundingBox)),g0.applyMatrix4(e.matrixWorld),this.union(g0)}const s=e.children;for(let c=0,f=s.length;c<f;c++)this.expandByObject(s[c],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Vr),Vr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dp),v0.subVectors(this.max,Dp),dh.subVectors(e.a,Dp),ph.subVectors(e.b,Dp),mh.subVectors(e.c,Dp),_c.subVectors(ph,dh),bc.subVectors(mh,ph),Cu.subVectors(dh,mh);let t=[0,-_c.z,_c.y,0,-bc.z,bc.y,0,-Cu.z,Cu.y,_c.z,0,-_c.x,bc.z,0,-bc.x,Cu.z,0,-Cu.x,-_c.y,_c.x,0,-bc.y,bc.x,0,-Cu.y,Cu.x,0];return!zy(t,dh,ph,mh,v0)||(t=[1,0,0,0,1,0,0,0,1],!zy(t,dh,ph,mh,v0))?!1:(x0.crossVectors(_c,bc),t=[x0.x,x0.y,x0.z],zy(t,dh,ph,mh,v0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_l[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_l[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_l[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_l[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_l[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_l[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_l[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_l[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_l),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const _l=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Vr=new Y,g0=new Ps,dh=new Y,ph=new Y,mh=new Y,_c=new Y,bc=new Y,Cu=new Y,Dp=new Y,v0=new Y,x0=new Y,Ru=new Y;function zy(r,e,t,i,s){for(let c=0,f=r.length-3;c<=f;c+=3){Ru.fromArray(r,c);const h=s.x*Math.abs(Ru.x)+s.y*Math.abs(Ru.y)+s.z*Math.abs(Ru.z),m=e.dot(Ru),g=t.dot(Ru),y=i.dot(Ru);if(Math.max(-Math.max(m,g,y),Math.min(m,g,y))>h)return!1}return!0}const XC=new Ps,Lp=new Y,By=new Y;class vs{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):XC.setFromPoints(e).getCenter(i);let s=0;for(let c=0,f=e.length;c<f;c++)s=Math.max(s,i.distanceToSquared(e[c]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lp.subVectors(e,this.center);const t=Lp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Lp,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(By.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lp.copy(e.center).add(By)),this.expandByPoint(Lp.copy(e.center).sub(By))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const bl=new Y,Fy=new Y,y0=new Y,Sc=new Y,ky=new Y,_0=new Y,Vy=new Y;class ed{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=bl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(bl.copy(this.origin).addScaledVector(this.direction,t),bl.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Fy.copy(e).add(t).multiplyScalar(.5),y0.copy(t).sub(e).normalize(),Sc.copy(this.origin).sub(Fy);const c=e.distanceTo(t)*.5,f=-this.direction.dot(y0),h=Sc.dot(this.direction),m=-Sc.dot(y0),g=Sc.lengthSq(),y=Math.abs(1-f*f);let _,b,M,A;if(y>0)if(_=f*m-h,b=f*h-m,A=c*y,_>=0)if(b>=-A)if(b<=A){const R=1/y;_*=R,b*=R,M=_*(_+f*b+2*h)+b*(f*_+b+2*m)+g}else b=c,_=Math.max(0,-(f*b+h)),M=-_*_+b*(b+2*m)+g;else b=-c,_=Math.max(0,-(f*b+h)),M=-_*_+b*(b+2*m)+g;else b<=-A?(_=Math.max(0,-(-f*c+h)),b=_>0?-c:Math.min(Math.max(-c,-m),c),M=-_*_+b*(b+2*m)+g):b<=A?(_=0,b=Math.min(Math.max(-c,-m),c),M=b*(b+2*m)+g):(_=Math.max(0,-(f*c+h)),b=_>0?c:Math.min(Math.max(-c,-m),c),M=-_*_+b*(b+2*m)+g);else b=f>0?-c:c,_=Math.max(0,-(f*b+h)),M=-_*_+b*(b+2*m)+g;return i&&i.copy(this.origin).addScaledVector(this.direction,_),s&&s.copy(Fy).addScaledVector(y0,b),M}intersectSphere(e,t){bl.subVectors(e.center,this.origin);const i=bl.dot(this.direction),s=bl.dot(bl)-i*i,c=e.radius*e.radius;if(s>c)return null;const f=Math.sqrt(c-s),h=i-f,m=i+f;return m<0?null:h<0?this.at(m,t):this.at(h,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,c,f,h,m;const g=1/this.direction.x,y=1/this.direction.y,_=1/this.direction.z,b=this.origin;return g>=0?(i=(e.min.x-b.x)*g,s=(e.max.x-b.x)*g):(i=(e.max.x-b.x)*g,s=(e.min.x-b.x)*g),y>=0?(c=(e.min.y-b.y)*y,f=(e.max.y-b.y)*y):(c=(e.max.y-b.y)*y,f=(e.min.y-b.y)*y),i>f||c>s||((c>i||isNaN(i))&&(i=c),(f<s||isNaN(s))&&(s=f),_>=0?(h=(e.min.z-b.z)*_,m=(e.max.z-b.z)*_):(h=(e.max.z-b.z)*_,m=(e.min.z-b.z)*_),i>m||h>s)||((h>i||i!==i)&&(i=h),(m<s||s!==s)&&(s=m),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,bl)!==null}intersectTriangle(e,t,i,s,c){ky.subVectors(t,e),_0.subVectors(i,e),Vy.crossVectors(ky,_0);let f=this.direction.dot(Vy),h;if(f>0){if(s)return null;h=1}else if(f<0)h=-1,f=-f;else return null;Sc.subVectors(this.origin,e);const m=h*this.direction.dot(_0.crossVectors(Sc,_0));if(m<0)return null;const g=h*this.direction.dot(ky.cross(Sc));if(g<0||m+g>f)return null;const y=-h*Sc.dot(Vy);return y<0?null:this.at(y/f,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gt{constructor(e,t,i,s,c,f,h,m,g,y,_,b,M,A,R,w){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,c,f,h,m,g,y,_,b,M,A,R,w)}set(e,t,i,s,c,f,h,m,g,y,_,b,M,A,R,w){const E=this.elements;return E[0]=e,E[4]=t,E[8]=i,E[12]=s,E[1]=c,E[5]=f,E[9]=h,E[13]=m,E[2]=g,E[6]=y,E[10]=_,E[14]=b,E[3]=M,E[7]=A,E[11]=R,E[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,s=1/gh.setFromMatrixColumn(e,0).length(),c=1/gh.setFromMatrixColumn(e,1).length(),f=1/gh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*c,t[5]=i[5]*c,t[6]=i[6]*c,t[7]=0,t[8]=i[8]*f,t[9]=i[9]*f,t[10]=i[10]*f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,c=e.z,f=Math.cos(i),h=Math.sin(i),m=Math.cos(s),g=Math.sin(s),y=Math.cos(c),_=Math.sin(c);if(e.order==="XYZ"){const b=f*y,M=f*_,A=h*y,R=h*_;t[0]=m*y,t[4]=-m*_,t[8]=g,t[1]=M+A*g,t[5]=b-R*g,t[9]=-h*m,t[2]=R-b*g,t[6]=A+M*g,t[10]=f*m}else if(e.order==="YXZ"){const b=m*y,M=m*_,A=g*y,R=g*_;t[0]=b+R*h,t[4]=A*h-M,t[8]=f*g,t[1]=f*_,t[5]=f*y,t[9]=-h,t[2]=M*h-A,t[6]=R+b*h,t[10]=f*m}else if(e.order==="ZXY"){const b=m*y,M=m*_,A=g*y,R=g*_;t[0]=b-R*h,t[4]=-f*_,t[8]=A+M*h,t[1]=M+A*h,t[5]=f*y,t[9]=R-b*h,t[2]=-f*g,t[6]=h,t[10]=f*m}else if(e.order==="ZYX"){const b=f*y,M=f*_,A=h*y,R=h*_;t[0]=m*y,t[4]=A*g-M,t[8]=b*g+R,t[1]=m*_,t[5]=R*g+b,t[9]=M*g-A,t[2]=-g,t[6]=h*m,t[10]=f*m}else if(e.order==="YZX"){const b=f*m,M=f*g,A=h*m,R=h*g;t[0]=m*y,t[4]=R-b*_,t[8]=A*_+M,t[1]=_,t[5]=f*y,t[9]=-h*y,t[2]=-g*y,t[6]=M*_+A,t[10]=b-R*_}else if(e.order==="XZY"){const b=f*m,M=f*g,A=h*m,R=h*g;t[0]=m*y,t[4]=-_,t[8]=g*y,t[1]=b*_+R,t[5]=f*y,t[9]=M*_-A,t[2]=A*_-M,t[6]=h*y,t[10]=R*_+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jC,e,qC)}lookAt(e,t,i){const s=this.elements;return Ba.subVectors(e,t),Ba.lengthSq()===0&&(Ba.z=1),Ba.normalize(),Mc.crossVectors(i,Ba),Mc.lengthSq()===0&&(Math.abs(i.z)===1?Ba.x+=1e-4:Ba.z+=1e-4,Ba.normalize(),Mc.crossVectors(i,Ba)),Mc.normalize(),b0.crossVectors(Ba,Mc),s[0]=Mc.x,s[4]=b0.x,s[8]=Ba.x,s[1]=Mc.y,s[5]=b0.y,s[9]=Ba.y,s[2]=Mc.z,s[6]=b0.z,s[10]=Ba.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,c=this.elements,f=i[0],h=i[4],m=i[8],g=i[12],y=i[1],_=i[5],b=i[9],M=i[13],A=i[2],R=i[6],w=i[10],E=i[14],N=i[3],L=i[7],U=i[11],B=i[15],z=s[0],H=s[4],j=s[8],I=s[12],P=s[1],q=s[5],se=s[9],ee=s[13],de=s[2],oe=s[6],Q=s[10],J=s[14],fe=s[3],we=s[7],Ce=s[11],X=s[15];return c[0]=f*z+h*P+m*de+g*fe,c[4]=f*H+h*q+m*oe+g*we,c[8]=f*j+h*se+m*Q+g*Ce,c[12]=f*I+h*ee+m*J+g*X,c[1]=y*z+_*P+b*de+M*fe,c[5]=y*H+_*q+b*oe+M*we,c[9]=y*j+_*se+b*Q+M*Ce,c[13]=y*I+_*ee+b*J+M*X,c[2]=A*z+R*P+w*de+E*fe,c[6]=A*H+R*q+w*oe+E*we,c[10]=A*j+R*se+w*Q+E*Ce,c[14]=A*I+R*ee+w*J+E*X,c[3]=N*z+L*P+U*de+B*fe,c[7]=N*H+L*q+U*oe+B*we,c[11]=N*j+L*se+U*Q+B*Ce,c[15]=N*I+L*ee+U*J+B*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],c=e[12],f=e[1],h=e[5],m=e[9],g=e[13],y=e[2],_=e[6],b=e[10],M=e[14],A=e[3],R=e[7],w=e[11],E=e[15],N=m*M-g*b,L=h*M-g*_,U=h*b-m*_,B=f*M-g*y,z=f*b-m*y,H=f*_-h*y;return t*(R*N-w*L+E*U)-i*(A*N-w*B+E*z)+s*(A*L-R*B+E*H)-c*(A*U-R*z+w*H)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],c=e[3],f=e[4],h=e[5],m=e[6],g=e[7],y=e[8],_=e[9],b=e[10],M=e[11],A=e[12],R=e[13],w=e[14],E=e[15],N=_*w*g-R*b*g+R*m*M-h*w*M-_*m*E+h*b*E,L=A*b*g-y*w*g-A*m*M+f*w*M+y*m*E-f*b*E,U=y*R*g-A*_*g+A*h*M-f*R*M-y*h*E+f*_*E,B=A*_*m-y*R*m-A*h*b+f*R*b+y*h*w-f*_*w,z=t*N+i*L+s*U+c*B;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/z;return e[0]=N*H,e[1]=(R*b*c-_*w*c-R*s*M+i*w*M+_*s*E-i*b*E)*H,e[2]=(h*w*c-R*m*c+R*s*g-i*w*g-h*s*E+i*m*E)*H,e[3]=(_*m*c-h*b*c-_*s*g+i*b*g+h*s*M-i*m*M)*H,e[4]=L*H,e[5]=(y*w*c-A*b*c+A*s*M-t*w*M-y*s*E+t*b*E)*H,e[6]=(A*m*c-f*w*c-A*s*g+t*w*g+f*s*E-t*m*E)*H,e[7]=(f*b*c-y*m*c+y*s*g-t*b*g-f*s*M+t*m*M)*H,e[8]=U*H,e[9]=(A*_*c-y*R*c-A*i*M+t*R*M+y*i*E-t*_*E)*H,e[10]=(f*R*c-A*h*c+A*i*g-t*R*g-f*i*E+t*h*E)*H,e[11]=(y*h*c-f*_*c-y*i*g+t*_*g+f*i*M-t*h*M)*H,e[12]=B*H,e[13]=(y*R*s-A*_*s+A*i*b-t*R*b-y*i*w+t*_*w)*H,e[14]=(A*h*s-f*R*s-A*i*m+t*R*m+f*i*w-t*h*w)*H,e[15]=(f*_*s-y*h*s+y*i*m-t*_*m-f*i*b+t*h*b)*H,this}scale(e){const t=this.elements,i=e.x,s=e.y,c=e.z;return t[0]*=i,t[4]*=s,t[8]*=c,t[1]*=i,t[5]*=s,t[9]*=c,t[2]*=i,t[6]*=s,t[10]*=c,t[3]*=i,t[7]*=s,t[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),c=1-i,f=e.x,h=e.y,m=e.z,g=c*f,y=c*h;return this.set(g*f+i,g*h-s*m,g*m+s*h,0,g*h+s*m,y*h+i,y*m-s*f,0,g*m-s*h,y*m+s*f,c*m*m+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,c,f){return this.set(1,i,c,0,e,1,f,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,c=t._x,f=t._y,h=t._z,m=t._w,g=c+c,y=f+f,_=h+h,b=c*g,M=c*y,A=c*_,R=f*y,w=f*_,E=h*_,N=m*g,L=m*y,U=m*_,B=i.x,z=i.y,H=i.z;return s[0]=(1-(R+E))*B,s[1]=(M+U)*B,s[2]=(A-L)*B,s[3]=0,s[4]=(M-U)*z,s[5]=(1-(b+E))*z,s[6]=(w+N)*z,s[7]=0,s[8]=(A+L)*H,s[9]=(w-N)*H,s[10]=(1-(b+R))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;if(e.x=s[12],e.y=s[13],e.z=s[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let c=gh.set(s[0],s[1],s[2]).length();const f=gh.set(s[4],s[5],s[6]).length(),h=gh.set(s[8],s[9],s[10]).length();this.determinant()<0&&(c=-c),Hr.copy(this);const g=1/c,y=1/f,_=1/h;return Hr.elements[0]*=g,Hr.elements[1]*=g,Hr.elements[2]*=g,Hr.elements[4]*=y,Hr.elements[5]*=y,Hr.elements[6]*=y,Hr.elements[8]*=_,Hr.elements[9]*=_,Hr.elements[10]*=_,t.setFromRotationMatrix(Hr),i.x=c,i.y=f,i.z=h,this}makePerspective(e,t,i,s,c,f,h=ka,m=!1){const g=this.elements,y=2*c/(t-e),_=2*c/(i-s),b=(t+e)/(t-e),M=(i+s)/(i-s);let A,R;if(m)A=c/(f-c),R=f*c/(f-c);else if(h===ka)A=-(f+c)/(f-c),R=-2*f*c/(f-c);else if(h===Xh)A=-f/(f-c),R=-f*c/(f-c);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return g[0]=y,g[4]=0,g[8]=b,g[12]=0,g[1]=0,g[5]=_,g[9]=M,g[13]=0,g[2]=0,g[6]=0,g[10]=A,g[14]=R,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,t,i,s,c,f,h=ka,m=!1){const g=this.elements,y=2/(t-e),_=2/(i-s),b=-(t+e)/(t-e),M=-(i+s)/(i-s);let A,R;if(m)A=1/(f-c),R=f/(f-c);else if(h===ka)A=-2/(f-c),R=-(f+c)/(f-c);else if(h===Xh)A=-1/(f-c),R=-c/(f-c);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return g[0]=y,g[4]=0,g[8]=0,g[12]=b,g[1]=0,g[5]=_,g[9]=0,g[13]=M,g[2]=0,g[6]=0,g[10]=A,g[14]=R,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const gh=new Y,Hr=new Gt,jC=new Y(0,0,0),qC=new Y(1,1,1),Mc=new Y,b0=new Y,Ba=new Y,o1=new Gt,l1=new Ca;class Ha{constructor(e=0,t=0,i=0,s=Ha.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,c=s[0],f=s[4],h=s[8],m=s[1],g=s[5],y=s[9],_=s[2],b=s[6],M=s[10];switch(t){case"XYZ":this._y=Math.asin(Vt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-y,M),this._z=Math.atan2(-f,c)):(this._x=Math.atan2(b,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(h,M),this._z=Math.atan2(m,g)):(this._y=Math.atan2(-_,c),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-_,M),this._z=Math.atan2(-f,g)):(this._y=0,this._z=Math.atan2(m,c));break;case"ZYX":this._y=Math.asin(-Vt(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(b,M),this._z=Math.atan2(m,c)):(this._x=0,this._z=Math.atan2(-f,g));break;case"YZX":this._z=Math.asin(Vt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-y,g),this._y=Math.atan2(-_,c)):(this._x=0,this._y=Math.atan2(h,M));break;case"XZY":this._z=Math.asin(-Vt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(b,g),this._y=Math.atan2(h,c)):(this._x=Math.atan2(-y,M),this._y=0);break;default:ct("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return o1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o1,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return l1.setFromEuler(this),this.setFromQuaternion(l1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ha.DEFAULT_ORDER="XYZ";class Yh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let YC=0;const c1=new Y,vh=new Ca,Sl=new Gt,S0=new Y,Up=new Y,ZC=new Y,QC=new Ca,u1=new Y(1,0,0),f1=new Y(0,1,0),h1=new Y(0,0,1),d1={type:"added"},JC={type:"removed"},xh={type:"childadded",child:null},Hy={type:"childremoved",child:null};class wn extends Fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:YC++}),this.uuid=Va(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wn.DEFAULT_UP.clone();const e=new Y,t=new Ha,i=new Ca,s=new Y(1,1,1);function c(){i.setFromEuler(t,!1)}function f(){t.setFromQuaternion(i,void 0,!1)}t._onChange(c),i._onChange(f),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Gt},normalMatrix:{value:new $t}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vh.setFromAxisAngle(e,t),this.quaternion.multiply(vh),this}rotateOnWorldAxis(e,t){return vh.setFromAxisAngle(e,t),this.quaternion.premultiply(vh),this}rotateX(e){return this.rotateOnAxis(u1,e)}rotateY(e){return this.rotateOnAxis(f1,e)}rotateZ(e){return this.rotateOnAxis(h1,e)}translateOnAxis(e,t){return c1.copy(e).applyQuaternion(this.quaternion),this.position.add(c1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(u1,e)}translateY(e){return this.translateOnAxis(f1,e)}translateZ(e){return this.translateOnAxis(h1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Sl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?S0.copy(e):S0.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Up.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sl.lookAt(Up,S0,this.up):Sl.lookAt(S0,Up,this.up),this.quaternion.setFromRotationMatrix(Sl),s&&(Sl.extractRotation(s.matrixWorld),vh.setFromRotationMatrix(Sl),this.quaternion.premultiply(vh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Rt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(d1),xh.child=e,this.dispatchEvent(xh),xh.child=null):Rt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(JC),Hy.child=e,this.dispatchEvent(Hy),Hy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Sl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(d1),xh.child=e,this.dispatchEvent(xh),xh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const f=this.children[i].getObjectByProperty(e,t);if(f!==void 0)return f}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let c=0,f=s.length;c<f;c++)s[c].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,e,ZC),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,QC,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let c=0,f=s.length;c<f;c++)s[c].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(h=>({...h})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function c(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=c(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let g=0,y=m.length;g<y;g++){const _=m[g];c(e.shapes,_)}else c(e.shapes,m)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,g=this.material.length;m<g;m++)h.push(c(e.materials,this.material[m]));s.material=h}else s.material=c(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];s.animations.push(c(e.animations,m))}}if(t){const h=f(e.geometries),m=f(e.materials),g=f(e.textures),y=f(e.images),_=f(e.shapes),b=f(e.skeletons),M=f(e.animations),A=f(e.nodes);h.length>0&&(i.geometries=h),m.length>0&&(i.materials=m),g.length>0&&(i.textures=g),y.length>0&&(i.images=y),_.length>0&&(i.shapes=_),b.length>0&&(i.skeletons=b),M.length>0&&(i.animations=M),A.length>0&&(i.nodes=A)}return i.object=s,i;function f(h){const m=[];for(const g in h){const y=h[g];delete y.metadata,m.push(y)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}wn.DEFAULT_UP=new Y(0,1,0);wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gr=new Y,Ml=new Y,Gy=new Y,El=new Y,yh=new Y,_h=new Y,p1=new Y,Wy=new Y,Xy=new Y,jy=new Y,qy=new jn,Yy=new jn,Zy=new jn;class Aa{constructor(e=new Y,t=new Y,i=new Y){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Gr.subVectors(e,t),s.cross(Gr);const c=s.lengthSq();return c>0?s.multiplyScalar(1/Math.sqrt(c)):s.set(0,0,0)}static getBarycoord(e,t,i,s,c){Gr.subVectors(s,t),Ml.subVectors(i,t),Gy.subVectors(e,t);const f=Gr.dot(Gr),h=Gr.dot(Ml),m=Gr.dot(Gy),g=Ml.dot(Ml),y=Ml.dot(Gy),_=f*g-h*h;if(_===0)return c.set(0,0,0),null;const b=1/_,M=(g*m-h*y)*b,A=(f*y-h*m)*b;return c.set(1-M-A,A,M)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,El)===null?!1:El.x>=0&&El.y>=0&&El.x+El.y<=1}static getInterpolation(e,t,i,s,c,f,h,m){return this.getBarycoord(e,t,i,s,El)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(c,El.x),m.addScaledVector(f,El.y),m.addScaledVector(h,El.z),m)}static getInterpolatedAttribute(e,t,i,s,c,f){return qy.setScalar(0),Yy.setScalar(0),Zy.setScalar(0),qy.fromBufferAttribute(e,t),Yy.fromBufferAttribute(e,i),Zy.fromBufferAttribute(e,s),f.setScalar(0),f.addScaledVector(qy,c.x),f.addScaledVector(Yy,c.y),f.addScaledVector(Zy,c.z),f}static isFrontFacing(e,t,i,s){return Gr.subVectors(i,t),Ml.subVectors(e,t),Gr.cross(Ml).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),Ml.subVectors(this.a,this.b),Gr.cross(Ml).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Aa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Aa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,c){return Aa.getInterpolation(e,this.a,this.b,this.c,t,i,s,c)}containsPoint(e){return Aa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Aa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,c=this.c;let f,h;yh.subVectors(s,i),_h.subVectors(c,i),Wy.subVectors(e,i);const m=yh.dot(Wy),g=_h.dot(Wy);if(m<=0&&g<=0)return t.copy(i);Xy.subVectors(e,s);const y=yh.dot(Xy),_=_h.dot(Xy);if(y>=0&&_<=y)return t.copy(s);const b=m*_-y*g;if(b<=0&&m>=0&&y<=0)return f=m/(m-y),t.copy(i).addScaledVector(yh,f);jy.subVectors(e,c);const M=yh.dot(jy),A=_h.dot(jy);if(A>=0&&M<=A)return t.copy(c);const R=M*g-m*A;if(R<=0&&g>=0&&A<=0)return h=g/(g-A),t.copy(i).addScaledVector(_h,h);const w=y*A-M*_;if(w<=0&&_-y>=0&&M-A>=0)return p1.subVectors(c,s),h=(_-y)/(_-y+(M-A)),t.copy(s).addScaledVector(p1,h);const E=1/(w+R+b);return f=R*E,h=b*E,t.copy(i).addScaledVector(yh,f).addScaledVector(_h,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const FE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ec={h:0,s:0,l:0},M0={h:0,s:0,l:0};function Qy(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class gt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Us){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,s=bn.workingColorSpace){return this.r=e,this.g=t,this.b=i,bn.colorSpaceToWorking(this,s),this}setHSL(e,t,i,s=bn.workingColorSpace){if(e=_b(e,1),t=Vt(t,0,1),i=Vt(i,0,1),t===0)this.r=this.g=this.b=i;else{const c=i<=.5?i*(1+t):i+t-i*t,f=2*i-c;this.r=Qy(f,c,e+1/3),this.g=Qy(f,c,e),this.b=Qy(f,c,e-1/3)}return bn.colorSpaceToWorking(this,s),this}setStyle(e,t=Us){function i(c){c!==void 0&&parseFloat(c)<1&&ct("Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let c;const f=s[1],h=s[2];switch(f){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(c[4]),this.setRGB(Math.min(255,parseInt(c[1],10))/255,Math.min(255,parseInt(c[2],10))/255,Math.min(255,parseInt(c[3],10))/255,t);if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(c[4]),this.setRGB(Math.min(100,parseInt(c[1],10))/100,Math.min(100,parseInt(c[2],10))/100,Math.min(100,parseInt(c[3],10))/100,t);break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(c[4]),this.setHSL(parseFloat(c[1])/360,parseFloat(c[2])/100,parseFloat(c[3])/100,t);break;default:ct("Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=s[1],f=c.length;if(f===3)return this.setRGB(parseInt(c.charAt(0),16)/15,parseInt(c.charAt(1),16)/15,parseInt(c.charAt(2),16)/15,t);if(f===6)return this.setHex(parseInt(c,16),t);ct("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Us){const i=FE[e.toLowerCase()];return i!==void 0?this.setHex(i,t):ct("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cl(e.r),this.g=Cl(e.g),this.b=Cl(e.b),this}copyLinearToSRGB(e){return this.r=Vh(e.r),this.g=Vh(e.g),this.b=Vh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Us){return bn.workingToColorSpace(Ds.copy(this),e),Math.round(Vt(Ds.r*255,0,255))*65536+Math.round(Vt(Ds.g*255,0,255))*256+Math.round(Vt(Ds.b*255,0,255))}getHexString(e=Us){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bn.workingColorSpace){bn.workingToColorSpace(Ds.copy(this),t);const i=Ds.r,s=Ds.g,c=Ds.b,f=Math.max(i,s,c),h=Math.min(i,s,c);let m,g;const y=(h+f)/2;if(h===f)m=0,g=0;else{const _=f-h;switch(g=y<=.5?_/(f+h):_/(2-f-h),f){case i:m=(s-c)/_+(s<c?6:0);break;case s:m=(c-i)/_+2;break;case c:m=(i-s)/_+4;break}m/=6}return e.h=m,e.s=g,e.l=y,e}getRGB(e,t=bn.workingColorSpace){return bn.workingToColorSpace(Ds.copy(this),t),e.r=Ds.r,e.g=Ds.g,e.b=Ds.b,e}getStyle(e=Us){bn.workingToColorSpace(Ds.copy(this),e);const t=Ds.r,i=Ds.g,s=Ds.b;return e!==Us?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Ec),this.setHSL(Ec.h+e,Ec.s+t,Ec.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ec),e.getHSL(M0);const i=$p(Ec.h,M0.h,t),s=$p(Ec.s,M0.s,t),c=$p(Ec.l,M0.l,t);return this.setHSL(i,s,c),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,c=e.elements;return this.r=c[0]*t+c[3]*i+c[6]*s,this.g=c[1]*t+c[4]*i+c[7]*s,this.b=c[2]*t+c[5]*i+c[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ds=new gt;gt.NAMES=FE;let KC=0;class zs extends Fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:KC++}),this.uuid=Va(),this.name="",this.type="Material",this.blending=Yu,this.side=Rl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hv,this.blendDst=dv,this.blendEquation=Cc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=Ju,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=F_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hu,this.stencilZFail=Hu,this.stencilZPass=Hu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){ct(`Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ct(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Yu&&(i.blending=this.blending),this.side!==Rl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==hv&&(i.blendSrc=this.blendSrc),this.blendDst!==dv&&(i.blendDst=this.blendDst),this.blendEquation!==Cc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ju&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==F_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Hu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Hu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(c){const f=[];for(const h in c){const m=c[h];delete m.metadata,f.push(m)}return f}if(t){const c=s(e.textures),f=s(e.images);c.length>0&&(i.textures=c),f.length>0&&(i.images=f)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let c=0;c!==s;++c)i[c]=t[c].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Bc extends zs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ha,this.combine=Sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wl=$C();function $C(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),i=new Uint32Array(512),s=new Uint32Array(512);for(let m=0;m<256;++m){const g=m-127;g<-27?(i[m]=0,i[m|256]=32768,s[m]=24,s[m|256]=24):g<-14?(i[m]=1024>>-g-14,i[m|256]=1024>>-g-14|32768,s[m]=-g-1,s[m|256]=-g-1):g<=15?(i[m]=g+15<<10,i[m|256]=g+15<<10|32768,s[m]=13,s[m|256]=13):g<128?(i[m]=31744,i[m|256]=64512,s[m]=24,s[m|256]=24):(i[m]=31744,i[m|256]=64512,s[m]=13,s[m|256]=13)}const c=new Uint32Array(2048),f=new Uint32Array(64),h=new Uint32Array(64);for(let m=1;m<1024;++m){let g=m<<13,y=0;for(;(g&8388608)===0;)g<<=1,y-=8388608;g&=-8388609,y+=947912704,c[m]=g|y}for(let m=1024;m<2048;++m)c[m]=939524096+(m-1024<<13);for(let m=1;m<31;++m)f[m]=m<<23;f[31]=1199570944,f[32]=2147483648;for(let m=33;m<63;++m)f[m]=2147483648+(m-32<<23);f[63]=3347054592;for(let m=1;m<64;++m)m!==32&&(h[m]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:c,exponentTable:f,offsetTable:h}}function Ea(r){Math.abs(r)>65504&&ct("DataUtils.toHalfFloat(): Value out of range."),r=Vt(r,-65504,65504),wl.floatView[0]=r;const e=wl.uint32View[0],t=e>>23&511;return wl.baseTable[t]+((e&8388607)>>wl.shiftTable[t])}function Wp(r){const e=r>>10;return wl.uint32View[0]=wl.mantissaTable[wl.offsetTable[e]+(r&1023)]+wl.exponentTable[e],wl.floatView[0]}class e3{static toHalfFloat(e){return Ea(e)}static fromHalfFloat(e){return Wp(e)}}const Gi=new Y,E0=new Fe;let t3=0;class Gn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:t3++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=um,this.updateRanges=[],this.gpuType=Is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,c=this.itemSize;s<c;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)E0.fromBufferAttribute(this,t),E0.applyMatrix3(e),this.setXY(t,E0.x,E0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.applyMatrix3(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.applyMatrix4(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.applyNormalMatrix(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Gi.fromBufferAttribute(this,t),Gi.transformDirection(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ta(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ta(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ta(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ta(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ta(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,c){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array),c=sn(c,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==um&&(e.usage=this.usage),e}}class n3 extends Gn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class i3 extends Gn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class s3 extends Gn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class a3 extends Gn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Sb extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class r3 extends Gn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Mb extends Gn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class o3 extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Wp(this.array[e*this.itemSize]);return this.normalized&&(t=ta(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=Ea(t),this}getY(e){let t=Wp(this.array[e*this.itemSize+1]);return this.normalized&&(t=ta(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=Ea(t),this}getZ(e){let t=Wp(this.array[e*this.itemSize+2]);return this.normalized&&(t=ta(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=Ea(t),this}getW(e){let t=Wp(this.array[e*this.itemSize+3]);return this.normalized&&(t=ta(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=Ea(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=Ea(t),this.array[e+1]=Ea(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.array[e+0]=Ea(t),this.array[e+1]=Ea(i),this.array[e+2]=Ea(s),this}setXYZW(e,t,i,s,c){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array),c=sn(c,this.array)),this.array[e+0]=Ea(t),this.array[e+1]=Ea(i),this.array[e+2]=Ea(s),this.array[e+3]=Ea(c),this}}class bt extends Gn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let l3=0;const pr=new Gt,Jy=new wn,bh=new Y,Fa=new Ps,Ip=new Ps,as=new Y;class Qt extends Fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:l3++}),this.uuid=Va(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(OE(e)?Mb:Sb)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const c=new $t().getNormalMatrix(e);i.applyNormalMatrix(c),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pr.makeRotationFromQuaternion(e),this.applyMatrix4(pr),this}rotateX(e){return pr.makeRotationX(e),this.applyMatrix4(pr),this}rotateY(e){return pr.makeRotationY(e),this.applyMatrix4(pr),this}rotateZ(e){return pr.makeRotationZ(e),this.applyMatrix4(pr),this}translate(e,t,i){return pr.makeTranslation(e,t,i),this.applyMatrix4(pr),this}scale(e,t,i){return pr.makeScale(e,t,i),this.applyMatrix4(pr),this}lookAt(e){return Jy.lookAt(e),Jy.updateMatrix(),this.applyMatrix4(Jy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bh).negate(),this.translate(bh.x,bh.y,bh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,c=e.length;s<c;s++){const f=e[s];i.push(f.x,f.y,f.z||0)}this.setAttribute("position",new bt(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const c=e[s];t.setXYZ(s,c.x,c.y,c.z||0)}e.length>t.count&&ct("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ps);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Rt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const c=t[i];Fa.setFromBufferAttribute(c),this.morphTargetsRelative?(as.addVectors(this.boundingBox.min,Fa.min),this.boundingBox.expandByPoint(as),as.addVectors(this.boundingBox.max,Fa.max),this.boundingBox.expandByPoint(as)):(this.boundingBox.expandByPoint(Fa.min),this.boundingBox.expandByPoint(Fa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Rt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Rt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(Fa.setFromBufferAttribute(e),t)for(let c=0,f=t.length;c<f;c++){const h=t[c];Ip.setFromBufferAttribute(h),this.morphTargetsRelative?(as.addVectors(Fa.min,Ip.min),Fa.expandByPoint(as),as.addVectors(Fa.max,Ip.max),Fa.expandByPoint(as)):(Fa.expandByPoint(Ip.min),Fa.expandByPoint(Ip.max))}Fa.getCenter(i);let s=0;for(let c=0,f=e.count;c<f;c++)as.fromBufferAttribute(e,c),s=Math.max(s,i.distanceToSquared(as));if(t)for(let c=0,f=t.length;c<f;c++){const h=t[c],m=this.morphTargetsRelative;for(let g=0,y=h.count;g<y;g++)as.fromBufferAttribute(h,g),m&&(bh.fromBufferAttribute(e,g),as.add(bh)),s=Math.max(s,i.distanceToSquared(as))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&Rt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Rt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,c=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gn(new Float32Array(4*i.count),4));const f=this.getAttribute("tangent"),h=[],m=[];for(let j=0;j<i.count;j++)h[j]=new Y,m[j]=new Y;const g=new Y,y=new Y,_=new Y,b=new Fe,M=new Fe,A=new Fe,R=new Y,w=new Y;function E(j,I,P){g.fromBufferAttribute(i,j),y.fromBufferAttribute(i,I),_.fromBufferAttribute(i,P),b.fromBufferAttribute(c,j),M.fromBufferAttribute(c,I),A.fromBufferAttribute(c,P),y.sub(g),_.sub(g),M.sub(b),A.sub(b);const q=1/(M.x*A.y-A.x*M.y);isFinite(q)&&(R.copy(y).multiplyScalar(A.y).addScaledVector(_,-M.y).multiplyScalar(q),w.copy(_).multiplyScalar(M.x).addScaledVector(y,-A.x).multiplyScalar(q),h[j].add(R),h[I].add(R),h[P].add(R),m[j].add(w),m[I].add(w),m[P].add(w))}let N=this.groups;N.length===0&&(N=[{start:0,count:e.count}]);for(let j=0,I=N.length;j<I;++j){const P=N[j],q=P.start,se=P.count;for(let ee=q,de=q+se;ee<de;ee+=3)E(e.getX(ee+0),e.getX(ee+1),e.getX(ee+2))}const L=new Y,U=new Y,B=new Y,z=new Y;function H(j){B.fromBufferAttribute(s,j),z.copy(B);const I=h[j];L.copy(I),L.sub(B.multiplyScalar(B.dot(I))).normalize(),U.crossVectors(z,I);const q=U.dot(m[j])<0?-1:1;f.setXYZW(j,L.x,L.y,L.z,q)}for(let j=0,I=N.length;j<I;++j){const P=N[j],q=P.start,se=P.count;for(let ee=q,de=q+se;ee<de;ee+=3)H(e.getX(ee+0)),H(e.getX(ee+1)),H(e.getX(ee+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,M=i.count;b<M;b++)i.setXYZ(b,0,0,0);const s=new Y,c=new Y,f=new Y,h=new Y,m=new Y,g=new Y,y=new Y,_=new Y;if(e)for(let b=0,M=e.count;b<M;b+=3){const A=e.getX(b+0),R=e.getX(b+1),w=e.getX(b+2);s.fromBufferAttribute(t,A),c.fromBufferAttribute(t,R),f.fromBufferAttribute(t,w),y.subVectors(f,c),_.subVectors(s,c),y.cross(_),h.fromBufferAttribute(i,A),m.fromBufferAttribute(i,R),g.fromBufferAttribute(i,w),h.add(y),m.add(y),g.add(y),i.setXYZ(A,h.x,h.y,h.z),i.setXYZ(R,m.x,m.y,m.z),i.setXYZ(w,g.x,g.y,g.z)}else for(let b=0,M=t.count;b<M;b+=3)s.fromBufferAttribute(t,b+0),c.fromBufferAttribute(t,b+1),f.fromBufferAttribute(t,b+2),y.subVectors(f,c),_.subVectors(s,c),y.cross(_),i.setXYZ(b+0,y.x,y.y,y.z),i.setXYZ(b+1,y.x,y.y,y.z),i.setXYZ(b+2,y.x,y.y,y.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)as.fromBufferAttribute(e,t),as.normalize(),e.setXYZ(t,as.x,as.y,as.z)}toNonIndexed(){function e(h,m){const g=h.array,y=h.itemSize,_=h.normalized,b=new g.constructor(m.length*y);let M=0,A=0;for(let R=0,w=m.length;R<w;R++){h.isInterleavedBufferAttribute?M=m[R]*h.data.stride+h.offset:M=m[R]*y;for(let E=0;E<y;E++)b[A++]=g[M++]}return new Gn(b,y,_)}if(this.index===null)return ct("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qt,i=this.index.array,s=this.attributes;for(const h in s){const m=s[h],g=e(m,i);t.setAttribute(h,g)}const c=this.morphAttributes;for(const h in c){const m=[],g=c[h];for(let y=0,_=g.length;y<_;y++){const b=g[y],M=e(b,i);m.push(M)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let h=0,m=f.length;h<m;h++){const g=f[h];t.addGroup(g.start,g.count,g.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const g in m)m[g]!==void 0&&(e[g]=m[g]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const m in i){const g=i[m];e.data.attributes[m]=g.toJSON(e.data)}const s={};let c=!1;for(const m in this.morphAttributes){const g=this.morphAttributes[m],y=[];for(let _=0,b=g.length;_<b;_++){const M=g[_];y.push(M.toJSON(e.data))}y.length>0&&(s[m]=y,c=!0)}c&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const s=e.attributes;for(const g in s){const y=s[g];this.setAttribute(g,y.clone(t))}const c=e.morphAttributes;for(const g in c){const y=[],_=c[g];for(let b=0,M=_.length;b<M;b++)y.push(_[b].clone(t));this.morphAttributes[g]=y}this.morphTargetsRelative=e.morphTargetsRelative;const f=e.groups;for(let g=0,y=f.length;g<y;g++){const _=f[g];this.addGroup(_.start,_.count,_.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const m1=new Gt,Nu=new ed,T0=new vs,g1=new Y,A0=new Y,w0=new Y,C0=new Y,Ky=new Y,R0=new Y,v1=new Y,N0=new Y;class Xi extends wn{constructor(e=new Qt,t=new Bc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const h=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=c}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,c=i.morphAttributes.position,f=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const h=this.morphTargetInfluences;if(c&&h){R0.set(0,0,0);for(let m=0,g=c.length;m<g;m++){const y=h[m],_=c[m];y!==0&&(Ky.fromBufferAttribute(_,e),f?R0.addScaledVector(Ky,y):R0.addScaledVector(Ky.sub(t),y))}t.add(R0)}return t}raycast(e,t){const i=this.geometry,s=this.material,c=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),T0.copy(i.boundingSphere),T0.applyMatrix4(c),Nu.copy(e.ray).recast(e.near),!(T0.containsPoint(Nu.origin)===!1&&(Nu.intersectSphere(T0,g1)===null||Nu.origin.distanceToSquared(g1)>(e.far-e.near)**2))&&(m1.copy(c).invert(),Nu.copy(e.ray).applyMatrix4(m1),!(i.boundingBox!==null&&Nu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Nu)))}_computeIntersections(e,t,i){let s;const c=this.geometry,f=this.material,h=c.index,m=c.attributes.position,g=c.attributes.uv,y=c.attributes.uv1,_=c.attributes.normal,b=c.groups,M=c.drawRange;if(h!==null)if(Array.isArray(f))for(let A=0,R=b.length;A<R;A++){const w=b[A],E=f[w.materialIndex],N=Math.max(w.start,M.start),L=Math.min(h.count,Math.min(w.start+w.count,M.start+M.count));for(let U=N,B=L;U<B;U+=3){const z=h.getX(U),H=h.getX(U+1),j=h.getX(U+2);s=D0(this,E,e,i,g,y,_,z,H,j),s&&(s.faceIndex=Math.floor(U/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const A=Math.max(0,M.start),R=Math.min(h.count,M.start+M.count);for(let w=A,E=R;w<E;w+=3){const N=h.getX(w),L=h.getX(w+1),U=h.getX(w+2);s=D0(this,f,e,i,g,y,_,N,L,U),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}else if(m!==void 0)if(Array.isArray(f))for(let A=0,R=b.length;A<R;A++){const w=b[A],E=f[w.materialIndex],N=Math.max(w.start,M.start),L=Math.min(m.count,Math.min(w.start+w.count,M.start+M.count));for(let U=N,B=L;U<B;U+=3){const z=U,H=U+1,j=U+2;s=D0(this,E,e,i,g,y,_,z,H,j),s&&(s.faceIndex=Math.floor(U/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const A=Math.max(0,M.start),R=Math.min(m.count,M.start+M.count);for(let w=A,E=R;w<E;w+=3){const N=w,L=w+1,U=w+2;s=D0(this,f,e,i,g,y,_,N,L,U),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}}}function c3(r,e,t,i,s,c,f,h){let m;if(e.side===na?m=i.intersectTriangle(f,c,s,!0,h):m=i.intersectTriangle(s,c,f,e.side===Rl,h),m===null)return null;N0.copy(h),N0.applyMatrix4(r.matrixWorld);const g=t.ray.origin.distanceTo(N0);return g<t.near||g>t.far?null:{distance:g,point:N0.clone(),object:r}}function D0(r,e,t,i,s,c,f,h,m,g){r.getVertexPosition(h,A0),r.getVertexPosition(m,w0),r.getVertexPosition(g,C0);const y=c3(r,e,t,i,A0,w0,C0,v1);if(y){const _=new Y;Aa.getBarycoord(v1,A0,w0,C0,_),s&&(y.uv=Aa.getInterpolatedAttribute(s,h,m,g,_,new Fe)),c&&(y.uv1=Aa.getInterpolatedAttribute(c,h,m,g,_,new Fe)),f&&(y.normal=Aa.getInterpolatedAttribute(f,h,m,g,_,new Y),y.normal.dot(i.direction)>0&&y.normal.multiplyScalar(-1));const b={a:h,b:m,c:g,normal:new Y,materialIndex:0};Aa.getNormal(A0,w0,C0,b.normal),y.face=b,y.barycoord=_}return y}class Fc extends Qt{constructor(e=1,t=1,i=1,s=1,c=1,f=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:c,depthSegments:f};const h=this;s=Math.floor(s),c=Math.floor(c),f=Math.floor(f);const m=[],g=[],y=[],_=[];let b=0,M=0;A("z","y","x",-1,-1,i,t,e,f,c,0),A("z","y","x",1,-1,i,t,-e,f,c,1),A("x","z","y",1,1,e,i,t,s,f,2),A("x","z","y",1,-1,e,i,-t,s,f,3),A("x","y","z",1,-1,e,t,i,s,c,4),A("x","y","z",-1,-1,e,t,-i,s,c,5),this.setIndex(m),this.setAttribute("position",new bt(g,3)),this.setAttribute("normal",new bt(y,3)),this.setAttribute("uv",new bt(_,2));function A(R,w,E,N,L,U,B,z,H,j,I){const P=U/H,q=B/j,se=U/2,ee=B/2,de=z/2,oe=H+1,Q=j+1;let J=0,fe=0;const we=new Y;for(let Ce=0;Ce<Q;Ce++){const X=Ce*q-ee;for(let re=0;re<oe;re++){const _e=re*P-se;we[R]=_e*N,we[w]=X*L,we[E]=de,g.push(we.x,we.y,we.z),we[R]=0,we[w]=0,we[E]=z>0?1:-1,y.push(we.x,we.y,we.z),_.push(re/H),_.push(1-Ce/j),J+=1}}for(let Ce=0;Ce<j;Ce++)for(let X=0;X<H;X++){const re=b+X+oe*Ce,_e=b+X+oe*(Ce+1),Pe=b+(X+1)+oe*(Ce+1),it=b+(X+1)+oe*Ce;m.push(re,_e,it),m.push(_e,Pe,it),fe+=6}h.addGroup(M,fe,I),M+=fe,b+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zh(r){const e={};for(const t in r){e[t]={};for(const i in r[t]){const s=r[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(ct("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function $s(r){const e={};for(let t=0;t<r.length;t++){const i=Zh(r[t]);for(const s in i)e[s]=i[s]}return e}function u3(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function kE(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:bn.workingColorSpace}const VE={clone:Zh,merge:$s};var f3=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,h3=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vr extends zs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=f3,this.fragmentShader=h3,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zh(e.uniforms),this.uniformsGroups=u3(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const f=this.uniforms[s].value;f&&f.isTexture?t.uniforms[s]={type:"t",value:f.toJSON(e).uuid}:f&&f.isColor?t.uniforms[s]={type:"c",value:f.getHex()}:f&&f.isVector2?t.uniforms[s]={type:"v2",value:f.toArray()}:f&&f.isVector3?t.uniforms[s]={type:"v3",value:f.toArray()}:f&&f.isVector4?t.uniforms[s]={type:"v4",value:f.toArray()}:f&&f.isMatrix3?t.uniforms[s]={type:"m3",value:f.toArray()}:f&&f.isMatrix4?t.uniforms[s]={type:"m4",value:f.toArray()}:t.uniforms[s]={value:f}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Mx extends wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt,this.coordinateSystem=ka,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Tc=new Y,x1=new Fe,y1=new Fe;class Wi extends Mx{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qh*2*Math.atan(Math.tan(Zu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Tc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Tc.x,Tc.y).multiplyScalar(-e/Tc.z),Tc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Tc.x,Tc.y).multiplyScalar(-e/Tc.z)}getViewSize(e,t){return this.getViewBounds(e,x1,y1),t.subVectors(y1,x1)}setViewOffset(e,t,i,s,c,f){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=c,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Zu*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,c=-.5*s;const f=this.view;if(this.view!==null&&this.view.enabled){const m=f.fullWidth,g=f.fullHeight;c+=f.offsetX*s/m,t-=f.offsetY*i/g,s*=f.width/m,i*=f.height/g}const h=this.filmOffset;h!==0&&(c+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+s,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sh=-90,Mh=1;class HE extends wn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Wi(Sh,Mh,e,t);s.layers=this.layers,this.add(s);const c=new Wi(Sh,Mh,e,t);c.layers=this.layers,this.add(c);const f=new Wi(Sh,Mh,e,t);f.layers=this.layers,this.add(f);const h=new Wi(Sh,Mh,e,t);h.layers=this.layers,this.add(h);const m=new Wi(Sh,Mh,e,t);m.layers=this.layers,this.add(m);const g=new Wi(Sh,Mh,e,t);g.layers=this.layers,this.add(g)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,c,f,h,m]=t;for(const g of t)this.remove(g);if(e===ka)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),c.up.set(0,0,-1),c.lookAt(0,1,0),f.up.set(0,0,1),f.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===Xh)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),c.up.set(0,0,1),c.lookAt(0,1,0),f.up.set(0,0,-1),f.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const g of t)this.add(g),g.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[c,f,h,m,g,y]=this.children,_=e.getRenderTarget(),b=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const R=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,c),e.setRenderTarget(i,1,s),e.render(t,f),e.setRenderTarget(i,2,s),e.render(t,h),e.setRenderTarget(i,3,s),e.render(t,m),e.setRenderTarget(i,4,s),e.render(t,g),i.texture.generateMipmaps=R,e.setRenderTarget(i,5,s),e.render(t,y),e.setRenderTarget(_,b,M),e.xr.enabled=A,i.texture.needsPMREMUpdate=!0}}class Em extends Ti{constructor(e=[],t=zo,i,s,c,f,h,m,g,y){super(e,t,i,s,c,f,h,m,g,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Eb extends Ra{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new Em(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Fc(5,5,5),c=new vr({name:"CubemapFromEquirect",uniforms:Zh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:na,blending:Po});c.uniforms.tEquirect.value=t;const f=new Xi(s,c),h=t.minFilter;return t.minFilter===Io&&(t.minFilter=qn),new HE(1,10,this).update(e,f),t.minFilter=h,f.geometry.dispose(),f.material.dispose(),this}clear(e,t=!0,i=!0,s=!0){const c=e.getRenderTarget();for(let f=0;f<6;f++)e.setRenderTarget(this,f),e.clear(t,i,s);e.setRenderTarget(c)}}class Fh extends wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const d3={type:"move"};class cv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Fh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Fh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Fh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,c=null,f=null;const h=this._targetRay,m=this._grip,g=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(g&&e.hand){f=!0;for(const R of e.hand.values()){const w=t.getJointPose(R,i),E=this._getHandJoint(g,R);w!==null&&(E.matrix.fromArray(w.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=w.radius),E.visible=w!==null}const y=g.joints["index-finger-tip"],_=g.joints["thumb-tip"],b=y.position.distanceTo(_.position),M=.02,A=.005;g.inputState.pinching&&b>M+A?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!g.inputState.pinching&&b<=M-A&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(c=t.getPose(e.gripSpace,i),c!==null&&(m.matrix.fromArray(c.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,c.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(c.linearVelocity)):m.hasLinearVelocity=!1,c.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(c.angularVelocity)):m.hasAngularVelocity=!1));h!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&c!==null&&(s=c),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(d3)))}return h!==null&&(h.visible=s!==null),m!==null&&(m.visible=c!==null),g!==null&&(g.visible=f!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Fh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Ex{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new Ex(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Tx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=i}clone(){return new Tx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Tb extends wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ha,this.environmentIntensity=1,this.environmentRotation=new Ha,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Ax{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=um,this.updateRanges=[],this.version=0,this.uuid=Va()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,c=this.stride;s<c;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Va()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Va()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ks=new Y;class $u{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ks.fromBufferAttribute(this,t),Ks.applyMatrix4(e),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ks.fromBufferAttribute(this,t),Ks.applyNormalMatrix(e),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ks.fromBufferAttribute(this,t),Ks.transformDirection(e),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ta(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ta(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ta(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ta(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ta(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,c){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),s=sn(s,this.array),c=sn(c,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=c,this}clone(e){if(e===void 0){hm("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[s+c])}return new Gn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new $u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){hm("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[s+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ab extends zs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Eh;const Op=new Y,Th=new Y,Ah=new Y,wh=new Fe,Pp=new Fe,GE=new Gt,L0=new Y,zp=new Y,U0=new Y,_1=new Fe,$y=new Fe,b1=new Fe;class WE extends wn{constructor(e=new Ab){if(super(),this.isSprite=!0,this.type="Sprite",Eh===void 0){Eh=new Qt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ax(t,5);Eh.setIndex([0,1,2,0,2,3]),Eh.setAttribute("position",new $u(i,3,0,!1)),Eh.setAttribute("uv",new $u(i,2,3,!1))}this.geometry=Eh,this.material=e,this.center=new Fe(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Rt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Th.setFromMatrixScale(this.matrixWorld),GE.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ah.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Th.multiplyScalar(-Ah.z);const i=this.material.rotation;let s,c;i!==0&&(c=Math.cos(i),s=Math.sin(i));const f=this.center;I0(L0.set(-.5,-.5,0),Ah,f,Th,s,c),I0(zp.set(.5,-.5,0),Ah,f,Th,s,c),I0(U0.set(.5,.5,0),Ah,f,Th,s,c),_1.set(0,0),$y.set(1,0),b1.set(1,1);let h=e.ray.intersectTriangle(L0,zp,U0,!1,Op);if(h===null&&(I0(zp.set(-.5,.5,0),Ah,f,Th,s,c),$y.set(0,1),h=e.ray.intersectTriangle(L0,U0,zp,!1,Op),h===null))return;const m=e.ray.origin.distanceTo(Op);m<e.near||m>e.far||t.push({distance:m,point:Op.clone(),uv:Aa.getInterpolation(Op,L0,zp,U0,_1,$y,b1,new Fe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function I0(r,e,t,i,s,c){wh.subVectors(r,t).addScalar(.5).multiply(i),s!==void 0?(Pp.x=c*wh.x-s*wh.y,Pp.y=s*wh.x+c*wh.y):Pp.copy(wh),r.copy(e),r.x+=Pp.x,r.y+=Pp.y,r.applyMatrix4(GE)}const O0=new Y,S1=new Y;class XE extends wn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const c=t[i];this.addLevel(c.object.clone(),c.distance,c.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let c;for(c=0;c<s.length&&!(t<s[c].distance);c++);return s.splice(c,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const s=t.splice(i,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let c=t[i].distance;if(t[i].object.visible&&(c-=c*t[i].hysteresis),e<c)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){O0.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(O0);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){O0.setFromMatrixPosition(e.matrixWorld),S1.setFromMatrixPosition(this.matrixWorld);const i=O0.distanceTo(S1)/e.zoom;t[0].object.visible=!0;let s,c;for(s=1,c=t.length;s<c;s++){let f=t[s].distance;if(t[s].object.visible&&(f-=f*t[s].hysteresis),i>=f)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<c;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,c=i.length;s<c;s++){const f=i[s];t.object.levels.push({object:f.object.uuid,distance:f.distance,hysteresis:f.hysteresis})}return t}}const M1=new Y,E1=new jn,T1=new jn,p3=new Y,A1=new Gt,P0=new Y,e_=new vs,w1=new Gt,t_=new ed;class jE extends Xi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=B_,this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ps),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,P0),this.boundingBox.expandByPoint(P0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new vs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,P0),this.boundingSphere.expandByPoint(P0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),e_.copy(this.boundingSphere),e_.applyMatrix4(s),e.ray.intersectsSphere(e_)!==!1&&(w1.copy(s).invert(),t_.copy(e.ray).applyMatrix4(w1),!(this.boundingBox!==null&&t_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,t_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jn,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===B_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ME?this.bindMatrixInverse.copy(this.bindMatrix).invert():ct("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;E1.fromBufferAttribute(s.attributes.skinIndex,e),T1.fromBufferAttribute(s.attributes.skinWeight,e),M1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let c=0;c<4;c++){const f=T1.getComponent(c);if(f!==0){const h=E1.getComponent(c);A1.multiplyMatrices(i.bones[h].matrixWorld,i.boneInverses[h]),t.addScaledVector(p3.copy(M1).applyMatrix4(A1),f)}}return t.applyMatrix4(this.bindMatrixInverse)}}class wb extends wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qr extends Ti{constructor(e=null,t=1,i=1,s,c,f,h,m,g=Ii,y=Ii,_,b){super(null,f,h,m,g,y,s,c,_,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const C1=new Gt,m3=new Gt;class wx{constructor(e=[],t=[]){this.uuid=Va(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ct("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Gt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let c=0,f=e.length;c<f;c++){const h=e[c]?e[c].matrixWorld:m3;C1.multiplyMatrices(h,t[c]),C1.toArray(i,c*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new wx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new qr(t,e,e,Os,Is);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const c=e.bones[i];let f=t[c];f===void 0&&(ct("Skeleton: No bone found with UUID:",c),f=new wb),this.bones.push(f),this.boneInverses.push(new Gt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,c=t.length;s<c;s++){const f=t[s];e.bones.push(f.uuid);const h=i[s];e.boneInverses.push(h.toArray())}return e}}class Qh extends Gn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ch=new Gt,R1=new Gt,z0=[],N1=new Ps,g3=new Gt,Bp=new Xi,Fp=new vs;class qE extends Xi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,g3)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ps),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ch),N1.copy(e.boundingBox).applyMatrix4(Ch),this.boundingBox.union(N1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new vs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ch),Fp.copy(e.boundingSphere).applyMatrix4(Ch),this.boundingSphere.union(Fp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,c=i.length+1,f=e*c+1;for(let h=0;h<i.length;h++)i[h]=s[f+h]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Bp.geometry=this.geometry,Bp.material=this.material,Bp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fp.copy(this.boundingSphere),Fp.applyMatrix4(i),e.ray.intersectsSphere(Fp)!==!1))for(let c=0;c<s;c++){this.getMatrixAt(c,Ch),R1.multiplyMatrices(i,Ch),Bp.matrixWorld=R1,Bp.raycast(e,z0);for(let f=0,h=z0.length;f<h;f++){const m=z0[f];m.instanceId=c,m.object=this,t.push(m)}z0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new qr(new Float32Array(s*this.count),s,this.count,mx,Is));const c=this.morphTexture.source.data.data;let f=0;for(let g=0;g<i.length;g++)f+=i[g];const h=this.geometry.morphTargetsRelative?1:1-f,m=s*e;c[m]=h,c.set(i,m+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const n_=new Y,v3=new Y,x3=new $t;class wc{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=n_.subVectors(i,t).cross(v3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(n_),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/s;return c<0||c>1?null:t.copy(e.start).addScaledVector(i,c)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||x3.getNormalMatrix(e),s=this.coplanarPoint(n_).applyMatrix4(e),c=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Du=new vs,y3=new Fe(.5,.5),B0=new Y;class td{constructor(e=new wc,t=new wc,i=new wc,s=new wc,c=new wc,f=new wc){this.planes=[e,t,i,s,c,f]}set(e,t,i,s,c,f){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(i),h[3].copy(s),h[4].copy(c),h[5].copy(f),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ka,i=!1){const s=this.planes,c=e.elements,f=c[0],h=c[1],m=c[2],g=c[3],y=c[4],_=c[5],b=c[6],M=c[7],A=c[8],R=c[9],w=c[10],E=c[11],N=c[12],L=c[13],U=c[14],B=c[15];if(s[0].setComponents(g-f,M-y,E-A,B-N).normalize(),s[1].setComponents(g+f,M+y,E+A,B+N).normalize(),s[2].setComponents(g+h,M+_,E+R,B+L).normalize(),s[3].setComponents(g-h,M-_,E-R,B-L).normalize(),i)s[4].setComponents(m,b,w,U).normalize(),s[5].setComponents(g-m,M-b,E-w,B-U).normalize();else if(s[4].setComponents(g-m,M-b,E-w,B-U).normalize(),t===ka)s[5].setComponents(g+m,M+b,E+w,B+U).normalize();else if(t===Xh)s[5].setComponents(m,b,w,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Du.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Du.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Du)}intersectsSprite(e){Du.center.set(0,0,0);const t=y3.distanceTo(e.center);return Du.radius=.7071067811865476+t,Du.applyMatrix4(e.matrixWorld),this.intersectsSphere(Du)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let c=0;c<6;c++)if(t[c].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(B0.x=s.normal.x>0?e.max.x:e.min.x,B0.y=s.normal.y>0?e.max.y:e.min.y,B0.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(B0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Do=new Gt,Lo=new td;class Cx{constructor(){this.coordinateSystem=ka}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(Do.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Lo.setFromProjectionMatrix(Do,s.coordinateSystem,s.reversedDepth),Lo.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(Do.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Lo.setFromProjectionMatrix(Do,s.coordinateSystem,s.reversedDepth),Lo.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(Do.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Lo.setFromProjectionMatrix(Do,s.coordinateSystem,s.reversedDepth),Lo.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(Do.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Lo.setFromProjectionMatrix(Do,s.coordinateSystem,s.reversedDepth),Lo.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const s=t.cameras[i];if(Do.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Lo.setFromProjectionMatrix(Do,s.coordinateSystem,s.reversedDepth),Lo.containsPoint(e))return!0}return!1}clone(){return new Cx}}function i_(r,e){return r-e}function _3(r,e){return r.z-e.z}function b3(r,e){return e.z-r.z}class S3{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,s){const c=this.pool,f=this.list;this.index>=c.length&&c.push({start:-1,count:-1,z:-1,index:-1});const h=c[this.index];f.push(h),this.index++,h.start=e,h.count=t,h.z=i,h.index=s}reset(){this.list.length=0,this.index=0}}const Ma=new Gt,M3=new gt(1,1,1),D1=new td,E3=new Cx,F0=new Ps,Lu=new vs,kp=new Y,L1=new Y,T3=new Y,s_=new S3,Ls=new Xi,k0=[];function A3(r,e,t=0){const i=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const s=r.count;for(let c=0;c<s;c++)for(let f=0;f<i;f++)e.setComponent(c+t,f,r.getComponent(c,f))}else e.array.set(r.array,t*i);e.needsUpdate=!0}function Uu(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++)e[i]=r[i]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class YE extends Xi{constructor(e,t,i=t*2,s){super(new Qt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new qr(t,e,e,Os,Is);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new qr(t,e,e,Mm,gr);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new qr(t,e,e,Os,Is);i.colorSpace=bn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const c in e.attributes){const f=e.getAttribute(c),{array:h,itemSize:m,normalized:g}=f,y=new h.constructor(i*m),_=new Gn(y,m,g);t.setAttribute(c,_)}if(e.getIndex()!==null){const c=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Gn(c,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),c=t.getAttribute(i);if(s.itemSize!==c.itemSize||s.normalized!==c.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ps);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const c=t[i].geometryIndex;this.getMatrixAt(i,Ma),this.getBoundingBoxAt(c,F0).applyMatrix4(Ma),e.union(F0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const c=t[i].geometryIndex;this.getMatrixAt(i,Ma),this.getBoundingSphereAt(c,Lu).applyMatrix4(Ma),e.union(Lu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(i_),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=i):(s=this._instanceInfo.length,this._instanceInfo.push(i));const c=this._matricesTexture;Ma.identity().toArray(c.image.data,s*16),c.needsUpdate=!0;const f=this._colorsTexture;return f&&(M3.toArray(f.image.data,s*4),f.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},c=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const f=e.getIndex();if(f!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=i===-1?f.count:i),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let m;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(i_),m=this._availableGeometryIds.shift(),c[m]=s):(m=this._geometryCount,this._geometryCount++,c.push(s)),this.setGeometryAt(m,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,m}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,c=i.getIndex(),f=t.getIndex(),h=this._geometryInfo[e];if(s&&f.count>h.reservedIndexCount||t.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const m=h.vertexStart,g=h.reservedVertexCount;h.vertexCount=t.getAttribute("position").count;for(const y in i.attributes){const _=t.getAttribute(y),b=i.getAttribute(y);A3(_,b,m);const M=_.itemSize;for(let A=_.count,R=g;A<R;A++){const w=m+A;for(let E=0;E<M;E++)b.setComponent(w,E,0)}b.needsUpdate=!0,b.addUpdateRange(m*M,g*M)}if(s){const y=h.indexStart,_=h.reservedIndexCount;h.indexCount=t.getIndex().count;for(let b=0;b<f.count;b++)c.setX(y+b,m+f.getX(b));for(let b=f.count,M=_;b<M;b++)c.setX(y+b,m);c.needsUpdate=!0,c.addUpdateRange(y,h.reservedIndexCount)}return h.start=s?h.indexStart:h.vertexStart,h.count=s?h.indexCount:h.vertexCount,h.boundingBox=null,t.boundingBox!==null&&(h.boundingBox=t.boundingBox.clone()),h.boundingSphere=null,t.boundingSphere!==null&&(h.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let s=0,c=i.length;s<c;s++)i[s].active&&i[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,s=i.map((f,h)=>h).sort((f,h)=>i[f].vertexStart-i[h].vertexStart),c=this.geometry;for(let f=0,h=i.length;f<h;f++){const m=s[f],g=i[m];if(g.active!==!1){if(c.index!==null){if(g.indexStart!==t){const{indexStart:y,vertexStart:_,reservedIndexCount:b}=g,M=c.index,A=M.array,R=e-_;for(let w=y;w<y+b;w++)A[w]=A[w]+R;M.array.copyWithin(t,y,y+b),M.addUpdateRange(t,b),M.needsUpdate=!0,g.indexStart=t}t+=g.reservedIndexCount}if(g.vertexStart!==e){const{vertexStart:y,reservedVertexCount:_}=g,b=c.attributes;for(const M in b){const A=b[M],{array:R,itemSize:w}=A;R.copyWithin(e*w,y*w,(y+_)*w),A.addUpdateRange(e*w,_*w),A.needsUpdate=!0}g.vertexStart=e}e+=g.reservedVertexCount,g.start=c.index?g.indexStart:g.vertexStart,this._nextIndexStart=c.index?g.indexStart+g.reservedIndexCount:0,this._nextVertexStart=g.vertexStart+g.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const c=new Ps,f=i.index,h=i.attributes.position;for(let m=s.start,g=s.start+s.count;m<g;m++){let y=m;f&&(y=f.getX(y)),c.expandByPoint(kp.fromBufferAttribute(h,y))}s.boundingBox=c}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const c=new vs;this.getBoundingBoxAt(e,F0),F0.getCenter(c.center);const f=i.index,h=i.attributes.position;let m=0;for(let g=s.start,y=s.start+s.count;g<y;g++){let _=g;f&&(_=f.getX(_)),kp.fromBufferAttribute(h,_),m=Math.max(m,c.center.distanceToSquared(kp))}c.radius=Math.sqrt(m),s.boundingSphere=c}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(i_);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),c=new Int32Array(e);Uu(this._multiDrawCounts,s),Uu(this._multiDrawStarts,c),this._multiDrawCounts=s,this._multiDrawStarts=c,this._maxInstanceCount=e;const f=this._indirectTexture,h=this._matricesTexture,m=this._colorsTexture;f.dispose(),this._initIndirectTexture(),Uu(f.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Uu(h.image.data,this._matricesTexture.image.data),m&&(m.dispose(),this._initColorsTexture(),Uu(m.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...i.map(h=>h.vertexStart+h.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(m=>m.indexStart+m.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const c=this.geometry;c.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Qt,this._initializeGeometry(c));const f=this.geometry;c.index&&Uu(c.index.array,f.index.array);for(const h in c.attributes)Uu(c.attributes[h].array,f.attributes[h].array)}raycast(e,t){const i=this._instanceInfo,s=this._geometryInfo,c=this.matrixWorld,f=this.geometry;Ls.material=this.material,Ls.geometry.index=f.index,Ls.geometry.attributes=f.attributes,Ls.geometry.boundingBox===null&&(Ls.geometry.boundingBox=new Ps),Ls.geometry.boundingSphere===null&&(Ls.geometry.boundingSphere=new vs);for(let h=0,m=i.length;h<m;h++){if(!i[h].visible||!i[h].active)continue;const g=i[h].geometryIndex,y=s[g];Ls.geometry.setDrawRange(y.start,y.count),this.getMatrixAt(h,Ls.matrixWorld).premultiply(c),this.getBoundingBoxAt(g,Ls.geometry.boundingBox),this.getBoundingSphereAt(g,Ls.geometry.boundingSphere),Ls.raycast(e,k0);for(let _=0,b=k0.length;_<b;_++){const M=k0[_];M.object=this,M.batchId=h,t.push(M)}k0.length=0}Ls.material=null,Ls.geometry.index=null,Ls.geometry.attributes={},Ls.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,s,c){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const f=s.getIndex(),h=f===null?1:f.array.BYTES_PER_ELEMENT,m=this._instanceInfo,g=this._multiDrawStarts,y=this._multiDrawCounts,_=this._geometryInfo,b=this.perObjectFrustumCulled,M=this._indirectTexture,A=M.image.data,R=i.isArrayCamera?E3:D1;b&&!i.isArrayCamera&&(Ma.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),D1.setFromProjectionMatrix(Ma,i.coordinateSystem,i.reversedDepth));let w=0;if(this.sortObjects){Ma.copy(this.matrixWorld).invert(),kp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ma),L1.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ma);for(let L=0,U=m.length;L<U;L++)if(m[L].visible&&m[L].active){const B=m[L].geometryIndex;this.getMatrixAt(L,Ma),this.getBoundingSphereAt(B,Lu).applyMatrix4(Ma);let z=!1;if(b&&(z=!R.intersectsSphere(Lu,i)),!z){const H=_[B],j=T3.subVectors(Lu.center,kp).dot(L1);s_.push(H.start,H.count,j,L)}}const E=s_.list,N=this.customSort;N===null?E.sort(c.transparent?b3:_3):N.call(this,E,i);for(let L=0,U=E.length;L<U;L++){const B=E[L];g[w]=B.start*h,y[w]=B.count,A[w]=B.index,w++}s_.reset()}else for(let E=0,N=m.length;E<N;E++)if(m[E].visible&&m[E].active){const L=m[E].geometryIndex;let U=!1;if(b&&(this.getMatrixAt(E,Ma),this.getBoundingSphereAt(L,Lu).applyMatrix4(Ma),U=!R.intersectsSphere(Lu,i)),!U){const B=_[L];g[w]=B.start*h,y[w]=B.count,A[w]=E,w++}}M.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,c,f){this.onBeforeRender(e,null,s,c,f)}}class ia extends zs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ex=new Y,tx=new Y,U1=new Gt,Vp=new ed,V0=new vs,a_=new Y,I1=new Y;class Pc extends wn{constructor(e=new Qt,t=new ia){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,c=t.count;s<c;s++)ex.fromBufferAttribute(t,s-1),tx.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=ex.distanceTo(tx);e.setAttribute("lineDistance",new bt(i,1))}else ct("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,c=e.params.Line.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),V0.copy(i.boundingSphere),V0.applyMatrix4(s),V0.radius+=c,e.ray.intersectsSphere(V0)===!1)return;U1.copy(s).invert(),Vp.copy(e.ray).applyMatrix4(U1);const h=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,g=this.isLineSegments?2:1,y=i.index,b=i.attributes.position;if(y!==null){const M=Math.max(0,f.start),A=Math.min(y.count,f.start+f.count);for(let R=M,w=A-1;R<w;R+=g){const E=y.getX(R),N=y.getX(R+1),L=H0(this,e,Vp,m,E,N,R);L&&t.push(L)}if(this.isLineLoop){const R=y.getX(A-1),w=y.getX(M),E=H0(this,e,Vp,m,R,w,A-1);E&&t.push(E)}}else{const M=Math.max(0,f.start),A=Math.min(b.count,f.start+f.count);for(let R=M,w=A-1;R<w;R+=g){const E=H0(this,e,Vp,m,R,R+1,R);E&&t.push(E)}if(this.isLineLoop){const R=H0(this,e,Vp,m,A-1,M,A-1);R&&t.push(R)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const h=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=c}}}}}function H0(r,e,t,i,s,c,f){const h=r.geometry.attributes.position;if(ex.fromBufferAttribute(h,s),tx.fromBufferAttribute(h,c),t.distanceSqToSegment(ex,tx,a_,I1)>i)return;a_.applyMatrix4(r.matrixWorld);const g=e.ray.origin.distanceTo(a_);if(!(g<e.near||g>e.far))return{distance:g,point:I1.clone().applyMatrix4(r.matrixWorld),index:f,face:null,faceIndex:null,barycoord:null,object:r}}const O1=new Y,P1=new Y;class ko extends Pc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,c=t.count;s<c;s+=2)O1.fromBufferAttribute(t,s),P1.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+O1.distanceTo(P1);e.setAttribute("lineDistance",new bt(i,1))}else ct("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ZE extends Pc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Cb extends zs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const z1=new Gt,V_=new ed,G0=new vs,W0=new Y;class QE extends wn{constructor(e=new Qt,t=new Cb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,c=e.params.Points.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),G0.copy(i.boundingSphere),G0.applyMatrix4(s),G0.radius+=c,e.ray.intersectsSphere(G0)===!1)return;z1.copy(s).invert(),V_.copy(e.ray).applyMatrix4(z1);const h=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,g=i.index,_=i.attributes.position;if(g!==null){const b=Math.max(0,f.start),M=Math.min(g.count,f.start+f.count);for(let A=b,R=M;A<R;A++){const w=g.getX(A);W0.fromBufferAttribute(_,w),B1(W0,w,m,s,e,t,this)}}else{const b=Math.max(0,f.start),M=Math.min(_.count,f.start+f.count);for(let A=b,R=M;A<R;A++)W0.fromBufferAttribute(_,A),B1(W0,A,m,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const h=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=c}}}}}function B1(r,e,t,i,s,c,f){const h=V_.distanceSqToPoint(r);if(h<t){const m=new Y;V_.closestPointToPoint(r,m),m.applyMatrix4(i);const g=s.ray.origin.distanceTo(m);if(g<s.near||g>s.far)return;c.push({distance:g,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,faceIndex:null,barycoord:null,object:f})}}class JE extends Ti{constructor(e,t,i,s,c=qn,f=qn,h,m,g){super(e,t,i,s,c,f,h,m,g),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const y=this;function _(){y.needsUpdate=!0,y._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class w3 extends JE{constructor(e,t,i,s,c,f,h,m){super({},e,t,i,s,c,f,h,m),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class C3 extends Ti{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ii,this.minFilter=Ii,this.generateMipmaps=!1,this.needsUpdate=!0}}class Rx extends Ti{constructor(e,t,i,s,c,f,h,m,g,y,_,b){super(null,f,h,m,g,y,s,c,_,b),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class R3 extends Rx{constructor(e,t,i,s,c,f){super(e,t,i,c,f),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=wa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class N3 extends Rx{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,zo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class D3 extends Ti{constructor(e,t,i,s,c,f,h,m,g){super(e,t,i,s,c,f,h,m,g),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ef extends Ti{constructor(e,t,i=gr,s,c,f,h=Ii,m=Ii,g,y=Bo,_=1){if(y!==Bo&&y!==Nc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const b={width:e,height:t,depth:_};super(b,s,c,f,h,m,y,i,g),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Dc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class KE extends ef{constructor(e,t=gr,i=zo,s,c,f=Ii,h=Ii,m,g=Bo){const y={width:e,height:e,depth:1},_=[y,y,y,y,y,y];super(e,e,t,i,s,c,f,h,m,g),this.image=_,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class Rb extends Ti{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Nx extends Qt{constructor(e=1,t=1,i=4,s=8,c=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s,heightSegments:c},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),s=Math.max(3,Math.floor(s)),c=Math.max(1,Math.floor(c));const f=[],h=[],m=[],g=[],y=t/2,_=Math.PI/2*e,b=t,M=2*_+b,A=i*2+c,R=s+1,w=new Y,E=new Y;for(let N=0;N<=A;N++){let L=0,U=0,B=0,z=0;if(N<=i){const I=N/i,P=I*Math.PI/2;U=-y-e*Math.cos(P),B=e*Math.sin(P),z=-e*Math.cos(P),L=I*_}else if(N<=i+c){const I=(N-i)/c;U=-y+I*t,B=e,z=0,L=_+I*b}else{const I=(N-i-c)/i,P=I*Math.PI/2;U=y+e*Math.sin(P),B=e*Math.cos(P),z=e*Math.sin(P),L=_+b+I*_}const H=Math.max(0,Math.min(1,L/M));let j=0;N===0?j=.5/s:N===A&&(j=-.5/s);for(let I=0;I<=s;I++){const P=I/s,q=P*Math.PI*2,se=Math.sin(q),ee=Math.cos(q);E.x=-B*ee,E.y=U,E.z=B*se,h.push(E.x,E.y,E.z),w.set(-B*ee,z,B*se),w.normalize(),m.push(w.x,w.y,w.z),g.push(P+j,H)}if(N>0){const I=(N-1)*R;for(let P=0;P<s;P++){const q=I+P,se=I+P+1,ee=N*R+P,de=N*R+P+1;f.push(q,se,ee),f.push(se,de,ee)}}}this.setIndex(f),this.setAttribute("position",new bt(h,3)),this.setAttribute("normal",new bt(m,3)),this.setAttribute("uv",new bt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nx(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Dx extends Qt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const c=[],f=[],h=[],m=[],g=new Y,y=new Fe;f.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let _=0,b=3;_<=t;_++,b+=3){const M=i+_/t*s;g.x=e*Math.cos(M),g.y=e*Math.sin(M),f.push(g.x,g.y,g.z),h.push(0,0,1),y.x=(f[b]/e+1)/2,y.y=(f[b+1]/e+1)/2,m.push(y.x,y.y)}for(let _=1;_<=t;_++)c.push(_,_+1,0);this.setIndex(c),this.setAttribute("position",new bt(f,3)),this.setAttribute("normal",new bt(h,3)),this.setAttribute("uv",new bt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tm extends Qt{constructor(e=1,t=1,i=1,s=32,c=1,f=!1,h=0,m=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:c,openEnded:f,thetaStart:h,thetaLength:m};const g=this;s=Math.floor(s),c=Math.floor(c);const y=[],_=[],b=[],M=[];let A=0;const R=[],w=i/2;let E=0;N(),f===!1&&(e>0&&L(!0),t>0&&L(!1)),this.setIndex(y),this.setAttribute("position",new bt(_,3)),this.setAttribute("normal",new bt(b,3)),this.setAttribute("uv",new bt(M,2));function N(){const U=new Y,B=new Y;let z=0;const H=(t-e)/i;for(let j=0;j<=c;j++){const I=[],P=j/c,q=P*(t-e)+e;for(let se=0;se<=s;se++){const ee=se/s,de=ee*m+h,oe=Math.sin(de),Q=Math.cos(de);B.x=q*oe,B.y=-P*i+w,B.z=q*Q,_.push(B.x,B.y,B.z),U.set(oe,H,Q).normalize(),b.push(U.x,U.y,U.z),M.push(ee,1-P),I.push(A++)}R.push(I)}for(let j=0;j<s;j++)for(let I=0;I<c;I++){const P=R[I][j],q=R[I+1][j],se=R[I+1][j+1],ee=R[I][j+1];(e>0||I!==0)&&(y.push(P,q,ee),z+=3),(t>0||I!==c-1)&&(y.push(q,se,ee),z+=3)}g.addGroup(E,z,0),E+=z}function L(U){const B=A,z=new Fe,H=new Y;let j=0;const I=U===!0?e:t,P=U===!0?1:-1;for(let se=1;se<=s;se++)_.push(0,w*P,0),b.push(0,P,0),M.push(.5,.5),A++;const q=A;for(let se=0;se<=s;se++){const de=se/s*m+h,oe=Math.cos(de),Q=Math.sin(de);H.x=I*Q,H.y=w*P,H.z=I*oe,_.push(H.x,H.y,H.z),b.push(0,P,0),z.x=oe*.5+.5,z.y=Q*.5*P+.5,M.push(z.x,z.y),A++}for(let se=0;se<s;se++){const ee=B+se,de=q+se;U===!0?y.push(de,de+1,ee):y.push(de+1,de,ee),j+=3}g.addGroup(E,j,U===!0?1:2),E+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Am extends Tm{constructor(e=1,t=1,i=32,s=1,c=!1,f=0,h=Math.PI*2){super(0,e,t,i,s,c,f,h),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:c,thetaStart:f,thetaLength:h}}static fromJSON(e){return new Am(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kc extends Qt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const c=[],f=[];h(s),g(i),y(),this.setAttribute("position",new bt(c,3)),this.setAttribute("normal",new bt(c.slice(),3)),this.setAttribute("uv",new bt(f,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function h(N){const L=new Y,U=new Y,B=new Y;for(let z=0;z<t.length;z+=3)M(t[z+0],L),M(t[z+1],U),M(t[z+2],B),m(L,U,B,N)}function m(N,L,U,B){const z=B+1,H=[];for(let j=0;j<=z;j++){H[j]=[];const I=N.clone().lerp(U,j/z),P=L.clone().lerp(U,j/z),q=z-j;for(let se=0;se<=q;se++)se===0&&j===z?H[j][se]=I:H[j][se]=I.clone().lerp(P,se/q)}for(let j=0;j<z;j++)for(let I=0;I<2*(z-j)-1;I++){const P=Math.floor(I/2);I%2===0?(b(H[j][P+1]),b(H[j+1][P]),b(H[j][P])):(b(H[j][P+1]),b(H[j+1][P+1]),b(H[j+1][P]))}}function g(N){const L=new Y;for(let U=0;U<c.length;U+=3)L.x=c[U+0],L.y=c[U+1],L.z=c[U+2],L.normalize().multiplyScalar(N),c[U+0]=L.x,c[U+1]=L.y,c[U+2]=L.z}function y(){const N=new Y;for(let L=0;L<c.length;L+=3){N.x=c[L+0],N.y=c[L+1],N.z=c[L+2];const U=w(N)/2/Math.PI+.5,B=E(N)/Math.PI+.5;f.push(U,1-B)}A(),_()}function _(){for(let N=0;N<f.length;N+=6){const L=f[N+0],U=f[N+2],B=f[N+4],z=Math.max(L,U,B),H=Math.min(L,U,B);z>.9&&H<.1&&(L<.2&&(f[N+0]+=1),U<.2&&(f[N+2]+=1),B<.2&&(f[N+4]+=1))}}function b(N){c.push(N.x,N.y,N.z)}function M(N,L){const U=N*3;L.x=e[U+0],L.y=e[U+1],L.z=e[U+2]}function A(){const N=new Y,L=new Y,U=new Y,B=new Y,z=new Fe,H=new Fe,j=new Fe;for(let I=0,P=0;I<c.length;I+=9,P+=6){N.set(c[I+0],c[I+1],c[I+2]),L.set(c[I+3],c[I+4],c[I+5]),U.set(c[I+6],c[I+7],c[I+8]),z.set(f[P+0],f[P+1]),H.set(f[P+2],f[P+3]),j.set(f[P+4],f[P+5]),B.copy(N).add(L).add(U).divideScalar(3);const q=w(B);R(z,P+0,N,q),R(H,P+2,L,q),R(j,P+4,U,q)}}function R(N,L,U,B){B<0&&N.x===1&&(f[L]=N.x-1),U.x===0&&U.z===0&&(f[L]=B/2/Math.PI+.5)}function w(N){return Math.atan2(N.z,-N.x)}function E(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.vertices,e.indices,e.radius,e.detail)}}class Lx extends kc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],f=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(c,f,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lx(e.radius,e.detail)}}const X0=new Y,j0=new Y,r_=new Y,q0=new Aa;class $E extends Qt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),c=Math.cos(Zu*t),f=e.getIndex(),h=e.getAttribute("position"),m=f?f.count:h.count,g=[0,0,0],y=["a","b","c"],_=new Array(3),b={},M=[];for(let A=0;A<m;A+=3){f?(g[0]=f.getX(A),g[1]=f.getX(A+1),g[2]=f.getX(A+2)):(g[0]=A,g[1]=A+1,g[2]=A+2);const{a:R,b:w,c:E}=q0;if(R.fromBufferAttribute(h,g[0]),w.fromBufferAttribute(h,g[1]),E.fromBufferAttribute(h,g[2]),q0.getNormal(r_),_[0]=`${Math.round(R.x*s)},${Math.round(R.y*s)},${Math.round(R.z*s)}`,_[1]=`${Math.round(w.x*s)},${Math.round(w.y*s)},${Math.round(w.z*s)}`,_[2]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let N=0;N<3;N++){const L=(N+1)%3,U=_[N],B=_[L],z=q0[y[N]],H=q0[y[L]],j=`${U}_${B}`,I=`${B}_${U}`;I in b&&b[I]?(r_.dot(b[I].normal)<=c&&(M.push(z.x,z.y,z.z),M.push(H.x,H.y,H.z)),b[I]=null):j in b||(b[j]={index0:g[N],index1:g[L],normal:r_.clone()})}}for(const A in b)if(b[A]){const{index0:R,index1:w}=b[A];X0.fromBufferAttribute(h,R),j0.fromBufferAttribute(h,w),M.push(X0.x,X0.y,X0.z),M.push(j0.x,j0.y,j0.z)}this.setAttribute("position",new bt(M,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qr{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ct("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),c=0;t.push(0);for(let f=1;f<=e;f++)i=this.getPoint(f/e),c+=i.distanceTo(s),t.push(c),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let s=0;const c=i.length;let f;t?f=t:f=e*i[c-1];let h=0,m=c-1,g;for(;h<=m;)if(s=Math.floor(h+(m-h)/2),g=i[s]-f,g<0)h=s+1;else if(g>0)m=s-1;else{m=s;break}if(s=m,i[s]===f)return s/(c-1);const y=i[s],b=i[s+1]-y,M=(f-y)/b;return(s+M)/(c-1)}getTangent(e,t){let s=e-1e-4,c=e+1e-4;s<0&&(s=0),c>1&&(c=1);const f=this.getPoint(s),h=this.getPoint(c),m=t||(f.isVector2?new Fe:new Y);return m.copy(h).sub(f).normalize(),m}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Y,s=[],c=[],f=[],h=new Y,m=new Gt;for(let M=0;M<=e;M++){const A=M/e;s[M]=this.getTangentAt(A,new Y)}c[0]=new Y,f[0]=new Y;let g=Number.MAX_VALUE;const y=Math.abs(s[0].x),_=Math.abs(s[0].y),b=Math.abs(s[0].z);y<=g&&(g=y,i.set(1,0,0)),_<=g&&(g=_,i.set(0,1,0)),b<=g&&i.set(0,0,1),h.crossVectors(s[0],i).normalize(),c[0].crossVectors(s[0],h),f[0].crossVectors(s[0],c[0]);for(let M=1;M<=e;M++){if(c[M]=c[M-1].clone(),f[M]=f[M-1].clone(),h.crossVectors(s[M-1],s[M]),h.length()>Number.EPSILON){h.normalize();const A=Math.acos(Vt(s[M-1].dot(s[M]),-1,1));c[M].applyMatrix4(m.makeRotationAxis(h,A))}f[M].crossVectors(s[M],c[M])}if(t===!0){let M=Math.acos(Vt(c[0].dot(c[e]),-1,1));M/=e,s[0].dot(h.crossVectors(c[0],c[e]))>0&&(M=-M);for(let A=1;A<=e;A++)c[A].applyMatrix4(m.makeRotationAxis(s[A],M*A)),f[A].crossVectors(s[A],c[A])}return{tangents:s,normals:c,binormals:f}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ux extends Qr{constructor(e=0,t=0,i=1,s=1,c=0,f=Math.PI*2,h=!1,m=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=c,this.aEndAngle=f,this.aClockwise=h,this.aRotation=m}getPoint(e,t=new Fe){const i=t,s=Math.PI*2;let c=this.aEndAngle-this.aStartAngle;const f=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=s;for(;c>s;)c-=s;c<Number.EPSILON&&(f?c=0:c=s),this.aClockwise===!0&&!f&&(c===s?c=-s:c=c-s);const h=this.aStartAngle+e*c;let m=this.aX+this.xRadius*Math.cos(h),g=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const y=Math.cos(this.aRotation),_=Math.sin(this.aRotation),b=m-this.aX,M=g-this.aY;m=b*y-M*_+this.aX,g=b*_+M*y+this.aY}return i.set(m,g)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class eT extends Ux{constructor(e,t,i,s,c,f){super(e,t,i,i,s,c,f),this.isArcCurve=!0,this.type="ArcCurve"}}function Nb(){let r=0,e=0,t=0,i=0;function s(c,f,h,m){r=c,e=h,t=-3*c+3*f-2*h-m,i=2*c-2*f+h+m}return{initCatmullRom:function(c,f,h,m,g){s(f,h,g*(h-c),g*(m-f))},initNonuniformCatmullRom:function(c,f,h,m,g,y,_){let b=(f-c)/g-(h-c)/(g+y)+(h-f)/y,M=(h-f)/y-(m-f)/(y+_)+(m-h)/_;b*=y,M*=y,s(f,h,b,M)},calc:function(c){const f=c*c,h=f*c;return r+e*c+t*f+i*h}}}const Y0=new Y,o_=new Nb,l_=new Nb,c_=new Nb;class tT extends Qr{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new Y){const i=t,s=this.points,c=s.length,f=(c-(this.closed?0:1))*e;let h=Math.floor(f),m=f-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/c)+1)*c:m===0&&h===c-1&&(h=c-2,m=1);let g,y;this.closed||h>0?g=s[(h-1)%c]:(Y0.subVectors(s[0],s[1]).add(s[0]),g=Y0);const _=s[h%c],b=s[(h+1)%c];if(this.closed||h+2<c?y=s[(h+2)%c]:(Y0.subVectors(s[c-1],s[c-2]).add(s[c-1]),y=Y0),this.curveType==="centripetal"||this.curveType==="chordal"){const M=this.curveType==="chordal"?.5:.25;let A=Math.pow(g.distanceToSquared(_),M),R=Math.pow(_.distanceToSquared(b),M),w=Math.pow(b.distanceToSquared(y),M);R<1e-4&&(R=1),A<1e-4&&(A=R),w<1e-4&&(w=R),o_.initNonuniformCatmullRom(g.x,_.x,b.x,y.x,A,R,w),l_.initNonuniformCatmullRom(g.y,_.y,b.y,y.y,A,R,w),c_.initNonuniformCatmullRom(g.z,_.z,b.z,y.z,A,R,w)}else this.curveType==="catmullrom"&&(o_.initCatmullRom(g.x,_.x,b.x,y.x,this.tension),l_.initCatmullRom(g.y,_.y,b.y,y.y,this.tension),c_.initCatmullRom(g.z,_.z,b.z,y.z,this.tension));return i.set(o_.calc(m),l_.calc(m),c_.calc(m)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Y().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function F1(r,e,t,i,s){const c=(i-e)*.5,f=(s-t)*.5,h=r*r,m=r*h;return(2*t-2*i+c+f)*m+(-3*t+3*i-2*c-f)*h+c*r+t}function L3(r,e){const t=1-r;return t*t*e}function U3(r,e){return 2*(1-r)*r*e}function I3(r,e){return r*r*e}function em(r,e,t,i){return L3(r,e)+U3(r,t)+I3(r,i)}function O3(r,e){const t=1-r;return t*t*t*e}function P3(r,e){const t=1-r;return 3*t*t*r*e}function z3(r,e){return 3*(1-r)*r*r*e}function B3(r,e){return r*r*r*e}function tm(r,e,t,i,s){return O3(r,e)+P3(r,t)+z3(r,i)+B3(r,s)}class Db extends Qr{constructor(e=new Fe,t=new Fe,i=new Fe,s=new Fe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Fe){const i=t,s=this.v0,c=this.v1,f=this.v2,h=this.v3;return i.set(tm(e,s.x,c.x,f.x,h.x),tm(e,s.y,c.y,f.y,h.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nT extends Qr{constructor(e=new Y,t=new Y,i=new Y,s=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Y){const i=t,s=this.v0,c=this.v1,f=this.v2,h=this.v3;return i.set(tm(e,s.x,c.x,f.x,h.x),tm(e,s.y,c.y,f.y,h.y),tm(e,s.z,c.z,f.z,h.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lb extends Qr{constructor(e=new Fe,t=new Fe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Fe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iT extends Qr{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ub extends Qr{constructor(e=new Fe,t=new Fe,i=new Fe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Fe){const i=t,s=this.v0,c=this.v1,f=this.v2;return i.set(em(e,s.x,c.x,f.x),em(e,s.y,c.y,f.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ib extends Qr{constructor(e=new Y,t=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Y){const i=t,s=this.v0,c=this.v1,f=this.v2;return i.set(em(e,s.x,c.x,f.x),em(e,s.y,c.y,f.y),em(e,s.z,c.z,f.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ob extends Qr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Fe){const i=t,s=this.points,c=(s.length-1)*e,f=Math.floor(c),h=c-f,m=s[f===0?f:f-1],g=s[f],y=s[f>s.length-2?s.length-1:f+1],_=s[f>s.length-3?s.length-1:f+2];return i.set(F1(h,m.x,g.x,y.x,_.x),F1(h,m.y,g.y,y.y,_.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Fe().fromArray(s))}return this}}var nx=Object.freeze({__proto__:null,ArcCurve:eT,CatmullRomCurve3:tT,CubicBezierCurve:Db,CubicBezierCurve3:nT,EllipseCurve:Ux,LineCurve:Lb,LineCurve3:iT,QuadraticBezierCurve:Ub,QuadraticBezierCurve3:Ib,SplineCurve:Ob});class sT extends Qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nx[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let c=0;for(;c<s.length;){if(s[c]>=i){const f=s[c]-i,h=this.curves[c],m=h.getLength(),g=m===0?0:1-f/m;return h.getPointAt(g,t)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,c=this.curves;s<c.length;s++){const f=c[s],h=f.isEllipseCurve?e*2:f.isLineCurve||f.isLineCurve3?1:f.isSplineCurve?e*f.points.length:e,m=f.getPoints(h);for(let g=0;g<m.length;g++){const y=m[g];i&&i.equals(y)||(t.push(y),i=y)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new nx[s.type]().fromJSON(s))}return this}}class ix extends sT{constructor(e){super(),this.type="Path",this.currentPoint=new Fe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Lb(this.currentPoint.clone(),new Fe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const c=new Ub(this.currentPoint.clone(),new Fe(e,t),new Fe(i,s));return this.curves.push(c),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,c,f){const h=new Db(this.currentPoint.clone(),new Fe(e,t),new Fe(i,s),new Fe(c,f));return this.curves.push(h),this.currentPoint.set(c,f),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Ob(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,c,f){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absarc(e+h,t+m,i,s,c,f),this}absarc(e,t,i,s,c,f){return this.absellipse(e,t,i,i,s,c,f),this}ellipse(e,t,i,s,c,f,h,m){const g=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(e+g,t+y,i,s,c,f,h,m),this}absellipse(e,t,i,s,c,f,h,m){const g=new Ux(e,t,i,s,c,f,h,m);if(this.curves.length>0){const _=g.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(g);const y=g.getPoint(1);return this.currentPoint.copy(y),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qu extends ix{constructor(e){super(e),this.uuid=Va(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new ix().fromJSON(s))}return this}}function F3(r,e,t=2){const i=e&&e.length,s=i?e[0]*t:r.length;let c=aT(r,0,s,t,!0);const f=[];if(!c||c.next===c.prev)return f;let h,m,g;if(i&&(c=W3(r,e,c,t)),r.length>80*t){h=r[0],m=r[1];let y=h,_=m;for(let b=t;b<s;b+=t){const M=r[b],A=r[b+1];M<h&&(h=M),A<m&&(m=A),M>y&&(y=M),A>_&&(_=A)}g=Math.max(y-h,_-m),g=g!==0?32767/g:0}return dm(c,f,t,h,m,g,0),f}function aT(r,e,t,i,s){let c;if(s===tR(r,e,t,i)>0)for(let f=e;f<t;f+=i)c=k1(f/i|0,r[f],r[f+1],c);else for(let f=t-i;f>=e;f-=i)c=k1(f/i|0,r[f],r[f+1],c);return c&&Jh(c,c.next)&&(mm(c),c=c.next),c}function tf(r,e){if(!r)return r;e||(e=r);let t=r,i;do if(i=!1,!t.steiner&&(Jh(t,t.next)||vi(t.prev,t,t.next)===0)){if(mm(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function dm(r,e,t,i,s,c,f){if(!r)return;!f&&c&&Z3(r,i,s,c);let h=r;for(;r.prev!==r.next;){const m=r.prev,g=r.next;if(c?V3(r,i,s,c):k3(r)){e.push(m.i,r.i,g.i),mm(r),r=g.next,h=g.next;continue}if(r=g,r===h){f?f===1?(r=H3(tf(r),e),dm(r,e,t,i,s,c,2)):f===2&&G3(r,e,t,i,s,c):dm(tf(r),e,t,i,s,c,1);break}}}function k3(r){const e=r.prev,t=r,i=r.next;if(vi(e,t,i)>=0)return!1;const s=e.x,c=t.x,f=i.x,h=e.y,m=t.y,g=i.y,y=Math.min(s,c,f),_=Math.min(h,m,g),b=Math.max(s,c,f),M=Math.max(h,m,g);let A=i.next;for(;A!==e;){if(A.x>=y&&A.x<=b&&A.y>=_&&A.y<=M&&Xp(s,h,c,m,f,g,A.x,A.y)&&vi(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function V3(r,e,t,i){const s=r.prev,c=r,f=r.next;if(vi(s,c,f)>=0)return!1;const h=s.x,m=c.x,g=f.x,y=s.y,_=c.y,b=f.y,M=Math.min(h,m,g),A=Math.min(y,_,b),R=Math.max(h,m,g),w=Math.max(y,_,b),E=H_(M,A,e,t,i),N=H_(R,w,e,t,i);let L=r.prevZ,U=r.nextZ;for(;L&&L.z>=E&&U&&U.z<=N;){if(L.x>=M&&L.x<=R&&L.y>=A&&L.y<=w&&L!==s&&L!==f&&Xp(h,y,m,_,g,b,L.x,L.y)&&vi(L.prev,L,L.next)>=0||(L=L.prevZ,U.x>=M&&U.x<=R&&U.y>=A&&U.y<=w&&U!==s&&U!==f&&Xp(h,y,m,_,g,b,U.x,U.y)&&vi(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;L&&L.z>=E;){if(L.x>=M&&L.x<=R&&L.y>=A&&L.y<=w&&L!==s&&L!==f&&Xp(h,y,m,_,g,b,L.x,L.y)&&vi(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;U&&U.z<=N;){if(U.x>=M&&U.x<=R&&U.y>=A&&U.y<=w&&U!==s&&U!==f&&Xp(h,y,m,_,g,b,U.x,U.y)&&vi(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function H3(r,e){let t=r;do{const i=t.prev,s=t.next.next;!Jh(i,s)&&oT(i,t,t.next,s)&&pm(i,s)&&pm(s,i)&&(e.push(i.i,t.i,s.i),mm(t),mm(t.next),t=r=s),t=t.next}while(t!==r);return tf(t)}function G3(r,e,t,i,s,c){let f=r;do{let h=f.next.next;for(;h!==f.prev;){if(f.i!==h.i&&K3(f,h)){let m=lT(f,h);f=tf(f,f.next),m=tf(m,m.next),dm(f,e,t,i,s,c,0),dm(m,e,t,i,s,c,0);return}h=h.next}f=f.next}while(f!==r)}function W3(r,e,t,i){const s=[];for(let c=0,f=e.length;c<f;c++){const h=e[c]*i,m=c<f-1?e[c+1]*i:r.length,g=aT(r,h,m,i,!1);g===g.next&&(g.steiner=!0),s.push(J3(g))}s.sort(X3);for(let c=0;c<s.length;c++)t=j3(s[c],t);return t}function X3(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const i=(r.next.y-r.y)/(r.next.x-r.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=i-s}return t}function j3(r,e){const t=q3(r,e);if(!t)return e;const i=lT(t,r);return tf(i,i.next),tf(t,t.next)}function q3(r,e){let t=e;const i=r.x,s=r.y;let c=-1/0,f;if(Jh(r,t))return t;do{if(Jh(r,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const _=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=i&&_>c&&(c=_,f=t.x<t.next.x?t:t.next,_===i))return f}t=t.next}while(t!==e);if(!f)return null;const h=f,m=f.x,g=f.y;let y=1/0;t=f;do{if(i>=t.x&&t.x>=m&&i!==t.x&&rT(s<g?i:c,s,m,g,s<g?c:i,s,t.x,t.y)){const _=Math.abs(s-t.y)/(i-t.x);pm(t,r)&&(_<y||_===y&&(t.x>f.x||t.x===f.x&&Y3(f,t)))&&(f=t,y=_)}t=t.next}while(t!==h);return f}function Y3(r,e){return vi(r.prev,r,e.prev)<0&&vi(e.next,r,r.next)<0}function Z3(r,e,t,i){let s=r;do s.z===0&&(s.z=H_(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Q3(s)}function Q3(r){let e,t=1;do{let i=r,s;r=null;let c=null;for(e=0;i;){e++;let f=i,h=0;for(let g=0;g<t&&(h++,f=f.nextZ,!!f);g++);let m=t;for(;h>0||m>0&&f;)h!==0&&(m===0||!f||i.z<=f.z)?(s=i,i=i.nextZ,h--):(s=f,f=f.nextZ,m--),c?c.nextZ=s:r=s,s.prevZ=c,c=s;i=f}c.nextZ=null,t*=2}while(e>1);return r}function H_(r,e,t,i,s){return r=(r-t)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function J3(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function rT(r,e,t,i,s,c,f,h){return(s-f)*(e-h)>=(r-f)*(c-h)&&(r-f)*(i-h)>=(t-f)*(e-h)&&(t-f)*(c-h)>=(s-f)*(i-h)}function Xp(r,e,t,i,s,c,f,h){return!(r===f&&e===h)&&rT(r,e,t,i,s,c,f,h)}function K3(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!$3(r,e)&&(pm(r,e)&&pm(e,r)&&eR(r,e)&&(vi(r.prev,r,e.prev)||vi(r,e.prev,e))||Jh(r,e)&&vi(r.prev,r,r.next)>0&&vi(e.prev,e,e.next)>0)}function vi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Jh(r,e){return r.x===e.x&&r.y===e.y}function oT(r,e,t,i){const s=Q0(vi(r,e,t)),c=Q0(vi(r,e,i)),f=Q0(vi(t,i,r)),h=Q0(vi(t,i,e));return!!(s!==c&&f!==h||s===0&&Z0(r,t,e)||c===0&&Z0(r,i,e)||f===0&&Z0(t,r,i)||h===0&&Z0(t,e,i))}function Z0(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Q0(r){return r>0?1:r<0?-1:0}function $3(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&oT(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function pm(r,e){return vi(r.prev,r,r.next)<0?vi(r,e,r.next)>=0&&vi(r,r.prev,e)>=0:vi(r,e,r.prev)<0||vi(r,r.next,e)<0}function eR(r,e){let t=r,i=!1;const s=(r.x+e.x)/2,c=(r.y+e.y)/2;do t.y>c!=t.next.y>c&&t.next.y!==t.y&&s<(t.next.x-t.x)*(c-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function lT(r,e){const t=G_(r.i,r.x,r.y),i=G_(e.i,e.x,e.y),s=r.next,c=e.prev;return r.next=e,e.prev=r,t.next=s,s.prev=t,i.next=t,t.prev=i,c.next=i,i.prev=c,i}function k1(r,e,t,i){const s=G_(r,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function mm(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function G_(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function tR(r,e,t,i){let s=0;for(let c=e,f=t-i;c<t;c+=i)s+=(r[f]-r[c])*(r[c+1]+r[f+1]),f=c;return s}class nR{static triangulate(e,t,i=2){return F3(e,t,i)}}class jr{static area(e){const t=e.length;let i=0;for(let s=t-1,c=0;c<t;s=c++)i+=e[s].x*e[c].y-e[c].x*e[s].y;return i*.5}static isClockWise(e){return jr.area(e)<0}static triangulateShape(e,t){const i=[],s=[],c=[];V1(e),H1(i,e);let f=e.length;t.forEach(V1);for(let m=0;m<t.length;m++)s.push(f),f+=t[m].length,H1(i,t[m]);const h=nR.triangulate(i,s);for(let m=0;m<h.length;m+=3)c.push(h.slice(m,m+3));return c}}function V1(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function H1(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Ix extends Qt{constructor(e=new Qu([new Fe(.5,.5),new Fe(-.5,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],c=[];for(let h=0,m=e.length;h<m;h++){const g=e[h];f(g)}this.setAttribute("position",new bt(s,3)),this.setAttribute("uv",new bt(c,2)),this.computeVertexNormals();function f(h){const m=[],g=t.curveSegments!==void 0?t.curveSegments:12,y=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,M=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:M-.1,R=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,N=t.UVGenerator!==void 0?t.UVGenerator:iR;let L,U=!1,B,z,H,j;if(E){L=E.getSpacedPoints(y),U=!0,b=!1;const Ne=E.isCatmullRomCurve3?E.closed:!1;B=E.computeFrenetFrames(y,Ne),z=new Y,H=new Y,j=new Y}b||(w=0,M=0,A=0,R=0);const I=h.extractPoints(g);let P=I.shape;const q=I.holes;if(!jr.isClockWise(P)){P=P.reverse();for(let Ne=0,Be=q.length;Ne<Be;Ne++){const Le=q[Ne];jr.isClockWise(Le)&&(q[Ne]=Le.reverse())}}function ee(Ne){const Le=10000000000000001e-36;let Ye=Ne[0];for(let Z=1;Z<=Ne.length;Z++){const St=Z%Ne.length,st=Ne[St],At=st.x-Ye.x,Xe=st.y-Ye.y,G=At*At+Xe*Xe,O=Math.max(Math.abs(st.x),Math.abs(st.y),Math.abs(Ye.x),Math.abs(Ye.y)),ne=Le*O*O;if(G<=ne){Ne.splice(St,1),Z--;continue}Ye=st}}ee(P),q.forEach(ee);const de=q.length,oe=P;for(let Ne=0;Ne<de;Ne++){const Be=q[Ne];P=P.concat(Be)}function Q(Ne,Be,Le){return Be||Rt("ExtrudeGeometry: vec does not exist"),Ne.clone().addScaledVector(Be,Le)}const J=P.length;function fe(Ne,Be,Le){let Ye,Z,St;const st=Ne.x-Be.x,At=Ne.y-Be.y,Xe=Le.x-Ne.x,G=Le.y-Ne.y,O=st*st+At*At,ne=st*G-At*Xe;if(Math.abs(ne)>Number.EPSILON){const Se=Math.sqrt(O),De=Math.sqrt(Xe*Xe+G*G),Ee=Be.x-At/Se,ht=Be.y+st/Se,Ke=Le.x-G/De,yt=Le.y+Xe/De,Dt=((Ke-Ee)*G-(yt-ht)*Xe)/(st*G-At*Xe);Ye=Ee+st*Dt-Ne.x,Z=ht+At*Dt-Ne.y;const Ve=Ye*Ye+Z*Z;if(Ve<=2)return new Fe(Ye,Z);St=Math.sqrt(Ve/2)}else{let Se=!1;st>Number.EPSILON?Xe>Number.EPSILON&&(Se=!0):st<-Number.EPSILON?Xe<-Number.EPSILON&&(Se=!0):Math.sign(At)===Math.sign(G)&&(Se=!0),Se?(Ye=-At,Z=st,St=Math.sqrt(O)):(Ye=st,Z=At,St=Math.sqrt(O/2))}return new Fe(Ye/St,Z/St)}const we=[];for(let Ne=0,Be=oe.length,Le=Be-1,Ye=Ne+1;Ne<Be;Ne++,Le++,Ye++)Le===Be&&(Le=0),Ye===Be&&(Ye=0),we[Ne]=fe(oe[Ne],oe[Le],oe[Ye]);const Ce=[];let X,re=we.concat();for(let Ne=0,Be=de;Ne<Be;Ne++){const Le=q[Ne];X=[];for(let Ye=0,Z=Le.length,St=Z-1,st=Ye+1;Ye<Z;Ye++,St++,st++)St===Z&&(St=0),st===Z&&(st=0),X[Ye]=fe(Le[Ye],Le[St],Le[st]);Ce.push(X),re=re.concat(X)}let _e;if(w===0)_e=jr.triangulateShape(oe,q);else{const Ne=[],Be=[];for(let Le=0;Le<w;Le++){const Ye=Le/w,Z=M*Math.cos(Ye*Math.PI/2),St=A*Math.sin(Ye*Math.PI/2)+R;for(let st=0,At=oe.length;st<At;st++){const Xe=Q(oe[st],we[st],St);nt(Xe.x,Xe.y,-Z),Ye===0&&Ne.push(Xe)}for(let st=0,At=de;st<At;st++){const Xe=q[st];X=Ce[st];const G=[];for(let O=0,ne=Xe.length;O<ne;O++){const Se=Q(Xe[O],X[O],St);nt(Se.x,Se.y,-Z),Ye===0&&G.push(Se)}Ye===0&&Be.push(G)}}_e=jr.triangulateShape(Ne,Be)}const Pe=_e.length,it=A+R;for(let Ne=0;Ne<J;Ne++){const Be=b?Q(P[Ne],re[Ne],it):P[Ne];U?(H.copy(B.normals[0]).multiplyScalar(Be.x),z.copy(B.binormals[0]).multiplyScalar(Be.y),j.copy(L[0]).add(H).add(z),nt(j.x,j.y,j.z)):nt(Be.x,Be.y,0)}for(let Ne=1;Ne<=y;Ne++)for(let Be=0;Be<J;Be++){const Le=b?Q(P[Be],re[Be],it):P[Be];U?(H.copy(B.normals[Ne]).multiplyScalar(Le.x),z.copy(B.binormals[Ne]).multiplyScalar(Le.y),j.copy(L[Ne]).add(H).add(z),nt(j.x,j.y,j.z)):nt(Le.x,Le.y,_/y*Ne)}for(let Ne=w-1;Ne>=0;Ne--){const Be=Ne/w,Le=M*Math.cos(Be*Math.PI/2),Ye=A*Math.sin(Be*Math.PI/2)+R;for(let Z=0,St=oe.length;Z<St;Z++){const st=Q(oe[Z],we[Z],Ye);nt(st.x,st.y,_+Le)}for(let Z=0,St=q.length;Z<St;Z++){const st=q[Z];X=Ce[Z];for(let At=0,Xe=st.length;At<Xe;At++){const G=Q(st[At],X[At],Ye);U?nt(G.x,G.y+L[y-1].y,L[y-1].x+Le):nt(G.x,G.y,_+Le)}}}he(),Ae();function he(){const Ne=s.length/3;if(b){let Be=0,Le=J*Be;for(let Ye=0;Ye<Pe;Ye++){const Z=_e[Ye];$e(Z[2]+Le,Z[1]+Le,Z[0]+Le)}Be=y+w*2,Le=J*Be;for(let Ye=0;Ye<Pe;Ye++){const Z=_e[Ye];$e(Z[0]+Le,Z[1]+Le,Z[2]+Le)}}else{for(let Be=0;Be<Pe;Be++){const Le=_e[Be];$e(Le[2],Le[1],Le[0])}for(let Be=0;Be<Pe;Be++){const Le=_e[Be];$e(Le[0]+J*y,Le[1]+J*y,Le[2]+J*y)}}i.addGroup(Ne,s.length/3-Ne,0)}function Ae(){const Ne=s.length/3;let Be=0;qe(oe,Be),Be+=oe.length;for(let Le=0,Ye=q.length;Le<Ye;Le++){const Z=q[Le];qe(Z,Be),Be+=Z.length}i.addGroup(Ne,s.length/3-Ne,1)}function qe(Ne,Be){let Le=Ne.length;for(;--Le>=0;){const Ye=Le;let Z=Le-1;Z<0&&(Z=Ne.length-1);for(let St=0,st=y+w*2;St<st;St++){const At=J*St,Xe=J*(St+1),G=Be+Ye+At,O=Be+Z+At,ne=Be+Z+Xe,Se=Be+Ye+Xe;xt(G,O,ne,Se)}}}function nt(Ne,Be,Le){m.push(Ne),m.push(Be),m.push(Le)}function $e(Ne,Be,Le){Wt(Ne),Wt(Be),Wt(Le);const Ye=s.length/3,Z=N.generateTopUV(i,s,Ye-3,Ye-2,Ye-1);Tt(Z[0]),Tt(Z[1]),Tt(Z[2])}function xt(Ne,Be,Le,Ye){Wt(Ne),Wt(Be),Wt(Ye),Wt(Be),Wt(Le),Wt(Ye);const Z=s.length/3,St=N.generateSideWallUV(i,s,Z-6,Z-3,Z-2,Z-1);Tt(St[0]),Tt(St[1]),Tt(St[3]),Tt(St[1]),Tt(St[2]),Tt(St[3])}function Wt(Ne){s.push(m[Ne*3+0]),s.push(m[Ne*3+1]),s.push(m[Ne*3+2])}function Tt(Ne){c.push(Ne.x),c.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return sR(t,i,e)}static fromJSON(e,t){const i=[];for(let c=0,f=e.shapes.length;c<f;c++){const h=t[e.shapes[c]];i.push(h)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new nx[s.type]().fromJSON(s)),new Ix(i,e.options)}}const iR={generateTopUV:function(r,e,t,i,s){const c=e[t*3],f=e[t*3+1],h=e[i*3],m=e[i*3+1],g=e[s*3],y=e[s*3+1];return[new Fe(c,f),new Fe(h,m),new Fe(g,y)]},generateSideWallUV:function(r,e,t,i,s,c){const f=e[t*3],h=e[t*3+1],m=e[t*3+2],g=e[i*3],y=e[i*3+1],_=e[i*3+2],b=e[s*3],M=e[s*3+1],A=e[s*3+2],R=e[c*3],w=e[c*3+1],E=e[c*3+2];return Math.abs(h-y)<Math.abs(f-g)?[new Fe(f,1-m),new Fe(g,1-_),new Fe(b,1-A),new Fe(R,1-E)]:[new Fe(h,1-m),new Fe(y,1-_),new Fe(M,1-A),new Fe(w,1-E)]}};function sR(r,e,t){if(t.shapes=[],Array.isArray(r))for(let i=0,s=r.length;i<s;i++){const c=r[i];t.shapes.push(c.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ox extends kc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,c,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ox(e.radius,e.detail)}}class Px extends Qt{constructor(e=[new Fe(0,-.5),new Fe(.5,0),new Fe(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Vt(s,0,Math.PI*2);const c=[],f=[],h=[],m=[],g=[],y=1/t,_=new Y,b=new Fe,M=new Y,A=new Y,R=new Y;let w=0,E=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:w=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,M.x=E*1,M.y=-w,M.z=E*0,R.copy(M),M.normalize(),m.push(M.x,M.y,M.z);break;case e.length-1:m.push(R.x,R.y,R.z);break;default:w=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,M.x=E*1,M.y=-w,M.z=E*0,A.copy(M),M.x+=R.x,M.y+=R.y,M.z+=R.z,M.normalize(),m.push(M.x,M.y,M.z),R.copy(A)}for(let N=0;N<=t;N++){const L=i+N*y*s,U=Math.sin(L),B=Math.cos(L);for(let z=0;z<=e.length-1;z++){_.x=e[z].x*U,_.y=e[z].y,_.z=e[z].x*B,f.push(_.x,_.y,_.z),b.x=N/t,b.y=z/(e.length-1),h.push(b.x,b.y);const H=m[3*z+0]*U,j=m[3*z+1],I=m[3*z+0]*B;g.push(H,j,I)}}for(let N=0;N<t;N++)for(let L=0;L<e.length-1;L++){const U=L+N*e.length,B=U,z=U+e.length,H=U+e.length+1,j=U+1;c.push(B,z,j),c.push(H,j,z)}this.setIndex(c),this.setAttribute("position",new bt(f,3)),this.setAttribute("uv",new bt(h,2)),this.setAttribute("normal",new bt(g,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Px(e.points,e.segments,e.phiStart,e.phiLength)}}class wm extends kc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wm(e.radius,e.detail)}}class nd extends Qt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const c=e/2,f=t/2,h=Math.floor(i),m=Math.floor(s),g=h+1,y=m+1,_=e/h,b=t/m,M=[],A=[],R=[],w=[];for(let E=0;E<y;E++){const N=E*b-f;for(let L=0;L<g;L++){const U=L*_-c;A.push(U,-N,0),R.push(0,0,1),w.push(L/h),w.push(1-E/m)}}for(let E=0;E<m;E++)for(let N=0;N<h;N++){const L=N+g*E,U=N+g*(E+1),B=N+1+g*(E+1),z=N+1+g*E;M.push(L,U,z),M.push(U,B,z)}this.setIndex(M),this.setAttribute("position",new bt(A,3)),this.setAttribute("normal",new bt(R,3)),this.setAttribute("uv",new bt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nd(e.width,e.height,e.widthSegments,e.heightSegments)}}class zx extends Qt{constructor(e=.5,t=1,i=32,s=1,c=0,f=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:c,thetaLength:f},i=Math.max(3,i),s=Math.max(1,s);const h=[],m=[],g=[],y=[];let _=e;const b=(t-e)/s,M=new Y,A=new Fe;for(let R=0;R<=s;R++){for(let w=0;w<=i;w++){const E=c+w/i*f;M.x=_*Math.cos(E),M.y=_*Math.sin(E),m.push(M.x,M.y,M.z),g.push(0,0,1),A.x=(M.x/t+1)/2,A.y=(M.y/t+1)/2,y.push(A.x,A.y)}_+=b}for(let R=0;R<s;R++){const w=R*(i+1);for(let E=0;E<i;E++){const N=E+w,L=N,U=N+i+1,B=N+i+2,z=N+1;h.push(L,U,z),h.push(U,B,z)}}this.setIndex(h),this.setAttribute("position",new bt(m,3)),this.setAttribute("normal",new bt(g,3)),this.setAttribute("uv",new bt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Bx extends Qt{constructor(e=new Qu([new Fe(0,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],c=[],f=[];let h=0,m=0;if(Array.isArray(e)===!1)g(e);else for(let y=0;y<e.length;y++)g(e[y]),this.addGroup(h,m,y),h+=m,m=0;this.setIndex(i),this.setAttribute("position",new bt(s,3)),this.setAttribute("normal",new bt(c,3)),this.setAttribute("uv",new bt(f,2));function g(y){const _=s.length/3,b=y.extractPoints(t);let M=b.shape;const A=b.holes;jr.isClockWise(M)===!1&&(M=M.reverse());for(let w=0,E=A.length;w<E;w++){const N=A[w];jr.isClockWise(N)===!0&&(A[w]=N.reverse())}const R=jr.triangulateShape(M,A);for(let w=0,E=A.length;w<E;w++){const N=A[w];M=M.concat(N)}for(let w=0,E=M.length;w<E;w++){const N=M[w];s.push(N.x,N.y,0),c.push(0,0,1),f.push(N.x,N.y)}for(let w=0,E=R.length;w<E;w++){const N=R[w],L=N[0]+_,U=N[1]+_,B=N[2]+_;i.push(L,U,B),m+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return aR(t,e)}static fromJSON(e,t){const i=[];for(let s=0,c=e.shapes.length;s<c;s++){const f=t[e.shapes[s]];i.push(f)}return new Bx(i,e.curveSegments)}}function aR(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,i=r.length;t<i;t++){const s=r[t];e.shapes.push(s.uuid)}else e.shapes.push(r.uuid);return e}class Cm extends Qt{constructor(e=1,t=32,i=16,s=0,c=Math.PI*2,f=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:c,thetaStart:f,thetaLength:h},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const m=Math.min(f+h,Math.PI);let g=0;const y=[],_=new Y,b=new Y,M=[],A=[],R=[],w=[];for(let E=0;E<=i;E++){const N=[],L=E/i;let U=0;E===0&&f===0?U=.5/t:E===i&&m===Math.PI&&(U=-.5/t);for(let B=0;B<=t;B++){const z=B/t;_.x=-e*Math.cos(s+z*c)*Math.sin(f+L*h),_.y=e*Math.cos(f+L*h),_.z=e*Math.sin(s+z*c)*Math.sin(f+L*h),A.push(_.x,_.y,_.z),b.copy(_).normalize(),R.push(b.x,b.y,b.z),w.push(z+U,1-L),N.push(g++)}y.push(N)}for(let E=0;E<i;E++)for(let N=0;N<t;N++){const L=y[E][N+1],U=y[E][N],B=y[E+1][N],z=y[E+1][N+1];(E!==0||f>0)&&M.push(L,U,z),(E!==i-1||m<Math.PI)&&M.push(U,B,z)}this.setIndex(M),this.setAttribute("position",new bt(A,3)),this.setAttribute("normal",new bt(R,3)),this.setAttribute("uv",new bt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Fx extends kc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fx(e.radius,e.detail)}}class kx extends Qt{constructor(e=1,t=.4,i=12,s=48,c=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:c},i=Math.floor(i),s=Math.floor(s);const f=[],h=[],m=[],g=[],y=new Y,_=new Y,b=new Y;for(let M=0;M<=i;M++)for(let A=0;A<=s;A++){const R=A/s*c,w=M/i*Math.PI*2;_.x=(e+t*Math.cos(w))*Math.cos(R),_.y=(e+t*Math.cos(w))*Math.sin(R),_.z=t*Math.sin(w),h.push(_.x,_.y,_.z),y.x=e*Math.cos(R),y.y=e*Math.sin(R),b.subVectors(_,y).normalize(),m.push(b.x,b.y,b.z),g.push(A/s),g.push(M/i)}for(let M=1;M<=i;M++)for(let A=1;A<=s;A++){const R=(s+1)*M+A-1,w=(s+1)*(M-1)+A-1,E=(s+1)*(M-1)+A,N=(s+1)*M+A;f.push(R,w,N),f.push(w,E,N)}this.setIndex(f),this.setAttribute("position",new bt(h,3)),this.setAttribute("normal",new bt(m,3)),this.setAttribute("uv",new bt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Vx extends Qt{constructor(e=1,t=.4,i=64,s=8,c=2,f=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:c,q:f},i=Math.floor(i),s=Math.floor(s);const h=[],m=[],g=[],y=[],_=new Y,b=new Y,M=new Y,A=new Y,R=new Y,w=new Y,E=new Y;for(let L=0;L<=i;++L){const U=L/i*c*Math.PI*2;N(U,c,f,e,M),N(U+.01,c,f,e,A),w.subVectors(A,M),E.addVectors(A,M),R.crossVectors(w,E),E.crossVectors(R,w),R.normalize(),E.normalize();for(let B=0;B<=s;++B){const z=B/s*Math.PI*2,H=-t*Math.cos(z),j=t*Math.sin(z);_.x=M.x+(H*E.x+j*R.x),_.y=M.y+(H*E.y+j*R.y),_.z=M.z+(H*E.z+j*R.z),m.push(_.x,_.y,_.z),b.subVectors(_,M).normalize(),g.push(b.x,b.y,b.z),y.push(L/i),y.push(B/s)}}for(let L=1;L<=i;L++)for(let U=1;U<=s;U++){const B=(s+1)*(L-1)+(U-1),z=(s+1)*L+(U-1),H=(s+1)*L+U,j=(s+1)*(L-1)+U;h.push(B,z,j),h.push(z,H,j)}this.setIndex(h),this.setAttribute("position",new bt(m,3)),this.setAttribute("normal",new bt(g,3)),this.setAttribute("uv",new bt(y,2));function N(L,U,B,z,H){const j=Math.cos(L),I=Math.sin(L),P=B/U*L,q=Math.cos(P);H.x=z*(2+q)*.5*j,H.y=z*(2+q)*I*.5,H.z=z*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hx extends Qt{constructor(e=new Ib(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,i=1,s=8,c=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:c};const f=e.computeFrenetFrames(t,c);this.tangents=f.tangents,this.normals=f.normals,this.binormals=f.binormals;const h=new Y,m=new Y,g=new Fe;let y=new Y;const _=[],b=[],M=[],A=[];R(),this.setIndex(A),this.setAttribute("position",new bt(_,3)),this.setAttribute("normal",new bt(b,3)),this.setAttribute("uv",new bt(M,2));function R(){for(let L=0;L<t;L++)w(L);w(c===!1?t:0),N(),E()}function w(L){y=e.getPointAt(L/t,y);const U=f.normals[L],B=f.binormals[L];for(let z=0;z<=s;z++){const H=z/s*Math.PI*2,j=Math.sin(H),I=-Math.cos(H);m.x=I*U.x+j*B.x,m.y=I*U.y+j*B.y,m.z=I*U.z+j*B.z,m.normalize(),b.push(m.x,m.y,m.z),h.x=y.x+i*m.x,h.y=y.y+i*m.y,h.z=y.z+i*m.z,_.push(h.x,h.y,h.z)}}function E(){for(let L=1;L<=t;L++)for(let U=1;U<=s;U++){const B=(s+1)*(L-1)+(U-1),z=(s+1)*L+(U-1),H=(s+1)*L+U,j=(s+1)*(L-1)+U;A.push(B,z,j),A.push(z,H,j)}}function N(){for(let L=0;L<=t;L++)for(let U=0;U<=s;U++)g.x=L/t,g.y=U/s,M.push(g.x,g.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hx(new nx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cT extends Qt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new Y,c=new Y;if(e.index!==null){const f=e.attributes.position,h=e.index;let m=e.groups;m.length===0&&(m=[{start:0,count:h.count,materialIndex:0}]);for(let g=0,y=m.length;g<y;++g){const _=m[g],b=_.start,M=_.count;for(let A=b,R=b+M;A<R;A+=3)for(let w=0;w<3;w++){const E=h.getX(A+w),N=h.getX(A+(w+1)%3);s.fromBufferAttribute(f,E),c.fromBufferAttribute(f,N),G1(s,c,i)===!0&&(t.push(s.x,s.y,s.z),t.push(c.x,c.y,c.z))}}}else{const f=e.attributes.position;for(let h=0,m=f.count/3;h<m;h++)for(let g=0;g<3;g++){const y=3*h+g,_=3*h+(g+1)%3;s.fromBufferAttribute(f,y),c.fromBufferAttribute(f,_),G1(s,c,i)===!0&&(t.push(s.x,s.y,s.z),t.push(c.x,c.y,c.z))}}this.setAttribute("position",new bt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function G1(r,e,t){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var W1=Object.freeze({__proto__:null,BoxGeometry:Fc,CapsuleGeometry:Nx,CircleGeometry:Dx,ConeGeometry:Am,CylinderGeometry:Tm,DodecahedronGeometry:Lx,EdgesGeometry:$E,ExtrudeGeometry:Ix,IcosahedronGeometry:Ox,LatheGeometry:Px,OctahedronGeometry:wm,PlaneGeometry:nd,PolyhedronGeometry:kc,RingGeometry:zx,ShapeGeometry:Bx,SphereGeometry:Cm,TetrahedronGeometry:Fx,TorusGeometry:kx,TorusKnotGeometry:Vx,TubeGeometry:Hx,WireframeGeometry:cT});class uT extends zs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Pb extends vr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zb extends zs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ha,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fT extends zb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class hT extends zs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ha,this.combine=Sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dT extends zs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class pT extends zs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class mT extends zs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ha,this.combine=Sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bb extends zs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Fb extends zs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class gT extends zs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zc,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vT extends ia{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qu(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function xT(r){function e(s,c){return r[s]-r[c]}const t=r.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function W_(r,e,t){const i=r.length,s=new r.constructor(i);for(let c=0,f=0;f!==i;++c){const h=t[c]*e;for(let m=0;m!==e;++m)s[f++]=r[h+m]}return s}function kb(r,e,t,i){let s=1,c=r[0];for(;c!==void 0&&c[i]===void 0;)c=r[s++];if(c===void 0)return;let f=c[i];if(f!==void 0)if(Array.isArray(f))do f=c[i],f!==void 0&&(e.push(c.time),t.push(...f)),c=r[s++];while(c!==void 0);else if(f.toArray!==void 0)do f=c[i],f!==void 0&&(e.push(c.time),f.toArray(t,t.length)),c=r[s++];while(c!==void 0);else do f=c[i],f!==void 0&&(e.push(c.time),t.push(f)),c=r[s++];while(c!==void 0)}function rR(r,e,t,i,s=30){const c=r.clone();c.name=e;const f=[];for(let m=0;m<c.tracks.length;++m){const g=c.tracks[m],y=g.getValueSize(),_=[],b=[];for(let M=0;M<g.times.length;++M){const A=g.times[M]*s;if(!(A<t||A>=i)){_.push(g.times[M]);for(let R=0;R<y;++R)b.push(g.values[M*y+R])}}_.length!==0&&(g.times=qu(_,g.times.constructor),g.values=qu(b,g.values.constructor),f.push(g))}c.tracks=f;let h=1/0;for(let m=0;m<c.tracks.length;++m)h>c.tracks[m].times[0]&&(h=c.tracks[m].times[0]);for(let m=0;m<c.tracks.length;++m)c.tracks[m].shift(-1*h);return c.resetDuration(),c}function oR(r,e=0,t=r,i=30){i<=0&&(i=30);const s=t.tracks.length,c=e/i;for(let f=0;f<s;++f){const h=t.tracks[f],m=h.ValueTypeName;if(m==="bool"||m==="string")continue;const g=r.tracks.find(function(E){return E.name===h.name&&E.ValueTypeName===m});if(g===void 0)continue;let y=0;const _=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);let b=0;const M=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=M/3);const A=h.times.length-1;let R;if(c<=h.times[0]){const E=y,N=_-y;R=h.values.slice(E,N)}else if(c>=h.times[A]){const E=A*_+y,N=E+_-y;R=h.values.slice(E,N)}else{const E=h.createInterpolant(),N=y,L=_-y;E.evaluate(c),R=E.resultBuffer.slice(N,L)}m==="quaternion"&&new Ca().fromArray(R).normalize().conjugate().toArray(R);const w=g.times.length;for(let E=0;E<w;++E){const N=E*M+b;if(m==="quaternion")Ca.multiplyQuaternionsFlat(g.values,N,R,0,g.values,N);else{const L=M-b*2;for(let U=0;U<L;++U)g.values[N+U]-=R[U]}}}return r.blendMode=yb,r}class lR{static convertArray(e,t){return qu(e,t)}static isTypedArray(e){return PE(e)}static getKeyframeOrder(e){return xT(e)}static sortedArray(e,t,i){return W_(e,t,i)}static flattenJSON(e,t,i,s){kb(e,t,i,s)}static subclip(e,t,i,s,c=30){return rR(e,t,i,s,c)}static makeClipAdditive(e,t=0,i=e,s=30){return oR(e,t,i,s)}}class Rm{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],c=t[i-1];e:{t:{let f;n:{i:if(!(e<s)){for(let h=i+2;;){if(s===void 0){if(e<c)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(c=s,s=t[++i],e<s)break t}f=t.length;break n}if(!(e>=c)){const h=t[1];e<h&&(i=2,c=h);for(let m=i-2;;){if(c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===m)break;if(s=c,c=t[--i-1],e>=c)break t}f=i,i=0;break n}break e}for(;i<f;){const h=i+f>>>1;e<t[h]?f=h:i=h+1}if(s=t[i],c=t[i-1],c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,c,s)}return this.interpolate_(i,c,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,c=e*s;for(let f=0;f!==s;++f)t[f]=i[c+f];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class yT extends Rm{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xu,endingEnd:Xu}}intervalChanged_(e,t,i){const s=this.parameterPositions;let c=e-2,f=e+1,h=s[c],m=s[f];if(h===void 0)switch(this.getSettings_().endingStart){case ju:c=e,h=2*t-i;break;case lm:c=s.length-2,h=t+s[c]-s[c+1];break;default:c=e,h=i}if(m===void 0)switch(this.getSettings_().endingEnd){case ju:f=e,m=2*i-t;break;case lm:f=1,m=i+s[1]-s[0];break;default:f=e-1,m=t}const g=(i-t)*.5,y=this.valueSize;this._weightPrev=g/(t-h),this._weightNext=g/(m-i),this._offsetPrev=c*y,this._offsetNext=f*y}interpolate_(e,t,i,s){const c=this.resultBuffer,f=this.sampleValues,h=this.valueSize,m=e*h,g=m-h,y=this._offsetPrev,_=this._offsetNext,b=this._weightPrev,M=this._weightNext,A=(i-t)/(s-t),R=A*A,w=R*A,E=-b*w+2*b*R-b*A,N=(1+b)*w+(-1.5-2*b)*R+(-.5+b)*A+1,L=(-1-M)*w+(1.5+M)*R+.5*A,U=M*w-M*R;for(let B=0;B!==h;++B)c[B]=E*f[y+B]+N*f[g+B]+L*f[m+B]+U*f[_+B];return c}}class Vb extends Rm{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const c=this.resultBuffer,f=this.sampleValues,h=this.valueSize,m=e*h,g=m-h,y=(i-t)/(s-t),_=1-y;for(let b=0;b!==h;++b)c[b]=f[g+b]*_+f[m+b]*y;return c}}class _T extends Rm{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class xr{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qu(t,this.TimeBufferType),this.values=qu(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qu(e.times,Array),values:qu(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new _T(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Vb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new yT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case om:t=this.InterpolantFactoryMethodDiscrete;break;case $v:t=this.InterpolantFactoryMethodLinear;break;case lv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return ct("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return om;case this.InterpolantFactoryMethodLinear:return $v;case this.InterpolantFactoryMethodSmooth:return lv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let c=0,f=s-1;for(;c!==s&&i[c]<e;)++c;for(;f!==-1&&i[f]>t;)--f;if(++f,c!==0||f!==s){c>=f&&(f=Math.max(f,1),c=f-1);const h=this.getValueSize();this.times=i.slice(c,f),this.values=this.values.slice(c*h,f*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Rt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,c=i.length;c===0&&(Rt("KeyframeTrack: Track is empty.",this),e=!1);let f=null;for(let h=0;h!==c;h++){const m=i[h];if(typeof m=="number"&&isNaN(m)){Rt("KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(f!==null&&f>m){Rt("KeyframeTrack: Out of order keys.",this,h,m,f),e=!1;break}f=m}if(s!==void 0&&PE(s))for(let h=0,m=s.length;h!==m;++h){const g=s[h];if(isNaN(g)){Rt("KeyframeTrack: Value is not a valid number.",this,h,g),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===lv,c=e.length-1;let f=1;for(let h=1;h<c;++h){let m=!1;const g=e[h],y=e[h+1];if(g!==y&&(h!==1||g!==e[0]))if(s)m=!0;else{const _=h*i,b=_-i,M=_+i;for(let A=0;A!==i;++A){const R=t[_+A];if(R!==t[b+A]||R!==t[M+A]){m=!0;break}}}if(m){if(h!==f){e[f]=e[h];const _=h*i,b=f*i;for(let M=0;M!==i;++M)t[b+M]=t[_+M]}++f}}if(c>0){e[f]=e[c];for(let h=c*i,m=f*i,g=0;g!==i;++g)t[m+g]=t[h+g];++f}return f!==e.length?(this.times=e.slice(0,f),this.values=t.slice(0,f*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}xr.prototype.ValueTypeName="";xr.prototype.TimeBufferType=Float32Array;xr.prototype.ValueBufferType=Float32Array;xr.prototype.DefaultInterpolation=$v;class sf extends xr{constructor(e,t,i){super(e,t,i)}}sf.prototype.ValueTypeName="bool";sf.prototype.ValueBufferType=Array;sf.prototype.DefaultInterpolation=om;sf.prototype.InterpolantFactoryMethodLinear=void 0;sf.prototype.InterpolantFactoryMethodSmooth=void 0;class Hb extends xr{constructor(e,t,i,s){super(e,t,i,s)}}Hb.prototype.ValueTypeName="color";class gm extends xr{constructor(e,t,i,s){super(e,t,i,s)}}gm.prototype.ValueTypeName="number";class bT extends Rm{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const c=this.resultBuffer,f=this.sampleValues,h=this.valueSize,m=(i-t)/(s-t);let g=e*h;for(let y=g+h;g!==y;g+=4)Ca.slerpFlat(c,0,f,g-h,f,g,m);return c}}class Nm extends xr{constructor(e,t,i,s){super(e,t,i,s)}InterpolantFactoryMethodLinear(e){return new bT(this.times,this.values,this.getValueSize(),e)}}Nm.prototype.ValueTypeName="quaternion";Nm.prototype.InterpolantFactoryMethodSmooth=void 0;class af extends xr{constructor(e,t,i){super(e,t,i)}}af.prototype.ValueTypeName="string";af.prototype.ValueBufferType=Array;af.prototype.DefaultInterpolation=om;af.prototype.InterpolantFactoryMethodLinear=void 0;af.prototype.InterpolantFactoryMethodSmooth=void 0;class vm extends xr{constructor(e,t,i,s){super(e,t,i,s)}}vm.prototype.ValueTypeName="vector";class xm{constructor(e="",t=-1,i=[],s=xx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Va(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let f=0,h=i.length;f!==h;++f)t.push(uR(i[f]).scale(s));const c=new this(e.name,e.duration,t,e.blendMode);return c.uuid=e.uuid,c.userData=JSON.parse(e.userData||"{}"),c}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let c=0,f=i.length;c!==f;++c)t.push(xr.toJSON(i[c]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const c=t.length,f=[];for(let h=0;h<c;h++){let m=[],g=[];m.push((h+c-1)%c,h,(h+1)%c),g.push(0,1,0);const y=xT(m);m=W_(m,1,y),g=W_(g,1,y),!s&&m[0]===0&&(m.push(c),g.push(g[0])),f.push(new gm(".morphTargetInfluences["+t[h].name+"]",m,g).scale(1/i))}return new this(e,-1,f)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},c=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const g=e[h],y=g.name.match(c);if(y&&y.length>1){const _=y[1];let b=s[_];b||(s[_]=b=[]),b.push(g)}}const f=[];for(const h in s)f.push(this.CreateFromMorphTargetSequence(h,s[h],t,i));return f}static parseAnimation(e,t){if(ct("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Rt("AnimationClip: No animation in JSONLoader data."),null;const i=function(_,b,M,A,R){if(M.length!==0){const w=[],E=[];kb(M,w,E,A),w.length!==0&&R.push(new _(b,w,E))}},s=[],c=e.name||"default",f=e.fps||30,h=e.blendMode;let m=e.length||-1;const g=e.hierarchy||[];for(let _=0;_<g.length;_++){const b=g[_].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const M={};let A;for(A=0;A<b.length;A++)if(b[A].morphTargets)for(let R=0;R<b[A].morphTargets.length;R++)M[b[A].morphTargets[R]]=-1;for(const R in M){const w=[],E=[];for(let N=0;N!==b[A].morphTargets.length;++N){const L=b[A];w.push(L.time),E.push(L.morphTarget===R?1:0)}s.push(new gm(".morphTargetInfluence["+R+"]",w,E))}m=M.length*f}else{const M=".bones["+t[_].name+"]";i(vm,M+".position",b,"pos",s),i(Nm,M+".quaternion",b,"rot",s),i(vm,M+".scale",b,"scl",s)}}return s.length===0?null:new this(c,m,s,h)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const c=this.tracks[i];t=Math.max(t,c.times[c.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function cR(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gm;case"vector":case"vector2":case"vector3":case"vector4":return vm;case"color":return Hb;case"quaternion":return Nm;case"bool":case"boolean":return sf;case"string":return af}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function uR(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cR(r.type);if(r.times===void 0){const t=[],i=[];kb(r.keys,t,i,"value"),r.times=t,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Oo={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Gb{constructor(e,t,i){const s=this;let c=!1,f=0,h=0,m;const g=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(y){h++,c===!1&&s.onStart!==void 0&&s.onStart(y,f,h),c=!0},this.itemEnd=function(y){f++,s.onProgress!==void 0&&s.onProgress(y,f,h),f===h&&(c=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(y){s.onError!==void 0&&s.onError(y)},this.resolveURL=function(y){return m?m(y):y},this.setURLModifier=function(y){return m=y,this},this.addHandler=function(y,_){return g.push(y,_),this},this.removeHandler=function(y){const _=g.indexOf(y);return _!==-1&&g.splice(_,2),this},this.getHandler=function(y){for(let _=0,b=g.length;_<b;_+=2){const M=g[_],A=g[_+1];if(M.global&&(M.lastIndex=0),M.test(y))return A}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const ST=new Gb;class Na{constructor(e){this.manager=e!==void 0?e:ST,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,c){i.load(e,s,t,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Na.DEFAULT_MATERIAL_NAME="__DEFAULT";const Tl={};class fR extends Error{constructor(e,t){super(e),this.response=t}}class Nl extends Na{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=Oo.get(`file:${e}`);if(c!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(c),this.manager.itemEnd(e)},0),c;if(Tl[e]!==void 0){Tl[e].push({onLoad:t,onProgress:i,onError:s});return}Tl[e]=[],Tl[e].push({onLoad:t,onProgress:i,onError:s});const f=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),h=this.mimeType,m=this.responseType;fetch(f).then(g=>{if(g.status===200||g.status===0){if(g.status===0&&ct("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||g.body===void 0||g.body.getReader===void 0)return g;const y=Tl[e],_=g.body.getReader(),b=g.headers.get("X-File-Size")||g.headers.get("Content-Length"),M=b?parseInt(b):0,A=M!==0;let R=0;const w=new ReadableStream({start(E){N();function N(){_.read().then(({done:L,value:U})=>{if(L)E.close();else{R+=U.byteLength;const B=new ProgressEvent("progress",{lengthComputable:A,loaded:R,total:M});for(let z=0,H=y.length;z<H;z++){const j=y[z];j.onProgress&&j.onProgress(B)}E.enqueue(U),N()}},L=>{E.error(L)})}}});return new Response(w)}else throw new fR(`fetch for "${g.url}" responded with ${g.status}: ${g.statusText}`,g)}).then(g=>{switch(m){case"arraybuffer":return g.arrayBuffer();case"blob":return g.blob();case"document":return g.text().then(y=>new DOMParser().parseFromString(y,h));case"json":return g.json();default:if(h==="")return g.text();{const _=/charset="?([^;"\s]*)"?/i.exec(h),b=_&&_[1]?_[1].toLowerCase():void 0,M=new TextDecoder(b);return g.arrayBuffer().then(A=>M.decode(A))}}}).then(g=>{Oo.add(`file:${e}`,g);const y=Tl[e];delete Tl[e];for(let _=0,b=y.length;_<b;_++){const M=y[_];M.onLoad&&M.onLoad(g)}}).catch(g=>{const y=Tl[e];if(y===void 0)throw this.manager.itemError(e),g;delete Tl[e];for(let _=0,b=y.length;_<b;_++){const M=y[_];M.onError&&M.onError(g)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class hR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=new Nl(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(h){try{t(c.parse(JSON.parse(h)))}catch(m){s?s(m):Rt(m),c.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=xm.parse(e[i]);t.push(s)}return t}}class dR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=[],h=new Rx,m=new Nl(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(c.withCredentials);let g=0;function y(_){m.load(e[_],function(b){const M=c.parse(b,!0);f[_]={width:M.width,height:M.height,format:M.format,mipmaps:M.mipmaps},g+=1,g===6&&(M.mipmapCount===1&&(h.minFilter=qn),h.image=f,h.format=M.format,h.needsUpdate=!0,t&&t(h))},i,s)}if(Array.isArray(e))for(let _=0,b=e.length;_<b;++_)y(_);else m.load(e,function(_){const b=c.parse(_,!0);if(b.isCubemap){const M=b.mipmaps.length/b.mipmapCount;for(let A=0;A<M;A++){f[A]={mipmaps:[]};for(let R=0;R<b.mipmapCount;R++)f[A].mipmaps.push(b.mipmaps[A*b.mipmapCount+R]),f[A].format=b.format,f[A].width=b.width,f[A].height=b.height}h.image=f}else h.image.width=b.width,h.image.height=b.height,h.mipmaps=b.mipmaps;b.mipmapCount===1&&(h.minFilter=qn),h.format=b.format,h.needsUpdate=!0,t&&t(h)},i,s);return h}}const Rh=new WeakMap;class ym extends Na{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,f=Oo.get(`image:${e}`);if(f!==void 0){if(f.complete===!0)c.manager.itemStart(e),setTimeout(function(){t&&t(f),c.manager.itemEnd(e)},0);else{let _=Rh.get(f);_===void 0&&(_=[],Rh.set(f,_)),_.push({onLoad:t,onError:s})}return f}const h=fm("img");function m(){y(),t&&t(this);const _=Rh.get(this)||[];for(let b=0;b<_.length;b++){const M=_[b];M.onLoad&&M.onLoad(this)}Rh.delete(this),c.manager.itemEnd(e)}function g(_){y(),s&&s(_),Oo.remove(`image:${e}`);const b=Rh.get(this)||[];for(let M=0;M<b.length;M++){const A=b[M];A.onError&&A.onError(_)}Rh.delete(this),c.manager.itemError(e),c.manager.itemEnd(e)}function y(){h.removeEventListener("load",m,!1),h.removeEventListener("error",g,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",g,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),Oo.add(`image:${e}`,h),c.manager.itemStart(e),h.src=e,h}}class pR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=new Em;c.colorSpace=Us;const f=new ym(this.manager);f.setCrossOrigin(this.crossOrigin),f.setPath(this.path);let h=0;function m(g){f.load(e[g],function(y){c.images[g]=y,h++,h===6&&(c.needsUpdate=!0,t&&t(c))},void 0,s)}for(let g=0;g<e.length;++g)m(g);return c}}class mR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=new qr,h=new Nl(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(c.withCredentials),h.load(e,function(m){let g;try{g=c.parse(m)}catch(y){if(s!==void 0)s(y);else{y(y);return}}g.image!==void 0?f.image=g.image:g.data!==void 0&&(f.image.width=g.width,f.image.height=g.height,f.image.data=g.data),f.wrapS=g.wrapS!==void 0?g.wrapS:wa,f.wrapT=g.wrapT!==void 0?g.wrapT:wa,f.magFilter=g.magFilter!==void 0?g.magFilter:qn,f.minFilter=g.minFilter!==void 0?g.minFilter:qn,f.anisotropy=g.anisotropy!==void 0?g.anisotropy:1,g.colorSpace!==void 0&&(f.colorSpace=g.colorSpace),g.flipY!==void 0&&(f.flipY=g.flipY),g.format!==void 0&&(f.format=g.format),g.type!==void 0&&(f.type=g.type),g.mipmaps!==void 0&&(f.mipmaps=g.mipmaps,f.minFilter=Io),g.mipmapCount===1&&(f.minFilter=qn),g.generateMipmaps!==void 0&&(f.generateMipmaps=g.generateMipmaps),f.needsUpdate=!0,t&&t(f,g)},i,s),f}}class gR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=new Ti,f=new ym(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(e,function(h){c.image=h,c.needsUpdate=!0,t!==void 0&&t(c)},i,s),c}}class Vc extends wn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class MT extends Vc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const u_=new Gt,X1=new Y,j1=new Y;class Wb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fe(512,512),this.mapType=ea,this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new td,this._frameExtents=new Fe(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;X1.setFromMatrixPosition(e.matrixWorld),t.position.copy(X1),j1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(j1),t.updateMatrixWorld(),u_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u_,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(u_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vR extends Wb{constructor(){super(new Wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=qh*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,c=e.distance||t.far;(i!==t.fov||s!==t.aspect||c!==t.far)&&(t.fov=i,t.aspect=s,t.far=c,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ET extends Vc{constructor(e,t,i=0,s=Math.PI/3,c=0,f=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.distance=i,this.angle=s,this.penumbra=c,this.decay=f,this.map=null,this.shadow=new vR}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class xR extends Wb{constructor(){super(new Wi(90,1,.5,500)),this.isPointLightShadow=!0}}class TT extends Vc{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new xR}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}let Hc=class extends Mx{constructor(e=-1,t=1,i=1,s=-1,c=.1,f=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=c,this.far=f,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,c,f){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=c,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let c=i-e,f=i+e,h=s+t,m=s-t;if(this.view!==null&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=g*this.view.offsetX,f=c+g*this.view.width,h-=y*this.view.offsetY,m=h-y*this.view.height}this.projectionMatrix.makeOrthographic(c,f,h,m,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class yR extends Wb{constructor(){super(new Hc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class AT extends Vc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.shadow=new yR}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class wT extends Vc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class CT extends Vc{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Xb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,c=e.z,f=this.coefficients;return t.copy(f[0]).multiplyScalar(.282095),t.addScaledVector(f[1],.488603*s),t.addScaledVector(f[2],.488603*c),t.addScaledVector(f[3],.488603*i),t.addScaledVector(f[4],1.092548*(i*s)),t.addScaledVector(f[5],1.092548*(s*c)),t.addScaledVector(f[6],.315392*(3*c*c-1)),t.addScaledVector(f[7],1.092548*(i*c)),t.addScaledVector(f[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,c=e.z,f=this.coefficients;return t.copy(f[0]).multiplyScalar(.886227),t.addScaledVector(f[1],2*.511664*s),t.addScaledVector(f[2],2*.511664*c),t.addScaledVector(f[3],2*.511664*i),t.addScaledVector(f[4],2*.429043*i*s),t.addScaledVector(f[5],2*.429043*s*c),t.addScaledVector(f[6],.743125*c*c-.247708),t.addScaledVector(f[7],2*.429043*i*c),t.addScaledVector(f[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,c=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*c,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*c,t[6]=.315392*(3*c*c-1),t[7]=1.092548*i*c,t[8]=.546274*(i*i-s*s)}}class RT extends Vc{constructor(e=new Xb,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gx extends Na{constructor(e){super(e),this.textures={}}load(e,t,i,s){const c=this,f=new Nl(c.manager);f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(e,function(h){try{t(c.parse(JSON.parse(h)))}catch(m){s?s(m):Rt(m),c.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(c){return t[c]===void 0&&ct("MaterialLoader: Undefined texture",c),t[c]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(s.allowOverride=e.allowOverride),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const c in e.uniforms){const f=e.uniforms[c];switch(s.uniforms[c]={},f.type){case"t":s.uniforms[c].value=i(f.value);break;case"c":s.uniforms[c].value=new gt().setHex(f.value);break;case"v2":s.uniforms[c].value=new Fe().fromArray(f.value);break;case"v3":s.uniforms[c].value=new Y().fromArray(f.value);break;case"v4":s.uniforms[c].value=new jn().fromArray(f.value);break;case"m3":s.uniforms[c].value=new $t().fromArray(f.value);break;case"m4":s.uniforms[c].value=new Gt().fromArray(f.value);break;default:s.uniforms[c].value=f.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const c in e.extensions)s.extensions[c]=e.extensions[c];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let c=e.normalScale;Array.isArray(c)===!1&&(c=[c,c]),s.normalScale=new Fe().fromArray(c)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Fe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Gx.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:uT,SpriteMaterial:Ab,RawShaderMaterial:Pb,ShaderMaterial:vr,PointsMaterial:Cb,MeshPhysicalMaterial:fT,MeshStandardMaterial:zb,MeshPhongMaterial:hT,MeshToonMaterial:dT,MeshNormalMaterial:pT,MeshLambertMaterial:mT,MeshDepthMaterial:Bb,MeshDistanceMaterial:Fb,MeshBasicMaterial:Bc,MeshMatcapMaterial:gT,LineDashedMaterial:vT,LineBasicMaterial:ia,Material:zs};return new t[e]}}class X_{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class NT extends Qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class DT extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=new Nl(c.manager);f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(e,function(h){try{t(c.parse(JSON.parse(h)))}catch(m){s?s(m):Rt(m),c.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(M,A){if(t[A]!==void 0)return t[A];const w=M.interleavedBuffers[A],E=c(M,w.buffer),N=Bh(w.type,E),L=new Ax(N,w.stride);return L.uuid=w.uuid,t[A]=L,L}function c(M,A){if(i[A]!==void 0)return i[A];const w=M.arrayBuffers[A],E=new Uint32Array(w).buffer;return i[A]=E,E}const f=e.isInstancedBufferGeometry?new NT:new Qt,h=e.data.index;if(h!==void 0){const M=Bh(h.type,h.array);f.setIndex(new Gn(M,1))}const m=e.data.attributes;for(const M in m){const A=m[M];let R;if(A.isInterleavedBufferAttribute){const w=s(e.data,A.data);R=new $u(w,A.itemSize,A.offset,A.normalized)}else{const w=Bh(A.type,A.array),E=A.isInstancedBufferAttribute?Qh:Gn;R=new E(w,A.itemSize,A.normalized)}A.name!==void 0&&(R.name=A.name),A.usage!==void 0&&R.setUsage(A.usage),f.setAttribute(M,R)}const g=e.data.morphAttributes;if(g)for(const M in g){const A=g[M],R=[];for(let w=0,E=A.length;w<E;w++){const N=A[w];let L;if(N.isInterleavedBufferAttribute){const U=s(e.data,N.data);L=new $u(U,N.itemSize,N.offset,N.normalized)}else{const U=Bh(N.type,N.array);L=new Gn(U,N.itemSize,N.normalized)}N.name!==void 0&&(L.name=N.name),R.push(L)}f.morphAttributes[M]=R}e.data.morphTargetsRelative&&(f.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let M=0,A=_.length;M!==A;++M){const R=_[M];f.addGroup(R.start,R.count,R.materialIndex)}const b=e.data.boundingSphere;return b!==void 0&&(f.boundingSphere=new vs().fromJSON(b)),e.name&&(f.name=e.name),e.userData&&(f.userData=e.userData),f}}class _R extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=this.path===""?X_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||f;const h=new Nl(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(m){let g=null;try{g=JSON.parse(m)}catch(_){s!==void 0&&s(_),_("ObjectLoader: Can't parse "+e+".",_.message);return}const y=g.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),Rt("ObjectLoader: Can't load "+e);return}c.parse(g,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?X_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const c=new Nl(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials);const f=await c.loadAsync(e,t),h=JSON.parse(f),m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(h)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),c=this.parseGeometries(e.geometries,s),f=this.parseImages(e.images,function(){t!==void 0&&t(g)}),h=this.parseTextures(e.textures,f),m=this.parseMaterials(e.materials,h),g=this.parseObject(e.object,c,m,h,i),y=this.parseSkeletons(e.skeletons,g);if(this.bindSkeletons(g,y),this.bindLightTargets(g),t!==void 0){let _=!1;for(const b in f)if(f[b].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(g)}return g}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),c=await this.parseImagesAsync(e.images),f=this.parseTextures(e.textures,c),h=this.parseMaterials(e.materials,f),m=this.parseObject(e.object,s,h,f,t),g=this.parseSkeletons(e.skeletons,m);return this.bindSkeletons(m,g),this.bindLightTargets(m),m}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const c=new Qu().fromJSON(e[i]);t[c.uuid]=c}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(c){c.isBone&&(s[c.uuid]=c)}),e!==void 0)for(let c=0,f=e.length;c<f;c++){const h=new wx().fromJSON(e[c],s);i[h.uuid]=h}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new DT;for(let c=0,f=e.length;c<f;c++){let h;const m=e[c];switch(m.type){case"BufferGeometry":case"InstancedBufferGeometry":h=s.parse(m);break;default:m.type in W1?h=W1[m.type].fromJSON(m,t):ct(`ObjectLoader: Unsupported geometry type "${m.type}"`)}h.uuid=m.uuid,m.name!==void 0&&(h.name=m.name),m.userData!==void 0&&(h.userData=m.userData),i[m.uuid]=h}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const c=new Gx;c.setTextures(t);for(let f=0,h=e.length;f<h;f++){const m=e[f];i[m.uuid]===void 0&&(i[m.uuid]=c.parse(m)),s[m.uuid]=i[m.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],c=xm.parse(s);t[c.uuid]=c}return t}parseImages(e,t){const i=this,s={};let c;function f(m){return i.manager.itemStart(m),c.load(m,function(){i.manager.itemEnd(m)},void 0,function(){i.manager.itemError(m),i.manager.itemEnd(m)})}function h(m){if(typeof m=="string"){const g=m,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g)?g:i.resourcePath+g;return f(y)}else return m.data?{data:Bh(m.type,m.data),width:m.width,height:m.height}:null}if(e!==void 0&&e.length>0){const m=new Gb(t);c=new ym(m),c.setCrossOrigin(this.crossOrigin);for(let g=0,y=e.length;g<y;g++){const _=e[g],b=_.url;if(Array.isArray(b)){const M=[];for(let A=0,R=b.length;A<R;A++){const w=b[A],E=h(w);E!==null&&(E instanceof HTMLImageElement?M.push(E):M.push(new qr(E.data,E.width,E.height)))}s[_.uuid]=new Dc(M)}else{const M=h(_.url);s[_.uuid]=new Dc(M)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function c(f){if(typeof f=="string"){const h=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await s.loadAsync(m)}else return f.data?{data:Bh(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){s=new ym(this.manager),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const m=e[f],g=m.url;if(Array.isArray(g)){const y=[];for(let _=0,b=g.length;_<b;_++){const M=g[_],A=await c(M);A!==null&&(A instanceof HTMLImageElement?y.push(A):y.push(new qr(A.data,A.width,A.height)))}i[m.uuid]=new Dc(y)}else{const y=await c(m.url);i[m.uuid]=new Dc(y)}}}return i}parseTextures(e,t){function i(c,f){return typeof c=="number"?c:(ct("ObjectLoader.parseTexture: Constant should be in numeric form.",c),f[c])}const s={};if(e!==void 0)for(let c=0,f=e.length;c<f;c++){const h=e[c];h.image===void 0&&ct('ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&ct("ObjectLoader: Undefined image",h.image);const m=t[h.image],g=m.data;let y;Array.isArray(g)?(y=new Em,g.length===6&&(y.needsUpdate=!0)):(g&&g.data?y=new qr:y=new Ti,g&&(y.needsUpdate=!0)),y.source=m,y.uuid=h.uuid,h.name!==void 0&&(y.name=h.name),h.mapping!==void 0&&(y.mapping=i(h.mapping,bR)),h.channel!==void 0&&(y.channel=h.channel),h.offset!==void 0&&y.offset.fromArray(h.offset),h.repeat!==void 0&&y.repeat.fromArray(h.repeat),h.center!==void 0&&y.center.fromArray(h.center),h.rotation!==void 0&&(y.rotation=h.rotation),h.wrap!==void 0&&(y.wrapS=i(h.wrap[0],q1),y.wrapT=i(h.wrap[1],q1)),h.format!==void 0&&(y.format=h.format),h.internalFormat!==void 0&&(y.internalFormat=h.internalFormat),h.type!==void 0&&(y.type=h.type),h.colorSpace!==void 0&&(y.colorSpace=h.colorSpace),h.minFilter!==void 0&&(y.minFilter=i(h.minFilter,Y1)),h.magFilter!==void 0&&(y.magFilter=i(h.magFilter,Y1)),h.anisotropy!==void 0&&(y.anisotropy=h.anisotropy),h.flipY!==void 0&&(y.flipY=h.flipY),h.generateMipmaps!==void 0&&(y.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(y.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(y.compareFunction=h.compareFunction),h.userData!==void 0&&(y.userData=h.userData),s[h.uuid]=y}return s}parseObject(e,t,i,s,c){let f;function h(b){return t[b]===void 0&&ct("ObjectLoader: Undefined geometry",b),t[b]}function m(b){if(b!==void 0){if(Array.isArray(b)){const M=[];for(let A=0,R=b.length;A<R;A++){const w=b[A];i[w]===void 0&&ct("ObjectLoader: Undefined material",w),M.push(i[w])}return M}return i[b]===void 0&&ct("ObjectLoader: Undefined material",b),i[b]}}function g(b){return s[b]===void 0&&ct("ObjectLoader: Undefined texture",b),s[b]}let y,_;switch(e.type){case"Scene":f=new Tb,e.background!==void 0&&(Number.isInteger(e.background)?f.background=new gt(e.background):f.background=g(e.background)),e.environment!==void 0&&(f.environment=g(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?f.fog=new Tx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(f.fog=new Ex(e.fog.color,e.fog.density)),e.fog.name!==""&&(f.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(f.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(f.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&f.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(f.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&f.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":f=new Wi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(f.focus=e.focus),e.zoom!==void 0&&(f.zoom=e.zoom),e.filmGauge!==void 0&&(f.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(f.filmOffset=e.filmOffset),e.view!==void 0&&(f.view=Object.assign({},e.view));break;case"OrthographicCamera":f=new Hc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(f.zoom=e.zoom),e.view!==void 0&&(f.view=Object.assign({},e.view));break;case"AmbientLight":f=new wT(e.color,e.intensity);break;case"DirectionalLight":f=new AT(e.color,e.intensity),f.target=e.target||"";break;case"PointLight":f=new TT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":f=new CT(e.color,e.intensity,e.width,e.height);break;case"SpotLight":f=new ET(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),f.target=e.target||"";break;case"HemisphereLight":f=new MT(e.color,e.groundColor,e.intensity);break;case"LightProbe":const b=new Xb().fromArray(e.sh);f=new RT(b,e.intensity);break;case"SkinnedMesh":y=h(e.geometry),_=m(e.material),f=new jE(y,_),e.bindMode!==void 0&&(f.bindMode=e.bindMode),e.bindMatrix!==void 0&&f.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(f.skeleton=e.skeleton);break;case"Mesh":y=h(e.geometry),_=m(e.material),f=new Xi(y,_);break;case"InstancedMesh":y=h(e.geometry),_=m(e.material);const M=e.count,A=e.instanceMatrix,R=e.instanceColor;f=new qE(y,_,M),f.instanceMatrix=new Qh(new Float32Array(A.array),16),R!==void 0&&(f.instanceColor=new Qh(new Float32Array(R.array),R.itemSize));break;case"BatchedMesh":y=h(e.geometry),_=m(e.material),f=new YE(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,_),f.geometry=y,f.perObjectFrustumCulled=e.perObjectFrustumCulled,f.sortObjects=e.sortObjects,f._drawRanges=e.drawRanges,f._reservedRanges=e.reservedRanges,f._geometryInfo=e.geometryInfo.map(w=>{let E=null,N=null;return w.boundingBox!==void 0&&(E=new Ps().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(N=new vs().fromJSON(w.boundingSphere)),{...w,boundingBox:E,boundingSphere:N}}),f._instanceInfo=e.instanceInfo,f._availableInstanceIds=e._availableInstanceIds,f._availableGeometryIds=e._availableGeometryIds,f._nextIndexStart=e.nextIndexStart,f._nextVertexStart=e.nextVertexStart,f._geometryCount=e.geometryCount,f._maxInstanceCount=e.maxInstanceCount,f._maxVertexCount=e.maxVertexCount,f._maxIndexCount=e.maxIndexCount,f._geometryInitialized=e.geometryInitialized,f._matricesTexture=g(e.matricesTexture.uuid),f._indirectTexture=g(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(f._colorsTexture=g(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(f.boundingSphere=new vs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(f.boundingBox=new Ps().fromJSON(e.boundingBox));break;case"LOD":f=new XE;break;case"Line":f=new Pc(h(e.geometry),m(e.material));break;case"LineLoop":f=new ZE(h(e.geometry),m(e.material));break;case"LineSegments":f=new ko(h(e.geometry),m(e.material));break;case"PointCloud":case"Points":f=new QE(h(e.geometry),m(e.material));break;case"Sprite":f=new WE(m(e.material));break;case"Group":f=new Fh;break;case"Bone":f=new wb;break;default:f=new wn}if(f.uuid=e.uuid,e.name!==void 0&&(f.name=e.name),e.matrix!==void 0?(f.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(f.matrixAutoUpdate=e.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(e.position!==void 0&&f.position.fromArray(e.position),e.rotation!==void 0&&f.rotation.fromArray(e.rotation),e.quaternion!==void 0&&f.quaternion.fromArray(e.quaternion),e.scale!==void 0&&f.scale.fromArray(e.scale)),e.up!==void 0&&f.up.fromArray(e.up),e.castShadow!==void 0&&(f.castShadow=e.castShadow),e.receiveShadow!==void 0&&(f.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(f.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(f.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(f.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(f.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&f.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(f.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(f.visible=e.visible),e.frustumCulled!==void 0&&(f.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(f.renderOrder=e.renderOrder),e.userData!==void 0&&(f.userData=e.userData),e.layers!==void 0&&(f.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let M=0;M<b.length;M++)f.add(this.parseObject(b[M],t,i,s,c))}if(e.animations!==void 0){const b=e.animations;for(let M=0;M<b.length;M++){const A=b[M];f.animations.push(c[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(f.autoUpdate=e.autoUpdate);const b=e.levels;for(let M=0;M<b.length;M++){const A=b[M],R=f.getObjectByProperty("uuid",A.object);R!==void 0&&f.addLevel(R,A.distance,A.hysteresis)}}return f}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?ct("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new wn}})}}const bR={UVMapping:fx,CubeReflectionMapping:zo,CubeRefractionMapping:Uc,EquirectangularReflectionMapping:im,EquirectangularRefractionMapping:sm,CubeUVReflectionMapping:$h},q1={RepeatWrapping:am,ClampToEdgeWrapping:wa,MirroredRepeatWrapping:rm},Y1={NearestFilter:Ii,NearestMipmapNearestFilter:hb,NearestMipmapLinearFilter:zh,LinearFilter:qn,LinearMipmapNearestFilter:Yp,LinearMipmapLinearFilter:Io},f_=new WeakMap;class SR extends Na{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ct("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ct("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,f=Oo.get(`image-bitmap:${e}`);if(f!==void 0){if(c.manager.itemStart(e),f.then){f.then(g=>{if(f_.has(f)===!0)s&&s(f_.get(f)),c.manager.itemError(e),c.manager.itemEnd(e);else return t&&t(g),c.manager.itemEnd(e),g});return}return setTimeout(function(){t&&t(f),c.manager.itemEnd(e)},0),f}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,h.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const m=fetch(e,h).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(g){return Oo.add(`image-bitmap:${e}`,g),t&&t(g),c.manager.itemEnd(e),g}).catch(function(g){s&&s(g),f_.set(m,g),Oo.remove(`image-bitmap:${e}`),c.manager.itemError(e),c.manager.itemEnd(e)});Oo.add(`image-bitmap:${e}`,m),c.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let J0;class jb{static getContext(){return J0===void 0&&(J0=new(window.AudioContext||window.webkitAudioContext)),J0}static setContext(e){J0=e}}class MR extends Na{constructor(e){super(e)}load(e,t,i,s){const c=this,f=new Nl(this.manager);f.setResponseType("arraybuffer"),f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(m){try{const g=m.slice(0);jb.getContext().decodeAudioData(g,function(_){t(_)}).catch(h)}catch(g){h(g)}},i,s);function h(m){s?s(m):Rt(m),c.manager.itemError(e)}}}const Z1=new Gt,Q1=new Gt,Iu=new Gt;class ER{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Iu.copy(e.projectionMatrix);const s=t.eyeSep/2,c=s*t.near/t.focus,f=t.near*Math.tan(Zu*t.fov*.5)/t.zoom;let h,m;Q1.elements[12]=-s,Z1.elements[12]=s,h=-f*t.aspect+c,m=f*t.aspect+c,Iu.elements[0]=2*t.near/(m-h),Iu.elements[8]=(m+h)/(m-h),this.cameraL.projectionMatrix.copy(Iu),h=-f*t.aspect-c,m=f*t.aspect-c,Iu.elements[0]=2*t.near/(m-h),Iu.elements[8]=(m+h)/(m-h),this.cameraR.projectionMatrix.copy(Iu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Q1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Z1)}}class LT extends Wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class qb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Ou=new Y,h_=new Ca,TR=new Y,Pu=new Y,zu=new Y;class AR extends wn{constructor(){super(),this.type="AudioListener",this.context=jb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ou,h_,TR),Pu.set(0,0,-1).applyQuaternion(h_),zu.set(0,1,0).applyQuaternion(h_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ou.x,i),t.positionY.linearRampToValueAtTime(Ou.y,i),t.positionZ.linearRampToValueAtTime(Ou.z,i),t.forwardX.linearRampToValueAtTime(Pu.x,i),t.forwardY.linearRampToValueAtTime(Pu.y,i),t.forwardZ.linearRampToValueAtTime(Pu.z,i),t.upX.linearRampToValueAtTime(zu.x,i),t.upY.linearRampToValueAtTime(zu.y,i),t.upZ.linearRampToValueAtTime(zu.z,i)}else t.setPosition(Ou.x,Ou.y,Ou.z),t.setOrientation(Pu.x,Pu.y,Pu.z,zu.x,zu.y,zu.z)}}class UT extends wn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ct("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ct("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ct("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Bu=new Y,J1=new Ca,wR=new Y,Fu=new Y;class CR extends UT{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Bu,J1,wR),Fu.set(0,0,1).applyQuaternion(J1);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Bu.x,i),t.positionY.linearRampToValueAtTime(Bu.y,i),t.positionZ.linearRampToValueAtTime(Bu.z,i),t.orientationX.linearRampToValueAtTime(Fu.x,i),t.orientationY.linearRampToValueAtTime(Fu.y,i),t.orientationZ.linearRampToValueAtTime(Fu.z,i)}else t.setPosition(Bu.x,Bu.y,Bu.z),t.setOrientation(Fu.x,Fu.y,Fu.z)}}class RR{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class IT{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,c,f;switch(t){case"quaternion":s=this._slerp,c=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,c=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,c=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=c,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,c=e*s+s;let f=this.cumulativeWeight;if(f===0){for(let h=0;h!==s;++h)i[c+h]=i[h];f=t}else{f+=t;const h=t/f;this._mixBufferRegion(i,c,0,h,s)}this.cumulativeWeight=f}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,c=this.cumulativeWeight,f=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1){const m=t*this._origIndex;this._mixBufferRegion(i,s,m,1-c,t)}f>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let m=t,g=t+t;m!==g;++m)if(i[m]!==i[m+t]){h.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let c=i,f=s;c!==f;++c)t[c]=t[s+c%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,c){if(s>=.5)for(let f=0;f!==c;++f)e[t+f]=e[i+f]}_slerp(e,t,i,s){Ca.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,c){const f=this._workIndex*c;Ca.multiplyQuaternionsFlat(e,f,e,t,e,i),Ca.slerpFlat(e,t,e,t,e,f,s)}_lerp(e,t,i,s,c){const f=1-s;for(let h=0;h!==c;++h){const m=t+h;e[m]=e[m]*f+e[i+h]*s}}_lerpAdditive(e,t,i,s,c){for(let f=0;f!==c;++f){const h=t+f;e[h]=e[h]+e[i+f]*s}}}const Yb="\\[\\]\\.:\\/",NR=new RegExp("["+Yb+"]","g"),Zb="[^"+Yb+"]",DR="[^"+Yb.replace("\\.","")+"]",LR=/((?:WC+[\/:])*)/.source.replace("WC",Zb),UR=/(WCOD+)?/.source.replace("WCOD",DR),IR=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Zb),OR=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Zb),PR=new RegExp("^"+LR+UR+IR+OR+"$"),zR=["material","materials","bones","map"];class BR{constructor(e,t,i){const s=i||An.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,c=i.length;s!==c;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class An{constructor(e,t,i){this.path=t,this.parsedPath=i||An.parseTrackName(t),this.node=An.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new An.Composite(e,t,i):new An(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(NR,"")}static parseTrackName(e){const t=PR.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const c=i.nodeName.substring(s+1);zR.indexOf(c)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=c)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(c){for(let f=0;f<c.length;f++){const h=c[f];if(h.name===t||h.uuid===t)return h;const m=i(h.children);if(m)return m}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,c=i.length;s!==c;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,c=i.length;s!==c;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,c=i.length;s!==c;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,c=i.length;s!==c;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let c=t.propertyIndex;if(e||(e=An.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ct("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let g=t.objectIndex;switch(i){case"materials":if(!e.material){Rt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Rt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Rt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let y=0;y<e.length;y++)if(e[y].name===g){g=y;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Rt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Rt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Rt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(g!==void 0){if(e[g]===void 0){Rt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[g]}}const f=e[s];if(f===void 0){const g=t.nodeName;Rt("PropertyBinding: Trying to update property for track: "+g+"."+s+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?h=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(c!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){Rt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Rt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[c]!==void 0&&(c=e.morphTargetDictionary[c])}m=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=c}else f.fromArray!==void 0&&f.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(m=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=s;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}An.Composite=BR;An.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};An.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};An.prototype.GetterByBindingType=[An.prototype._getValue_direct,An.prototype._getValue_array,An.prototype._getValue_arrayElement,An.prototype._getValue_toArray];An.prototype.SetterByBindingTypeAndVersioning=[[An.prototype._setValue_direct,An.prototype._setValue_direct_setNeedsUpdate,An.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[An.prototype._setValue_array,An.prototype._setValue_array_setNeedsUpdate,An.prototype._setValue_array_setMatrixWorldNeedsUpdate],[An.prototype._setValue_arrayElement,An.prototype._setValue_arrayElement_setNeedsUpdate,An.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[An.prototype._setValue_fromArray,An.prototype._setValue_fromArray_setNeedsUpdate,An.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FR{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Va(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,c=this._bindings,f=c.length;let h,m=e.length,g=this.nCachedObjects_;for(let y=0,_=arguments.length;y!==_;++y){const b=arguments[y],M=b.uuid;let A=t[M];if(A===void 0){A=m++,t[M]=A,e.push(b);for(let R=0,w=f;R!==w;++R)c[R].push(new An(b,i[R],s[R]))}else if(A<g){h=e[A];const R=--g,w=e[R];t[w.uuid]=A,e[A]=w,t[M]=R,e[R]=b;for(let E=0,N=f;E!==N;++E){const L=c[E],U=L[R];let B=L[A];L[A]=U,B===void 0&&(B=new An(b,i[E],s[E])),L[R]=B}}else e[A]!==h&&Rt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let c=this.nCachedObjects_;for(let f=0,h=arguments.length;f!==h;++f){const m=arguments[f],g=m.uuid,y=t[g];if(y!==void 0&&y>=c){const _=c++,b=e[_];t[b.uuid]=y,e[y]=b,t[g]=_,e[_]=m;for(let M=0,A=s;M!==A;++M){const R=i[M],w=R[_],E=R[y];R[y]=w,R[_]=E}}}this.nCachedObjects_=c}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let c=this.nCachedObjects_,f=e.length;for(let h=0,m=arguments.length;h!==m;++h){const g=arguments[h],y=g.uuid,_=t[y];if(_!==void 0)if(delete t[y],_<c){const b=--c,M=e[b],A=--f,R=e[A];t[M.uuid]=_,e[_]=M,t[R.uuid]=b,e[b]=R,e.pop();for(let w=0,E=s;w!==E;++w){const N=i[w],L=N[b],U=N[A];N[_]=L,N[b]=U,N.pop()}}else{const b=--f,M=e[b];b>0&&(t[M.uuid]=_),e[_]=M,e.pop();for(let A=0,R=s;A!==R;++A){const w=i[A];w[_]=w[b],w.pop()}}}this.nCachedObjects_=c}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const c=this._bindings;if(s!==void 0)return c[s];const f=this._paths,h=this._parsedPaths,m=this._objects,g=m.length,y=this.nCachedObjects_,_=new Array(g);s=c.length,i[e]=s,f.push(e),h.push(t),c.push(_);for(let b=y,M=m.length;b!==M;++b){const A=m[b];_[b]=new An(A,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,c=this._parsedPaths,f=this._bindings,h=f.length-1,m=f[h],g=e[h];t[g]=i,f[i]=m,f.pop(),c[i]=c[h],c.pop(),s[i]=s[h],s.pop()}}}class OT{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const c=t.tracks,f=c.length,h=new Array(f),m={endingStart:Xu,endingEnd:Xu};for(let g=0;g!==f;++g){const y=c[g].createInterpolant(null);h[g]=y,y.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=TE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const s=this._clip.duration,c=e._clip.duration,f=c/s,h=s/c;e.warp(1,f,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,c=s.time,f=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=s._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,g=h.sampleValues;return m[0]=c,m[1]=c+i,g[0]=e/f,g[1]=t/f,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const c=this._startTime;if(c!==null){const m=(e-c)*i;m<0||i===0?t=0:(this._startTime=null,t=i*m)}t*=this._updateTimeScale(e);const f=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,g=this._propertyBindings;switch(this.blendMode){case yb:for(let y=0,_=m.length;y!==_;++y)m[y].evaluate(f),g[y].accumulateAdditive(h);break;case xx:default:for(let y=0,_=m.length;y!==_;++y)m[y].evaluate(f),g[y].accumulate(s,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,c=this._loopCount;const f=i===AE;if(e===0)return c===-1?s:f&&(c&1)===1?t-s:s;if(i===EE){c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(c===-1&&(e>=0?(c=0,this._setEndings(!0,this.repetitions===0,f)):this._setEndings(this.repetitions===0,!0,f)),s>=t||s<0){const h=Math.floor(s/t);s-=t*h,c+=Math.abs(h);const m=this.repetitions-c;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const g=e<0;this._setEndings(g,!g,f)}else this._setEndings(!1,!1,f);this._loopCount=c,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=s;if(f&&(c&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=ju,s.endingEnd=ju):(e?s.endingStart=this.zeroSlopeAtStart?ju:Xu:s.endingStart=lm,t?s.endingEnd=this.zeroSlopeAtEnd?ju:Xu:s.endingEnd=lm)}_scheduleFading(e,t,i){const s=this._mixer,c=s.time;let f=this._weightInterpolant;f===null&&(f=s._lendControlInterpolant(),this._weightInterpolant=f);const h=f.parameterPositions,m=f.sampleValues;return h[0]=c,m[0]=t,h[1]=c+e,m[1]=i,this}}const kR=new Float32Array(1);class VR extends Fo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,c=s.length,f=e._propertyBindings,h=e._interpolants,m=i.uuid,g=this._bindingsByRootAndName;let y=g[m];y===void 0&&(y={},g[m]=y);for(let _=0;_!==c;++_){const b=s[_],M=b.name;let A=y[M];if(A!==void 0)++A.referenceCount,f[_]=A;else{if(A=f[_],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,m,M));continue}const R=t&&t._propertyBindings[_].binding.parsedPath;A=new IT(An.create(i,M,R),b.ValueTypeName,b.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,m,M),f[_]=A}h[_].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,c=this._actionsByClip[s];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const c=t[i];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const c=t[i];--c.useCount===0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,c=this._actionsByClip;let f=c[t];if(f===void 0)f={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[t]=f;else{const h=f.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=s.length,s.push(e),f.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const c=e._clip.uuid,f=this._actionsByClip,h=f[c],m=h.knownActions,g=m[m.length-1],y=e._byClipCacheIndex;g._byClipCacheIndex=y,m[y]=g,m.pop(),e._byClipCacheIndex=null;const _=h.actionByRoot,b=(e._localRoot||this._root).uuid;delete _[b],m.length===0&&delete f[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const c=t[i];--c.referenceCount===0&&this._removeInactiveBinding(c)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=i,t[i]=c}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=i,t[i]=c}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,c=this._bindings;let f=s[t];f===void 0&&(f={},s[t]=f),f[i]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,c=i.path,f=this._bindingsByRootAndName,h=f[s],m=t[t.length-1],g=e._cacheIndex;m._cacheIndex=g,t[g]=m,t.pop(),delete h[c],Object.keys(h).length===0&&delete f[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=i,t[i]=c}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=i,t[i]=c}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Vb(new Float32Array(2),new Float32Array(2),1,kR),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,c=t[s];e.__cacheIndex=s,t[s]=e,c.__cacheIndex=i,t[i]=c}clipAction(e,t,i){const s=t||this._root,c=s.uuid;let f=typeof e=="string"?xm.findByName(s,e):e;const h=f!==null?f.uuid:e,m=this._actionsByClip[h];let g=null;if(i===void 0&&(f!==null?i=f.blendMode:i=xx),m!==void 0){const _=m.actionByRoot[c];if(_!==void 0&&_.blendMode===i)return _;g=m.knownActions[0],f===null&&(f=g._clip)}if(f===null)return null;const y=new OT(this,f,t,i);return this._bindAction(y,g),this._addInactiveAction(y,h,c),y}existingAction(e,t){const i=t||this._root,s=i.uuid,c=typeof e=="string"?xm.findByName(i,e):e,f=c?c.uuid:e,h=this._actionsByClip[f];return h!==void 0&&h.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,c=Math.sign(e),f=this._accuIndex^=1;for(let g=0;g!==i;++g)t[g]._update(s,e,c,f);const h=this._bindings,m=this._nActiveBindings;for(let g=0;g!==m;++g)h[g].apply(f);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,c=s[i];if(c!==void 0){const f=c.knownActions;for(let h=0,m=f.length;h!==m;++h){const g=f[h];this._deactivateAction(g);const y=g._cacheIndex,_=t[t.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,_._cacheIndex=y,t[y]=_,t.pop(),this._removeInactiveBindingsForAction(g)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const f in i){const h=i[f].actionByRoot,m=h[t];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const s=this._bindingsByRootAndName,c=s[t];if(c!==void 0)for(const f in c){const h=c[f];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class HR extends bb{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Sx(null,e,t,i),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Qb{constructor(e){this.value=e}clone(){return new Qb(this.value.clone===void 0?this.value:this.value.clone())}}let GR=0;class WR extends Fo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:GR++}),this.name="",this.usage=um,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const c=Array.isArray(t[i])?t[i]:[t[i]];for(let f=0;f<c.length;f++)this.uniforms.push(c[f].clone())}return this}clone(){return new this.constructor().copy(this)}}class XR extends Ax{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class jR{constructor(e,t,i,s,c,f=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=c,this.normalized=f,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const K1=new Gt;class PT{constructor(e,t,i=0,s=1/0){this.ray=new ed(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Yh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Rt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return K1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(K1),this}intersectObject(e,t=!0,i=[]){return j_(e,this,i,t),i.sort($1),i}intersectObjects(e,t=!0,i=[]){for(let s=0,c=e.length;s<c;s++)j_(e[s],this,i,t);return i.sort($1),i}}function $1(r,e){return r.distance-e.distance}function j_(r,e,t,i){let s=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const c=r.children;for(let f=0,h=c.length;f<h;f++)j_(c[f],e,t,!0)}}class qR{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=YR.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function YR(){this._document.hidden===!1&&this.reset()}class ZR{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QR{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Jb{constructor(e,t,i,s){Jb.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const c=this.elements;return c[0]=e,c[2]=t,c[1]=i,c[3]=s,this}}const eM=new Fe;class JR{constructor(e=new Fe(1/0,1/0),t=new Fe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tM=new Y,K0=new Y,Nh=new Y,Dh=new Y,d_=new Y,KR=new Y,$R=new Y;class eN{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tM.subVectors(e,this.start),K0.subVectors(this.end,this.start);const i=K0.dot(K0);let c=K0.dot(tM)/i;return t&&(c=Vt(c,0,1)),c}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=KR,i=$R){const s=10000000000000001e-32;let c,f;const h=this.start,m=e.start,g=this.end,y=e.end;Nh.subVectors(g,h),Dh.subVectors(y,m),d_.subVectors(h,m);const _=Nh.dot(Nh),b=Dh.dot(Dh),M=Dh.dot(d_);if(_<=s&&b<=s)return t.copy(h),i.copy(m),t.sub(i),t.dot(t);if(_<=s)c=0,f=M/b,f=Vt(f,0,1);else{const A=Nh.dot(d_);if(b<=s)f=0,c=Vt(-A/_,0,1);else{const R=Nh.dot(Dh),w=_*b-R*R;w!==0?c=Vt((R*M-A*b)/w,0,1):c=0,f=(R*c+M)/b,f<0?(f=0,c=Vt(-A/_,0,1)):f>1&&(f=1,c=Vt((R-A)/_,0,1))}}return t.copy(h).add(Nh.multiplyScalar(c)),i.copy(m).add(Dh.multiplyScalar(f)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nM=new Y;class tN extends wn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Qt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let f=0,h=1,m=32;f<m;f++,h++){const g=f/m*Math.PI*2,y=h/m*Math.PI*2;s.push(Math.cos(g),Math.sin(g),1,Math.cos(y),Math.sin(y),1)}i.setAttribute("position",new bt(s,3));const c=new ia({fog:!1,toneMapped:!1});this.cone=new ko(i,c),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ac=new Y,$0=new Gt,p_=new Gt;class nN extends ko{constructor(e){const t=zT(e),i=new Qt,s=[],c=[];for(let g=0;g<t.length;g++){const y=t[g];y.parent&&y.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),c.push(0,0,0),c.push(0,0,0))}i.setAttribute("position",new bt(s,3)),i.setAttribute("color",new bt(c,3));const f=new ia({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const h=new gt(255),m=new gt(65280);this.setColors(h,m)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");p_.copy(this.root.matrixWorld).invert();for(let c=0,f=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&($0.multiplyMatrices(p_,h.matrixWorld),Ac.setFromMatrixPosition($0),s.setXYZ(f,Ac.x,Ac.y,Ac.z),$0.multiplyMatrices(p_,h.parent.matrixWorld),Ac.setFromMatrixPosition($0),s.setXYZ(f+1,Ac.x,Ac.y,Ac.z),f+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let c=0;c<s.count;c+=2)s.setXYZ(c,e.r,e.g,e.b),s.setXYZ(c+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function zT(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...zT(r.children[t]));return e}class iN extends Xi{constructor(e,t,i){const s=new Cm(t,4,2),c=new Bc({wireframe:!0,fog:!1,toneMapped:!1});super(s,c),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sN=new Y,iM=new gt,sM=new gt;class aN extends wn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new wm(t);s.rotateY(Math.PI*.5),this.material=new Bc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const c=s.getAttribute("position"),f=new Float32Array(c.count*3);s.setAttribute("color",new Gn(f,3)),this.add(new Xi(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");iM.copy(this.light.color),sM.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const c=i<s/2?iM:sM;t.setXYZ(i,c.r,c.g,c.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sN.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rN extends ko{constructor(e=10,t=10,i=4473924,s=8947848){i=new gt(i),s=new gt(s);const c=t/2,f=e/t,h=e/2,m=[],g=[];for(let b=0,M=0,A=-h;b<=t;b++,A+=f){m.push(-h,0,A,h,0,A),m.push(A,0,-h,A,0,h);const R=b===c?i:s;R.toArray(g,M),M+=3,R.toArray(g,M),M+=3,R.toArray(g,M),M+=3,R.toArray(g,M),M+=3}const y=new Qt;y.setAttribute("position",new bt(m,3)),y.setAttribute("color",new bt(g,3));const _=new ia({vertexColors:!0,toneMapped:!1});super(y,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class oN extends ko{constructor(e=10,t=16,i=8,s=64,c=4473924,f=8947848){c=new gt(c),f=new gt(f);const h=[],m=[];if(t>1)for(let _=0;_<t;_++){const b=_/t*(Math.PI*2),M=Math.sin(b)*e,A=Math.cos(b)*e;h.push(0,0,0),h.push(M,0,A);const R=_&1?c:f;m.push(R.r,R.g,R.b),m.push(R.r,R.g,R.b)}for(let _=0;_<i;_++){const b=_&1?c:f,M=e-e/i*_;for(let A=0;A<s;A++){let R=A/s*(Math.PI*2),w=Math.sin(R)*M,E=Math.cos(R)*M;h.push(w,0,E),m.push(b.r,b.g,b.b),R=(A+1)/s*(Math.PI*2),w=Math.sin(R)*M,E=Math.cos(R)*M,h.push(w,0,E),m.push(b.r,b.g,b.b)}}const g=new Qt;g.setAttribute("position",new bt(h,3)),g.setAttribute("color",new bt(m,3));const y=new ia({vertexColors:!0,toneMapped:!1});super(g,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aM=new Y,ev=new Y,rM=new Y;class lN extends wn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Qt;s.setAttribute("position",new bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const c=new ia({fog:!1,toneMapped:!1});this.lightPlane=new Pc(s,c),this.add(this.lightPlane),s=new Qt,s.setAttribute("position",new bt([0,0,0,0,0,1],3)),this.targetLine=new Pc(s,c),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aM.setFromMatrixPosition(this.light.matrixWorld),ev.setFromMatrixPosition(this.light.target.matrixWorld),rM.subVectors(ev,aM),this.lightPlane.lookAt(ev),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ev),this.targetLine.scale.z=rM.length()}}const tv=new Y,Ei=new Mx;class cN extends ko{constructor(e){const t=new Qt,i=new ia({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],c=[],f={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(A,R){m(A),m(R)}function m(A){s.push(0,0,0),c.push(0,0,0),f[A]===void 0&&(f[A]=[]),f[A].push(s.length/3-1)}t.setAttribute("position",new bt(s,3)),t.setAttribute("color",new bt(c,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=f,this.update();const g=new gt(16755200),y=new gt(16711680),_=new gt(43775),b=new gt(16777215),M=new gt(3355443);this.setColors(g,y,_,b,M)}setColors(e,t,i,s,c){const h=this.geometry.getAttribute("color");return h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,t.r,t.g,t.b),h.setXYZ(25,t.r,t.g,t.b),h.setXYZ(26,t.r,t.g,t.b),h.setXYZ(27,t.r,t.g,t.b),h.setXYZ(28,t.r,t.g,t.b),h.setXYZ(29,t.r,t.g,t.b),h.setXYZ(30,t.r,t.g,t.b),h.setXYZ(31,t.r,t.g,t.b),h.setXYZ(32,i.r,i.g,i.b),h.setXYZ(33,i.r,i.g,i.b),h.setXYZ(34,i.r,i.g,i.b),h.setXYZ(35,i.r,i.g,i.b),h.setXYZ(36,i.r,i.g,i.b),h.setXYZ(37,i.r,i.g,i.b),h.setXYZ(38,s.r,s.g,s.b),h.setXYZ(39,s.r,s.g,s.b),h.setXYZ(40,c.r,c.g,c.b),h.setXYZ(41,c.r,c.g,c.b),h.setXYZ(42,c.r,c.g,c.b),h.setXYZ(43,c.r,c.g,c.b),h.setXYZ(44,c.r,c.g,c.b),h.setXYZ(45,c.r,c.g,c.b),h.setXYZ(46,c.r,c.g,c.b),h.setXYZ(47,c.r,c.g,c.b),h.setXYZ(48,c.r,c.g,c.b),h.setXYZ(49,c.r,c.g,c.b),h.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;let c,f;if(Ei.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)c=1,f=0;else if(this.camera.coordinateSystem===ka)c=-1,f=1;else if(this.camera.coordinateSystem===Xh)c=0,f=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Ui("c",t,e,Ei,0,0,c),Ui("t",t,e,Ei,0,0,f),Ui("n1",t,e,Ei,-i,-s,c),Ui("n2",t,e,Ei,i,-s,c),Ui("n3",t,e,Ei,-i,s,c),Ui("n4",t,e,Ei,i,s,c),Ui("f1",t,e,Ei,-i,-s,f),Ui("f2",t,e,Ei,i,-s,f),Ui("f3",t,e,Ei,-i,s,f),Ui("f4",t,e,Ei,i,s,f),Ui("u1",t,e,Ei,i*.7,s*1.1,c),Ui("u2",t,e,Ei,-i*.7,s*1.1,c),Ui("u3",t,e,Ei,0,s*2,c),Ui("cf1",t,e,Ei,-i,0,f),Ui("cf2",t,e,Ei,i,0,f),Ui("cf3",t,e,Ei,0,-s,f),Ui("cf4",t,e,Ei,0,s,f),Ui("cn1",t,e,Ei,-i,0,c),Ui("cn2",t,e,Ei,i,0,c),Ui("cn3",t,e,Ei,0,-s,c),Ui("cn4",t,e,Ei,0,s,c),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ui(r,e,t,i,s,c,f){tv.set(s,c,f).unproject(i);const h=e[r];if(h!==void 0){const m=t.getAttribute("position");for(let g=0,y=h.length;g<y;g++)m.setXYZ(h[g],tv.x,tv.y,tv.z)}}const nv=new Ps;class uN extends ko{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),c=new Qt;c.setIndex(new Gn(i,1)),c.setAttribute("position",new Gn(s,3)),super(c,new ia({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&nv.setFromObject(this.object),nv.isEmpty())return;const e=nv.min,t=nv.max,i=this.geometry.attributes.position,s=i.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fN extends ko{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],c=new Qt;c.setIndex(new Gn(i,1)),c.setAttribute("position",new bt(s,3)),super(c,new ia({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class hN extends Pc{constructor(e,t=1,i=16776960){const s=i,c=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],f=new Qt;f.setAttribute("position",new bt(c,3)),f.computeBoundingSphere(),super(f,new ia({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],m=new Qt;m.setAttribute("position",new bt(h,3)),m.computeBoundingSphere(),this.add(new Xi(m,new Bc({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const oM=new Y;let iv,m_;class dN extends wn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),i=1,s=16776960,c=i*.2,f=c*.2){super(),this.type="ArrowHelper",iv===void 0&&(iv=new Qt,iv.setAttribute("position",new bt([0,0,0,0,1,0],3)),m_=new Am(.5,1,5,1),m_.translate(0,-.5,0)),this.position.copy(t),this.line=new Pc(iv,new ia({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xi(m_,new Bc({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,c,f)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{oM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(oM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pN extends ko{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Qt;s.setAttribute("position",new bt(t,3)),s.setAttribute("color",new bt(i,3));const c=new ia({vertexColors:!0,toneMapped:!1});super(s,c),this.type="AxesHelper"}setColors(e,t,i){const s=new gt,c=this.geometry.attributes.color.array;return s.set(e),s.toArray(c,0),s.toArray(c,3),s.set(t),s.toArray(c,6),s.toArray(c,9),s.set(i),s.toArray(c,12),s.toArray(c,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mN{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ix,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,c,f){return this.currentPath.bezierCurveTo(e,t,i,s,c,f),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const N=[];for(let L=0,U=E.length;L<U;L++){const B=E[L],z=new Qu;z.curves=B.curves,N.push(z)}return N}function i(E,N){const L=N.length;let U=!1;for(let B=L-1,z=0;z<L;B=z++){let H=N[B],j=N[z],I=j.x-H.x,P=j.y-H.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(H=N[z],I=-I,j=N[B],P=-P),E.y<H.y||E.y>j.y)continue;if(E.y===H.y){if(E.x===H.x)return!0}else{const q=P*(E.x-H.x)-I*(E.y-H.y);if(q===0)return!0;if(q<0)continue;U=!U}}else{if(E.y!==H.y)continue;if(j.x<=E.x&&E.x<=H.x||H.x<=E.x&&E.x<=j.x)return!0}}return U}const s=jr.isClockWise,c=this.subPaths;if(c.length===0)return[];let f,h,m;const g=[];if(c.length===1)return h=c[0],m=new Qu,m.curves=h.curves,g.push(m),g;let y=!s(c[0].getPoints());y=e?!y:y;const _=[],b=[];let M=[],A=0,R;b[A]=void 0,M[A]=[];for(let E=0,N=c.length;E<N;E++)h=c[E],R=h.getPoints(),f=s(R),f=e?!f:f,f?(!y&&b[A]&&A++,b[A]={s:new Qu,p:R},b[A].s.curves=h.curves,y&&A++,M[A]=[]):M[A].push({h,p:R[0]});if(!b[0])return t(c);if(b.length>1){let E=!1,N=0;for(let L=0,U=b.length;L<U;L++)_[L]=[];for(let L=0,U=b.length;L<U;L++){const B=M[L];for(let z=0;z<B.length;z++){const H=B[z];let j=!0;for(let I=0;I<b.length;I++)i(H.p,b[I].p)&&(L!==I&&N++,j?(j=!1,_[I].push(H)):E=!0);j&&_[L].push(H)}}N>0&&E===!1&&(M=_)}let w;for(let E=0,N=b.length;E<N;E++){m=b[E].s,g.push(m),w=M[E];for(let L=0,U=w.length;L<U;L++)m.holes.push(w[L].h)}return g}}class gN extends Fo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ct("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function vN(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function xN(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function yN(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function q_(r,e,t,i){const s=_N(i);switch(t){case vb:return r*e;case mx:return r*e/s.components*s.byteLength;case Mm:return r*e/s.components*s.byteLength;case Ku:return r*e*2/s.components*s.byteLength;case gx:return r*e*2/s.components*s.byteLength;case xb:return r*e*3/s.components*s.byteLength;case Os:return r*e*4/s.components*s.byteLength;case vx:return r*e*4/s.components*s.byteLength;case Zp:case Qp:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Jp:case Kp:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Sv:case Ev:return Math.max(r,16)*Math.max(e,8)/4;case bv:case Mv:return Math.max(r,8)*Math.max(e,8)/2;case Tv:case Av:case Cv:case Rv:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case wv:case Nv:case Dv:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Lv:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Uv:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case Iv:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case Ov:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case Pv:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case zv:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case Bv:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case Fv:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case kv:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case Vv:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Hv:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Gv:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case Wv:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Xv:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case jv:case qv:case Yv:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Zv:case Qv:return Math.ceil(r/4)*Math.ceil(e/4)*8;case Jv:case Kv:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _N(r){switch(r){case ea:case db:return{byteLength:1,components:1};case Gh:case pb:case Yr:return{byteLength:2,components:1};case dx:case px:return{byteLength:2,components:4};case gr:case hx:case Is:return{byteLength:4,components:1};case mb:case gb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class bN{static contain(e,t){return vN(e,t)}static cover(e,t){return xN(e,t)}static fill(e){return yN(e)}static getByteLength(e,t,i,s){return q_(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cx}}));typeof window<"u"&&(window.__THREE__?ct("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cx);function BT(){let r=null,e=!1,t=null,i=null;function s(c,f){t(c,f),i=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(c){t=c},setContext:function(c){r=c}}}function SN(r){const e=new WeakMap;function t(h,m){const g=h.array,y=h.usage,_=g.byteLength,b=r.createBuffer();r.bindBuffer(m,b),r.bufferData(m,g,y),h.onUploadCallback();let M;if(g instanceof Float32Array)M=r.FLOAT;else if(typeof Float16Array<"u"&&g instanceof Float16Array)M=r.HALF_FLOAT;else if(g instanceof Uint16Array)h.isFloat16BufferAttribute?M=r.HALF_FLOAT:M=r.UNSIGNED_SHORT;else if(g instanceof Int16Array)M=r.SHORT;else if(g instanceof Uint32Array)M=r.UNSIGNED_INT;else if(g instanceof Int32Array)M=r.INT;else if(g instanceof Int8Array)M=r.BYTE;else if(g instanceof Uint8Array)M=r.UNSIGNED_BYTE;else if(g instanceof Uint8ClampedArray)M=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:b,type:M,bytesPerElement:g.BYTES_PER_ELEMENT,version:h.version,size:_}}function i(h,m,g){const y=m.array,_=m.updateRanges;if(r.bindBuffer(g,h),_.length===0)r.bufferSubData(g,0,y);else{_.sort((M,A)=>M.start-A.start);let b=0;for(let M=1;M<_.length;M++){const A=_[b],R=_[M];R.start<=A.start+A.count+1?A.count=Math.max(A.count,R.start+R.count-A.start):(++b,_[b]=R)}_.length=b+1;for(let M=0,A=_.length;M<A;M++){const R=_[M];r.bufferSubData(g,R.start*y.BYTES_PER_ELEMENT,y,R.start,R.count)}m.clearUpdateRanges()}m.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);const m=e.get(h);m&&(r.deleteBuffer(m.buffer),e.delete(h))}function f(h,m){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const y=e.get(h);(!y||y.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const g=e.get(h);if(g===void 0)e.set(h,t(h,m));else if(g.version<h.version){if(g.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(g.buffer,h,m),g.version=h.version}}return{get:s,remove:c,update:f}}var MN=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,EN=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,TN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,AN=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wN=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,CN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,NN=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,DN=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,LN=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,UN=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,IN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ON=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,PN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BN=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,FN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,HN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,WN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,XN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YN=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ZN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QN=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KN=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$N="gl_FragColor = linearToOutputTexel( gl_FragColor );",eD=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nD=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,iD=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sD=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rD=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oD=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lD=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fD=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hD=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dD=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pD=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mD=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gD=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vD=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xD=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yD=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_D=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bD=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,SD=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,MD=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ED=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,TD=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AD=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wD=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CD=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,RD=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ND=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,DD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,LD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ID=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,OD=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,PD=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,BD=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,FD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VD=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,XD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,qD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,YD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ZD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,JD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$D=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eL=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tL=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nL=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iL=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sL=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,aL=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rL=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oL=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lL=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cL=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uL=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fL=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hL=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dL=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pL=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mL=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gL=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vL=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_L=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bL=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const SL=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ML=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TL=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wL=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RL=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,NL=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,DL=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,LL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UL=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IL=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OL=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,zL=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BL=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FL=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kL=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VL=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HL=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,GL=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,WL=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XL=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jL=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qL=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YL=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZL=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QL=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KL=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$L=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rn={alphahash_fragment:MN,alphahash_pars_fragment:EN,alphamap_fragment:TN,alphamap_pars_fragment:AN,alphatest_fragment:wN,alphatest_pars_fragment:CN,aomap_fragment:RN,aomap_pars_fragment:NN,batching_pars_vertex:DN,batching_vertex:LN,begin_vertex:UN,beginnormal_vertex:IN,bsdfs:ON,iridescence_fragment:PN,bumpmap_pars_fragment:zN,clipping_planes_fragment:BN,clipping_planes_pars_fragment:FN,clipping_planes_pars_vertex:kN,clipping_planes_vertex:VN,color_fragment:HN,color_pars_fragment:GN,color_pars_vertex:WN,color_vertex:XN,common:jN,cube_uv_reflection_fragment:qN,defaultnormal_vertex:YN,displacementmap_pars_vertex:ZN,displacementmap_vertex:QN,emissivemap_fragment:JN,emissivemap_pars_fragment:KN,colorspace_fragment:$N,colorspace_pars_fragment:eD,envmap_fragment:tD,envmap_common_pars_fragment:nD,envmap_pars_fragment:iD,envmap_pars_vertex:sD,envmap_physical_pars_fragment:mD,envmap_vertex:aD,fog_vertex:rD,fog_pars_vertex:oD,fog_fragment:lD,fog_pars_fragment:cD,gradientmap_pars_fragment:uD,lightmap_pars_fragment:fD,lights_lambert_fragment:hD,lights_lambert_pars_fragment:dD,lights_pars_begin:pD,lights_toon_fragment:gD,lights_toon_pars_fragment:vD,lights_phong_fragment:xD,lights_phong_pars_fragment:yD,lights_physical_fragment:_D,lights_physical_pars_fragment:bD,lights_fragment_begin:SD,lights_fragment_maps:MD,lights_fragment_end:ED,logdepthbuf_fragment:TD,logdepthbuf_pars_fragment:AD,logdepthbuf_pars_vertex:wD,logdepthbuf_vertex:CD,map_fragment:RD,map_pars_fragment:ND,map_particle_fragment:DD,map_particle_pars_fragment:LD,metalnessmap_fragment:UD,metalnessmap_pars_fragment:ID,morphinstance_vertex:OD,morphcolor_vertex:PD,morphnormal_vertex:zD,morphtarget_pars_vertex:BD,morphtarget_vertex:FD,normal_fragment_begin:kD,normal_fragment_maps:VD,normal_pars_fragment:HD,normal_pars_vertex:GD,normal_vertex:WD,normalmap_pars_fragment:XD,clearcoat_normal_fragment_begin:jD,clearcoat_normal_fragment_maps:qD,clearcoat_pars_fragment:YD,iridescence_pars_fragment:ZD,opaque_fragment:QD,packing:JD,premultiplied_alpha_fragment:KD,project_vertex:$D,dithering_fragment:eL,dithering_pars_fragment:tL,roughnessmap_fragment:nL,roughnessmap_pars_fragment:iL,shadowmap_pars_fragment:sL,shadowmap_pars_vertex:aL,shadowmap_vertex:rL,shadowmask_pars_fragment:oL,skinbase_vertex:lL,skinning_pars_vertex:cL,skinning_vertex:uL,skinnormal_vertex:fL,specularmap_fragment:hL,specularmap_pars_fragment:dL,tonemapping_fragment:pL,tonemapping_pars_fragment:mL,transmission_fragment:gL,transmission_pars_fragment:vL,uv_pars_fragment:xL,uv_pars_vertex:yL,uv_vertex:_L,worldpos_vertex:bL,background_vert:SL,background_frag:ML,backgroundCube_vert:EL,backgroundCube_frag:TL,cube_vert:AL,cube_frag:wL,depth_vert:CL,depth_frag:RL,distance_vert:NL,distance_frag:DL,equirect_vert:LL,equirect_frag:UL,linedashed_vert:IL,linedashed_frag:OL,meshbasic_vert:PL,meshbasic_frag:zL,meshlambert_vert:BL,meshlambert_frag:FL,meshmatcap_vert:kL,meshmatcap_frag:VL,meshnormal_vert:HL,meshnormal_frag:GL,meshphong_vert:WL,meshphong_frag:XL,meshphysical_vert:jL,meshphysical_frag:qL,meshtoon_vert:YL,meshtoon_frag:ZL,points_vert:QL,points_frag:JL,shadow_vert:KL,shadow_frag:$L,sprite_vert:eU,sprite_frag:tU},ut={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new Fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new Fe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},Wr={basic:{uniforms:$s([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:$s([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new gt(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:$s([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:$s([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},toon:{uniforms:$s([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new gt(0)}}]),vertexShader:rn.meshtoon_vert,fragmentShader:rn.meshtoon_frag},matcap:{uniforms:$s([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:$s([ut.points,ut.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:$s([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:$s([ut.common,ut.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:$s([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:rn.meshnormal_vert,fragmentShader:rn.meshnormal_frag},sprite:{uniforms:$s([ut.sprite,ut.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:rn.backgroundCube_vert,fragmentShader:rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distance:{uniforms:$s([ut.common,ut.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distance_vert,fragmentShader:rn.distance_frag},shadow:{uniforms:$s([ut.lights,ut.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};Wr.physical={uniforms:$s([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new Fe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new Fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new Fe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag};const sv={r:0,b:0,g:0},ku=new Ha,nU=new Gt;function iU(r,e,t,i,s,c,f){const h=new gt(0);let m=c===!0?0:1,g,y,_=null,b=0,M=null;function A(L){let U=L.isScene===!0?L.background:null;return U&&U.isTexture&&(U=(L.backgroundBlurriness>0?t:e).get(U)),U}function R(L){let U=!1;const B=A(L);B===null?E(h,m):B&&B.isColor&&(E(B,1),U=!0);const z=r.xr.getEnvironmentBlendMode();z==="additive"?i.buffers.color.setClear(0,0,0,1,f):z==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,f),(r.autoClear||U)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function w(L,U){const B=A(U);B&&(B.isCubeTexture||B.mapping===$h)?(y===void 0&&(y=new Xi(new Fc(1,1,1),new vr({name:"BackgroundCubeMaterial",uniforms:Zh(Wr.backgroundCube.uniforms),vertexShader:Wr.backgroundCube.vertexShader,fragmentShader:Wr.backgroundCube.fragmentShader,side:na,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(z,H,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(y)),ku.copy(U.backgroundRotation),ku.x*=-1,ku.y*=-1,ku.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(ku.y*=-1,ku.z*=-1),y.material.uniforms.envMap.value=B,y.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,y.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,y.material.uniforms.backgroundRotation.value.setFromMatrix4(nU.makeRotationFromEuler(ku)),y.material.toneMapped=bn.getTransfer(B.colorSpace)!==Pn,(_!==B||b!==B.version||M!==r.toneMapping)&&(y.material.needsUpdate=!0,_=B,b=B.version,M=r.toneMapping),y.layers.enableAll(),L.unshift(y,y.geometry,y.material,0,0,null)):B&&B.isTexture&&(g===void 0&&(g=new Xi(new nd(2,2),new vr({name:"BackgroundMaterial",uniforms:Zh(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:Rl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(g)),g.material.uniforms.t2D.value=B,g.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,g.material.toneMapped=bn.getTransfer(B.colorSpace)!==Pn,B.matrixAutoUpdate===!0&&B.updateMatrix(),g.material.uniforms.uvTransform.value.copy(B.matrix),(_!==B||b!==B.version||M!==r.toneMapping)&&(g.material.needsUpdate=!0,_=B,b=B.version,M=r.toneMapping),g.layers.enableAll(),L.unshift(g,g.geometry,g.material,0,0,null))}function E(L,U){L.getRGB(sv,kE(r)),i.buffers.color.setClear(sv.r,sv.g,sv.b,U,f)}function N(){y!==void 0&&(y.geometry.dispose(),y.material.dispose(),y=void 0),g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0)}return{getClearColor:function(){return h},setClearColor:function(L,U=1){h.set(L),m=U,E(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(L){m=L,E(h,m)},render:R,addToRenderList:w,dispose:N}}function sU(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),i={},s=b(null);let c=s,f=!1;function h(P,q,se,ee,de){let oe=!1;const Q=_(ee,se,q);c!==Q&&(c=Q,g(c.object)),oe=M(P,ee,se,de),oe&&A(P,ee,se,de),de!==null&&e.update(de,r.ELEMENT_ARRAY_BUFFER),(oe||f)&&(f=!1,U(P,q,se,ee),de!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(de).buffer))}function m(){return r.createVertexArray()}function g(P){return r.bindVertexArray(P)}function y(P){return r.deleteVertexArray(P)}function _(P,q,se){const ee=se.wireframe===!0;let de=i[P.id];de===void 0&&(de={},i[P.id]=de);let oe=de[q.id];oe===void 0&&(oe={},de[q.id]=oe);let Q=oe[ee];return Q===void 0&&(Q=b(m()),oe[ee]=Q),Q}function b(P){const q=[],se=[],ee=[];for(let de=0;de<t;de++)q[de]=0,se[de]=0,ee[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:se,attributeDivisors:ee,object:P,attributes:{},index:null}}function M(P,q,se,ee){const de=c.attributes,oe=q.attributes;let Q=0;const J=se.getAttributes();for(const fe in J)if(J[fe].location>=0){const Ce=de[fe];let X=oe[fe];if(X===void 0&&(fe==="instanceMatrix"&&P.instanceMatrix&&(X=P.instanceMatrix),fe==="instanceColor"&&P.instanceColor&&(X=P.instanceColor)),Ce===void 0||Ce.attribute!==X||X&&Ce.data!==X.data)return!0;Q++}return c.attributesNum!==Q||c.index!==ee}function A(P,q,se,ee){const de={},oe=q.attributes;let Q=0;const J=se.getAttributes();for(const fe in J)if(J[fe].location>=0){let Ce=oe[fe];Ce===void 0&&(fe==="instanceMatrix"&&P.instanceMatrix&&(Ce=P.instanceMatrix),fe==="instanceColor"&&P.instanceColor&&(Ce=P.instanceColor));const X={};X.attribute=Ce,Ce&&Ce.data&&(X.data=Ce.data),de[fe]=X,Q++}c.attributes=de,c.attributesNum=Q,c.index=ee}function R(){const P=c.newAttributes;for(let q=0,se=P.length;q<se;q++)P[q]=0}function w(P){E(P,0)}function E(P,q){const se=c.newAttributes,ee=c.enabledAttributes,de=c.attributeDivisors;se[P]=1,ee[P]===0&&(r.enableVertexAttribArray(P),ee[P]=1),de[P]!==q&&(r.vertexAttribDivisor(P,q),de[P]=q)}function N(){const P=c.newAttributes,q=c.enabledAttributes;for(let se=0,ee=q.length;se<ee;se++)q[se]!==P[se]&&(r.disableVertexAttribArray(se),q[se]=0)}function L(P,q,se,ee,de,oe,Q){Q===!0?r.vertexAttribIPointer(P,q,se,de,oe):r.vertexAttribPointer(P,q,se,ee,de,oe)}function U(P,q,se,ee){R();const de=ee.attributes,oe=se.getAttributes(),Q=q.defaultAttributeValues;for(const J in oe){const fe=oe[J];if(fe.location>=0){let we=de[J];if(we===void 0&&(J==="instanceMatrix"&&P.instanceMatrix&&(we=P.instanceMatrix),J==="instanceColor"&&P.instanceColor&&(we=P.instanceColor)),we!==void 0){const Ce=we.normalized,X=we.itemSize,re=e.get(we);if(re===void 0)continue;const _e=re.buffer,Pe=re.type,it=re.bytesPerElement,he=Pe===r.INT||Pe===r.UNSIGNED_INT||we.gpuType===hx;if(we.isInterleavedBufferAttribute){const Ae=we.data,qe=Ae.stride,nt=we.offset;if(Ae.isInstancedInterleavedBuffer){for(let $e=0;$e<fe.locationSize;$e++)E(fe.location+$e,Ae.meshPerAttribute);P.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let $e=0;$e<fe.locationSize;$e++)w(fe.location+$e);r.bindBuffer(r.ARRAY_BUFFER,_e);for(let $e=0;$e<fe.locationSize;$e++)L(fe.location+$e,X/fe.locationSize,Pe,Ce,qe*it,(nt+X/fe.locationSize*$e)*it,he)}else{if(we.isInstancedBufferAttribute){for(let Ae=0;Ae<fe.locationSize;Ae++)E(fe.location+Ae,we.meshPerAttribute);P.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Ae=0;Ae<fe.locationSize;Ae++)w(fe.location+Ae);r.bindBuffer(r.ARRAY_BUFFER,_e);for(let Ae=0;Ae<fe.locationSize;Ae++)L(fe.location+Ae,X/fe.locationSize,Pe,Ce,X*it,X/fe.locationSize*Ae*it,he)}}else if(Q!==void 0){const Ce=Q[J];if(Ce!==void 0)switch(Ce.length){case 2:r.vertexAttrib2fv(fe.location,Ce);break;case 3:r.vertexAttrib3fv(fe.location,Ce);break;case 4:r.vertexAttrib4fv(fe.location,Ce);break;default:r.vertexAttrib1fv(fe.location,Ce)}}}}N()}function B(){j();for(const P in i){const q=i[P];for(const se in q){const ee=q[se];for(const de in ee)y(ee[de].object),delete ee[de];delete q[se]}delete i[P]}}function z(P){if(i[P.id]===void 0)return;const q=i[P.id];for(const se in q){const ee=q[se];for(const de in ee)y(ee[de].object),delete ee[de];delete q[se]}delete i[P.id]}function H(P){for(const q in i){const se=i[q];if(se[P.id]===void 0)continue;const ee=se[P.id];for(const de in ee)y(ee[de].object),delete ee[de];delete se[P.id]}}function j(){I(),f=!0,c!==s&&(c=s,g(c.object))}function I(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:h,reset:j,resetDefaultState:I,dispose:B,releaseStatesOfGeometry:z,releaseStatesOfProgram:H,initAttributes:R,enableAttribute:w,disableUnusedAttributes:N}}function aU(r,e,t){let i;function s(g){i=g}function c(g,y){r.drawArrays(i,g,y),t.update(y,i,1)}function f(g,y,_){_!==0&&(r.drawArraysInstanced(i,g,y,_),t.update(y,i,_))}function h(g,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,g,0,y,0,_);let M=0;for(let A=0;A<_;A++)M+=y[A];t.update(M,i,1)}function m(g,y,_,b){if(_===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let A=0;A<g.length;A++)f(g[A],y[A],b[A]);else{M.multiDrawArraysInstancedWEBGL(i,g,0,y,0,b,0,_);let A=0;for(let R=0;R<_;R++)A+=y[R]*b[R];t.update(A,i,1)}}this.setMode=s,this.render=c,this.renderInstances=f,this.renderMultiDraw=h,this.renderMultiDrawInstances=m}function rU(r,e,t,i){let s;function c(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const H=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function f(H){return!(H!==Os&&i.convert(H)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(H){const j=H===Yr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(H!==ea&&i.convert(H)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==Is&&!j)}function m(H){if(H==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let g=t.precision!==void 0?t.precision:"highp";const y=m(g);y!==g&&(ct("WebGLRenderer:",g,"not supported, using",y,"instead."),g=y);const _=t.logarithmicDepthBuffer===!0,b=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),M=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=r.getParameter(r.MAX_TEXTURE_SIZE),w=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),E=r.getParameter(r.MAX_VERTEX_ATTRIBS),N=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),L=r.getParameter(r.MAX_VARYING_VECTORS),U=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),B=r.getParameter(r.MAX_SAMPLES),z=r.getParameter(r.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:c,getMaxPrecision:m,textureFormatReadable:f,textureTypeReadable:h,precision:g,logarithmicDepthBuffer:_,reversedDepthBuffer:b,maxTextures:M,maxVertexTextures:A,maxTextureSize:R,maxCubemapSize:w,maxAttributes:E,maxVertexUniforms:N,maxVaryings:L,maxFragmentUniforms:U,maxSamples:B,samples:z}}function oU(r){const e=this;let t=null,i=0,s=!1,c=!1;const f=new wc,h=new $t,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(_,b){const M=_.length!==0||b||i!==0||s;return s=b,i=_.length,M},this.beginShadows=function(){c=!0,y(null)},this.endShadows=function(){c=!1},this.setGlobalState=function(_,b){t=y(_,b,0)},this.setState=function(_,b,M){const A=_.clippingPlanes,R=_.clipIntersection,w=_.clipShadows,E=r.get(_);if(!s||A===null||A.length===0||c&&!w)c?y(null):g();else{const N=c?0:i,L=N*4;let U=E.clippingState||null;m.value=U,U=y(A,b,L,M);for(let B=0;B!==L;++B)U[B]=t[B];E.clippingState=U,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=N}};function g(){m.value!==t&&(m.value=t,m.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function y(_,b,M,A){const R=_!==null?_.length:0;let w=null;if(R!==0){if(w=m.value,A!==!0||w===null){const E=M+R*4,N=b.matrixWorldInverse;h.getNormalMatrix(N),(w===null||w.length<E)&&(w=new Float32Array(E));for(let L=0,U=M;L!==R;++L,U+=4)f.copy(_[L]).applyMatrix4(N,h),f.normal.toArray(w,U),w[U+3]=f.constant}m.value=w,m.needsUpdate=!0}return e.numPlanes=R,e.numIntersection=0,w}}function lU(r){let e=new WeakMap;function t(f,h){return h===im?f.mapping=zo:h===sm&&(f.mapping=Uc),f}function i(f){if(f&&f.isTexture){const h=f.mapping;if(h===im||h===sm)if(e.has(f)){const m=e.get(f).texture;return t(m,f.mapping)}else{const m=f.image;if(m&&m.height>0){const g=new Eb(m.height);return g.fromEquirectangularTexture(r,f),e.set(f,g),f.addEventListener("dispose",s),t(g.texture,f.mapping)}else return null}}return f}function s(f){const h=f.target;h.removeEventListener("dispose",s);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function c(){e=new WeakMap}return{get:i,dispose:c}}const Lc=4,lM=[.125,.215,.35,.446,.526,.582],Gu=20,cU=256,Hp=new Hc,cM=new gt;let g_=null,v_=0,x_=0,y_=!1;const uU=new Y;class Y_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,s=100,c={}){const{size:f=256,position:h=uU}=c;g_=this._renderer.getRenderTarget(),v_=this._renderer.getActiveCubeFace(),x_=this._renderer.getActiveMipmapLevel(),y_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(f);const m=this._allocateTargets();return m.depthBuffer=!0,this._sceneToCubeUV(e,i,s,m,h),t>0&&this._blur(m,0,0,t),this._applyPMREM(m),this._cleanup(m),m}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(g_,v_,x_),this._renderer.xr.enabled=y_,e.scissorTest=!1,Lh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zo||e.mapping===Uc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),g_=this._renderer.getRenderTarget(),v_=this._renderer.getActiveCubeFace(),x_=this._renderer.getActiveMipmapLevel(),y_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:Yr,format:Os,colorSpace:Ic,depthBuffer:!1},s=uM(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uM(e,t,i);const{_lodMax:c}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=fU(c)),this._blurMaterial=dU(c,e,t),this._ggxMaterial=hU(c,e,t)}return s}_compileMaterial(e){const t=new Xi(new Qt,e);this._renderer.compile(t,Hp)}_sceneToCubeUV(e,t,i,s,c){const m=new Wi(90,1,t,i),g=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],_=this._renderer,b=_.autoClear,M=_.toneMapping;_.getClearColor(cM),_.toneMapping=mr,_.autoClear=!1,_.state.buffers.depth.getReversed()&&(_.setRenderTarget(s),_.clearDepth(),_.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Xi(new Fc,new Bc({name:"PMREM.Background",side:na,depthWrite:!1,depthTest:!1})));const R=this._backgroundBox,w=R.material;let E=!1;const N=e.background;N?N.isColor&&(w.color.copy(N),e.background=null,E=!0):(w.color.copy(cM),E=!0);for(let L=0;L<6;L++){const U=L%3;U===0?(m.up.set(0,g[L],0),m.position.set(c.x,c.y,c.z),m.lookAt(c.x+y[L],c.y,c.z)):U===1?(m.up.set(0,0,g[L]),m.position.set(c.x,c.y,c.z),m.lookAt(c.x,c.y+y[L],c.z)):(m.up.set(0,g[L],0),m.position.set(c.x,c.y,c.z),m.lookAt(c.x,c.y,c.z+y[L]));const B=this._cubeSize;Lh(s,U*B,L>2?B:0,B,B),_.setRenderTarget(s),E&&_.render(R,m),_.render(e,m)}_.toneMapping=M,_.autoClear=b,e.background=N}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===zo||e.mapping===Uc;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=hM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fM());const c=s?this._cubemapMaterial:this._equirectMaterial,f=this._lodMeshes[0];f.material=c;const h=c.uniforms;h.envMap.value=e;const m=this._cubeSize;Lh(t,0,0,3*m,2*m),i.setRenderTarget(t),i.render(f,Hp)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodMeshes.length;for(let c=1;c<s;c++)this._applyGGXFilter(e,c-1,c);t.autoClear=i}_applyGGXFilter(e,t,i){const s=this._renderer,c=this._pingPongRenderTarget,f=this._ggxMaterial,h=this._lodMeshes[i];h.material=f;const m=f.uniforms,g=i/(this._lodMeshes.length-1),y=t/(this._lodMeshes.length-1),_=Math.sqrt(g*g-y*y),b=0+g*1.25,M=_*b,{_lodMax:A}=this,R=this._sizeLods[i],w=3*R*(i>A-Lc?i-A+Lc:0),E=4*(this._cubeSize-R);m.envMap.value=e.texture,m.roughness.value=M,m.mipInt.value=A-t,Lh(c,w,E,3*R,2*R),s.setRenderTarget(c),s.render(h,Hp),m.envMap.value=c.texture,m.roughness.value=0,m.mipInt.value=A-i,Lh(e,w,E,3*R,2*R),s.setRenderTarget(e),s.render(h,Hp)}_blur(e,t,i,s,c){const f=this._pingPongRenderTarget;this._halfBlur(e,f,t,i,s,"latitudinal",c),this._halfBlur(f,e,i,i,s,"longitudinal",c)}_halfBlur(e,t,i,s,c,f,h){const m=this._renderer,g=this._blurMaterial;f!=="latitudinal"&&f!=="longitudinal"&&Rt("blur direction must be either latitudinal or longitudinal!");const y=3,_=this._lodMeshes[s];_.material=g;const b=g.uniforms,M=this._sizeLods[i]-1,A=isFinite(c)?Math.PI/(2*M):2*Math.PI/(2*Gu-1),R=c/A,w=isFinite(c)?1+Math.floor(y*R):Gu;w>Gu&&ct(`sigmaRadians, ${c}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Gu}`);const E=[];let N=0;for(let H=0;H<Gu;++H){const j=H/R,I=Math.exp(-j*j/2);E.push(I),H===0?N+=I:H<w&&(N+=2*I)}for(let H=0;H<E.length;H++)E[H]=E[H]/N;b.envMap.value=e.texture,b.samples.value=w,b.weights.value=E,b.latitudinal.value=f==="latitudinal",h&&(b.poleAxis.value=h);const{_lodMax:L}=this;b.dTheta.value=A,b.mipInt.value=L-i;const U=this._sizeLods[s],B=3*U*(s>L-Lc?s-L+Lc:0),z=4*(this._cubeSize-U);Lh(t,B,z,3*U,2*U),m.setRenderTarget(t),m.render(_,Hp)}}function fU(r){const e=[],t=[],i=[];let s=r;const c=r-Lc+1+lM.length;for(let f=0;f<c;f++){const h=Math.pow(2,s);e.push(h);let m=1/h;f>r-Lc?m=lM[f-r+Lc-1]:f===0&&(m=0),t.push(m);const g=1/(h-2),y=-g,_=1+g,b=[y,y,_,y,_,_,y,y,_,_,y,_],M=6,A=6,R=3,w=2,E=1,N=new Float32Array(R*A*M),L=new Float32Array(w*A*M),U=new Float32Array(E*A*M);for(let z=0;z<M;z++){const H=z%3*2/3-1,j=z>2?0:-1,I=[H,j,0,H+2/3,j,0,H+2/3,j+1,0,H,j,0,H+2/3,j+1,0,H,j+1,0];N.set(I,R*A*z),L.set(b,w*A*z);const P=[z,z,z,z,z,z];U.set(P,E*A*z)}const B=new Qt;B.setAttribute("position",new Gn(N,R)),B.setAttribute("uv",new Gn(L,w)),B.setAttribute("faceIndex",new Gn(U,E)),i.push(new Xi(B,null)),s>Lc&&s--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function uM(r,e,t){const i=new Ra(r,e,t);return i.texture.mapping=$h,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Lh(r,e,t,i,s){r.viewport.set(e,t,i,s),r.scissor.set(e,t,i,s)}function hU(r,e,t){return new vr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:cU,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Wx(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function dU(r,e,t){const i=new Float32Array(Gu),s=new Y(0,1,0);return new vr({name:"SphericalGaussianBlur",defines:{n:Gu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function fM(){return new vr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function hM(){return new vr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function Wx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pU(r){let e=new WeakMap,t=null;function i(h){if(h&&h.isTexture){const m=h.mapping,g=m===im||m===sm,y=m===zo||m===Uc;if(g||y){let _=e.get(h);const b=_!==void 0?_.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==b)return t===null&&(t=new Y_(r)),_=g?t.fromEquirectangular(h,_):t.fromCubemap(h,_),_.texture.pmremVersion=h.pmremVersion,e.set(h,_),_.texture;if(_!==void 0)return _.texture;{const M=h.image;return g&&M&&M.height>0||y&&M&&s(M)?(t===null&&(t=new Y_(r)),_=g?t.fromEquirectangular(h):t.fromCubemap(h),_.texture.pmremVersion=h.pmremVersion,e.set(h,_),h.addEventListener("dispose",c),_.texture):null}}}return h}function s(h){let m=0;const g=6;for(let y=0;y<g;y++)h[y]!==void 0&&m++;return m===g}function c(h){const m=h.target;m.removeEventListener("dispose",c);const g=e.get(m);g!==void 0&&(e.delete(m),g.dispose())}function f(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:f}}function mU(r){const e={};function t(i){if(e[i]!==void 0)return e[i];const s=r.getExtension(i);return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&jh("WebGLRenderer: "+i+" extension not supported."),s}}}function gU(r,e,t,i){const s={},c=new WeakMap;function f(_){const b=_.target;b.index!==null&&e.remove(b.index);for(const A in b.attributes)e.remove(b.attributes[A]);b.removeEventListener("dispose",f),delete s[b.id];const M=c.get(b);M&&(e.remove(M),c.delete(b)),i.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function h(_,b){return s[b.id]===!0||(b.addEventListener("dispose",f),s[b.id]=!0,t.memory.geometries++),b}function m(_){const b=_.attributes;for(const M in b)e.update(b[M],r.ARRAY_BUFFER)}function g(_){const b=[],M=_.index,A=_.attributes.position;let R=0;if(M!==null){const N=M.array;R=M.version;for(let L=0,U=N.length;L<U;L+=3){const B=N[L+0],z=N[L+1],H=N[L+2];b.push(B,z,z,H,H,B)}}else if(A!==void 0){const N=A.array;R=A.version;for(let L=0,U=N.length/3-1;L<U;L+=3){const B=L+0,z=L+1,H=L+2;b.push(B,z,z,H,H,B)}}else return;const w=new(OE(b)?Mb:Sb)(b,1);w.version=R;const E=c.get(_);E&&e.remove(E),c.set(_,w)}function y(_){const b=c.get(_);if(b){const M=_.index;M!==null&&b.version<M.version&&g(_)}else g(_);return c.get(_)}return{get:h,update:m,getWireframeAttribute:y}}function vU(r,e,t){let i;function s(b){i=b}let c,f;function h(b){c=b.type,f=b.bytesPerElement}function m(b,M){r.drawElements(i,M,c,b*f),t.update(M,i,1)}function g(b,M,A){A!==0&&(r.drawElementsInstanced(i,M,c,b*f,A),t.update(M,i,A))}function y(b,M,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,M,0,c,b,0,A);let w=0;for(let E=0;E<A;E++)w+=M[E];t.update(w,i,1)}function _(b,M,A,R){if(A===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let E=0;E<b.length;E++)g(b[E]/f,M[E],R[E]);else{w.multiDrawElementsInstancedWEBGL(i,M,0,c,b,0,R,0,A);let E=0;for(let N=0;N<A;N++)E+=M[N]*R[N];t.update(E,i,1)}}this.setMode=s,this.setIndex=h,this.render=m,this.renderInstances=g,this.renderMultiDraw=y,this.renderMultiDrawInstances=_}function xU(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(c,f,h){switch(t.calls++,f){case r.TRIANGLES:t.triangles+=h*(c/3);break;case r.LINES:t.lines+=h*(c/2);break;case r.LINE_STRIP:t.lines+=h*(c-1);break;case r.LINE_LOOP:t.lines+=h*c;break;case r.POINTS:t.points+=h*c;break;default:Rt("WebGLInfo: Unknown draw mode:",f);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function yU(r,e,t){const i=new WeakMap,s=new jn;function c(f,h,m){const g=f.morphTargetInfluences,y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,_=y!==void 0?y.length:0;let b=i.get(h);if(b===void 0||b.count!==_){let P=function(){j.dispose(),i.delete(h),h.removeEventListener("dispose",P)};var M=P;b!==void 0&&b.texture.dispose();const A=h.morphAttributes.position!==void 0,R=h.morphAttributes.normal!==void 0,w=h.morphAttributes.color!==void 0,E=h.morphAttributes.position||[],N=h.morphAttributes.normal||[],L=h.morphAttributes.color||[];let U=0;A===!0&&(U=1),R===!0&&(U=2),w===!0&&(U=3);let B=h.attributes.position.count*U,z=1;B>e.maxTextureSize&&(z=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const H=new Float32Array(B*z*4*_),j=new bx(H,B,z,_);j.type=Is,j.needsUpdate=!0;const I=U*4;for(let q=0;q<_;q++){const se=E[q],ee=N[q],de=L[q],oe=B*z*4*q;for(let Q=0;Q<se.count;Q++){const J=Q*I;A===!0&&(s.fromBufferAttribute(se,Q),H[oe+J+0]=s.x,H[oe+J+1]=s.y,H[oe+J+2]=s.z,H[oe+J+3]=0),R===!0&&(s.fromBufferAttribute(ee,Q),H[oe+J+4]=s.x,H[oe+J+5]=s.y,H[oe+J+6]=s.z,H[oe+J+7]=0),w===!0&&(s.fromBufferAttribute(de,Q),H[oe+J+8]=s.x,H[oe+J+9]=s.y,H[oe+J+10]=s.z,H[oe+J+11]=de.itemSize===4?s.w:1)}}b={count:_,texture:j,size:new Fe(B,z)},i.set(h,b),h.addEventListener("dispose",P)}if(f.isInstancedMesh===!0&&f.morphTexture!==null)m.getUniforms().setValue(r,"morphTexture",f.morphTexture,t);else{let A=0;for(let w=0;w<g.length;w++)A+=g[w];const R=h.morphTargetsRelative?1:1-A;m.getUniforms().setValue(r,"morphTargetBaseInfluence",R),m.getUniforms().setValue(r,"morphTargetInfluences",g)}m.getUniforms().setValue(r,"morphTargetsTexture",b.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",b.size)}return{update:c}}function _U(r,e,t,i){let s=new WeakMap;function c(m){const g=i.render.frame,y=m.geometry,_=e.get(m,y);if(s.get(_)!==g&&(e.update(_),s.set(_,g)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),s.get(m)!==g&&(t.update(m.instanceMatrix,r.ARRAY_BUFFER),m.instanceColor!==null&&t.update(m.instanceColor,r.ARRAY_BUFFER),s.set(m,g))),m.isSkinnedMesh){const b=m.skeleton;s.get(b)!==g&&(b.update(),s.set(b,g))}return _}function f(){s=new WeakMap}function h(m){const g=m.target;g.removeEventListener("dispose",h),t.remove(g.instanceMatrix),g.instanceColor!==null&&t.remove(g.instanceColor)}return{update:c,dispose:f}}const bU={[rb]:"LINEAR_TONE_MAPPING",[ob]:"REINHARD_TONE_MAPPING",[lb]:"CINEON_TONE_MAPPING",[ux]:"ACES_FILMIC_TONE_MAPPING",[ub]:"AGX_TONE_MAPPING",[fb]:"NEUTRAL_TONE_MAPPING",[cb]:"CUSTOM_TONE_MAPPING"};function SU(r,e,t,i,s){const c=new Ra(e,t,{type:r,depthBuffer:i,stencilBuffer:s}),f=new Ra(e,t,{type:Yr,depthBuffer:!1,stencilBuffer:!1}),h=new Qt;h.setAttribute("position",new bt([-1,3,0,-1,-1,0,3,-1,0],3)),h.setAttribute("uv",new bt([0,2,0,0,2,0],2));const m=new Pb({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),g=new Xi(h,m),y=new Hc(-1,1,1,-1,0,1);let _=null,b=null,M=!1,A,R=null,w=[],E=!1;this.setSize=function(N,L){c.setSize(N,L),f.setSize(N,L);for(let U=0;U<w.length;U++){const B=w[U];B.setSize&&B.setSize(N,L)}},this.setEffects=function(N){w=N,E=w.length>0&&w[0].isRenderPass===!0;const L=c.width,U=c.height;for(let B=0;B<w.length;B++){const z=w[B];z.setSize&&z.setSize(L,U)}},this.begin=function(N,L){if(M||N.toneMapping===mr&&w.length===0)return!1;if(R=L,L!==null){const U=L.width,B=L.height;(c.width!==U||c.height!==B)&&this.setSize(U,B)}return E===!1&&N.setRenderTarget(c),A=N.toneMapping,N.toneMapping=mr,!0},this.hasRenderPass=function(){return E},this.end=function(N,L){N.toneMapping=A,M=!0;let U=c,B=f;for(let z=0;z<w.length;z++){const H=w[z];if(H.enabled!==!1&&(H.render(N,B,U,L),H.needsSwap!==!1)){const j=U;U=B,B=j}}if(_!==N.outputColorSpace||b!==N.toneMapping){_=N.outputColorSpace,b=N.toneMapping,m.defines={},bn.getTransfer(_)===Pn&&(m.defines.SRGB_TRANSFER="");const z=bU[b];z&&(m.defines[z]=""),m.needsUpdate=!0}m.uniforms.tDiffuse.value=U.texture,N.setRenderTarget(R),N.render(g,y),R=null,M=!1},this.isCompositing=function(){return M},this.dispose=function(){c.dispose(),f.dispose(),h.dispose(),m.dispose()}}const FT=new Ti,Z_=new ef(1,1),kT=new bx,VT=new Sx,HT=new Em,dM=[],pM=[],mM=new Float32Array(16),gM=new Float32Array(9),vM=new Float32Array(4);function id(r,e,t){const i=r[0];if(i<=0||i>0)return r;const s=e*t;let c=dM[s];if(c===void 0&&(c=new Float32Array(s),dM[s]=c),e!==0){i.toArray(c,0);for(let f=1,h=0;f!==e;++f)h+=t,r[f].toArray(c,h)}return c}function Ki(r,e){if(r.length!==e.length)return!1;for(let t=0,i=r.length;t<i;t++)if(r[t]!==e[t])return!1;return!0}function $i(r,e){for(let t=0,i=e.length;t<i;t++)r[t]=e[t]}function Xx(r,e){let t=pM[e];t===void 0&&(t=new Int32Array(e),pM[e]=t);for(let i=0;i!==e;++i)t[i]=r.allocateTextureUnit();return t}function MU(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function EU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;r.uniform2fv(this.addr,e),$i(t,e)}}function TU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ki(t,e))return;r.uniform3fv(this.addr,e),$i(t,e)}}function AU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;r.uniform4fv(this.addr,e),$i(t,e)}}function wU(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ki(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),$i(t,e)}else{if(Ki(t,i))return;vM.set(i),r.uniformMatrix2fv(this.addr,!1,vM),$i(t,i)}}function CU(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ki(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),$i(t,e)}else{if(Ki(t,i))return;gM.set(i),r.uniformMatrix3fv(this.addr,!1,gM),$i(t,i)}}function RU(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ki(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),$i(t,e)}else{if(Ki(t,i))return;mM.set(i),r.uniformMatrix4fv(this.addr,!1,mM),$i(t,i)}}function NU(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function DU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;r.uniform2iv(this.addr,e),$i(t,e)}}function LU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ki(t,e))return;r.uniform3iv(this.addr,e),$i(t,e)}}function UU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;r.uniform4iv(this.addr,e),$i(t,e)}}function IU(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function OU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;r.uniform2uiv(this.addr,e),$i(t,e)}}function PU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ki(t,e))return;r.uniform3uiv(this.addr,e),$i(t,e)}}function zU(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;r.uniform4uiv(this.addr,e),$i(t,e)}}function BU(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s);let c;this.type===r.SAMPLER_2D_SHADOW?(Z_.compareFunction=t.isReversedDepthBuffer()?_x:yx,c=Z_):c=FT,t.setTexture2D(e||c,s)}function FU(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||VT,s)}function kU(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||HT,s)}function VU(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||kT,s)}function HU(r){switch(r){case 5126:return MU;case 35664:return EU;case 35665:return TU;case 35666:return AU;case 35674:return wU;case 35675:return CU;case 35676:return RU;case 5124:case 35670:return NU;case 35667:case 35671:return DU;case 35668:case 35672:return LU;case 35669:case 35673:return UU;case 5125:return IU;case 36294:return OU;case 36295:return PU;case 36296:return zU;case 35678:case 36198:case 36298:case 36306:case 35682:return BU;case 35679:case 36299:case 36307:return FU;case 35680:case 36300:case 36308:case 36293:return kU;case 36289:case 36303:case 36311:case 36292:return VU}}function GU(r,e){r.uniform1fv(this.addr,e)}function WU(r,e){const t=id(e,this.size,2);r.uniform2fv(this.addr,t)}function XU(r,e){const t=id(e,this.size,3);r.uniform3fv(this.addr,t)}function jU(r,e){const t=id(e,this.size,4);r.uniform4fv(this.addr,t)}function qU(r,e){const t=id(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function YU(r,e){const t=id(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function ZU(r,e){const t=id(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function QU(r,e){r.uniform1iv(this.addr,e)}function JU(r,e){r.uniform2iv(this.addr,e)}function KU(r,e){r.uniform3iv(this.addr,e)}function $U(r,e){r.uniform4iv(this.addr,e)}function eI(r,e){r.uniform1uiv(this.addr,e)}function tI(r,e){r.uniform2uiv(this.addr,e)}function nI(r,e){r.uniform3uiv(this.addr,e)}function iI(r,e){r.uniform4uiv(this.addr,e)}function sI(r,e,t){const i=this.cache,s=e.length,c=Xx(t,s);Ki(i,c)||(r.uniform1iv(this.addr,c),$i(i,c));let f;this.type===r.SAMPLER_2D_SHADOW?f=Z_:f=FT;for(let h=0;h!==s;++h)t.setTexture2D(e[h]||f,c[h])}function aI(r,e,t){const i=this.cache,s=e.length,c=Xx(t,s);Ki(i,c)||(r.uniform1iv(this.addr,c),$i(i,c));for(let f=0;f!==s;++f)t.setTexture3D(e[f]||VT,c[f])}function rI(r,e,t){const i=this.cache,s=e.length,c=Xx(t,s);Ki(i,c)||(r.uniform1iv(this.addr,c),$i(i,c));for(let f=0;f!==s;++f)t.setTextureCube(e[f]||HT,c[f])}function oI(r,e,t){const i=this.cache,s=e.length,c=Xx(t,s);Ki(i,c)||(r.uniform1iv(this.addr,c),$i(i,c));for(let f=0;f!==s;++f)t.setTexture2DArray(e[f]||kT,c[f])}function lI(r){switch(r){case 5126:return GU;case 35664:return WU;case 35665:return XU;case 35666:return jU;case 35674:return qU;case 35675:return YU;case 35676:return ZU;case 5124:case 35670:return QU;case 35667:case 35671:return JU;case 35668:case 35672:return KU;case 35669:case 35673:return $U;case 5125:return eI;case 36294:return tI;case 36295:return nI;case 36296:return iI;case 35678:case 36198:case 36298:case 36306:case 35682:return sI;case 35679:case 36299:case 36307:return aI;case 35680:case 36300:case 36308:case 36293:return rI;case 36289:case 36303:case 36311:case 36292:return oI}}class cI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=HU(t.type)}}class uI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=lI(t.type)}}class fI{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let c=0,f=s.length;c!==f;++c){const h=s[c];h.setValue(e,t[h.id],i)}}}const __=/(\w+)(\])?(\[|\.)?/g;function xM(r,e){r.seq.push(e),r.map[e.id]=e}function hI(r,e,t){const i=r.name,s=i.length;for(__.lastIndex=0;;){const c=__.exec(i),f=__.lastIndex;let h=c[1];const m=c[2]==="]",g=c[3];if(m&&(h=h|0),g===void 0||g==="["&&f+2===s){xM(t,g===void 0?new cI(h,r,e):new uI(h,r,e));break}else{let _=t.map[h];_===void 0&&(_=new fI(h),xM(t,_)),t=_}}}class uv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let f=0;f<i;++f){const h=e.getActiveUniform(t,f),m=e.getUniformLocation(t,h.name);hI(h,m,this)}const s=[],c=[];for(const f of this.seq)f.type===e.SAMPLER_2D_SHADOW||f.type===e.SAMPLER_CUBE_SHADOW||f.type===e.SAMPLER_2D_ARRAY_SHADOW?s.push(f):c.push(f);s.length>0&&(this.seq=s.concat(c))}setValue(e,t,i,s){const c=this.map[t];c!==void 0&&c.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let c=0,f=t.length;c!==f;++c){const h=t[c],m=i[h.id];m.needsUpdate!==!1&&h.setValue(e,m.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,c=e.length;s!==c;++s){const f=e[s];f.id in t&&i.push(f)}return i}}function yM(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}const dI=37297;let pI=0;function mI(r,e){const t=r.split(`
`),i=[],s=Math.max(e-6,0),c=Math.min(e+6,t.length);for(let f=s;f<c;f++){const h=f+1;i.push(`${h===e?">":" "} ${h}: ${t[f]}`)}return i.join(`
`)}const _M=new $t;function gI(r){bn._getMatrix(_M,bn.workingColorSpace,r);const e=`mat3( ${_M.elements.map(t=>t.toFixed(4))} )`;switch(bn.getTransfer(r)){case cm:return[e,"LinearTransferOETF"];case Pn:return[e,"sRGBTransferOETF"];default:return ct("WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function bM(r,e,t){const i=r.getShaderParameter(e,r.COMPILE_STATUS),c=(r.getShaderInfoLog(e)||"").trim();if(i&&c==="")return"";const f=/ERROR: 0:(\d+)/.exec(c);if(f){const h=parseInt(f[1]);return t.toUpperCase()+`

`+c+`

`+mI(r.getShaderSource(e),h)}else return c}function vI(r,e){const t=gI(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const xI={[rb]:"Linear",[ob]:"Reinhard",[lb]:"Cineon",[ux]:"ACESFilmic",[ub]:"AgX",[fb]:"Neutral",[cb]:"Custom"};function yI(r,e){const t=xI[e];return t===void 0?(ct("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+r+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const av=new Y;function _I(){bn.getLuminanceCoefficients(av);const r=av.x.toFixed(4),e=av.y.toFixed(4),t=av.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function bI(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jp).join(`
`)}function SI(r){const e=[];for(const t in r){const i=r[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function MI(r,e){const t={},i=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const c=r.getActiveAttrib(e,s),f=c.name;let h=1;c.type===r.FLOAT_MAT2&&(h=2),c.type===r.FLOAT_MAT3&&(h=3),c.type===r.FLOAT_MAT4&&(h=4),t[f]={type:c.type,location:r.getAttribLocation(e,f),locationSize:h}}return t}function jp(r){return r!==""}function SM(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function MM(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const EI=/^[ \t]*#include +<([\w\d./]+)>/gm;function Q_(r){return r.replace(EI,AI)}const TI=new Map;function AI(r,e){let t=rn[e];if(t===void 0){const i=TI.get(e);if(i!==void 0)t=rn[i],ct('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Q_(t)}const wI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EM(r){return r.replace(wI,CI)}function CI(r,e,t,i){let s="";for(let c=parseInt(e);c<parseInt(t);c++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return s}function TM(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const RI={[kh]:"SHADOWMAP_TYPE_PCF",[Wu]:"SHADOWMAP_TYPE_VSM"};function NI(r){return RI[r.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const DI={[zo]:"ENVMAP_TYPE_CUBE",[Uc]:"ENVMAP_TYPE_CUBE",[$h]:"ENVMAP_TYPE_CUBE_UV"};function LI(r){return r.envMap===!1?"ENVMAP_TYPE_CUBE":DI[r.envMapMode]||"ENVMAP_TYPE_CUBE"}const UI={[Uc]:"ENVMAP_MODE_REFRACTION"};function II(r){return r.envMap===!1?"ENVMAP_MODE_REFLECTION":UI[r.envMapMode]||"ENVMAP_MODE_REFLECTION"}const OI={[Sm]:"ENVMAP_BLENDING_MULTIPLY",[bE]:"ENVMAP_BLENDING_MIX",[SE]:"ENVMAP_BLENDING_ADD"};function PI(r){return r.envMap===!1?"ENVMAP_BLENDING_NONE":OI[r.combine]||"ENVMAP_BLENDING_NONE"}function zI(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function BI(r,e,t,i){const s=r.getContext(),c=t.defines;let f=t.vertexShader,h=t.fragmentShader;const m=NI(t),g=LI(t),y=II(t),_=PI(t),b=zI(t),M=bI(t),A=SI(c),R=s.createProgram();let w,E,N=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(jp).join(`
`),w.length>0&&(w+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(jp).join(`
`),E.length>0&&(E+=`
`)):(w=[TM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jp).join(`
`),E=[TM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",t.envMap?"#define "+_:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==mr?"#define TONE_MAPPING":"",t.toneMapping!==mr?rn.tonemapping_pars_fragment:"",t.toneMapping!==mr?yI("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rn.colorspace_pars_fragment,vI("linearToOutputTexel",t.outputColorSpace),_I(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jp).join(`
`)),f=Q_(f),f=SM(f,t),f=MM(f,t),h=Q_(h),h=SM(h,t),h=MM(h,t),f=EM(f),h=EM(h),t.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,w=[M,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,E=["#define varying in",t.glslVersion===k_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===k_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const L=N+w+f,U=N+E+h,B=yM(s,s.VERTEX_SHADER,L),z=yM(s,s.FRAGMENT_SHADER,U);s.attachShader(R,B),s.attachShader(R,z),t.index0AttributeName!==void 0?s.bindAttribLocation(R,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(R,0,"position"),s.linkProgram(R);function H(q){if(r.debug.checkShaderErrors){const se=s.getProgramInfoLog(R)||"",ee=s.getShaderInfoLog(B)||"",de=s.getShaderInfoLog(z)||"",oe=se.trim(),Q=ee.trim(),J=de.trim();let fe=!0,we=!0;if(s.getProgramParameter(R,s.LINK_STATUS)===!1)if(fe=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,R,B,z);else{const Ce=bM(s,B,"vertex"),X=bM(s,z,"fragment");Rt("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(R,s.VALIDATE_STATUS)+`

Material Name: `+q.name+`
Material Type: `+q.type+`

Program Info Log: `+oe+`
`+Ce+`
`+X)}else oe!==""?ct("WebGLProgram: Program Info Log:",oe):(Q===""||J==="")&&(we=!1);we&&(q.diagnostics={runnable:fe,programLog:oe,vertexShader:{log:Q,prefix:w},fragmentShader:{log:J,prefix:E}})}s.deleteShader(B),s.deleteShader(z),j=new uv(s,R),I=MI(s,R)}let j;this.getUniforms=function(){return j===void 0&&H(this),j};let I;this.getAttributes=function(){return I===void 0&&H(this),I};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(R,dI)),P},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(R),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=pI++,this.cacheKey=e,this.usedTimes=1,this.program=R,this.vertexShader=B,this.fragmentShader=z,this}let FI=0;class kI{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),c=this._getShaderStage(i),f=this._getShaderCacheForMaterial(e);return f.has(s)===!1&&(f.add(s),s.usedTimes++),f.has(c)===!1&&(f.add(c),c.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new VI(e),t.set(e,i)),i}}class VI{constructor(e){this.id=FI++,this.code=e,this.usedTimes=0}}function HI(r,e,t,i,s,c,f){const h=new Yh,m=new kI,g=new Set,y=[],_=new Map,b=s.logarithmicDepthBuffer;let M=s.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(I){return g.add(I),I===0?"uv":`uv${I}`}function w(I,P,q,se,ee){const de=se.fog,oe=ee.geometry,Q=I.isMeshStandardMaterial?se.environment:null,J=(I.isMeshStandardMaterial?t:e).get(I.envMap||Q),fe=J&&J.mapping===$h?J.image.height:null,we=A[I.type];I.precision!==null&&(M=s.getMaxPrecision(I.precision),M!==I.precision&&ct("WebGLProgram.getParameters:",I.precision,"not supported, using",M,"instead."));const Ce=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,X=Ce!==void 0?Ce.length:0;let re=0;oe.morphAttributes.position!==void 0&&(re=1),oe.morphAttributes.normal!==void 0&&(re=2),oe.morphAttributes.color!==void 0&&(re=3);let _e,Pe,it,he;if(we){const vn=Wr[we];_e=vn.vertexShader,Pe=vn.fragmentShader}else _e=I.vertexShader,Pe=I.fragmentShader,m.update(I),it=m.getVertexShaderID(I),he=m.getFragmentShaderID(I);const Ae=r.getRenderTarget(),qe=r.state.buffers.depth.getReversed(),nt=ee.isInstancedMesh===!0,$e=ee.isBatchedMesh===!0,xt=!!I.map,Wt=!!I.matcap,Tt=!!J,Ne=!!I.aoMap,Be=!!I.lightMap,Le=!!I.bumpMap,Ye=!!I.normalMap,Z=!!I.displacementMap,St=!!I.emissiveMap,st=!!I.metalnessMap,At=!!I.roughnessMap,Xe=I.anisotropy>0,G=I.clearcoat>0,O=I.dispersion>0,ne=I.iridescence>0,Se=I.sheen>0,De=I.transmission>0,Ee=Xe&&!!I.anisotropyMap,ht=G&&!!I.clearcoatMap,Ke=G&&!!I.clearcoatNormalMap,yt=G&&!!I.clearcoatRoughnessMap,Dt=ne&&!!I.iridescenceMap,Ve=ne&&!!I.iridescenceThicknessMap,Ze=Se&&!!I.sheenColorMap,dt=Se&&!!I.sheenRoughnessMap,ft=!!I.specularMap,at=!!I.specularColorMap,Jt=!!I.specularIntensityMap,ie=De&&!!I.transmissionMap,rt=De&&!!I.thicknessMap,je=!!I.gradientMap,lt=!!I.alphaMap,He=I.alphaTest>0,Ie=!!I.alphaHash,et=!!I.extensions;let kt=mr;I.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(kt=r.toneMapping);const pn={shaderID:we,shaderType:I.type,shaderName:I.name,vertexShader:_e,fragmentShader:Pe,defines:I.defines,customVertexShaderID:it,customFragmentShaderID:he,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:M,batching:$e,batchingColor:$e&&ee._colorsTexture!==null,instancing:nt,instancingColor:nt&&ee.instanceColor!==null,instancingMorph:nt&&ee.morphTexture!==null,outputColorSpace:Ae===null?r.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:Ic,alphaToCoverage:!!I.alphaToCoverage,map:xt,matcap:Wt,envMap:Tt,envMapMode:Tt&&J.mapping,envMapCubeUVHeight:fe,aoMap:Ne,lightMap:Be,bumpMap:Le,normalMap:Ye,displacementMap:Z,emissiveMap:St,normalMapObjectSpace:Ye&&I.normalMapType===CE,normalMapTangentSpace:Ye&&I.normalMapType===zc,metalnessMap:st,roughnessMap:At,anisotropy:Xe,anisotropyMap:Ee,clearcoat:G,clearcoatMap:ht,clearcoatNormalMap:Ke,clearcoatRoughnessMap:yt,dispersion:O,iridescence:ne,iridescenceMap:Dt,iridescenceThicknessMap:Ve,sheen:Se,sheenColorMap:Ze,sheenRoughnessMap:dt,specularMap:ft,specularColorMap:at,specularIntensityMap:Jt,transmission:De,transmissionMap:ie,thicknessMap:rt,gradientMap:je,opaque:I.transparent===!1&&I.blending===Yu&&I.alphaToCoverage===!1,alphaMap:lt,alphaTest:He,alphaHash:Ie,combine:I.combine,mapUv:xt&&R(I.map.channel),aoMapUv:Ne&&R(I.aoMap.channel),lightMapUv:Be&&R(I.lightMap.channel),bumpMapUv:Le&&R(I.bumpMap.channel),normalMapUv:Ye&&R(I.normalMap.channel),displacementMapUv:Z&&R(I.displacementMap.channel),emissiveMapUv:St&&R(I.emissiveMap.channel),metalnessMapUv:st&&R(I.metalnessMap.channel),roughnessMapUv:At&&R(I.roughnessMap.channel),anisotropyMapUv:Ee&&R(I.anisotropyMap.channel),clearcoatMapUv:ht&&R(I.clearcoatMap.channel),clearcoatNormalMapUv:Ke&&R(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:yt&&R(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Dt&&R(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ve&&R(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ze&&R(I.sheenColorMap.channel),sheenRoughnessMapUv:dt&&R(I.sheenRoughnessMap.channel),specularMapUv:ft&&R(I.specularMap.channel),specularColorMapUv:at&&R(I.specularColorMap.channel),specularIntensityMapUv:Jt&&R(I.specularIntensityMap.channel),transmissionMapUv:ie&&R(I.transmissionMap.channel),thicknessMapUv:rt&&R(I.thicknessMap.channel),alphaMapUv:lt&&R(I.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(Ye||Xe),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!oe.attributes.uv&&(xt||lt),fog:!!de,useFog:I.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:b,reversedDepthBuffer:qe,skinning:ee.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:re,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:I.dithering,shadowMapEnabled:r.shadowMap.enabled&&q.length>0,shadowMapType:r.shadowMap.type,toneMapping:kt,decodeVideoTexture:xt&&I.map.isVideoTexture===!0&&bn.getTransfer(I.map.colorSpace)===Pn,decodeVideoTextureEmissive:St&&I.emissiveMap.isVideoTexture===!0&&bn.getTransfer(I.emissiveMap.colorSpace)===Pn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Xr,flipSided:I.side===na,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:et&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(et&&I.extensions.multiDraw===!0||$e)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return pn.vertexUv1s=g.has(1),pn.vertexUv2s=g.has(2),pn.vertexUv3s=g.has(3),g.clear(),pn}function E(I){const P=[];if(I.shaderID?P.push(I.shaderID):(P.push(I.customVertexShaderID),P.push(I.customFragmentShaderID)),I.defines!==void 0)for(const q in I.defines)P.push(q),P.push(I.defines[q]);return I.isRawShaderMaterial===!1&&(N(P,I),L(P,I),P.push(r.outputColorSpace)),P.push(I.customProgramCacheKey),P.join()}function N(I,P){I.push(P.precision),I.push(P.outputColorSpace),I.push(P.envMapMode),I.push(P.envMapCubeUVHeight),I.push(P.mapUv),I.push(P.alphaMapUv),I.push(P.lightMapUv),I.push(P.aoMapUv),I.push(P.bumpMapUv),I.push(P.normalMapUv),I.push(P.displacementMapUv),I.push(P.emissiveMapUv),I.push(P.metalnessMapUv),I.push(P.roughnessMapUv),I.push(P.anisotropyMapUv),I.push(P.clearcoatMapUv),I.push(P.clearcoatNormalMapUv),I.push(P.clearcoatRoughnessMapUv),I.push(P.iridescenceMapUv),I.push(P.iridescenceThicknessMapUv),I.push(P.sheenColorMapUv),I.push(P.sheenRoughnessMapUv),I.push(P.specularMapUv),I.push(P.specularColorMapUv),I.push(P.specularIntensityMapUv),I.push(P.transmissionMapUv),I.push(P.thicknessMapUv),I.push(P.combine),I.push(P.fogExp2),I.push(P.sizeAttenuation),I.push(P.morphTargetsCount),I.push(P.morphAttributeCount),I.push(P.numDirLights),I.push(P.numPointLights),I.push(P.numSpotLights),I.push(P.numSpotLightMaps),I.push(P.numHemiLights),I.push(P.numRectAreaLights),I.push(P.numDirLightShadows),I.push(P.numPointLightShadows),I.push(P.numSpotLightShadows),I.push(P.numSpotLightShadowsWithMaps),I.push(P.numLightProbes),I.push(P.shadowMapType),I.push(P.toneMapping),I.push(P.numClippingPlanes),I.push(P.numClipIntersection),I.push(P.depthPacking)}function L(I,P){h.disableAll(),P.instancing&&h.enable(0),P.instancingColor&&h.enable(1),P.instancingMorph&&h.enable(2),P.matcap&&h.enable(3),P.envMap&&h.enable(4),P.normalMapObjectSpace&&h.enable(5),P.normalMapTangentSpace&&h.enable(6),P.clearcoat&&h.enable(7),P.iridescence&&h.enable(8),P.alphaTest&&h.enable(9),P.vertexColors&&h.enable(10),P.vertexAlphas&&h.enable(11),P.vertexUv1s&&h.enable(12),P.vertexUv2s&&h.enable(13),P.vertexUv3s&&h.enable(14),P.vertexTangents&&h.enable(15),P.anisotropy&&h.enable(16),P.alphaHash&&h.enable(17),P.batching&&h.enable(18),P.dispersion&&h.enable(19),P.batchingColor&&h.enable(20),P.gradientMap&&h.enable(21),I.push(h.mask),h.disableAll(),P.fog&&h.enable(0),P.useFog&&h.enable(1),P.flatShading&&h.enable(2),P.logarithmicDepthBuffer&&h.enable(3),P.reversedDepthBuffer&&h.enable(4),P.skinning&&h.enable(5),P.morphTargets&&h.enable(6),P.morphNormals&&h.enable(7),P.morphColors&&h.enable(8),P.premultipliedAlpha&&h.enable(9),P.shadowMapEnabled&&h.enable(10),P.doubleSided&&h.enable(11),P.flipSided&&h.enable(12),P.useDepthPacking&&h.enable(13),P.dithering&&h.enable(14),P.transmission&&h.enable(15),P.sheen&&h.enable(16),P.opaque&&h.enable(17),P.pointsUvs&&h.enable(18),P.decodeVideoTexture&&h.enable(19),P.decodeVideoTextureEmissive&&h.enable(20),P.alphaToCoverage&&h.enable(21),I.push(h.mask)}function U(I){const P=A[I.type];let q;if(P){const se=Wr[P];q=VE.clone(se.uniforms)}else q=I.uniforms;return q}function B(I,P){let q=_.get(P);return q!==void 0?++q.usedTimes:(q=new BI(r,P,I,c),y.push(q),_.set(P,q)),q}function z(I){if(--I.usedTimes===0){const P=y.indexOf(I);y[P]=y[y.length-1],y.pop(),_.delete(I.cacheKey),I.destroy()}}function H(I){m.remove(I)}function j(){m.dispose()}return{getParameters:w,getProgramCacheKey:E,getUniforms:U,acquireProgram:B,releaseProgram:z,releaseShaderCache:H,programs:y,dispose:j}}function GI(){let r=new WeakMap;function e(f){return r.has(f)}function t(f){let h=r.get(f);return h===void 0&&(h={},r.set(f,h)),h}function i(f){r.delete(f)}function s(f,h,m){r.get(f)[h]=m}function c(){r=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:c}}function WI(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function AM(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function wM(){const r=[];let e=0;const t=[],i=[],s=[];function c(){e=0,t.length=0,i.length=0,s.length=0}function f(_,b,M,A,R,w){let E=r[e];return E===void 0?(E={id:_.id,object:_,geometry:b,material:M,groupOrder:A,renderOrder:_.renderOrder,z:R,group:w},r[e]=E):(E.id=_.id,E.object=_,E.geometry=b,E.material=M,E.groupOrder=A,E.renderOrder=_.renderOrder,E.z=R,E.group=w),e++,E}function h(_,b,M,A,R,w){const E=f(_,b,M,A,R,w);M.transmission>0?i.push(E):M.transparent===!0?s.push(E):t.push(E)}function m(_,b,M,A,R,w){const E=f(_,b,M,A,R,w);M.transmission>0?i.unshift(E):M.transparent===!0?s.unshift(E):t.unshift(E)}function g(_,b){t.length>1&&t.sort(_||WI),i.length>1&&i.sort(b||AM),s.length>1&&s.sort(b||AM)}function y(){for(let _=e,b=r.length;_<b;_++){const M=r[_];if(M.id===null)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}}return{opaque:t,transmissive:i,transparent:s,init:c,push:h,unshift:m,finish:y,sort:g}}function XI(){let r=new WeakMap;function e(i,s){const c=r.get(i);let f;return c===void 0?(f=new wM,r.set(i,[f])):s>=c.length?(f=new wM,c.push(f)):f=c[s],f}function t(){r=new WeakMap}return{get:e,dispose:t}}function jI(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new gt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return r[e.id]=t,t}}}function qI(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let YI=0;function ZI(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function QI(r){const e=new jI,t=qI(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let g=0;g<9;g++)i.probe.push(new Y);const s=new Y,c=new Gt,f=new Gt;function h(g){let y=0,_=0,b=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let M=0,A=0,R=0,w=0,E=0,N=0,L=0,U=0,B=0,z=0,H=0;g.sort(ZI);for(let I=0,P=g.length;I<P;I++){const q=g[I],se=q.color,ee=q.intensity,de=q.distance;let oe=null;if(q.shadow&&q.shadow.map&&(q.shadow.map.texture.format===Ku?oe=q.shadow.map.texture:oe=q.shadow.map.depthTexture||q.shadow.map.texture),q.isAmbientLight)y+=se.r*ee,_+=se.g*ee,b+=se.b*ee;else if(q.isLightProbe){for(let Q=0;Q<9;Q++)i.probe[Q].addScaledVector(q.sh.coefficients[Q],ee);H++}else if(q.isDirectionalLight){const Q=e.get(q);if(Q.color.copy(q.color).multiplyScalar(q.intensity),q.castShadow){const J=q.shadow,fe=t.get(q);fe.shadowIntensity=J.intensity,fe.shadowBias=J.bias,fe.shadowNormalBias=J.normalBias,fe.shadowRadius=J.radius,fe.shadowMapSize=J.mapSize,i.directionalShadow[M]=fe,i.directionalShadowMap[M]=oe,i.directionalShadowMatrix[M]=q.shadow.matrix,N++}i.directional[M]=Q,M++}else if(q.isSpotLight){const Q=e.get(q);Q.position.setFromMatrixPosition(q.matrixWorld),Q.color.copy(se).multiplyScalar(ee),Q.distance=de,Q.coneCos=Math.cos(q.angle),Q.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),Q.decay=q.decay,i.spot[R]=Q;const J=q.shadow;if(q.map&&(i.spotLightMap[B]=q.map,B++,J.updateMatrices(q),q.castShadow&&z++),i.spotLightMatrix[R]=J.matrix,q.castShadow){const fe=t.get(q);fe.shadowIntensity=J.intensity,fe.shadowBias=J.bias,fe.shadowNormalBias=J.normalBias,fe.shadowRadius=J.radius,fe.shadowMapSize=J.mapSize,i.spotShadow[R]=fe,i.spotShadowMap[R]=oe,U++}R++}else if(q.isRectAreaLight){const Q=e.get(q);Q.color.copy(se).multiplyScalar(ee),Q.halfWidth.set(q.width*.5,0,0),Q.halfHeight.set(0,q.height*.5,0),i.rectArea[w]=Q,w++}else if(q.isPointLight){const Q=e.get(q);if(Q.color.copy(q.color).multiplyScalar(q.intensity),Q.distance=q.distance,Q.decay=q.decay,q.castShadow){const J=q.shadow,fe=t.get(q);fe.shadowIntensity=J.intensity,fe.shadowBias=J.bias,fe.shadowNormalBias=J.normalBias,fe.shadowRadius=J.radius,fe.shadowMapSize=J.mapSize,fe.shadowCameraNear=J.camera.near,fe.shadowCameraFar=J.camera.far,i.pointShadow[A]=fe,i.pointShadowMap[A]=oe,i.pointShadowMatrix[A]=q.shadow.matrix,L++}i.point[A]=Q,A++}else if(q.isHemisphereLight){const Q=e.get(q);Q.skyColor.copy(q.color).multiplyScalar(ee),Q.groundColor.copy(q.groundColor).multiplyScalar(ee),i.hemi[E]=Q,E++}}w>0&&(r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ut.LTC_FLOAT_1,i.rectAreaLTC2=ut.LTC_FLOAT_2):(i.rectAreaLTC1=ut.LTC_HALF_1,i.rectAreaLTC2=ut.LTC_HALF_2)),i.ambient[0]=y,i.ambient[1]=_,i.ambient[2]=b;const j=i.hash;(j.directionalLength!==M||j.pointLength!==A||j.spotLength!==R||j.rectAreaLength!==w||j.hemiLength!==E||j.numDirectionalShadows!==N||j.numPointShadows!==L||j.numSpotShadows!==U||j.numSpotMaps!==B||j.numLightProbes!==H)&&(i.directional.length=M,i.spot.length=R,i.rectArea.length=w,i.point.length=A,i.hemi.length=E,i.directionalShadow.length=N,i.directionalShadowMap.length=N,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=U,i.spotShadowMap.length=U,i.directionalShadowMatrix.length=N,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=U+B-z,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=z,i.numLightProbes=H,j.directionalLength=M,j.pointLength=A,j.spotLength=R,j.rectAreaLength=w,j.hemiLength=E,j.numDirectionalShadows=N,j.numPointShadows=L,j.numSpotShadows=U,j.numSpotMaps=B,j.numLightProbes=H,i.version=YI++)}function m(g,y){let _=0,b=0,M=0,A=0,R=0;const w=y.matrixWorldInverse;for(let E=0,N=g.length;E<N;E++){const L=g[E];if(L.isDirectionalLight){const U=i.directional[_];U.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),U.direction.sub(s),U.direction.transformDirection(w),_++}else if(L.isSpotLight){const U=i.spot[M];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(w),U.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),U.direction.sub(s),U.direction.transformDirection(w),M++}else if(L.isRectAreaLight){const U=i.rectArea[A];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(w),f.identity(),c.copy(L.matrixWorld),c.premultiply(w),f.extractRotation(c),U.halfWidth.set(L.width*.5,0,0),U.halfHeight.set(0,L.height*.5,0),U.halfWidth.applyMatrix4(f),U.halfHeight.applyMatrix4(f),A++}else if(L.isPointLight){const U=i.point[b];U.position.setFromMatrixPosition(L.matrixWorld),U.position.applyMatrix4(w),b++}else if(L.isHemisphereLight){const U=i.hemi[R];U.direction.setFromMatrixPosition(L.matrixWorld),U.direction.transformDirection(w),R++}}}return{setup:h,setupView:m,state:i}}function CM(r){const e=new QI(r),t=[],i=[];function s(y){g.camera=y,t.length=0,i.length=0}function c(y){t.push(y)}function f(y){i.push(y)}function h(){e.setup(t)}function m(y){e.setupView(t,y)}const g={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:g,setupLights:h,setupLightsView:m,pushLight:c,pushShadow:f}}function JI(r){let e=new WeakMap;function t(s,c=0){const f=e.get(s);let h;return f===void 0?(h=new CM(r),e.set(s,[h])):c>=f.length?(h=new CM(r),f.push(h)):h=f[c],h}function i(){e=new WeakMap}return{get:t,dispose:i}}const KI=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$I=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,eO=[new Y(1,0,0),new Y(-1,0,0),new Y(0,1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1)],tO=[new Y(0,-1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,-1,0),new Y(0,-1,0)],RM=new Gt,Gp=new Y,b_=new Y;function nO(r,e,t){let i=new td;const s=new Fe,c=new Fe,f=new jn,h=new Bb,m=new Fb,g={},y=t.maxTextureSize,_={[Rl]:na,[na]:Rl,[Xr]:Xr},b=new vr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fe},radius:{value:4}},vertexShader:KI,fragmentShader:$I}),M=b.clone();M.defines.HORIZONTAL_PASS=1;const A=new Qt;A.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Xi(A,b),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kh;let E=this.type;this.render=function(z,H,j){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||z.length===0)return;z.type===qp&&(ct("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),z.type=kh);const I=r.getRenderTarget(),P=r.getActiveCubeFace(),q=r.getActiveMipmapLevel(),se=r.state;se.setBlending(Po),se.buffers.depth.getReversed()===!0?se.buffers.color.setClear(0,0,0,0):se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);const ee=E!==this.type;ee&&H.traverse(function(de){de.material&&(Array.isArray(de.material)?de.material.forEach(oe=>oe.needsUpdate=!0):de.material.needsUpdate=!0)});for(let de=0,oe=z.length;de<oe;de++){const Q=z[de],J=Q.shadow;if(J===void 0){ct("WebGLShadowMap:",Q,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;s.copy(J.mapSize);const fe=J.getFrameExtents();if(s.multiply(fe),c.copy(J.mapSize),(s.x>y||s.y>y)&&(s.x>y&&(c.x=Math.floor(y/fe.x),s.x=c.x*fe.x,J.mapSize.x=c.x),s.y>y&&(c.y=Math.floor(y/fe.y),s.y=c.y*fe.y,J.mapSize.y=c.y)),J.map===null||ee===!0){if(J.map!==null&&(J.map.depthTexture!==null&&(J.map.depthTexture.dispose(),J.map.depthTexture=null),J.map.dispose()),this.type===Wu){if(Q.isPointLight){ct("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}J.map=new Ra(s.x,s.y,{format:Ku,type:Yr,minFilter:qn,magFilter:qn,generateMipmaps:!1}),J.map.texture.name=Q.name+".shadowMap",J.map.depthTexture=new ef(s.x,s.y,Is),J.map.depthTexture.name=Q.name+".shadowMapDepth",J.map.depthTexture.format=Bo,J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Ii,J.map.depthTexture.magFilter=Ii}else{Q.isPointLight?(J.map=new Eb(s.x),J.map.depthTexture=new KE(s.x,gr)):(J.map=new Ra(s.x,s.y),J.map.depthTexture=new ef(s.x,s.y,gr)),J.map.depthTexture.name=Q.name+".shadowMap",J.map.depthTexture.format=Bo;const Ce=r.state.buffers.depth.getReversed();this.type===kh?(J.map.depthTexture.compareFunction=Ce?_x:yx,J.map.depthTexture.minFilter=qn,J.map.depthTexture.magFilter=qn):(J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Ii,J.map.depthTexture.magFilter=Ii)}J.camera.updateProjectionMatrix()}const we=J.map.isWebGLCubeRenderTarget?6:1;for(let Ce=0;Ce<we;Ce++){if(J.map.isWebGLCubeRenderTarget)r.setRenderTarget(J.map,Ce),r.clear();else{Ce===0&&(r.setRenderTarget(J.map),r.clear());const X=J.getViewport(Ce);f.set(c.x*X.x,c.y*X.y,c.x*X.z,c.y*X.w),se.viewport(f)}if(Q.isPointLight){const X=J.camera,re=J.matrix,_e=Q.distance||X.far;_e!==X.far&&(X.far=_e,X.updateProjectionMatrix()),Gp.setFromMatrixPosition(Q.matrixWorld),X.position.copy(Gp),b_.copy(X.position),b_.add(eO[Ce]),X.up.copy(tO[Ce]),X.lookAt(b_),X.updateMatrixWorld(),re.makeTranslation(-Gp.x,-Gp.y,-Gp.z),RM.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),J._frustum.setFromProjectionMatrix(RM,X.coordinateSystem,X.reversedDepth)}else J.updateMatrices(Q);i=J.getFrustum(),U(H,j,J.camera,Q,this.type)}J.isPointLightShadow!==!0&&this.type===Wu&&N(J,j),J.needsUpdate=!1}E=this.type,w.needsUpdate=!1,r.setRenderTarget(I,P,q)};function N(z,H){const j=e.update(R);b.defines.VSM_SAMPLES!==z.blurSamples&&(b.defines.VSM_SAMPLES=z.blurSamples,M.defines.VSM_SAMPLES=z.blurSamples,b.needsUpdate=!0,M.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new Ra(s.x,s.y,{format:Ku,type:Yr})),b.uniforms.shadow_pass.value=z.map.depthTexture,b.uniforms.resolution.value=z.mapSize,b.uniforms.radius.value=z.radius,r.setRenderTarget(z.mapPass),r.clear(),r.renderBufferDirect(H,null,j,b,R,null),M.uniforms.shadow_pass.value=z.mapPass.texture,M.uniforms.resolution.value=z.mapSize,M.uniforms.radius.value=z.radius,r.setRenderTarget(z.map),r.clear(),r.renderBufferDirect(H,null,j,M,R,null)}function L(z,H,j,I){let P=null;const q=j.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(q!==void 0)P=q;else if(P=j.isPointLight===!0?m:h,r.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0||H.alphaToCoverage===!0){const se=P.uuid,ee=H.uuid;let de=g[se];de===void 0&&(de={},g[se]=de);let oe=de[ee];oe===void 0&&(oe=P.clone(),de[ee]=oe,H.addEventListener("dispose",B)),P=oe}if(P.visible=H.visible,P.wireframe=H.wireframe,I===Wu?P.side=H.shadowSide!==null?H.shadowSide:H.side:P.side=H.shadowSide!==null?H.shadowSide:_[H.side],P.alphaMap=H.alphaMap,P.alphaTest=H.alphaToCoverage===!0?.5:H.alphaTest,P.map=H.map,P.clipShadows=H.clipShadows,P.clippingPlanes=H.clippingPlanes,P.clipIntersection=H.clipIntersection,P.displacementMap=H.displacementMap,P.displacementScale=H.displacementScale,P.displacementBias=H.displacementBias,P.wireframeLinewidth=H.wireframeLinewidth,P.linewidth=H.linewidth,j.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const se=r.properties.get(P);se.light=j}return P}function U(z,H,j,I,P){if(z.visible===!1)return;if(z.layers.test(H.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&P===Wu)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,z.matrixWorld);const ee=e.update(z),de=z.material;if(Array.isArray(de)){const oe=ee.groups;for(let Q=0,J=oe.length;Q<J;Q++){const fe=oe[Q],we=de[fe.materialIndex];if(we&&we.visible){const Ce=L(z,we,I,P);z.onBeforeShadow(r,z,H,j,ee,Ce,fe),r.renderBufferDirect(j,null,ee,Ce,z,fe),z.onAfterShadow(r,z,H,j,ee,Ce,fe)}}}else if(de.visible){const oe=L(z,de,I,P);z.onBeforeShadow(r,z,H,j,ee,oe,null),r.renderBufferDirect(j,null,ee,oe,z,null),z.onAfterShadow(r,z,H,j,ee,oe,null)}}const se=z.children;for(let ee=0,de=se.length;ee<de;ee++)U(se[ee],H,j,I,P)}function B(z){z.target.removeEventListener("dispose",B);for(const j in g){const I=g[j],P=z.target.uuid;P in I&&(I[P].dispose(),delete I[P])}}}const iO={[pv]:mv,[gv]:yv,[vv]:_v,[Ju]:xv,[mv]:pv,[yv]:gv,[_v]:vv,[xv]:Ju};function sO(r,e){function t(){let ie=!1;const rt=new jn;let je=null;const lt=new jn(0,0,0,0);return{setMask:function(He){je!==He&&!ie&&(r.colorMask(He,He,He,He),je=He)},setLocked:function(He){ie=He},setClear:function(He,Ie,et,kt,pn){pn===!0&&(He*=kt,Ie*=kt,et*=kt),rt.set(He,Ie,et,kt),lt.equals(rt)===!1&&(r.clearColor(He,Ie,et,kt),lt.copy(rt))},reset:function(){ie=!1,je=null,lt.set(-1,0,0,0)}}}function i(){let ie=!1,rt=!1,je=null,lt=null,He=null;return{setReversed:function(Ie){if(rt!==Ie){const et=e.get("EXT_clip_control");Ie?et.clipControlEXT(et.LOWER_LEFT_EXT,et.ZERO_TO_ONE_EXT):et.clipControlEXT(et.LOWER_LEFT_EXT,et.NEGATIVE_ONE_TO_ONE_EXT),rt=Ie;const kt=He;He=null,this.setClear(kt)}},getReversed:function(){return rt},setTest:function(Ie){Ie?Ae(r.DEPTH_TEST):qe(r.DEPTH_TEST)},setMask:function(Ie){je!==Ie&&!ie&&(r.depthMask(Ie),je=Ie)},setFunc:function(Ie){if(rt&&(Ie=iO[Ie]),lt!==Ie){switch(Ie){case pv:r.depthFunc(r.NEVER);break;case mv:r.depthFunc(r.ALWAYS);break;case gv:r.depthFunc(r.LESS);break;case Ju:r.depthFunc(r.LEQUAL);break;case vv:r.depthFunc(r.EQUAL);break;case xv:r.depthFunc(r.GEQUAL);break;case yv:r.depthFunc(r.GREATER);break;case _v:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}lt=Ie}},setLocked:function(Ie){ie=Ie},setClear:function(Ie){He!==Ie&&(rt&&(Ie=1-Ie),r.clearDepth(Ie),He=Ie)},reset:function(){ie=!1,je=null,lt=null,He=null,rt=!1}}}function s(){let ie=!1,rt=null,je=null,lt=null,He=null,Ie=null,et=null,kt=null,pn=null;return{setTest:function(vn){ie||(vn?Ae(r.STENCIL_TEST):qe(r.STENCIL_TEST))},setMask:function(vn){rt!==vn&&!ie&&(r.stencilMask(vn),rt=vn)},setFunc:function(vn,ji,xs){(je!==vn||lt!==ji||He!==xs)&&(r.stencilFunc(vn,ji,xs),je=vn,lt=ji,He=xs)},setOp:function(vn,ji,xs){(Ie!==vn||et!==ji||kt!==xs)&&(r.stencilOp(vn,ji,xs),Ie=vn,et=ji,kt=xs)},setLocked:function(vn){ie=vn},setClear:function(vn){pn!==vn&&(r.clearStencil(vn),pn=vn)},reset:function(){ie=!1,rt=null,je=null,lt=null,He=null,Ie=null,et=null,kt=null,pn=null}}}const c=new t,f=new i,h=new s,m=new WeakMap,g=new WeakMap;let y={},_={},b=new WeakMap,M=[],A=null,R=!1,w=null,E=null,N=null,L=null,U=null,B=null,z=null,H=new gt(0,0,0),j=0,I=!1,P=null,q=null,se=null,ee=null,de=null;const oe=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,J=0;const fe=r.getParameter(r.VERSION);fe.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(fe)[1]),Q=J>=1):fe.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),Q=J>=2);let we=null,Ce={};const X=r.getParameter(r.SCISSOR_BOX),re=r.getParameter(r.VIEWPORT),_e=new jn().fromArray(X),Pe=new jn().fromArray(re);function it(ie,rt,je,lt){const He=new Uint8Array(4),Ie=r.createTexture();r.bindTexture(ie,Ie),r.texParameteri(ie,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ie,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let et=0;et<je;et++)ie===r.TEXTURE_3D||ie===r.TEXTURE_2D_ARRAY?r.texImage3D(rt,0,r.RGBA,1,1,lt,0,r.RGBA,r.UNSIGNED_BYTE,He):r.texImage2D(rt+et,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,He);return Ie}const he={};he[r.TEXTURE_2D]=it(r.TEXTURE_2D,r.TEXTURE_2D,1),he[r.TEXTURE_CUBE_MAP]=it(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[r.TEXTURE_2D_ARRAY]=it(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),he[r.TEXTURE_3D]=it(r.TEXTURE_3D,r.TEXTURE_3D,1,1),c.setClear(0,0,0,1),f.setClear(1),h.setClear(0),Ae(r.DEPTH_TEST),f.setFunc(Ju),Le(!1),Ye(I_),Ae(r.CULL_FACE),Ne(Po);function Ae(ie){y[ie]!==!0&&(r.enable(ie),y[ie]=!0)}function qe(ie){y[ie]!==!1&&(r.disable(ie),y[ie]=!1)}function nt(ie,rt){return _[ie]!==rt?(r.bindFramebuffer(ie,rt),_[ie]=rt,ie===r.DRAW_FRAMEBUFFER&&(_[r.FRAMEBUFFER]=rt),ie===r.FRAMEBUFFER&&(_[r.DRAW_FRAMEBUFFER]=rt),!0):!1}function $e(ie,rt){let je=M,lt=!1;if(ie){je=b.get(rt),je===void 0&&(je=[],b.set(rt,je));const He=ie.textures;if(je.length!==He.length||je[0]!==r.COLOR_ATTACHMENT0){for(let Ie=0,et=He.length;Ie<et;Ie++)je[Ie]=r.COLOR_ATTACHMENT0+Ie;je.length=He.length,lt=!0}}else je[0]!==r.BACK&&(je[0]=r.BACK,lt=!0);lt&&r.drawBuffers(je)}function xt(ie){return A!==ie?(r.useProgram(ie),A=ie,!0):!1}const Wt={[Cc]:r.FUNC_ADD,[sE]:r.FUNC_SUBTRACT,[aE]:r.FUNC_REVERSE_SUBTRACT};Wt[rE]=r.MIN,Wt[oE]=r.MAX;const Tt={[lE]:r.ZERO,[cE]:r.ONE,[uE]:r.SRC_COLOR,[hv]:r.SRC_ALPHA,[gE]:r.SRC_ALPHA_SATURATE,[pE]:r.DST_COLOR,[hE]:r.DST_ALPHA,[fE]:r.ONE_MINUS_SRC_COLOR,[dv]:r.ONE_MINUS_SRC_ALPHA,[mE]:r.ONE_MINUS_DST_COLOR,[dE]:r.ONE_MINUS_DST_ALPHA,[vE]:r.CONSTANT_COLOR,[xE]:r.ONE_MINUS_CONSTANT_COLOR,[yE]:r.CONSTANT_ALPHA,[_E]:r.ONE_MINUS_CONSTANT_ALPHA};function Ne(ie,rt,je,lt,He,Ie,et,kt,pn,vn){if(ie===Po){R===!0&&(qe(r.BLEND),R=!1);return}if(R===!1&&(Ae(r.BLEND),R=!0),ie!==iE){if(ie!==w||vn!==I){if((E!==Cc||U!==Cc)&&(r.blendEquation(r.FUNC_ADD),E=Cc,U=Cc),vn)switch(ie){case Yu:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case O_:r.blendFunc(r.ONE,r.ONE);break;case P_:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case z_:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:Rt("WebGLState: Invalid blending: ",ie);break}else switch(ie){case Yu:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case O_:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case P_:Rt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case z_:Rt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Rt("WebGLState: Invalid blending: ",ie);break}N=null,L=null,B=null,z=null,H.set(0,0,0),j=0,w=ie,I=vn}return}He=He||rt,Ie=Ie||je,et=et||lt,(rt!==E||He!==U)&&(r.blendEquationSeparate(Wt[rt],Wt[He]),E=rt,U=He),(je!==N||lt!==L||Ie!==B||et!==z)&&(r.blendFuncSeparate(Tt[je],Tt[lt],Tt[Ie],Tt[et]),N=je,L=lt,B=Ie,z=et),(kt.equals(H)===!1||pn!==j)&&(r.blendColor(kt.r,kt.g,kt.b,pn),H.copy(kt),j=pn),w=ie,I=!1}function Be(ie,rt){ie.side===Xr?qe(r.CULL_FACE):Ae(r.CULL_FACE);let je=ie.side===na;rt&&(je=!je),Le(je),ie.blending===Yu&&ie.transparent===!1?Ne(Po):Ne(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.blendColor,ie.blendAlpha,ie.premultipliedAlpha),f.setFunc(ie.depthFunc),f.setTest(ie.depthTest),f.setMask(ie.depthWrite),c.setMask(ie.colorWrite);const lt=ie.stencilWrite;h.setTest(lt),lt&&(h.setMask(ie.stencilWriteMask),h.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),h.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),St(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?Ae(r.SAMPLE_ALPHA_TO_COVERAGE):qe(r.SAMPLE_ALPHA_TO_COVERAGE)}function Le(ie){P!==ie&&(ie?r.frontFace(r.CW):r.frontFace(r.CCW),P=ie)}function Ye(ie){ie!==eE?(Ae(r.CULL_FACE),ie!==q&&(ie===I_?r.cullFace(r.BACK):ie===tE?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):qe(r.CULL_FACE),q=ie}function Z(ie){ie!==se&&(Q&&r.lineWidth(ie),se=ie)}function St(ie,rt,je){ie?(Ae(r.POLYGON_OFFSET_FILL),(ee!==rt||de!==je)&&(r.polygonOffset(rt,je),ee=rt,de=je)):qe(r.POLYGON_OFFSET_FILL)}function st(ie){ie?Ae(r.SCISSOR_TEST):qe(r.SCISSOR_TEST)}function At(ie){ie===void 0&&(ie=r.TEXTURE0+oe-1),we!==ie&&(r.activeTexture(ie),we=ie)}function Xe(ie,rt,je){je===void 0&&(we===null?je=r.TEXTURE0+oe-1:je=we);let lt=Ce[je];lt===void 0&&(lt={type:void 0,texture:void 0},Ce[je]=lt),(lt.type!==ie||lt.texture!==rt)&&(we!==je&&(r.activeTexture(je),we=je),r.bindTexture(ie,rt||he[ie]),lt.type=ie,lt.texture=rt)}function G(){const ie=Ce[we];ie!==void 0&&ie.type!==void 0&&(r.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function O(){try{r.compressedTexImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function ne(){try{r.compressedTexImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Se(){try{r.texSubImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function De(){try{r.texSubImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ee(){try{r.compressedTexSubImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function ht(){try{r.compressedTexSubImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ke(){try{r.texStorage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function yt(){try{r.texStorage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Dt(){try{r.texImage2D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ve(){try{r.texImage3D(...arguments)}catch(ie){Rt("WebGLState:",ie)}}function Ze(ie){_e.equals(ie)===!1&&(r.scissor(ie.x,ie.y,ie.z,ie.w),_e.copy(ie))}function dt(ie){Pe.equals(ie)===!1&&(r.viewport(ie.x,ie.y,ie.z,ie.w),Pe.copy(ie))}function ft(ie,rt){let je=g.get(rt);je===void 0&&(je=new WeakMap,g.set(rt,je));let lt=je.get(ie);lt===void 0&&(lt=r.getUniformBlockIndex(rt,ie.name),je.set(ie,lt))}function at(ie,rt){const lt=g.get(rt).get(ie);m.get(rt)!==lt&&(r.uniformBlockBinding(rt,lt,ie.__bindingPointIndex),m.set(rt,lt))}function Jt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),f.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),y={},we=null,Ce={},_={},b=new WeakMap,M=[],A=null,R=!1,w=null,E=null,N=null,L=null,U=null,B=null,z=null,H=new gt(0,0,0),j=0,I=!1,P=null,q=null,se=null,ee=null,de=null,_e.set(0,0,r.canvas.width,r.canvas.height),Pe.set(0,0,r.canvas.width,r.canvas.height),c.reset(),f.reset(),h.reset()}return{buffers:{color:c,depth:f,stencil:h},enable:Ae,disable:qe,bindFramebuffer:nt,drawBuffers:$e,useProgram:xt,setBlending:Ne,setMaterial:Be,setFlipSided:Le,setCullFace:Ye,setLineWidth:Z,setPolygonOffset:St,setScissorTest:st,activeTexture:At,bindTexture:Xe,unbindTexture:G,compressedTexImage2D:O,compressedTexImage3D:ne,texImage2D:Dt,texImage3D:Ve,updateUBOMapping:ft,uniformBlockBinding:at,texStorage2D:Ke,texStorage3D:yt,texSubImage2D:Se,texSubImage3D:De,compressedTexSubImage2D:Ee,compressedTexSubImage3D:ht,scissor:Ze,viewport:dt,reset:Jt}}function aO(r,e,t,i,s,c,f){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new Fe,y=new WeakMap;let _;const b=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(G,O){return M?new OffscreenCanvas(G,O):fm("canvas")}function R(G,O,ne){let Se=1;const De=Xe(G);if((De.width>ne||De.height>ne)&&(Se=ne/Math.max(De.width,De.height)),Se<1)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap||typeof VideoFrame<"u"&&G instanceof VideoFrame){const Ee=Math.floor(Se*De.width),ht=Math.floor(Se*De.height);_===void 0&&(_=A(Ee,ht));const Ke=O?A(Ee,ht):_;return Ke.width=Ee,Ke.height=ht,Ke.getContext("2d").drawImage(G,0,0,Ee,ht),ct("WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+Ee+"x"+ht+")."),Ke}else return"data"in G&&ct("WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),G;return G}function w(G){return G.generateMipmaps}function E(G){r.generateMipmap(G)}function N(G){return G.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:G.isWebGL3DRenderTarget?r.TEXTURE_3D:G.isWebGLArrayRenderTarget||G.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function L(G,O,ne,Se,De=!1){if(G!==null){if(r[G]!==void 0)return r[G];ct("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Ee=O;if(O===r.RED&&(ne===r.FLOAT&&(Ee=r.R32F),ne===r.HALF_FLOAT&&(Ee=r.R16F),ne===r.UNSIGNED_BYTE&&(Ee=r.R8)),O===r.RED_INTEGER&&(ne===r.UNSIGNED_BYTE&&(Ee=r.R8UI),ne===r.UNSIGNED_SHORT&&(Ee=r.R16UI),ne===r.UNSIGNED_INT&&(Ee=r.R32UI),ne===r.BYTE&&(Ee=r.R8I),ne===r.SHORT&&(Ee=r.R16I),ne===r.INT&&(Ee=r.R32I)),O===r.RG&&(ne===r.FLOAT&&(Ee=r.RG32F),ne===r.HALF_FLOAT&&(Ee=r.RG16F),ne===r.UNSIGNED_BYTE&&(Ee=r.RG8)),O===r.RG_INTEGER&&(ne===r.UNSIGNED_BYTE&&(Ee=r.RG8UI),ne===r.UNSIGNED_SHORT&&(Ee=r.RG16UI),ne===r.UNSIGNED_INT&&(Ee=r.RG32UI),ne===r.BYTE&&(Ee=r.RG8I),ne===r.SHORT&&(Ee=r.RG16I),ne===r.INT&&(Ee=r.RG32I)),O===r.RGB_INTEGER&&(ne===r.UNSIGNED_BYTE&&(Ee=r.RGB8UI),ne===r.UNSIGNED_SHORT&&(Ee=r.RGB16UI),ne===r.UNSIGNED_INT&&(Ee=r.RGB32UI),ne===r.BYTE&&(Ee=r.RGB8I),ne===r.SHORT&&(Ee=r.RGB16I),ne===r.INT&&(Ee=r.RGB32I)),O===r.RGBA_INTEGER&&(ne===r.UNSIGNED_BYTE&&(Ee=r.RGBA8UI),ne===r.UNSIGNED_SHORT&&(Ee=r.RGBA16UI),ne===r.UNSIGNED_INT&&(Ee=r.RGBA32UI),ne===r.BYTE&&(Ee=r.RGBA8I),ne===r.SHORT&&(Ee=r.RGBA16I),ne===r.INT&&(Ee=r.RGBA32I)),O===r.RGB&&(ne===r.UNSIGNED_INT_5_9_9_9_REV&&(Ee=r.RGB9_E5),ne===r.UNSIGNED_INT_10F_11F_11F_REV&&(Ee=r.R11F_G11F_B10F)),O===r.RGBA){const ht=De?cm:bn.getTransfer(Se);ne===r.FLOAT&&(Ee=r.RGBA32F),ne===r.HALF_FLOAT&&(Ee=r.RGBA16F),ne===r.UNSIGNED_BYTE&&(Ee=ht===Pn?r.SRGB8_ALPHA8:r.RGBA8),ne===r.UNSIGNED_SHORT_4_4_4_4&&(Ee=r.RGBA4),ne===r.UNSIGNED_SHORT_5_5_5_1&&(Ee=r.RGB5_A1)}return(Ee===r.R16F||Ee===r.R32F||Ee===r.RG16F||Ee===r.RG32F||Ee===r.RGBA16F||Ee===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function U(G,O){let ne;return G?O===null||O===gr||O===Wh?ne=r.DEPTH24_STENCIL8:O===Is?ne=r.DEPTH32F_STENCIL8:O===Gh&&(ne=r.DEPTH24_STENCIL8,ct("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===gr||O===Wh?ne=r.DEPTH_COMPONENT24:O===Is?ne=r.DEPTH_COMPONENT32F:O===Gh&&(ne=r.DEPTH_COMPONENT16),ne}function B(G,O){return w(G)===!0||G.isFramebufferTexture&&G.minFilter!==Ii&&G.minFilter!==qn?Math.log2(Math.max(O.width,O.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?O.mipmaps.length:1}function z(G){const O=G.target;O.removeEventListener("dispose",z),j(O),O.isVideoTexture&&y.delete(O)}function H(G){const O=G.target;O.removeEventListener("dispose",H),P(O)}function j(G){const O=i.get(G);if(O.__webglInit===void 0)return;const ne=G.source,Se=b.get(ne);if(Se){const De=Se[O.__cacheKey];De.usedTimes--,De.usedTimes===0&&I(G),Object.keys(Se).length===0&&b.delete(ne)}i.remove(G)}function I(G){const O=i.get(G);r.deleteTexture(O.__webglTexture);const ne=G.source,Se=b.get(ne);delete Se[O.__cacheKey],f.memory.textures--}function P(G){const O=i.get(G);if(G.depthTexture&&(G.depthTexture.dispose(),i.remove(G.depthTexture)),G.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(O.__webglFramebuffer[Se]))for(let De=0;De<O.__webglFramebuffer[Se].length;De++)r.deleteFramebuffer(O.__webglFramebuffer[Se][De]);else r.deleteFramebuffer(O.__webglFramebuffer[Se]);O.__webglDepthbuffer&&r.deleteRenderbuffer(O.__webglDepthbuffer[Se])}else{if(Array.isArray(O.__webglFramebuffer))for(let Se=0;Se<O.__webglFramebuffer.length;Se++)r.deleteFramebuffer(O.__webglFramebuffer[Se]);else r.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&r.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&r.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Se=0;Se<O.__webglColorRenderbuffer.length;Se++)O.__webglColorRenderbuffer[Se]&&r.deleteRenderbuffer(O.__webglColorRenderbuffer[Se]);O.__webglDepthRenderbuffer&&r.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const ne=G.textures;for(let Se=0,De=ne.length;Se<De;Se++){const Ee=i.get(ne[Se]);Ee.__webglTexture&&(r.deleteTexture(Ee.__webglTexture),f.memory.textures--),i.remove(ne[Se])}i.remove(G)}let q=0;function se(){q=0}function ee(){const G=q;return G>=s.maxTextures&&ct("WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+s.maxTextures),q+=1,G}function de(G){const O=[];return O.push(G.wrapS),O.push(G.wrapT),O.push(G.wrapR||0),O.push(G.magFilter),O.push(G.minFilter),O.push(G.anisotropy),O.push(G.internalFormat),O.push(G.format),O.push(G.type),O.push(G.generateMipmaps),O.push(G.premultiplyAlpha),O.push(G.flipY),O.push(G.unpackAlignment),O.push(G.colorSpace),O.join()}function oe(G,O){const ne=i.get(G);if(G.isVideoTexture&&st(G),G.isRenderTargetTexture===!1&&G.isExternalTexture!==!0&&G.version>0&&ne.__version!==G.version){const Se=G.image;if(Se===null)ct("WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)ct("WebGLRenderer: Texture marked for update but image is incomplete");else{he(ne,G,O);return}}else G.isExternalTexture&&(ne.__webglTexture=G.sourceTexture?G.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,ne.__webglTexture,r.TEXTURE0+O)}function Q(G,O){const ne=i.get(G);if(G.isRenderTargetTexture===!1&&G.version>0&&ne.__version!==G.version){he(ne,G,O);return}else G.isExternalTexture&&(ne.__webglTexture=G.sourceTexture?G.sourceTexture:null);t.bindTexture(r.TEXTURE_2D_ARRAY,ne.__webglTexture,r.TEXTURE0+O)}function J(G,O){const ne=i.get(G);if(G.isRenderTargetTexture===!1&&G.version>0&&ne.__version!==G.version){he(ne,G,O);return}t.bindTexture(r.TEXTURE_3D,ne.__webglTexture,r.TEXTURE0+O)}function fe(G,O){const ne=i.get(G);if(G.isCubeDepthTexture!==!0&&G.version>0&&ne.__version!==G.version){Ae(ne,G,O);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ne.__webglTexture,r.TEXTURE0+O)}const we={[am]:r.REPEAT,[wa]:r.CLAMP_TO_EDGE,[rm]:r.MIRRORED_REPEAT},Ce={[Ii]:r.NEAREST,[hb]:r.NEAREST_MIPMAP_NEAREST,[zh]:r.NEAREST_MIPMAP_LINEAR,[qn]:r.LINEAR,[Yp]:r.LINEAR_MIPMAP_NEAREST,[Io]:r.LINEAR_MIPMAP_LINEAR},X={[RE]:r.NEVER,[IE]:r.ALWAYS,[NE]:r.LESS,[yx]:r.LEQUAL,[DE]:r.EQUAL,[_x]:r.GEQUAL,[LE]:r.GREATER,[UE]:r.NOTEQUAL};function re(G,O){if(O.type===Is&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===qn||O.magFilter===Yp||O.magFilter===zh||O.magFilter===Io||O.minFilter===qn||O.minFilter===Yp||O.minFilter===zh||O.minFilter===Io)&&ct("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(G,r.TEXTURE_WRAP_S,we[O.wrapS]),r.texParameteri(G,r.TEXTURE_WRAP_T,we[O.wrapT]),(G===r.TEXTURE_3D||G===r.TEXTURE_2D_ARRAY)&&r.texParameteri(G,r.TEXTURE_WRAP_R,we[O.wrapR]),r.texParameteri(G,r.TEXTURE_MAG_FILTER,Ce[O.magFilter]),r.texParameteri(G,r.TEXTURE_MIN_FILTER,Ce[O.minFilter]),O.compareFunction&&(r.texParameteri(G,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(G,r.TEXTURE_COMPARE_FUNC,X[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===Ii||O.minFilter!==zh&&O.minFilter!==Io||O.type===Is&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||i.get(O).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");r.texParameterf(G,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,s.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy}}}function _e(G,O){let ne=!1;G.__webglInit===void 0&&(G.__webglInit=!0,O.addEventListener("dispose",z));const Se=O.source;let De=b.get(Se);De===void 0&&(De={},b.set(Se,De));const Ee=de(O);if(Ee!==G.__cacheKey){De[Ee]===void 0&&(De[Ee]={texture:r.createTexture(),usedTimes:0},f.memory.textures++,ne=!0),De[Ee].usedTimes++;const ht=De[G.__cacheKey];ht!==void 0&&(De[G.__cacheKey].usedTimes--,ht.usedTimes===0&&I(O)),G.__cacheKey=Ee,G.__webglTexture=De[Ee].texture}return ne}function Pe(G,O,ne){return Math.floor(Math.floor(G/ne)/O)}function it(G,O,ne,Se){const Ee=G.updateRanges;if(Ee.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,O.width,O.height,ne,Se,O.data);else{Ee.sort((Ve,Ze)=>Ve.start-Ze.start);let ht=0;for(let Ve=1;Ve<Ee.length;Ve++){const Ze=Ee[ht],dt=Ee[Ve],ft=Ze.start+Ze.count,at=Pe(dt.start,O.width,4),Jt=Pe(Ze.start,O.width,4);dt.start<=ft+1&&at===Jt&&Pe(dt.start+dt.count-1,O.width,4)===at?Ze.count=Math.max(Ze.count,dt.start+dt.count-Ze.start):(++ht,Ee[ht]=dt)}Ee.length=ht+1;const Ke=r.getParameter(r.UNPACK_ROW_LENGTH),yt=r.getParameter(r.UNPACK_SKIP_PIXELS),Dt=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,O.width);for(let Ve=0,Ze=Ee.length;Ve<Ze;Ve++){const dt=Ee[Ve],ft=Math.floor(dt.start/4),at=Math.ceil(dt.count/4),Jt=ft%O.width,ie=Math.floor(ft/O.width),rt=at,je=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,Jt),r.pixelStorei(r.UNPACK_SKIP_ROWS,ie),t.texSubImage2D(r.TEXTURE_2D,0,Jt,ie,rt,je,ne,Se,O.data)}G.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,Ke),r.pixelStorei(r.UNPACK_SKIP_PIXELS,yt),r.pixelStorei(r.UNPACK_SKIP_ROWS,Dt)}}function he(G,O,ne){let Se=r.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Se=r.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Se=r.TEXTURE_3D);const De=_e(G,O),Ee=O.source;t.bindTexture(Se,G.__webglTexture,r.TEXTURE0+ne);const ht=i.get(Ee);if(Ee.version!==ht.__version||De===!0){t.activeTexture(r.TEXTURE0+ne);const Ke=bn.getPrimaries(bn.workingColorSpace),yt=O.colorSpace===Al?null:bn.getPrimaries(O.colorSpace),Dt=O.colorSpace===Al||Ke===yt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,O.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,O.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);let Ve=R(O.image,!1,s.maxTextureSize);Ve=At(O,Ve);const Ze=c.convert(O.format,O.colorSpace),dt=c.convert(O.type);let ft=L(O.internalFormat,Ze,dt,O.colorSpace,O.isVideoTexture);re(Se,O);let at;const Jt=O.mipmaps,ie=O.isVideoTexture!==!0,rt=ht.__version===void 0||De===!0,je=Ee.dataReady,lt=B(O,Ve);if(O.isDepthTexture)ft=U(O.format===Nc,O.type),rt&&(ie?t.texStorage2D(r.TEXTURE_2D,1,ft,Ve.width,Ve.height):t.texImage2D(r.TEXTURE_2D,0,ft,Ve.width,Ve.height,0,Ze,dt,null));else if(O.isDataTexture)if(Jt.length>0){ie&&rt&&t.texStorage2D(r.TEXTURE_2D,lt,ft,Jt[0].width,Jt[0].height);for(let He=0,Ie=Jt.length;He<Ie;He++)at=Jt[He],ie?je&&t.texSubImage2D(r.TEXTURE_2D,He,0,0,at.width,at.height,Ze,dt,at.data):t.texImage2D(r.TEXTURE_2D,He,ft,at.width,at.height,0,Ze,dt,at.data);O.generateMipmaps=!1}else ie?(rt&&t.texStorage2D(r.TEXTURE_2D,lt,ft,Ve.width,Ve.height),je&&it(O,Ve,Ze,dt)):t.texImage2D(r.TEXTURE_2D,0,ft,Ve.width,Ve.height,0,Ze,dt,Ve.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){ie&&rt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,lt,ft,Jt[0].width,Jt[0].height,Ve.depth);for(let He=0,Ie=Jt.length;He<Ie;He++)if(at=Jt[He],O.format!==Os)if(Ze!==null)if(ie){if(je)if(O.layerUpdates.size>0){const et=q_(at.width,at.height,O.format,O.type);for(const kt of O.layerUpdates){const pn=at.data.subarray(kt*et/at.data.BYTES_PER_ELEMENT,(kt+1)*et/at.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,He,0,0,kt,at.width,at.height,1,Ze,pn)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,He,0,0,0,at.width,at.height,Ve.depth,Ze,at.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,He,ft,at.width,at.height,Ve.depth,0,at.data,0,0);else ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ie?je&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,He,0,0,0,at.width,at.height,Ve.depth,Ze,dt,at.data):t.texImage3D(r.TEXTURE_2D_ARRAY,He,ft,at.width,at.height,Ve.depth,0,Ze,dt,at.data)}else{ie&&rt&&t.texStorage2D(r.TEXTURE_2D,lt,ft,Jt[0].width,Jt[0].height);for(let He=0,Ie=Jt.length;He<Ie;He++)at=Jt[He],O.format!==Os?Ze!==null?ie?je&&t.compressedTexSubImage2D(r.TEXTURE_2D,He,0,0,at.width,at.height,Ze,at.data):t.compressedTexImage2D(r.TEXTURE_2D,He,ft,at.width,at.height,0,at.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ie?je&&t.texSubImage2D(r.TEXTURE_2D,He,0,0,at.width,at.height,Ze,dt,at.data):t.texImage2D(r.TEXTURE_2D,He,ft,at.width,at.height,0,Ze,dt,at.data)}else if(O.isDataArrayTexture)if(ie){if(rt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,lt,ft,Ve.width,Ve.height,Ve.depth),je)if(O.layerUpdates.size>0){const He=q_(Ve.width,Ve.height,O.format,O.type);for(const Ie of O.layerUpdates){const et=Ve.data.subarray(Ie*He/Ve.data.BYTES_PER_ELEMENT,(Ie+1)*He/Ve.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ie,Ve.width,Ve.height,1,Ze,dt,et)}O.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,Ze,dt,Ve.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,ft,Ve.width,Ve.height,Ve.depth,0,Ze,dt,Ve.data);else if(O.isData3DTexture)ie?(rt&&t.texStorage3D(r.TEXTURE_3D,lt,ft,Ve.width,Ve.height,Ve.depth),je&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,Ze,dt,Ve.data)):t.texImage3D(r.TEXTURE_3D,0,ft,Ve.width,Ve.height,Ve.depth,0,Ze,dt,Ve.data);else if(O.isFramebufferTexture){if(rt)if(ie)t.texStorage2D(r.TEXTURE_2D,lt,ft,Ve.width,Ve.height);else{let He=Ve.width,Ie=Ve.height;for(let et=0;et<lt;et++)t.texImage2D(r.TEXTURE_2D,et,ft,He,Ie,0,Ze,dt,null),He>>=1,Ie>>=1}}else if(Jt.length>0){if(ie&&rt){const He=Xe(Jt[0]);t.texStorage2D(r.TEXTURE_2D,lt,ft,He.width,He.height)}for(let He=0,Ie=Jt.length;He<Ie;He++)at=Jt[He],ie?je&&t.texSubImage2D(r.TEXTURE_2D,He,0,0,Ze,dt,at):t.texImage2D(r.TEXTURE_2D,He,ft,Ze,dt,at);O.generateMipmaps=!1}else if(ie){if(rt){const He=Xe(Ve);t.texStorage2D(r.TEXTURE_2D,lt,ft,He.width,He.height)}je&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Ze,dt,Ve)}else t.texImage2D(r.TEXTURE_2D,0,ft,Ze,dt,Ve);w(O)&&E(Se),ht.__version=Ee.version,O.onUpdate&&O.onUpdate(O)}G.__version=O.version}function Ae(G,O,ne){if(O.image.length!==6)return;const Se=_e(G,O),De=O.source;t.bindTexture(r.TEXTURE_CUBE_MAP,G.__webglTexture,r.TEXTURE0+ne);const Ee=i.get(De);if(De.version!==Ee.__version||Se===!0){t.activeTexture(r.TEXTURE0+ne);const ht=bn.getPrimaries(bn.workingColorSpace),Ke=O.colorSpace===Al?null:bn.getPrimaries(O.colorSpace),yt=O.colorSpace===Al||ht===Ke?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,O.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,O.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);const Dt=O.isCompressedTexture||O.image[0].isCompressedTexture,Ve=O.image[0]&&O.image[0].isDataTexture,Ze=[];for(let Ie=0;Ie<6;Ie++)!Dt&&!Ve?Ze[Ie]=R(O.image[Ie],!0,s.maxCubemapSize):Ze[Ie]=Ve?O.image[Ie].image:O.image[Ie],Ze[Ie]=At(O,Ze[Ie]);const dt=Ze[0],ft=c.convert(O.format,O.colorSpace),at=c.convert(O.type),Jt=L(O.internalFormat,ft,at,O.colorSpace),ie=O.isVideoTexture!==!0,rt=Ee.__version===void 0||Se===!0,je=De.dataReady;let lt=B(O,dt);re(r.TEXTURE_CUBE_MAP,O);let He;if(Dt){ie&&rt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,lt,Jt,dt.width,dt.height);for(let Ie=0;Ie<6;Ie++){He=Ze[Ie].mipmaps;for(let et=0;et<He.length;et++){const kt=He[et];O.format!==Os?ft!==null?ie?je&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,0,0,kt.width,kt.height,ft,kt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,Jt,kt.width,kt.height,0,kt.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ie?je&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,0,0,kt.width,kt.height,ft,at,kt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,Jt,kt.width,kt.height,0,ft,at,kt.data)}}}else{if(He=O.mipmaps,ie&&rt){He.length>0&&lt++;const Ie=Xe(Ze[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,lt,Jt,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(Ve){ie?je&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Ze[Ie].width,Ze[Ie].height,ft,at,Ze[Ie].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Jt,Ze[Ie].width,Ze[Ie].height,0,ft,at,Ze[Ie].data);for(let et=0;et<He.length;et++){const pn=He[et].image[Ie].image;ie?je&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,0,0,pn.width,pn.height,ft,at,pn.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,Jt,pn.width,pn.height,0,ft,at,pn.data)}}else{ie?je&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,ft,at,Ze[Ie]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Jt,ft,at,Ze[Ie]);for(let et=0;et<He.length;et++){const kt=He[et];ie?je&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,0,0,ft,at,kt.image[Ie]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,Jt,ft,at,kt.image[Ie])}}}w(O)&&E(r.TEXTURE_CUBE_MAP),Ee.__version=De.version,O.onUpdate&&O.onUpdate(O)}G.__version=O.version}function qe(G,O,ne,Se,De,Ee){const ht=c.convert(ne.format,ne.colorSpace),Ke=c.convert(ne.type),yt=L(ne.internalFormat,ht,Ke,ne.colorSpace),Dt=i.get(O),Ve=i.get(ne);if(Ve.__renderTarget=O,!Dt.__hasExternalTextures){const Ze=Math.max(1,O.width>>Ee),dt=Math.max(1,O.height>>Ee);De===r.TEXTURE_3D||De===r.TEXTURE_2D_ARRAY?t.texImage3D(De,Ee,yt,Ze,dt,O.depth,0,ht,Ke,null):t.texImage2D(De,Ee,yt,Ze,dt,0,ht,Ke,null)}t.bindFramebuffer(r.FRAMEBUFFER,G),St(O)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Se,De,Ve.__webglTexture,0,Z(O)):(De===r.TEXTURE_2D||De>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Se,De,Ve.__webglTexture,Ee),t.bindFramebuffer(r.FRAMEBUFFER,null)}function nt(G,O,ne){if(r.bindRenderbuffer(r.RENDERBUFFER,G),O.depthBuffer){const Se=O.depthTexture,De=Se&&Se.isDepthTexture?Se.type:null,Ee=U(O.stencilBuffer,De),ht=O.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;St(O)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Z(O),Ee,O.width,O.height):ne?r.renderbufferStorageMultisample(r.RENDERBUFFER,Z(O),Ee,O.width,O.height):r.renderbufferStorage(r.RENDERBUFFER,Ee,O.width,O.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,ht,r.RENDERBUFFER,G)}else{const Se=O.textures;for(let De=0;De<Se.length;De++){const Ee=Se[De],ht=c.convert(Ee.format,Ee.colorSpace),Ke=c.convert(Ee.type),yt=L(Ee.internalFormat,ht,Ke,Ee.colorSpace);St(O)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Z(O),yt,O.width,O.height):ne?r.renderbufferStorageMultisample(r.RENDERBUFFER,Z(O),yt,O.width,O.height):r.renderbufferStorage(r.RENDERBUFFER,yt,O.width,O.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function $e(G,O,ne){const Se=O.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(r.FRAMEBUFFER,G),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const De=i.get(O.depthTexture);if(De.__renderTarget=O,(!De.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),Se){if(De.__webglInit===void 0&&(De.__webglInit=!0,O.depthTexture.addEventListener("dispose",z)),De.__webglTexture===void 0){De.__webglTexture=r.createTexture(),t.bindTexture(r.TEXTURE_CUBE_MAP,De.__webglTexture),re(r.TEXTURE_CUBE_MAP,O.depthTexture);const Dt=c.convert(O.depthTexture.format),Ve=c.convert(O.depthTexture.type);let Ze;O.depthTexture.format===Bo?Ze=r.DEPTH_COMPONENT24:O.depthTexture.format===Nc&&(Ze=r.DEPTH24_STENCIL8);for(let dt=0;dt<6;dt++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,Ze,O.width,O.height,0,Dt,Ve,null)}}else oe(O.depthTexture,0);const Ee=De.__webglTexture,ht=Z(O),Ke=Se?r.TEXTURE_CUBE_MAP_POSITIVE_X+ne:r.TEXTURE_2D,yt=O.depthTexture.format===Nc?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;if(O.depthTexture.format===Bo)St(O)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,yt,Ke,Ee,0,ht):r.framebufferTexture2D(r.FRAMEBUFFER,yt,Ke,Ee,0);else if(O.depthTexture.format===Nc)St(O)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,yt,Ke,Ee,0,ht):r.framebufferTexture2D(r.FRAMEBUFFER,yt,Ke,Ee,0);else throw new Error("Unknown depthTexture format")}function xt(G){const O=i.get(G),ne=G.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==G.depthTexture){const Se=G.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Se){const De=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Se.removeEventListener("dispose",De)};Se.addEventListener("dispose",De),O.__depthDisposeCallback=De}O.__boundDepthTexture=Se}if(G.depthTexture&&!O.__autoAllocateDepthBuffer)if(ne)for(let Se=0;Se<6;Se++)$e(O.__webglFramebuffer[Se],G,Se);else{const Se=G.texture.mipmaps;Se&&Se.length>0?$e(O.__webglFramebuffer[0],G,0):$e(O.__webglFramebuffer,G,0)}else if(ne){O.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer[Se]),O.__webglDepthbuffer[Se]===void 0)O.__webglDepthbuffer[Se]=r.createRenderbuffer(),nt(O.__webglDepthbuffer[Se],G,!1);else{const De=G.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ee=O.__webglDepthbuffer[Se];r.bindRenderbuffer(r.RENDERBUFFER,Ee),r.framebufferRenderbuffer(r.FRAMEBUFFER,De,r.RENDERBUFFER,Ee)}}else{const Se=G.texture.mipmaps;if(Se&&Se.length>0?t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=r.createRenderbuffer(),nt(O.__webglDepthbuffer,G,!1);else{const De=G.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ee=O.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Ee),r.framebufferRenderbuffer(r.FRAMEBUFFER,De,r.RENDERBUFFER,Ee)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Wt(G,O,ne){const Se=i.get(G);O!==void 0&&qe(Se.__webglFramebuffer,G,G.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ne!==void 0&&xt(G)}function Tt(G){const O=G.texture,ne=i.get(G),Se=i.get(O);G.addEventListener("dispose",H);const De=G.textures,Ee=G.isWebGLCubeRenderTarget===!0,ht=De.length>1;if(ht||(Se.__webglTexture===void 0&&(Se.__webglTexture=r.createTexture()),Se.__version=O.version,f.memory.textures++),Ee){ne.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(O.mipmaps&&O.mipmaps.length>0){ne.__webglFramebuffer[Ke]=[];for(let yt=0;yt<O.mipmaps.length;yt++)ne.__webglFramebuffer[Ke][yt]=r.createFramebuffer()}else ne.__webglFramebuffer[Ke]=r.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Ke=0;Ke<O.mipmaps.length;Ke++)ne.__webglFramebuffer[Ke]=r.createFramebuffer()}else ne.__webglFramebuffer=r.createFramebuffer();if(ht)for(let Ke=0,yt=De.length;Ke<yt;Ke++){const Dt=i.get(De[Ke]);Dt.__webglTexture===void 0&&(Dt.__webglTexture=r.createTexture(),f.memory.textures++)}if(G.samples>0&&St(G)===!1){ne.__webglMultisampledFramebuffer=r.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Ke=0;Ke<De.length;Ke++){const yt=De[Ke];ne.__webglColorRenderbuffer[Ke]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ne.__webglColorRenderbuffer[Ke]);const Dt=c.convert(yt.format,yt.colorSpace),Ve=c.convert(yt.type),Ze=L(yt.internalFormat,Dt,Ve,yt.colorSpace,G.isXRRenderTarget===!0),dt=Z(G);r.renderbufferStorageMultisample(r.RENDERBUFFER,dt,Ze,G.width,G.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ke,r.RENDERBUFFER,ne.__webglColorRenderbuffer[Ke])}r.bindRenderbuffer(r.RENDERBUFFER,null),G.depthBuffer&&(ne.__webglDepthRenderbuffer=r.createRenderbuffer(),nt(ne.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(r.TEXTURE_CUBE_MAP,Se.__webglTexture),re(r.TEXTURE_CUBE_MAP,O);for(let Ke=0;Ke<6;Ke++)if(O.mipmaps&&O.mipmaps.length>0)for(let yt=0;yt<O.mipmaps.length;yt++)qe(ne.__webglFramebuffer[Ke][yt],G,O,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,yt);else qe(ne.__webglFramebuffer[Ke],G,O,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);w(O)&&E(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ht){for(let Ke=0,yt=De.length;Ke<yt;Ke++){const Dt=De[Ke],Ve=i.get(Dt);let Ze=r.TEXTURE_2D;(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(Ze=G.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Ze,Ve.__webglTexture),re(Ze,Dt),qe(ne.__webglFramebuffer,G,Dt,r.COLOR_ATTACHMENT0+Ke,Ze,0),w(Dt)&&E(Ze)}t.unbindTexture()}else{let Ke=r.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(Ke=G.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Ke,Se.__webglTexture),re(Ke,O),O.mipmaps&&O.mipmaps.length>0)for(let yt=0;yt<O.mipmaps.length;yt++)qe(ne.__webglFramebuffer[yt],G,O,r.COLOR_ATTACHMENT0,Ke,yt);else qe(ne.__webglFramebuffer,G,O,r.COLOR_ATTACHMENT0,Ke,0);w(O)&&E(Ke),t.unbindTexture()}G.depthBuffer&&xt(G)}function Ne(G){const O=G.textures;for(let ne=0,Se=O.length;ne<Se;ne++){const De=O[ne];if(w(De)){const Ee=N(G),ht=i.get(De).__webglTexture;t.bindTexture(Ee,ht),E(Ee),t.unbindTexture()}}}const Be=[],Le=[];function Ye(G){if(G.samples>0){if(St(G)===!1){const O=G.textures,ne=G.width,Se=G.height;let De=r.COLOR_BUFFER_BIT;const Ee=G.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ht=i.get(G),Ke=O.length>1;if(Ke)for(let Dt=0;Dt<O.length;Dt++)t.bindFramebuffer(r.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,ht.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,ht.__webglMultisampledFramebuffer);const yt=G.texture.mipmaps;yt&&yt.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,ht.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,ht.__webglFramebuffer);for(let Dt=0;Dt<O.length;Dt++){if(G.resolveDepthBuffer&&(G.depthBuffer&&(De|=r.DEPTH_BUFFER_BIT),G.stencilBuffer&&G.resolveStencilBuffer&&(De|=r.STENCIL_BUFFER_BIT)),Ke){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,ht.__webglColorRenderbuffer[Dt]);const Ve=i.get(O[Dt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ve,0)}r.blitFramebuffer(0,0,ne,Se,0,0,ne,Se,De,r.NEAREST),m===!0&&(Be.length=0,Le.length=0,Be.push(r.COLOR_ATTACHMENT0+Dt),G.depthBuffer&&G.resolveDepthBuffer===!1&&(Be.push(Ee),Le.push(Ee),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Le)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Be))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Ke)for(let Dt=0;Dt<O.length;Dt++){t.bindFramebuffer(r.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.RENDERBUFFER,ht.__webglColorRenderbuffer[Dt]);const Ve=i.get(O[Dt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,ht.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.TEXTURE_2D,Ve,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,ht.__webglMultisampledFramebuffer)}else if(G.depthBuffer&&G.resolveDepthBuffer===!1&&m){const O=G.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[O])}}}function Z(G){return Math.min(s.maxSamples,G.samples)}function St(G){const O=i.get(G);return G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function st(G){const O=f.render.frame;y.get(G)!==O&&(y.set(G,O),G.update())}function At(G,O){const ne=G.colorSpace,Se=G.format,De=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||ne!==Ic&&ne!==Al&&(bn.getTransfer(ne)===Pn?(Se!==Os||De!==ea)&&ct("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Rt("WebGLTextures: Unsupported texture color space:",ne)),O}function Xe(G){return typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement?(g.width=G.naturalWidth||G.width,g.height=G.naturalHeight||G.height):typeof VideoFrame<"u"&&G instanceof VideoFrame?(g.width=G.displayWidth,g.height=G.displayHeight):(g.width=G.width,g.height=G.height),g}this.allocateTextureUnit=ee,this.resetTextureUnits=se,this.setTexture2D=oe,this.setTexture2DArray=Q,this.setTexture3D=J,this.setTextureCube=fe,this.rebindTextures=Wt,this.setupRenderTarget=Tt,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=xt,this.setupFrameBufferTexture=qe,this.useMultisampledRTT=St,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function GT(r,e){function t(i,s=Al){let c;const f=bn.getTransfer(s);if(i===ea)return r.UNSIGNED_BYTE;if(i===dx)return r.UNSIGNED_SHORT_4_4_4_4;if(i===px)return r.UNSIGNED_SHORT_5_5_5_1;if(i===mb)return r.UNSIGNED_INT_5_9_9_9_REV;if(i===gb)return r.UNSIGNED_INT_10F_11F_11F_REV;if(i===db)return r.BYTE;if(i===pb)return r.SHORT;if(i===Gh)return r.UNSIGNED_SHORT;if(i===hx)return r.INT;if(i===gr)return r.UNSIGNED_INT;if(i===Is)return r.FLOAT;if(i===Yr)return r.HALF_FLOAT;if(i===vb)return r.ALPHA;if(i===xb)return r.RGB;if(i===Os)return r.RGBA;if(i===Bo)return r.DEPTH_COMPONENT;if(i===Nc)return r.DEPTH_STENCIL;if(i===mx)return r.RED;if(i===Mm)return r.RED_INTEGER;if(i===Ku)return r.RG;if(i===gx)return r.RG_INTEGER;if(i===vx)return r.RGBA_INTEGER;if(i===Zp||i===Qp||i===Jp||i===Kp)if(f===Pn)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(i===Zp)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Qp)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Jp)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Kp)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(i===Zp)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Qp)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Jp)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Kp)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===bv||i===Sv||i===Mv||i===Ev)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(i===bv)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Sv)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Mv)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ev)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Tv||i===Av||i===wv||i===Cv||i===Rv||i===Nv||i===Dv)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(i===Tv||i===Av)return f===Pn?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(i===wv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC;if(i===Cv)return c.COMPRESSED_R11_EAC;if(i===Rv)return c.COMPRESSED_SIGNED_R11_EAC;if(i===Nv)return c.COMPRESSED_RG11_EAC;if(i===Dv)return c.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Lv||i===Uv||i===Iv||i===Ov||i===Pv||i===zv||i===Bv||i===Fv||i===kv||i===Vv||i===Hv||i===Gv||i===Wv||i===Xv)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(i===Lv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Uv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Iv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ov)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Pv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===zv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Bv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Fv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===kv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Vv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Hv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Gv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Wv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Xv)return f===Pn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===jv||i===qv||i===Yv)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(i===jv)return f===Pn?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===qv)return c.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Yv)return c.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Zv||i===Qv||i===Jv||i===Kv)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(i===Zv)return c.COMPRESSED_RED_RGTC1_EXT;if(i===Qv)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Jv)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Kv)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Wh?r.UNSIGNED_INT_24_8:r[i]!==void 0?r[i]:null}return{convert:t}}const rO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,oO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class lO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new Rb(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new vr({vertexShader:rO,fragmentShader:oO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Xi(new nd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class cO extends Fo{constructor(e,t){super();const i=this;let s=null,c=1,f=null,h="local-floor",m=1,g=null,y=null,_=null,b=null,M=null,A=null;const R=typeof XRWebGLBinding<"u",w=new lO,E={},N=t.getContextAttributes();let L=null,U=null;const B=[],z=[],H=new Fe;let j=null;const I=new Wi;I.viewport=new jn;const P=new Wi;P.viewport=new jn;const q=[I,P],se=new LT;let ee=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Ae=B[he];return Ae===void 0&&(Ae=new cv,B[he]=Ae),Ae.getTargetRaySpace()},this.getControllerGrip=function(he){let Ae=B[he];return Ae===void 0&&(Ae=new cv,B[he]=Ae),Ae.getGripSpace()},this.getHand=function(he){let Ae=B[he];return Ae===void 0&&(Ae=new cv,B[he]=Ae),Ae.getHandSpace()};function oe(he){const Ae=z.indexOf(he.inputSource);if(Ae===-1)return;const qe=B[Ae];qe!==void 0&&(qe.update(he.inputSource,he.frame,g||f),qe.dispatchEvent({type:he.type,data:he.inputSource}))}function Q(){s.removeEventListener("select",oe),s.removeEventListener("selectstart",oe),s.removeEventListener("selectend",oe),s.removeEventListener("squeeze",oe),s.removeEventListener("squeezestart",oe),s.removeEventListener("squeezeend",oe),s.removeEventListener("end",Q),s.removeEventListener("inputsourceschange",J);for(let he=0;he<B.length;he++){const Ae=z[he];Ae!==null&&(z[he]=null,B[he].disconnect(Ae))}ee=null,de=null,w.reset();for(const he in E)delete E[he];e.setRenderTarget(L),M=null,b=null,_=null,s=null,U=null,it.stop(),i.isPresenting=!1,e.setPixelRatio(j),e.setSize(H.width,H.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){c=he,i.isPresenting===!0&&ct("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){h=he,i.isPresenting===!0&&ct("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g||f},this.setReferenceSpace=function(he){g=he},this.getBaseLayer=function(){return b!==null?b:M},this.getBinding=function(){return _===null&&R&&(_=new XRWebGLBinding(s,t)),_},this.getFrame=function(){return A},this.getSession=function(){return s},this.setSession=async function(he){if(s=he,s!==null){if(L=e.getRenderTarget(),s.addEventListener("select",oe),s.addEventListener("selectstart",oe),s.addEventListener("selectend",oe),s.addEventListener("squeeze",oe),s.addEventListener("squeezestart",oe),s.addEventListener("squeezeend",oe),s.addEventListener("end",Q),s.addEventListener("inputsourceschange",J),N.xrCompatible!==!0&&await t.makeXRCompatible(),j=e.getPixelRatio(),e.getSize(H),R&&"createProjectionLayer"in XRWebGLBinding.prototype){let qe=null,nt=null,$e=null;N.depth&&($e=N.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,qe=N.stencil?Nc:Bo,nt=N.stencil?Wh:gr);const xt={colorFormat:t.RGBA8,depthFormat:$e,scaleFactor:c};_=this.getBinding(),b=_.createProjectionLayer(xt),s.updateRenderState({layers:[b]}),e.setPixelRatio(1),e.setSize(b.textureWidth,b.textureHeight,!1),U=new Ra(b.textureWidth,b.textureHeight,{format:Os,type:ea,depthTexture:new ef(b.textureWidth,b.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,qe),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}else{const qe={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:c};M=new XRWebGLLayer(s,t,qe),s.updateRenderState({baseLayer:M}),e.setPixelRatio(1),e.setSize(M.framebufferWidth,M.framebufferHeight,!1),U=new Ra(M.framebufferWidth,M.framebufferHeight,{format:Os,type:ea,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:M.ignoreDepthValues===!1,resolveStencilBuffer:M.ignoreDepthValues===!1})}U.isXRRenderTarget=!0,this.setFoveation(m),g=null,f=await s.requestReferenceSpace(h),it.setContext(s),it.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function J(he){for(let Ae=0;Ae<he.removed.length;Ae++){const qe=he.removed[Ae],nt=z.indexOf(qe);nt>=0&&(z[nt]=null,B[nt].disconnect(qe))}for(let Ae=0;Ae<he.added.length;Ae++){const qe=he.added[Ae];let nt=z.indexOf(qe);if(nt===-1){for(let xt=0;xt<B.length;xt++)if(xt>=z.length){z.push(qe),nt=xt;break}else if(z[xt]===null){z[xt]=qe,nt=xt;break}if(nt===-1)break}const $e=B[nt];$e&&$e.connect(qe)}}const fe=new Y,we=new Y;function Ce(he,Ae,qe){fe.setFromMatrixPosition(Ae.matrixWorld),we.setFromMatrixPosition(qe.matrixWorld);const nt=fe.distanceTo(we),$e=Ae.projectionMatrix.elements,xt=qe.projectionMatrix.elements,Wt=$e[14]/($e[10]-1),Tt=$e[14]/($e[10]+1),Ne=($e[9]+1)/$e[5],Be=($e[9]-1)/$e[5],Le=($e[8]-1)/$e[0],Ye=(xt[8]+1)/xt[0],Z=Wt*Le,St=Wt*Ye,st=nt/(-Le+Ye),At=st*-Le;if(Ae.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(At),he.translateZ(st),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),$e[10]===-1)he.projectionMatrix.copy(Ae.projectionMatrix),he.projectionMatrixInverse.copy(Ae.projectionMatrixInverse);else{const Xe=Wt+st,G=Tt+st,O=Z-At,ne=St+(nt-At),Se=Ne*Tt/G*Xe,De=Be*Tt/G*Xe;he.projectionMatrix.makePerspective(O,ne,Se,De,Xe,G),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function X(he,Ae){Ae===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Ae.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(s===null)return;let Ae=he.near,qe=he.far;w.texture!==null&&(w.depthNear>0&&(Ae=w.depthNear),w.depthFar>0&&(qe=w.depthFar)),se.near=P.near=I.near=Ae,se.far=P.far=I.far=qe,(ee!==se.near||de!==se.far)&&(s.updateRenderState({depthNear:se.near,depthFar:se.far}),ee=se.near,de=se.far),se.layers.mask=he.layers.mask|6,I.layers.mask=se.layers.mask&3,P.layers.mask=se.layers.mask&5;const nt=he.parent,$e=se.cameras;X(se,nt);for(let xt=0;xt<$e.length;xt++)X($e[xt],nt);$e.length===2?Ce(se,I,P):se.projectionMatrix.copy(I.projectionMatrix),re(he,se,nt)};function re(he,Ae,qe){qe===null?he.matrix.copy(Ae.matrixWorld):(he.matrix.copy(qe.matrixWorld),he.matrix.invert(),he.matrix.multiply(Ae.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Ae.projectionMatrix),he.projectionMatrixInverse.copy(Ae.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=qh*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return se},this.getFoveation=function(){if(!(b===null&&M===null))return m},this.setFoveation=function(he){m=he,b!==null&&(b.fixedFoveation=he),M!==null&&M.fixedFoveation!==void 0&&(M.fixedFoveation=he)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(se)},this.getCameraTexture=function(he){return E[he]};let _e=null;function Pe(he,Ae){if(y=Ae.getViewerPose(g||f),A=Ae,y!==null){const qe=y.views;M!==null&&(e.setRenderTargetFramebuffer(U,M.framebuffer),e.setRenderTarget(U));let nt=!1;qe.length!==se.cameras.length&&(se.cameras.length=0,nt=!0);for(let Tt=0;Tt<qe.length;Tt++){const Ne=qe[Tt];let Be=null;if(M!==null)Be=M.getViewport(Ne);else{const Ye=_.getViewSubImage(b,Ne);Be=Ye.viewport,Tt===0&&(e.setRenderTargetTextures(U,Ye.colorTexture,Ye.depthStencilTexture),e.setRenderTarget(U))}let Le=q[Tt];Le===void 0&&(Le=new Wi,Le.layers.enable(Tt),Le.viewport=new jn,q[Tt]=Le),Le.matrix.fromArray(Ne.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Ne.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(Be.x,Be.y,Be.width,Be.height),Tt===0&&(se.matrix.copy(Le.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale)),nt===!0&&se.cameras.push(Le)}const $e=s.enabledFeatures;if($e&&$e.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&R){_=i.getBinding();const Tt=_.getDepthInformation(qe[0]);Tt&&Tt.isValid&&Tt.texture&&w.init(Tt,s.renderState)}if($e&&$e.includes("camera-access")&&R){e.state.unbindTexture(),_=i.getBinding();for(let Tt=0;Tt<qe.length;Tt++){const Ne=qe[Tt].camera;if(Ne){let Be=E[Ne];Be||(Be=new Rb,E[Ne]=Be);const Le=_.getCameraImage(Ne);Be.sourceTexture=Le}}}}for(let qe=0;qe<B.length;qe++){const nt=z[qe],$e=B[qe];nt!==null&&$e!==void 0&&$e.update(nt,Ae,g||f)}_e&&_e(he,Ae),Ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ae}),A=null}const it=new BT;it.setAnimationLoop(Pe),this.setAnimationLoop=function(he){_e=he},this.dispose=function(){}}}const Vu=new Ha,uO=new Gt;function fO(r,e){function t(w,E){w.matrixAutoUpdate===!0&&w.updateMatrix(),E.value.copy(w.matrix)}function i(w,E){E.color.getRGB(w.fogColor.value,kE(r)),E.isFog?(w.fogNear.value=E.near,w.fogFar.value=E.far):E.isFogExp2&&(w.fogDensity.value=E.density)}function s(w,E,N,L,U){E.isMeshBasicMaterial||E.isMeshLambertMaterial?c(w,E):E.isMeshToonMaterial?(c(w,E),_(w,E)):E.isMeshPhongMaterial?(c(w,E),y(w,E)):E.isMeshStandardMaterial?(c(w,E),b(w,E),E.isMeshPhysicalMaterial&&M(w,E,U)):E.isMeshMatcapMaterial?(c(w,E),A(w,E)):E.isMeshDepthMaterial?c(w,E):E.isMeshDistanceMaterial?(c(w,E),R(w,E)):E.isMeshNormalMaterial?c(w,E):E.isLineBasicMaterial?(f(w,E),E.isLineDashedMaterial&&h(w,E)):E.isPointsMaterial?m(w,E,N,L):E.isSpriteMaterial?g(w,E):E.isShadowMaterial?(w.color.value.copy(E.color),w.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function c(w,E){w.opacity.value=E.opacity,E.color&&w.diffuse.value.copy(E.color),E.emissive&&w.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(w.map.value=E.map,t(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.bumpMap&&(w.bumpMap.value=E.bumpMap,t(E.bumpMap,w.bumpMapTransform),w.bumpScale.value=E.bumpScale,E.side===na&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,t(E.normalMap,w.normalMapTransform),w.normalScale.value.copy(E.normalScale),E.side===na&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,t(E.displacementMap,w.displacementMapTransform),w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,w.emissiveMapTransform)),E.specularMap&&(w.specularMap.value=E.specularMap,t(E.specularMap,w.specularMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest);const N=e.get(E),L=N.envMap,U=N.envMapRotation;L&&(w.envMap.value=L,Vu.copy(U),Vu.x*=-1,Vu.y*=-1,Vu.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(Vu.y*=-1,Vu.z*=-1),w.envMapRotation.value.setFromMatrix4(uO.makeRotationFromEuler(Vu)),w.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=E.reflectivity,w.ior.value=E.ior,w.refractionRatio.value=E.refractionRatio),E.lightMap&&(w.lightMap.value=E.lightMap,w.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,w.lightMapTransform)),E.aoMap&&(w.aoMap.value=E.aoMap,w.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,w.aoMapTransform))}function f(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,E.map&&(w.map.value=E.map,t(E.map,w.mapTransform))}function h(w,E){w.dashSize.value=E.dashSize,w.totalSize.value=E.dashSize+E.gapSize,w.scale.value=E.scale}function m(w,E,N,L){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.size.value=E.size*N,w.scale.value=L*.5,E.map&&(w.map.value=E.map,t(E.map,w.uvTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function g(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.rotation.value=E.rotation,E.map&&(w.map.value=E.map,t(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function y(w,E){w.specular.value.copy(E.specular),w.shininess.value=Math.max(E.shininess,1e-4)}function _(w,E){E.gradientMap&&(w.gradientMap.value=E.gradientMap)}function b(w,E){w.metalness.value=E.metalness,E.metalnessMap&&(w.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,w.metalnessMapTransform)),w.roughness.value=E.roughness,E.roughnessMap&&(w.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,w.roughnessMapTransform)),E.envMap&&(w.envMapIntensity.value=E.envMapIntensity)}function M(w,E,N){w.ior.value=E.ior,E.sheen>0&&(w.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),w.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(w.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,w.sheenColorMapTransform)),E.sheenRoughnessMap&&(w.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,w.sheenRoughnessMapTransform))),E.clearcoat>0&&(w.clearcoat.value=E.clearcoat,w.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(w.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,w.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(w.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===na&&w.clearcoatNormalScale.value.negate())),E.dispersion>0&&(w.dispersion.value=E.dispersion),E.iridescence>0&&(w.iridescence.value=E.iridescence,w.iridescenceIOR.value=E.iridescenceIOR,w.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(w.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,w.iridescenceMapTransform)),E.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),E.transmission>0&&(w.transmission.value=E.transmission,w.transmissionSamplerMap.value=N.texture,w.transmissionSamplerSize.value.set(N.width,N.height),E.transmissionMap&&(w.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,w.transmissionMapTransform)),w.thickness.value=E.thickness,E.thicknessMap&&(w.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=E.attenuationDistance,w.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(w.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(w.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=E.specularIntensity,w.specularColor.value.copy(E.specularColor),E.specularColorMap&&(w.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,w.specularColorMapTransform)),E.specularIntensityMap&&(w.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,w.specularIntensityMapTransform))}function A(w,E){E.matcap&&(w.matcap.value=E.matcap)}function R(w,E){const N=e.get(E).light;w.referencePosition.value.setFromMatrixPosition(N.matrixWorld),w.nearDistance.value=N.shadow.camera.near,w.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function hO(r,e,t,i){let s={},c={},f=[];const h=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function m(N,L){const U=L.program;i.uniformBlockBinding(N,U)}function g(N,L){let U=s[N.id];U===void 0&&(A(N),U=y(N),s[N.id]=U,N.addEventListener("dispose",w));const B=L.program;i.updateUBOMapping(N,B);const z=e.render.frame;c[N.id]!==z&&(b(N),c[N.id]=z)}function y(N){const L=_();N.__bindingPointIndex=L;const U=r.createBuffer(),B=N.__size,z=N.usage;return r.bindBuffer(r.UNIFORM_BUFFER,U),r.bufferData(r.UNIFORM_BUFFER,B,z),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,L,U),U}function _(){for(let N=0;N<h;N++)if(f.indexOf(N)===-1)return f.push(N),N;return Rt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(N){const L=s[N.id],U=N.uniforms,B=N.__cache;r.bindBuffer(r.UNIFORM_BUFFER,L);for(let z=0,H=U.length;z<H;z++){const j=Array.isArray(U[z])?U[z]:[U[z]];for(let I=0,P=j.length;I<P;I++){const q=j[I];if(M(q,z,I,B)===!0){const se=q.__offset,ee=Array.isArray(q.value)?q.value:[q.value];let de=0;for(let oe=0;oe<ee.length;oe++){const Q=ee[oe],J=R(Q);typeof Q=="number"||typeof Q=="boolean"?(q.__data[0]=Q,r.bufferSubData(r.UNIFORM_BUFFER,se+de,q.__data)):Q.isMatrix3?(q.__data[0]=Q.elements[0],q.__data[1]=Q.elements[1],q.__data[2]=Q.elements[2],q.__data[3]=0,q.__data[4]=Q.elements[3],q.__data[5]=Q.elements[4],q.__data[6]=Q.elements[5],q.__data[7]=0,q.__data[8]=Q.elements[6],q.__data[9]=Q.elements[7],q.__data[10]=Q.elements[8],q.__data[11]=0):(Q.toArray(q.__data,de),de+=J.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,se,q.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function M(N,L,U,B){const z=N.value,H=L+"_"+U;if(B[H]===void 0)return typeof z=="number"||typeof z=="boolean"?B[H]=z:B[H]=z.clone(),!0;{const j=B[H];if(typeof z=="number"||typeof z=="boolean"){if(j!==z)return B[H]=z,!0}else if(j.equals(z)===!1)return j.copy(z),!0}return!1}function A(N){const L=N.uniforms;let U=0;const B=16;for(let H=0,j=L.length;H<j;H++){const I=Array.isArray(L[H])?L[H]:[L[H]];for(let P=0,q=I.length;P<q;P++){const se=I[P],ee=Array.isArray(se.value)?se.value:[se.value];for(let de=0,oe=ee.length;de<oe;de++){const Q=ee[de],J=R(Q),fe=U%B,we=fe%J.boundary,Ce=fe+we;U+=we,Ce!==0&&B-Ce<J.storage&&(U+=B-Ce),se.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),se.__offset=U,U+=J.storage}}}const z=U%B;return z>0&&(U+=B-z),N.__size=U,N.__cache={},this}function R(N){const L={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(L.boundary=4,L.storage=4):N.isVector2?(L.boundary=8,L.storage=8):N.isVector3||N.isColor?(L.boundary=16,L.storage=12):N.isVector4?(L.boundary=16,L.storage=16):N.isMatrix3?(L.boundary=48,L.storage=48):N.isMatrix4?(L.boundary=64,L.storage=64):N.isTexture?ct("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ct("WebGLRenderer: Unsupported uniform value type.",N),L}function w(N){const L=N.target;L.removeEventListener("dispose",w);const U=f.indexOf(L.__bindingPointIndex);f.splice(U,1),r.deleteBuffer(s[L.id]),delete s[L.id],delete c[L.id]}function E(){for(const N in s)r.deleteBuffer(s[N]);f=[],s={},c={}}return{bind:m,update:g,dispose:E}}const dO=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Uo=null;function pO(){return Uo===null&&(Uo=new qr(dO,16,16,Ku,Yr),Uo.name="DFG_LUT",Uo.minFilter=qn,Uo.magFilter=qn,Uo.wrapS=wa,Uo.wrapT=wa,Uo.generateMipmaps=!1,Uo.needsUpdate=!0),Uo}class WT{constructor(e={}){const{canvas:t=zE(),context:i=null,depth:s=!0,stencil:c=!1,alpha:f=!1,antialias:h=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:g=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:_=!1,reversedDepthBuffer:b=!1,outputBufferType:M=ea}=e;this.isWebGLRenderer=!0;let A;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");A=i.getContextAttributes().alpha}else A=f;const R=M,w=new Set([vx,gx,Mm]),E=new Set([ea,gr,Gh,Wh,dx,px]),N=new Uint32Array(4),L=new Int32Array(4);let U=null,B=null;const z=[],H=[];let j=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=mr,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let P=!1;this._outputColorSpace=Us;let q=0,se=0,ee=null,de=-1,oe=null;const Q=new jn,J=new jn;let fe=null;const we=new gt(0);let Ce=0,X=t.width,re=t.height,_e=1,Pe=null,it=null;const he=new jn(0,0,X,re),Ae=new jn(0,0,X,re);let qe=!1;const nt=new td;let $e=!1,xt=!1;const Wt=new Gt,Tt=new Y,Ne=new jn,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function Ye(){return ee===null?_e:1}let Z=i;function St(k,ae){return t.getContext(k,ae)}try{const k={alpha:!0,depth:s,stencil:c,antialias:h,premultipliedAlpha:m,preserveDrawingBuffer:g,powerPreference:y,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${cx}`),t.addEventListener("webglcontextlost",kt,!1),t.addEventListener("webglcontextrestored",pn,!1),t.addEventListener("webglcontextcreationerror",vn,!1),Z===null){const ae="webgl2";if(Z=St(ae,k),Z===null)throw St(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(k){throw Rt("WebGLRenderer: "+k.message),k}let st,At,Xe,G,O,ne,Se,De,Ee,ht,Ke,yt,Dt,Ve,Ze,dt,ft,at,Jt,ie,rt,je,lt,He;function Ie(){st=new mU(Z),st.init(),je=new GT(Z,st),At=new rU(Z,st,e,je),Xe=new sO(Z,st),At.reversedDepthBuffer&&b&&Xe.buffers.depth.setReversed(!0),G=new xU(Z),O=new GI,ne=new aO(Z,st,Xe,O,At,je,G),Se=new lU(I),De=new pU(I),Ee=new SN(Z),lt=new sU(Z,Ee),ht=new gU(Z,Ee,G,lt),Ke=new _U(Z,ht,Ee,G),Jt=new yU(Z,At,ne),dt=new oU(O),yt=new HI(I,Se,De,st,At,lt,dt),Dt=new fO(I,O),Ve=new XI,Ze=new JI(st),at=new iU(I,Se,De,Xe,Ke,A,m),ft=new nO(I,Ke,At),He=new hO(Z,G,At,Xe),ie=new aU(Z,st,G),rt=new vU(Z,st,G),G.programs=yt.programs,I.capabilities=At,I.extensions=st,I.properties=O,I.renderLists=Ve,I.shadowMap=ft,I.state=Xe,I.info=G}Ie(),R!==ea&&(j=new SU(R,t.width,t.height,s,c));const et=new cO(I,Z);this.xr=et,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const k=st.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=st.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return _e},this.setPixelRatio=function(k){k!==void 0&&(_e=k,this.setSize(X,re,!1))},this.getSize=function(k){return k.set(X,re)},this.setSize=function(k,ae,ye=!0){if(et.isPresenting){ct("WebGLRenderer: Can't change size while VR device is presenting.");return}X=k,re=ae,t.width=Math.floor(k*_e),t.height=Math.floor(ae*_e),ye===!0&&(t.style.width=k+"px",t.style.height=ae+"px"),j!==null&&j.setSize(t.width,t.height),this.setViewport(0,0,k,ae)},this.getDrawingBufferSize=function(k){return k.set(X*_e,re*_e).floor()},this.setDrawingBufferSize=function(k,ae,ye){X=k,re=ae,_e=ye,t.width=Math.floor(k*ye),t.height=Math.floor(ae*ye),this.setViewport(0,0,k,ae)},this.setEffects=function(k){if(R===ea){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(k){for(let ae=0;ae<k.length;ae++)if(k[ae].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}j.setEffects(k||[])},this.getCurrentViewport=function(k){return k.copy(Q)},this.getViewport=function(k){return k.copy(he)},this.setViewport=function(k,ae,ye,ge){k.isVector4?he.set(k.x,k.y,k.z,k.w):he.set(k,ae,ye,ge),Xe.viewport(Q.copy(he).multiplyScalar(_e).round())},this.getScissor=function(k){return k.copy(Ae)},this.setScissor=function(k,ae,ye,ge){k.isVector4?Ae.set(k.x,k.y,k.z,k.w):Ae.set(k,ae,ye,ge),Xe.scissor(J.copy(Ae).multiplyScalar(_e).round())},this.getScissorTest=function(){return qe},this.setScissorTest=function(k){Xe.setScissorTest(qe=k)},this.setOpaqueSort=function(k){Pe=k},this.setTransparentSort=function(k){it=k},this.getClearColor=function(k){return k.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor(...arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha(...arguments)},this.clear=function(k=!0,ae=!0,ye=!0){let ge=0;if(k){let ce=!1;if(ee!==null){const Qe=ee.texture.format;ce=w.has(Qe)}if(ce){const Qe=ee.texture.type,pt=E.has(Qe),We=at.getClearColor(),vt=at.getClearAlpha(),_t=We.r,Nt=We.g,Mt=We.b;pt?(N[0]=_t,N[1]=Nt,N[2]=Mt,N[3]=vt,Z.clearBufferuiv(Z.COLOR,0,N)):(L[0]=_t,L[1]=Nt,L[2]=Mt,L[3]=vt,Z.clearBufferiv(Z.COLOR,0,L))}else ge|=Z.COLOR_BUFFER_BIT}ae&&(ge|=Z.DEPTH_BUFFER_BIT),ye&&(ge|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kt,!1),t.removeEventListener("webglcontextrestored",pn,!1),t.removeEventListener("webglcontextcreationerror",vn,!1),at.dispose(),Ve.dispose(),Ze.dispose(),O.dispose(),Se.dispose(),De.dispose(),Ke.dispose(),lt.dispose(),He.dispose(),yt.dispose(),et.dispose(),et.removeEventListener("sessionstart",yr),et.removeEventListener("sessionend",Ho),es.stop()};function kt(k){k.preventDefault(),hm("WebGLRenderer: Context Lost."),P=!0}function pn(){hm("WebGLRenderer: Context Restored."),P=!1;const k=G.autoReset,ae=ft.enabled,ye=ft.autoUpdate,ge=ft.needsUpdate,ce=ft.type;Ie(),G.autoReset=k,ft.enabled=ae,ft.autoUpdate=ye,ft.needsUpdate=ge,ft.type=ce}function vn(k){Rt("WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function ji(k){const ae=k.target;ae.removeEventListener("dispose",ji),xs(ae)}function xs(k){Jr(k),O.remove(k)}function Jr(k){const ae=O.get(k).programs;ae!==void 0&&(ae.forEach(function(ye){yt.releaseProgram(ye)}),k.isShaderMaterial&&yt.releaseShaderCache(k))}this.renderBufferDirect=function(k,ae,ye,ge,ce,Qe){ae===null&&(ae=Be);const pt=ce.isMesh&&ce.matrixWorld.determinant()<0,We=Da(k,ae,ye,ge,ce);Xe.setMaterial(ge,pt);let vt=ye.index,_t=1;if(ge.wireframe===!0){if(vt=ht.getWireframeAttribute(ye),vt===void 0)return;_t=2}const Nt=ye.drawRange,Mt=ye.attributes.position;let Ot=Nt.start*_t,Sn=(Nt.start+Nt.count)*_t;Qe!==null&&(Ot=Math.max(Ot,Qe.start*_t),Sn=Math.min(Sn,(Qe.start+Qe.count)*_t)),vt!==null?(Ot=Math.max(Ot,0),Sn=Math.min(Sn,vt.count)):Mt!=null&&(Ot=Math.max(Ot,0),Sn=Math.min(Sn,Mt.count));const zn=Sn-Ot;if(zn<0||zn===1/0)return;lt.setup(ce,ge,We,ye,vt);let Un,Xt=ie;if(vt!==null&&(Un=Ee.get(vt),Xt=rt,Xt.setIndex(Un)),ce.isMesh)ge.wireframe===!0?(Xe.setLineWidth(ge.wireframeLinewidth*Ye()),Xt.setMode(Z.LINES)):Xt.setMode(Z.TRIANGLES);else if(ce.isLine){let ot=ge.linewidth;ot===void 0&&(ot=1),Xe.setLineWidth(ot*Ye()),ce.isLineSegments?Xt.setMode(Z.LINES):ce.isLineLoop?Xt.setMode(Z.LINE_LOOP):Xt.setMode(Z.LINE_STRIP)}else ce.isPoints?Xt.setMode(Z.POINTS):ce.isSprite&&Xt.setMode(Z.TRIANGLES);if(ce.isBatchedMesh)if(ce._multiDrawInstances!==null)jh("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Xt.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(st.get("WEBGL_multi_draw"))Xt.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{const ot=ce._multiDrawStarts,xn=ce._multiDrawCounts,zt=ce._multiDrawCount,xi=vt?Ee.get(vt).bytesPerElement:1,La=O.get(ge).currentProgram.getUniforms();for(let Wn=0;Wn<zt;Wn++)La.setValue(Z,"_gl_DrawID",Wn),Xt.render(ot[Wn]/xi,xn[Wn])}else if(ce.isInstancedMesh)Xt.renderInstances(Ot,zn,ce.count);else if(ye.isInstancedBufferGeometry){const ot=ye._maxInstanceCount!==void 0?ye._maxInstanceCount:1/0,xn=Math.min(ye.instanceCount,ot);Xt.renderInstances(Ot,zn,xn)}else Xt.render(Ot,zn)};function Kr(k,ae,ye){k.transparent===!0&&k.side===Xr&&k.forceSinglePass===!1?(k.side=na,k.needsUpdate=!0,Vs(k,ae,ye),k.side=Rl,k.needsUpdate=!0,Vs(k,ae,ye),k.side=Xr):Vs(k,ae,ye)}this.compile=function(k,ae,ye=null){ye===null&&(ye=k),B=Ze.get(ye),B.init(ae),H.push(B),ye.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ae.layers)&&(B.pushLight(ce),ce.castShadow&&B.pushShadow(ce))}),k!==ye&&k.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ae.layers)&&(B.pushLight(ce),ce.castShadow&&B.pushShadow(ce))}),B.setupLights();const ge=new Set;return k.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;const Qe=ce.material;if(Qe)if(Array.isArray(Qe))for(let pt=0;pt<Qe.length;pt++){const We=Qe[pt];Kr(We,ye,ce),ge.add(We)}else Kr(Qe,ye,ce),ge.add(Qe)}),B=H.pop(),ge},this.compileAsync=function(k,ae,ye=null){const ge=this.compile(k,ae,ye);return new Promise(ce=>{function Qe(){if(ge.forEach(function(pt){O.get(pt).currentProgram.isReady()&&ge.delete(pt)}),ge.size===0){ce(k);return}setTimeout(Qe,10)}st.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let Vo=null;function $r(k){Vo&&Vo(k)}function yr(){es.stop()}function Ho(){es.start()}const es=new BT;es.setAnimationLoop($r),typeof self<"u"&&es.setContext(self),this.setAnimationLoop=function(k){Vo=k,et.setAnimationLoop(k),k===null?es.stop():es.start()},et.addEventListener("sessionstart",yr),et.addEventListener("sessionend",Ho),this.render=function(k,ae){if(ae!==void 0&&ae.isCamera!==!0){Rt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;const ye=et.enabled===!0&&et.isPresenting===!0,ge=j!==null&&(ee===null||ye)&&j.begin(I,ee);if(k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(j===null||j.isCompositing()===!1)&&(et.cameraAutoUpdate===!0&&et.updateCamera(ae),ae=et.getCamera()),k.isScene===!0&&k.onBeforeRender(I,k,ae,ee),B=Ze.get(k,H.length),B.init(ae),H.push(B),Wt.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),nt.setFromProjectionMatrix(Wt,ka,ae.reversedDepth),xt=this.localClippingEnabled,$e=dt.init(this.clippingPlanes,xt),U=Ve.get(k,z.length),U.init(),z.push(U),et.enabled===!0&&et.isPresenting===!0){const pt=I.xr.getDepthSensingMesh();pt!==null&&Bs(pt,ae,-1/0,I.sortObjects)}Bs(k,ae,0,I.sortObjects),U.finish(),I.sortObjects===!0&&U.sort(Pe,it),Le=et.enabled===!1||et.isPresenting===!1||et.hasDepthSensing()===!1,Le&&at.addToRenderList(U,k),this.info.render.frame++,$e===!0&&dt.beginShadows();const ce=B.state.shadowsArray;if(ft.render(ce,k,ae),$e===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ge&&j.hasRenderPass())===!1){const pt=U.opaque,We=U.transmissive;if(B.setupLights(),ae.isArrayCamera){const vt=ae.cameras;if(We.length>0)for(let _t=0,Nt=vt.length;_t<Nt;_t++){const Mt=vt[_t];Ai(pt,We,k,Mt)}Le&&at.render(k);for(let _t=0,Nt=vt.length;_t<Nt;_t++){const Mt=vt[_t];Kn(U,k,Mt,Mt.viewport)}}else We.length>0&&Ai(pt,We,k,ae),Le&&at.render(k),Kn(U,k,ae)}ee!==null&&se===0&&(ne.updateMultisampleRenderTarget(ee),ne.updateRenderTargetMipmap(ee)),ge&&j.end(I),k.isScene===!0&&k.onAfterRender(I,k,ae),lt.resetDefaultState(),de=-1,oe=null,H.pop(),H.length>0?(B=H[H.length-1],$e===!0&&dt.setGlobalState(I.clippingPlanes,B.state.camera)):B=null,z.pop(),z.length>0?U=z[z.length-1]:U=null};function Bs(k,ae,ye,ge){if(k.visible===!1)return;if(k.layers.test(ae.layers)){if(k.isGroup)ye=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(ae);else if(k.isLight)B.pushLight(k),k.castShadow&&B.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||nt.intersectsSprite(k)){ge&&Ne.setFromMatrixPosition(k.matrixWorld).applyMatrix4(Wt);const pt=Ke.update(k),We=k.material;We.visible&&U.push(k,pt,We,ye,Ne.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||nt.intersectsObject(k))){const pt=Ke.update(k),We=k.material;if(ge&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),Ne.copy(k.boundingSphere.center)):(pt.boundingSphere===null&&pt.computeBoundingSphere(),Ne.copy(pt.boundingSphere.center)),Ne.applyMatrix4(k.matrixWorld).applyMatrix4(Wt)),Array.isArray(We)){const vt=pt.groups;for(let _t=0,Nt=vt.length;_t<Nt;_t++){const Mt=vt[_t],Ot=We[Mt.materialIndex];Ot&&Ot.visible&&U.push(k,pt,Ot,ye,Ne.z,Mt)}}else We.visible&&U.push(k,pt,We,ye,Ne.z,null)}}const Qe=k.children;for(let pt=0,We=Qe.length;pt<We;pt++)Bs(Qe[pt],ae,ye,ge)}function Kn(k,ae,ye,ge){const{opaque:ce,transmissive:Qe,transparent:pt}=k;B.setupLightsView(ye),$e===!0&&dt.setGlobalState(I.clippingPlanes,ye),ge&&Xe.viewport(Q.copy(ge)),ce.length>0&&Fs(ce,ae,ye),Qe.length>0&&Fs(Qe,ae,ye),pt.length>0&&Fs(pt,ae,ye),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function Ai(k,ae,ye,ge){if((ye.isScene===!0?ye.overrideMaterial:null)!==null)return;if(B.state.transmissionRenderTarget[ge.id]===void 0){const Ot=st.has("EXT_color_buffer_half_float")||st.has("EXT_color_buffer_float");B.state.transmissionRenderTarget[ge.id]=new Ra(1,1,{generateMipmaps:!0,type:Ot?Yr:ea,minFilter:Io,samples:At.samples,stencilBuffer:c,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:bn.workingColorSpace})}const Qe=B.state.transmissionRenderTarget[ge.id],pt=ge.viewport||Q;Qe.setSize(pt.z*I.transmissionResolutionScale,pt.w*I.transmissionResolutionScale);const We=I.getRenderTarget(),vt=I.getActiveCubeFace(),_t=I.getActiveMipmapLevel();I.setRenderTarget(Qe),I.getClearColor(we),Ce=I.getClearAlpha(),Ce<1&&I.setClearColor(16777215,.5),I.clear(),Le&&at.render(ye);const Nt=I.toneMapping;I.toneMapping=mr;const Mt=ge.viewport;if(ge.viewport!==void 0&&(ge.viewport=void 0),B.setupLightsView(ge),$e===!0&&dt.setGlobalState(I.clippingPlanes,ge),Fs(k,ye,ge),ne.updateMultisampleRenderTarget(Qe),ne.updateRenderTargetMipmap(Qe),st.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Sn=0,zn=ae.length;Sn<zn;Sn++){const Un=ae[Sn],{object:Xt,geometry:ot,material:xn,group:zt}=Un;if(xn.side===Xr&&Xt.layers.test(ge.layers)){const xi=xn.side;xn.side=na,xn.needsUpdate=!0,ks(Xt,ye,ge,ot,xn,zt),xn.side=xi,xn.needsUpdate=!0,Ot=!0}}Ot===!0&&(ne.updateMultisampleRenderTarget(Qe),ne.updateRenderTargetMipmap(Qe))}I.setRenderTarget(We,vt,_t),I.setClearColor(we,Ce),Mt!==void 0&&(ge.viewport=Mt),I.toneMapping=Nt}function Fs(k,ae,ye){const ge=ae.isScene===!0?ae.overrideMaterial:null;for(let ce=0,Qe=k.length;ce<Qe;ce++){const pt=k[ce],{object:We,geometry:vt,group:_t}=pt;let Nt=pt.material;Nt.allowOverride===!0&&ge!==null&&(Nt=ge),We.layers.test(ye.layers)&&ks(We,ae,ye,vt,Nt,_t)}}function ks(k,ae,ye,ge,ce,Qe){k.onBeforeRender(I,ae,ye,ge,ce,Qe),k.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),ce.onBeforeRender(I,ae,ye,ge,k,Qe),ce.transparent===!0&&ce.side===Xr&&ce.forceSinglePass===!1?(ce.side=na,ce.needsUpdate=!0,I.renderBufferDirect(ye,ae,ge,ce,k,Qe),ce.side=Rl,ce.needsUpdate=!0,I.renderBufferDirect(ye,ae,ge,ce,k,Qe),ce.side=Xr):I.renderBufferDirect(ye,ae,ge,ce,k,Qe),k.onAfterRender(I,ae,ye,ge,ce,Qe)}function Vs(k,ae,ye){ae.isScene!==!0&&(ae=Be);const ge=O.get(k),ce=B.state.lights,Qe=B.state.shadowsArray,pt=ce.state.version,We=yt.getParameters(k,ce.state,Qe,ae,ye),vt=yt.getProgramCacheKey(We);let _t=ge.programs;ge.environment=k.isMeshStandardMaterial?ae.environment:null,ge.fog=ae.fog,ge.envMap=(k.isMeshStandardMaterial?De:Se).get(k.envMap||ge.environment),ge.envMapRotation=ge.environment!==null&&k.envMap===null?ae.environmentRotation:k.envMapRotation,_t===void 0&&(k.addEventListener("dispose",ji),_t=new Map,ge.programs=_t);let Nt=_t.get(vt);if(Nt!==void 0){if(ge.currentProgram===Nt&&ge.lightsStateVersion===pt)return Go(k,We),Nt}else We.uniforms=yt.getUniforms(k),k.onBeforeCompile(We,I),Nt=yt.acquireProgram(We,vt),_t.set(vt,Nt),ge.uniforms=We.uniforms;const Mt=ge.uniforms;return(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(Mt.clippingPlanes=dt.uniform),Go(k,We),ge.needsLights=br(k),ge.lightsStateVersion=pt,ge.needsLights&&(Mt.ambientLightColor.value=ce.state.ambient,Mt.lightProbe.value=ce.state.probe,Mt.directionalLights.value=ce.state.directional,Mt.directionalLightShadows.value=ce.state.directionalShadow,Mt.spotLights.value=ce.state.spot,Mt.spotLightShadows.value=ce.state.spotShadow,Mt.rectAreaLights.value=ce.state.rectArea,Mt.ltc_1.value=ce.state.rectAreaLTC1,Mt.ltc_2.value=ce.state.rectAreaLTC2,Mt.pointLights.value=ce.state.point,Mt.pointLightShadows.value=ce.state.pointShadow,Mt.hemisphereLights.value=ce.state.hemi,Mt.directionalShadowMap.value=ce.state.directionalShadowMap,Mt.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,Mt.spotShadowMap.value=ce.state.spotShadowMap,Mt.spotLightMatrix.value=ce.state.spotLightMatrix,Mt.spotLightMap.value=ce.state.spotLightMap,Mt.pointShadowMap.value=ce.state.pointShadowMap,Mt.pointShadowMatrix.value=ce.state.pointShadowMatrix),ge.currentProgram=Nt,ge.uniformsList=null,Nt}function eo(k){if(k.uniformsList===null){const ae=k.currentProgram.getUniforms();k.uniformsList=uv.seqWithValue(ae.seq,k.uniforms)}return k.uniformsList}function Go(k,ae){const ye=O.get(k);ye.outputColorSpace=ae.outputColorSpace,ye.batching=ae.batching,ye.batchingColor=ae.batchingColor,ye.instancing=ae.instancing,ye.instancingColor=ae.instancingColor,ye.instancingMorph=ae.instancingMorph,ye.skinning=ae.skinning,ye.morphTargets=ae.morphTargets,ye.morphNormals=ae.morphNormals,ye.morphColors=ae.morphColors,ye.morphTargetsCount=ae.morphTargetsCount,ye.numClippingPlanes=ae.numClippingPlanes,ye.numIntersection=ae.numClipIntersection,ye.vertexAlphas=ae.vertexAlphas,ye.vertexTangents=ae.vertexTangents,ye.toneMapping=ae.toneMapping}function Da(k,ae,ye,ge,ce){ae.isScene!==!0&&(ae=Be),ne.resetTextureUnits();const Qe=ae.fog,pt=ge.isMeshStandardMaterial?ae.environment:null,We=ee===null?I.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Ic,vt=(ge.isMeshStandardMaterial?De:Se).get(ge.envMap||pt),_t=ge.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,Nt=!!ye.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),Mt=!!ye.morphAttributes.position,Ot=!!ye.morphAttributes.normal,Sn=!!ye.morphAttributes.color;let zn=mr;ge.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(zn=I.toneMapping);const Un=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,Xt=Un!==void 0?Un.length:0,ot=O.get(ge),xn=B.state.lights;if($e===!0&&(xt===!0||k!==oe)){const Oi=k===oe&&ge.id===de;dt.setState(ge,k,Oi)}let zt=!1;ge.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==xn.state.version||ot.outputColorSpace!==We||ce.isBatchedMesh&&ot.batching===!1||!ce.isBatchedMesh&&ot.batching===!0||ce.isBatchedMesh&&ot.batchingColor===!0&&ce.colorTexture===null||ce.isBatchedMesh&&ot.batchingColor===!1&&ce.colorTexture!==null||ce.isInstancedMesh&&ot.instancing===!1||!ce.isInstancedMesh&&ot.instancing===!0||ce.isSkinnedMesh&&ot.skinning===!1||!ce.isSkinnedMesh&&ot.skinning===!0||ce.isInstancedMesh&&ot.instancingColor===!0&&ce.instanceColor===null||ce.isInstancedMesh&&ot.instancingColor===!1&&ce.instanceColor!==null||ce.isInstancedMesh&&ot.instancingMorph===!0&&ce.morphTexture===null||ce.isInstancedMesh&&ot.instancingMorph===!1&&ce.morphTexture!==null||ot.envMap!==vt||ge.fog===!0&&ot.fog!==Qe||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==dt.numPlanes||ot.numIntersection!==dt.numIntersection)||ot.vertexAlphas!==_t||ot.vertexTangents!==Nt||ot.morphTargets!==Mt||ot.morphNormals!==Ot||ot.morphColors!==Sn||ot.toneMapping!==zn||ot.morphTargetsCount!==Xt)&&(zt=!0):(zt=!0,ot.__version=ge.version);let xi=ot.currentProgram;zt===!0&&(xi=Vs(ge,ae,ce));let La=!1,Wn=!1,rs=!1;const Tn=xi.getUniforms(),wi=ot.uniforms;if(Xe.useProgram(xi.program)&&(La=!0,Wn=!0,rs=!0),ge.id!==de&&(de=ge.id,Wn=!0),La||oe!==k){Xe.buffers.depth.getReversed()&&k.reversedDepth!==!0&&(k._reversedDepth=!0,k.updateProjectionMatrix()),Tn.setValue(Z,"projectionMatrix",k.projectionMatrix),Tn.setValue(Z,"viewMatrix",k.matrixWorldInverse);const Pi=Tn.map.cameraPosition;Pi!==void 0&&Pi.setValue(Z,Tt.setFromMatrixPosition(k.matrixWorld)),At.logarithmicDepthBuffer&&Tn.setValue(Z,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Tn.setValue(Z,"isOrthographic",k.isOrthographicCamera===!0),oe!==k&&(oe=k,Wn=!0,rs=!0)}if(ot.needsLights&&(xn.state.directionalShadowMap.length>0&&Tn.setValue(Z,"directionalShadowMap",xn.state.directionalShadowMap,ne),xn.state.spotShadowMap.length>0&&Tn.setValue(Z,"spotShadowMap",xn.state.spotShadowMap,ne),xn.state.pointShadowMap.length>0&&Tn.setValue(Z,"pointShadowMap",xn.state.pointShadowMap,ne)),ce.isSkinnedMesh){Tn.setOptional(Z,ce,"bindMatrix"),Tn.setOptional(Z,ce,"bindMatrixInverse");const Oi=ce.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),Tn.setValue(Z,"boneTexture",Oi.boneTexture,ne))}ce.isBatchedMesh&&(Tn.setOptional(Z,ce,"batchingTexture"),Tn.setValue(Z,"batchingTexture",ce._matricesTexture,ne),Tn.setOptional(Z,ce,"batchingIdTexture"),Tn.setValue(Z,"batchingIdTexture",ce._indirectTexture,ne),Tn.setOptional(Z,ce,"batchingColorTexture"),ce._colorsTexture!==null&&Tn.setValue(Z,"batchingColorTexture",ce._colorsTexture,ne));const yi=ye.morphAttributes;if((yi.position!==void 0||yi.normal!==void 0||yi.color!==void 0)&&Jt.update(ce,ye,xi),(Wn||ot.receiveShadow!==ce.receiveShadow)&&(ot.receiveShadow=ce.receiveShadow,Tn.setValue(Z,"receiveShadow",ce.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(wi.envMap.value=vt,wi.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1),ge.isMeshStandardMaterial&&ge.envMap===null&&ae.environment!==null&&(wi.envMapIntensity.value=ae.environmentIntensity),wi.dfgLUT!==void 0&&(wi.dfgLUT.value=pO()),Wn&&(Tn.setValue(Z,"toneMappingExposure",I.toneMappingExposure),ot.needsLights&&_r(wi,rs),Qe&&ge.fog===!0&&Dt.refreshFogUniforms(wi,Qe),Dt.refreshMaterialUniforms(wi,ge,_e,re,B.state.transmissionRenderTarget[k.id]),uv.upload(Z,eo(ot),wi,ne)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(uv.upload(Z,eo(ot),wi,ne),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Tn.setValue(Z,"center",ce.center),Tn.setValue(Z,"modelViewMatrix",ce.modelViewMatrix),Tn.setValue(Z,"normalMatrix",ce.normalMatrix),Tn.setValue(Z,"modelMatrix",ce.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const Oi=ge.uniformsGroups;for(let Pi=0,Wo=Oi.length;Pi<Wo;Pi++){const sa=Oi[Pi];He.update(sa,xi),He.bind(sa,xi)}}return xi}function _r(k,ae){k.ambientLightColor.needsUpdate=ae,k.lightProbe.needsUpdate=ae,k.directionalLights.needsUpdate=ae,k.directionalLightShadows.needsUpdate=ae,k.pointLights.needsUpdate=ae,k.pointLightShadows.needsUpdate=ae,k.spotLights.needsUpdate=ae,k.spotLightShadows.needsUpdate=ae,k.rectAreaLights.needsUpdate=ae,k.hemisphereLights.needsUpdate=ae}function br(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return se},this.getRenderTarget=function(){return ee},this.setRenderTargetTextures=function(k,ae,ye){const ge=O.get(k);ge.__autoAllocateDepthBuffer=k.resolveDepthBuffer===!1,ge.__autoAllocateDepthBuffer===!1&&(ge.__useRenderToTexture=!1),O.get(k.texture).__webglTexture=ae,O.get(k.depthTexture).__webglTexture=ge.__autoAllocateDepthBuffer?void 0:ye,ge.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(k,ae){const ye=O.get(k);ye.__webglFramebuffer=ae,ye.__useDefaultFramebuffer=ae===void 0};const Sr=Z.createFramebuffer();this.setRenderTarget=function(k,ae=0,ye=0){ee=k,q=ae,se=ye;let ge=null,ce=!1,Qe=!1;if(k){const We=O.get(k);if(We.__useDefaultFramebuffer!==void 0){Xe.bindFramebuffer(Z.FRAMEBUFFER,We.__webglFramebuffer),Q.copy(k.viewport),J.copy(k.scissor),fe=k.scissorTest,Xe.viewport(Q),Xe.scissor(J),Xe.setScissorTest(fe),de=-1;return}else if(We.__webglFramebuffer===void 0)ne.setupRenderTarget(k);else if(We.__hasExternalTextures)ne.rebindTextures(k,O.get(k.texture).__webglTexture,O.get(k.depthTexture).__webglTexture);else if(k.depthBuffer){const Nt=k.depthTexture;if(We.__boundDepthTexture!==Nt){if(Nt!==null&&O.has(Nt)&&(k.width!==Nt.image.width||k.height!==Nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ne.setupDepthRenderbuffer(k)}}const vt=k.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(Qe=!0);const _t=O.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(_t[ae])?ge=_t[ae][ye]:ge=_t[ae],ce=!0):k.samples>0&&ne.useMultisampledRTT(k)===!1?ge=O.get(k).__webglMultisampledFramebuffer:Array.isArray(_t)?ge=_t[ye]:ge=_t,Q.copy(k.viewport),J.copy(k.scissor),fe=k.scissorTest}else Q.copy(he).multiplyScalar(_e).floor(),J.copy(Ae).multiplyScalar(_e).floor(),fe=qe;if(ye!==0&&(ge=Sr),Xe.bindFramebuffer(Z.FRAMEBUFFER,ge)&&Xe.drawBuffers(k,ge),Xe.viewport(Q),Xe.scissor(J),Xe.setScissorTest(fe),ce){const We=O.get(k.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+ae,We.__webglTexture,ye)}else if(Qe){const We=ae;for(let vt=0;vt<k.textures.length;vt++){const _t=O.get(k.textures[vt]);Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0+vt,_t.__webglTexture,ye,We)}}else if(k!==null&&ye!==0){const We=O.get(k.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,We.__webglTexture,ye)}de=-1},this.readRenderTargetPixels=function(k,ae,ye,ge,ce,Qe,pt,We=0){if(!(k&&k.isWebGLRenderTarget)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=O.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&pt!==void 0&&(vt=vt[pt]),vt){Xe.bindFramebuffer(Z.FRAMEBUFFER,vt);try{const _t=k.textures[We],Nt=_t.format,Mt=_t.type;if(!At.textureFormatReadable(Nt)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(Mt)){Rt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=k.width-ge&&ye>=0&&ye<=k.height-ce&&(k.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+We),Z.readPixels(ae,ye,ge,ce,je.convert(Nt),je.convert(Mt),Qe))}finally{const _t=ee!==null?O.get(ee).__webglFramebuffer:null;Xe.bindFramebuffer(Z.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=async function(k,ae,ye,ge,ce,Qe,pt,We=0){if(!(k&&k.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=O.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&pt!==void 0&&(vt=vt[pt]),vt)if(ae>=0&&ae<=k.width-ge&&ye>=0&&ye<=k.height-ce){Xe.bindFramebuffer(Z.FRAMEBUFFER,vt);const _t=k.textures[We],Nt=_t.format,Mt=_t.type;if(!At.textureFormatReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ot=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ot),Z.bufferData(Z.PIXEL_PACK_BUFFER,Qe.byteLength,Z.STREAM_READ),k.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+We),Z.readPixels(ae,ye,ge,ce,je.convert(Nt),je.convert(Mt),0);const Sn=ee!==null?O.get(ee).__webglFramebuffer:null;Xe.bindFramebuffer(Z.FRAMEBUFFER,Sn);const zn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await SC(Z,zn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ot),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Qe),Z.deleteBuffer(Ot),Z.deleteSync(zn),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(k,ae=null,ye=0){const ge=Math.pow(2,-ye),ce=Math.floor(k.image.width*ge),Qe=Math.floor(k.image.height*ge),pt=ae!==null?ae.x:0,We=ae!==null?ae.y:0;ne.setTexture2D(k,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,ye,0,0,pt,We,ce,Qe),Xe.unbindTexture()};const to=Z.createFramebuffer(),Ga=Z.createFramebuffer();this.copyTextureToTexture=function(k,ae,ye=null,ge=null,ce=0,Qe=null){Qe===null&&(ce!==0?(jh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Qe=ce,ce=0):Qe=0);let pt,We,vt,_t,Nt,Mt,Ot,Sn,zn;const Un=k.isCompressedTexture?k.mipmaps[Qe]:k.image;if(ye!==null)pt=ye.max.x-ye.min.x,We=ye.max.y-ye.min.y,vt=ye.isBox3?ye.max.z-ye.min.z:1,_t=ye.min.x,Nt=ye.min.y,Mt=ye.isBox3?ye.min.z:0;else{const yi=Math.pow(2,-ce);pt=Math.floor(Un.width*yi),We=Math.floor(Un.height*yi),k.isDataArrayTexture?vt=Un.depth:k.isData3DTexture?vt=Math.floor(Un.depth*yi):vt=1,_t=0,Nt=0,Mt=0}ge!==null?(Ot=ge.x,Sn=ge.y,zn=ge.z):(Ot=0,Sn=0,zn=0);const Xt=je.convert(ae.format),ot=je.convert(ae.type);let xn;ae.isData3DTexture?(ne.setTexture3D(ae,0),xn=Z.TEXTURE_3D):ae.isDataArrayTexture||ae.isCompressedArrayTexture?(ne.setTexture2DArray(ae,0),xn=Z.TEXTURE_2D_ARRAY):(ne.setTexture2D(ae,0),xn=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ae.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ae.unpackAlignment);const zt=Z.getParameter(Z.UNPACK_ROW_LENGTH),xi=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),La=Z.getParameter(Z.UNPACK_SKIP_PIXELS),Wn=Z.getParameter(Z.UNPACK_SKIP_ROWS),rs=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Un.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Un.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,_t),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Nt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Mt);const Tn=k.isDataArrayTexture||k.isData3DTexture,wi=ae.isDataArrayTexture||ae.isData3DTexture;if(k.isDepthTexture){const yi=O.get(k),Oi=O.get(ae),Pi=O.get(yi.__renderTarget),Wo=O.get(Oi.__renderTarget);Xe.bindFramebuffer(Z.READ_FRAMEBUFFER,Pi.__webglFramebuffer),Xe.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Wo.__webglFramebuffer);for(let sa=0;sa<vt;sa++)Tn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,O.get(k).__webglTexture,ce,Mt+sa),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,O.get(ae).__webglTexture,Qe,zn+sa)),Z.blitFramebuffer(_t,Nt,pt,We,Ot,Sn,pt,We,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Xe.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(ce!==0||k.isRenderTargetTexture||O.has(k)){const yi=O.get(k),Oi=O.get(ae);Xe.bindFramebuffer(Z.READ_FRAMEBUFFER,to),Xe.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Ga);for(let Pi=0;Pi<vt;Pi++)Tn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,yi.__webglTexture,ce,Mt+Pi):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,yi.__webglTexture,ce),wi?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Oi.__webglTexture,Qe,zn+Pi):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Oi.__webglTexture,Qe),ce!==0?Z.blitFramebuffer(_t,Nt,pt,We,Ot,Sn,pt,We,Z.COLOR_BUFFER_BIT,Z.NEAREST):wi?Z.copyTexSubImage3D(xn,Qe,Ot,Sn,zn+Pi,_t,Nt,pt,We):Z.copyTexSubImage2D(xn,Qe,Ot,Sn,_t,Nt,pt,We);Xe.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else wi?k.isDataTexture||k.isData3DTexture?Z.texSubImage3D(xn,Qe,Ot,Sn,zn,pt,We,vt,Xt,ot,Un.data):ae.isCompressedArrayTexture?Z.compressedTexSubImage3D(xn,Qe,Ot,Sn,zn,pt,We,vt,Xt,Un.data):Z.texSubImage3D(xn,Qe,Ot,Sn,zn,pt,We,vt,Xt,ot,Un):k.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Qe,Ot,Sn,pt,We,Xt,ot,Un.data):k.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Qe,Ot,Sn,Un.width,Un.height,Xt,Un.data):Z.texSubImage2D(Z.TEXTURE_2D,Qe,Ot,Sn,pt,We,Xt,ot,Un);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,zt),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,xi),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,La),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Wn),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,rs),Qe===0&&ae.generateMipmaps&&Z.generateMipmap(xn),Xe.unbindTexture()},this.initRenderTarget=function(k){O.get(k).__webglFramebuffer===void 0&&ne.setupRenderTarget(k)},this.initTexture=function(k){k.isCubeTexture?ne.setTextureCube(k,0):k.isData3DTexture?ne.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?ne.setTexture2DArray(k,0):ne.setTexture2D(k,0),Xe.unbindTexture()},this.resetState=function(){q=0,se=0,ee=null,Xe.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ka}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=bn._getDrawingBufferColorSpace(e),t.unpackColorSpace=bn._getUnpackColorSpace()}}const mO=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ux,AddEquation:Cc,AddOperation:SE,AdditiveAnimationBlendMode:yb,AdditiveBlending:O_,AgXToneMapping:ub,AlphaFormat:vb,AlwaysCompare:IE,AlwaysDepth:mv,AlwaysStencilFunc:F_,AmbientLight:wT,AnimationAction:OT,AnimationClip:xm,AnimationLoader:hR,AnimationMixer:VR,AnimationObjectGroup:FR,AnimationUtils:lR,ArcCurve:eT,ArrayCamera:LT,ArrowHelper:dN,AttachedBindMode:B_,Audio:UT,AudioAnalyser:RR,AudioContext:jb,AudioListener:AR,AudioLoader:MR,AxesHelper:pN,BackSide:na,BasicDepthPacking:wE,BasicShadowMap:nE,BatchedMesh:YE,Bone:wb,BooleanKeyframeTrack:sf,Box2:JR,Box3:Ps,Box3Helper:fN,BoxGeometry:Fc,BoxHelper:uN,BufferAttribute:Gn,BufferGeometry:Qt,BufferGeometryLoader:DT,ByteType:db,Cache:Oo,Camera:Mx,CameraHelper:cN,CanvasTexture:D3,CapsuleGeometry:Nx,CatmullRomCurve3:tT,CineonToneMapping:lb,CircleGeometry:Dx,ClampToEdgeWrapping:wa,Clock:qb,Color:gt,ColorKeyframeTrack:Hb,ColorManagement:bn,CompressedArrayTexture:R3,CompressedCubeTexture:N3,CompressedTexture:Rx,CompressedTextureLoader:dR,ConeGeometry:Am,ConstantAlphaFactor:yE,ConstantColorFactor:vE,Controls:gN,CubeCamera:HE,CubeDepthTexture:KE,CubeReflectionMapping:zo,CubeRefractionMapping:Uc,CubeTexture:Em,CubeTextureLoader:pR,CubeUVReflectionMapping:$h,CubicBezierCurve:Db,CubicBezierCurve3:nT,CubicInterpolant:yT,CullFaceBack:I_,CullFaceFront:tE,CullFaceFrontBack:Lw,CullFaceNone:eE,Curve:Qr,CurvePath:sT,CustomBlending:iE,CustomToneMapping:cb,CylinderGeometry:Tm,Cylindrical:QR,Data3DTexture:Sx,DataArrayTexture:bx,DataTexture:qr,DataTextureLoader:mR,DataUtils:e3,DecrementStencilOp:Qw,DecrementWrapStencilOp:Kw,DefaultLoadingManager:ST,DepthFormat:Bo,DepthStencilFormat:Nc,DepthTexture:ef,DetachedBindMode:ME,DirectionalLight:AT,DirectionalLightHelper:lN,DiscreteInterpolant:_T,DodecahedronGeometry:Lx,DoubleSide:Xr,DstAlphaFactor:hE,DstColorFactor:pE,DynamicCopyUsage:dC,DynamicDrawUsage:oC,DynamicReadUsage:uC,EdgesGeometry:$E,EllipseCurve:Ux,EqualCompare:DE,EqualDepth:vv,EqualStencilFunc:nC,EquirectangularReflectionMapping:im,EquirectangularRefractionMapping:sm,Euler:Ha,EventDispatcher:Fo,ExternalTexture:Rb,ExtrudeGeometry:Ix,FileLoader:Nl,Float16BufferAttribute:o3,Float32BufferAttribute:bt,FloatType:Is,Fog:Tx,FogExp2:Ex,FramebufferTexture:C3,FrontSide:Rl,Frustum:td,FrustumArray:Cx,GLBufferAttribute:jR,GLSL1:mC,GLSL3:k_,GreaterCompare:LE,GreaterDepth:yv,GreaterEqualCompare:_x,GreaterEqualDepth:xv,GreaterEqualStencilFunc:rC,GreaterStencilFunc:sC,GridHelper:rN,Group:Fh,HalfFloatType:Yr,HemisphereLight:MT,HemisphereLightHelper:aN,IcosahedronGeometry:Ox,ImageBitmapLoader:SR,ImageLoader:ym,ImageUtils:BE,IncrementStencilOp:Zw,IncrementWrapStencilOp:Jw,InstancedBufferAttribute:Qh,InstancedBufferGeometry:NT,InstancedInterleavedBuffer:XR,InstancedMesh:qE,Int16BufferAttribute:a3,Int32BufferAttribute:r3,Int8BufferAttribute:n3,IntType:hx,InterleavedBuffer:Ax,InterleavedBufferAttribute:$u,Interpolant:Rm,InterpolateDiscrete:om,InterpolateLinear:$v,InterpolateSmooth:lv,InterpolationSamplingMode:xC,InterpolationSamplingType:vC,InvertStencilOp:$w,KeepStencilOp:Hu,KeyframeTrack:xr,LOD:XE,LatheGeometry:Px,Layers:Yh,LessCompare:NE,LessDepth:gv,LessEqualCompare:yx,LessEqualDepth:Ju,LessEqualStencilFunc:iC,LessStencilFunc:tC,Light:Vc,LightProbe:RT,Line:Pc,Line3:eN,LineBasicMaterial:ia,LineCurve:Lb,LineCurve3:iT,LineDashedMaterial:vT,LineLoop:ZE,LineSegments:ko,LinearFilter:qn,LinearInterpolant:Vb,LinearMipMapLinearFilter:Pw,LinearMipMapNearestFilter:Ow,LinearMipmapLinearFilter:Io,LinearMipmapNearestFilter:Yp,LinearSRGBColorSpace:Ic,LinearToneMapping:rb,LinearTransfer:cm,Loader:Na,LoaderUtils:X_,LoadingManager:Gb,LoopOnce:EE,LoopPingPong:AE,LoopRepeat:TE,MOUSE:Nw,Material:zs,MaterialLoader:Gx,MathUtils:FC,Matrix2:Jb,Matrix3:$t,Matrix4:Gt,MaxEquation:oE,Mesh:Xi,MeshBasicMaterial:Bc,MeshDepthMaterial:Bb,MeshDistanceMaterial:Fb,MeshLambertMaterial:mT,MeshMatcapMaterial:gT,MeshNormalMaterial:pT,MeshPhongMaterial:hT,MeshPhysicalMaterial:fT,MeshStandardMaterial:zb,MeshToonMaterial:dT,MinEquation:rE,MirroredRepeatWrapping:rm,MixOperation:bE,MultiplyBlending:z_,MultiplyOperation:Sm,NearestFilter:Ii,NearestMipMapLinearFilter:Iw,NearestMipMapNearestFilter:Uw,NearestMipmapLinearFilter:zh,NearestMipmapNearestFilter:hb,NeutralToneMapping:fb,NeverCompare:RE,NeverDepth:pv,NeverStencilFunc:eC,NoBlending:Po,NoColorSpace:Al,NoNormalPacking:Ww,NoToneMapping:mr,NormalAnimationBlendMode:xx,NormalBlending:Yu,NormalGAPacking:jw,NormalRGPacking:Xw,NotEqualCompare:UE,NotEqualDepth:_v,NotEqualStencilFunc:aC,NumberKeyframeTrack:gm,Object3D:wn,ObjectLoader:_R,ObjectSpaceNormalMap:CE,OctahedronGeometry:wm,OneFactor:cE,OneMinusConstantAlphaFactor:_E,OneMinusConstantColorFactor:xE,OneMinusDstAlphaFactor:dE,OneMinusDstColorFactor:mE,OneMinusSrcAlphaFactor:dv,OneMinusSrcColorFactor:fE,OrthographicCamera:Hc,PCFShadowMap:kh,PCFSoftShadowMap:qp,PMREMGenerator:Y_,Path:ix,PerspectiveCamera:Wi,Plane:wc,PlaneGeometry:nd,PlaneHelper:hN,PointLight:TT,PointLightHelper:iN,Points:QE,PointsMaterial:Cb,PolarGridHelper:oN,PolyhedronGeometry:kc,PositionalAudio:CR,PropertyBinding:An,PropertyMixer:IT,QuadraticBezierCurve:Ub,QuadraticBezierCurve3:Ib,Quaternion:Ca,QuaternionKeyframeTrack:Nm,QuaternionLinearInterpolant:bT,R11_EAC_Format:Cv,RED_GREEN_RGTC2_Format:Jv,RED_RGTC1_Format:Zv,REVISION:cx,RG11_EAC_Format:Nv,RGBADepthPacking:Vw,RGBAFormat:Os,RGBAIntegerFormat:vx,RGBA_ASTC_10x10_Format:Gv,RGBA_ASTC_10x5_Format:kv,RGBA_ASTC_10x6_Format:Vv,RGBA_ASTC_10x8_Format:Hv,RGBA_ASTC_12x10_Format:Wv,RGBA_ASTC_12x12_Format:Xv,RGBA_ASTC_4x4_Format:Lv,RGBA_ASTC_5x4_Format:Uv,RGBA_ASTC_5x5_Format:Iv,RGBA_ASTC_6x5_Format:Ov,RGBA_ASTC_6x6_Format:Pv,RGBA_ASTC_8x5_Format:zv,RGBA_ASTC_8x6_Format:Bv,RGBA_ASTC_8x8_Format:Fv,RGBA_BPTC_Format:jv,RGBA_ETC2_EAC_Format:wv,RGBA_PVRTC_2BPPV1_Format:Ev,RGBA_PVRTC_4BPPV1_Format:Mv,RGBA_S3TC_DXT1_Format:Qp,RGBA_S3TC_DXT3_Format:Jp,RGBA_S3TC_DXT5_Format:Kp,RGBDepthPacking:Hw,RGBFormat:xb,RGBIntegerFormat:zw,RGB_BPTC_SIGNED_Format:qv,RGB_BPTC_UNSIGNED_Format:Yv,RGB_ETC1_Format:Tv,RGB_ETC2_Format:Av,RGB_PVRTC_2BPPV1_Format:Sv,RGB_PVRTC_4BPPV1_Format:bv,RGB_S3TC_DXT1_Format:Zp,RGDepthPacking:Gw,RGFormat:Ku,RGIntegerFormat:gx,RawShaderMaterial:Pb,Ray:ed,Raycaster:PT,RectAreaLight:CT,RedFormat:mx,RedIntegerFormat:Mm,ReinhardToneMapping:ob,RenderTarget:bb,RenderTarget3D:HR,RepeatWrapping:am,ReplaceStencilOp:Yw,ReverseSubtractEquation:aE,RingGeometry:zx,SIGNED_R11_EAC_Format:Rv,SIGNED_RED_GREEN_RGTC2_Format:Kv,SIGNED_RED_RGTC1_Format:Qv,SIGNED_RG11_EAC_Format:Dv,SRGBColorSpace:Us,SRGBTransfer:Pn,Scene:Tb,ShaderChunk:rn,ShaderLib:Wr,ShaderMaterial:vr,ShadowMaterial:uT,Shape:Qu,ShapeGeometry:Bx,ShapePath:mN,ShapeUtils:jr,ShortType:pb,Skeleton:wx,SkeletonHelper:nN,SkinnedMesh:jE,Source:Dc,Sphere:vs,SphereGeometry:Cm,Spherical:ZR,SphericalHarmonics3:Xb,SplineCurve:Ob,SpotLight:ET,SpotLightHelper:tN,Sprite:WE,SpriteMaterial:Ab,SrcAlphaFactor:hv,SrcAlphaSaturateFactor:gE,SrcColorFactor:uE,StaticCopyUsage:hC,StaticDrawUsage:um,StaticReadUsage:cC,StereoCamera:ER,StreamCopyUsage:pC,StreamDrawUsage:lC,StreamReadUsage:fC,StringKeyframeTrack:af,SubtractEquation:sE,SubtractiveBlending:P_,TOUCH:Dw,TangentSpaceNormalMap:zc,TetrahedronGeometry:Fx,Texture:Ti,TextureLoader:gR,TextureUtils:bN,Timer:qR,TimestampQuery:gC,TorusGeometry:kx,TorusKnotGeometry:Vx,Triangle:Aa,TriangleFanDrawMode:kw,TriangleStripDrawMode:Fw,TrianglesDrawMode:Bw,TubeGeometry:Hx,UVMapping:fx,Uint16BufferAttribute:Sb,Uint32BufferAttribute:Mb,Uint8BufferAttribute:i3,Uint8ClampedBufferAttribute:s3,Uniform:Qb,UniformsGroup:WR,UniformsLib:ut,UniformsUtils:VE,UnsignedByteType:ea,UnsignedInt101111Type:gb,UnsignedInt248Type:Wh,UnsignedInt5999Type:mb,UnsignedIntType:gr,UnsignedShort4444Type:dx,UnsignedShort5551Type:px,UnsignedShortType:Gh,VSMShadowMap:Wu,Vector2:Fe,Vector3:Y,Vector4:jn,VectorKeyframeTrack:vm,VideoFrameTexture:w3,VideoTexture:JE,WebGL3DRenderTarget:WC,WebGLArrayRenderTarget:GC,WebGLCoordinateSystem:ka,WebGLCubeRenderTarget:Eb,WebGLRenderTarget:Ra,WebGLRenderer:WT,WebGLUtils:GT,WebGPUCoordinateSystem:Xh,WebXRController:cv,WireframeGeometry:cT,WrapAroundEnding:lm,ZeroCurvatureEnding:Xu,ZeroFactor:lE,ZeroSlopeEnding:ju,ZeroStencilOp:qw,createCanvasElement:zE,error:Rt,getConsoleFunction:bC,log:hm,setConsoleFunction:_C,warn:ct,warnOnce:jh},Symbol.toStringTag,{value:"Module"}));var S_={exports:{}},M_={},E_={exports:{}},T_={};var NM;function gO(){if(NM)return T_;NM=1;var r=bm();function e(_,b){return _===b&&(_!==0||1/_===1/b)||_!==_&&b!==b}var t=typeof Object.is=="function"?Object.is:e,i=r.useState,s=r.useEffect,c=r.useLayoutEffect,f=r.useDebugValue;function h(_,b){var M=b(),A=i({inst:{value:M,getSnapshot:b}}),R=A[0].inst,w=A[1];return c(function(){R.value=M,R.getSnapshot=b,m(R)&&w({inst:R})},[_,M,b]),s(function(){return m(R)&&w({inst:R}),_(function(){m(R)&&w({inst:R})})},[_]),f(M),M}function m(_){var b=_.getSnapshot;_=_.value;try{var M=b();return!t(_,M)}catch{return!0}}function g(_,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return T_.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:y,T_}var DM;function vO(){return DM||(DM=1,E_.exports=gO()),E_.exports}var LM;function xO(){if(LM)return M_;LM=1;var r=bm(),e=vO();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,c=r.useRef,f=r.useEffect,h=r.useMemo,m=r.useDebugValue;return M_.useSyncExternalStoreWithSelector=function(g,y,_,b,M){var A=c(null);if(A.current===null){var R={hasValue:!1,value:null};A.current=R}else R=A.current;A=h(function(){function E(z){if(!N){if(N=!0,L=z,z=b(z),M!==void 0&&R.hasValue){var H=R.value;if(M(H,z))return U=H}return U=z}if(H=U,i(L,z))return H;var j=b(z);return M!==void 0&&M(H,j)?(L=z,H):(L=z,U=j)}var N=!1,L,U,B=_===void 0?null:_;return[function(){return E(y())},B===null?void 0:function(){return E(B())}]},[y,_,b,M]);var w=s(g,A[0],A[1]);return f(function(){R.hasValue=!0,R.value=w},[w]),m(w),w},M_}var UM;function yO(){return UM||(UM=1,S_.exports=xO()),S_.exports}var _O=yO();const bO=ab(_O),IM=r=>{let e;const t=new Set,i=(g,y)=>{const _=typeof g=="function"?g(e):g;if(!Object.is(_,e)){const b=e;e=y??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(M=>M(e,b))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>m,subscribe:g=>(t.add(g),()=>t.delete(g))},m=e=r(i,s,h);return h},XT=(r=>r?IM(r):IM),{useSyncExternalStoreWithSelector:SO}=bO,MO=r=>r;function EO(r,e=MO,t){const i=SO(r.subscribe,r.getState,r.getInitialState,e,t);return Ph.useDebugValue(i),i}const OM=(r,e)=>{const t=XT(r),i=(s,c=e)=>EO(t,s,c);return Object.assign(i,t),i},TO=((r,e)=>r?OM(r,e):OM);var J_=QM();const AO=ab(J_);function Kb(r,e,t){if(!r)return;if(t(r)===!0)return r;let i=e?r.return:r.child;for(;i;){const s=Kb(i,e,t);if(s)return s;i=e?null:i.sibling}}function jT(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const $b=jT(Oe.createContext(null));class qT extends Oe.Component{render(){return Oe.createElement($b.Provider,{value:this._reactInternals},this.props.children)}}function YT(){const r=Oe.useContext($b);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Oe.useId();return Oe.useMemo(()=>{for(const t of[r,r?.alternate]){if(!t)continue;const i=Kb(t,!1,s=>{let c=s.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(i)return i}},[r,e])}const wO=Symbol.for("react.context"),CO=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===wO;function RO(){const r=YT(),[e]=Oe.useState(()=>new Map);e.clear();let t=r;for(;t;){const i=t.type;CO(i)&&i!==$b&&!e.has(i)&&e.set(i,Oe.use(jT(i))),t=t.return}return e}function NO(){const r=RO();return Oe.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>i=>Oe.createElement(e,null,Oe.createElement(t.Provider,{...i,value:r.get(t)})),e=>Oe.createElement(qT,{...e})),[r])}function ZT(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const QT=r=>r&&r.isOrthographicCamera,DO=r=>r&&r.hasOwnProperty("current"),LO=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),Dm=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Oe.useLayoutEffect:Oe.useEffect;function JT(r){const e=Oe.useRef(r);return Dm(()=>{e.current=r},[r]),e}function UO(){const r=YT(),e=NO();return Oe.useMemo(()=>({children:t})=>{const s=!!Kb(r,!0,c=>c.type===Oe.StrictMode)?Oe.StrictMode:Oe.Fragment;return W.jsx(s,{children:W.jsx(e,{children:t})})},[r,e])}function IO({set:r}){return Dm(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const OO=(r=>(r=class extends Oe.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function KT(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function Uh(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const gi={obj:r=>r===Object(r)&&!gi.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(gi.str(r)||gi.num(r)||gi.boo(r))return r===e;const c=gi.obj(r);if(c&&i==="reference")return r===e;const f=gi.arr(r);if(f&&t==="reference")return r===e;if((f||c)&&r===e)return!0;let h;for(h in r)if(!(h in e))return!1;if(c&&t==="shallow"&&i==="shallow"){for(h in s?e:r)if(!gi.equ(r[h],e[h],{strict:s,objects:"reference"}))return!1}else for(h in s?e:r)if(r[h]!==e[h])return!1;if(gi.und(h)){if(f&&r.length===0&&e.length===0||c&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function PO(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const $T=["children","key","ref"];function zO(r){const e={};for(const t in r)$T.includes(t)||(e[t]=r[t]);return e}function sx(r,e,t,i){const s=r;let c=s?.__r3f;return c||(c={root:e,type:t,parent:null,children:[],props:zO(i),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=c)),c}function _m(r,e){if(!e.includes("-"))return{root:r,key:e,target:r[e]};if(e in r)return{root:r,key:e,target:r[e]};let t=r;const i=e.split("-");for(const s of i){if(typeof t!="object"||t===null){if(t!==void 0){const c=i.slice(i.indexOf(s)).join("-");return{root:t,key:c,target:void 0}}return{root:r,key:e,target:void 0}}e=s,r=t,t=t[e]}return{root:r,key:e,target:t}}const PM=/-\d+$/;function ax(r,e){if(gi.str(e.props.attach)){if(PM.test(e.props.attach)){const s=e.props.attach.replace(PM,""),{root:c,key:f}=_m(r.object,s);Array.isArray(c[f])||(c[f]=[])}const{root:t,key:i}=_m(r.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else gi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function rx(r,e){if(gi.str(e.props.attach)){const{root:t,key:i}=_m(r.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[i]:t[i]=s}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const K_=[...$T,"args","dispose","attach","object","onUpdate","dispose"],zM=new Map;function BO(r){let e=zM.get(r.constructor);try{e||(e=new r.constructor,zM.set(r.constructor,e))}catch{}return e}function FO(r,e){const t={};for(const i in e)if(!K_.includes(i)&&!gi.equ(e[i],r.props[i])){t[i]=e[i];for(const s in e)s.startsWith(`${i}-`)&&(t[s]=e[s])}for(const i in r.props){if(K_.includes(i)||e.hasOwnProperty(i))continue;const{root:s,key:c}=_m(r.object,i);if(s.constructor&&s.constructor.length===0){const f=BO(s);gi.und(f)||(t[c]=f[c])}else t[c]=0}return t}const kO=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],VO=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Rc(r,e){var t;const i=r.__r3f,s=i&&ZT(i).getState(),c=i?.eventCount;for(const h in e){let m=e[h];if(K_.includes(h))continue;if(i&&VO.test(h)){typeof m=="function"?i.handlers[h]=m:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;continue}if(m===void 0)continue;let{root:g,key:y,target:_}=_m(r,h);if(_===void 0&&(typeof g!="object"||g===null))throw Error(`R3F: Cannot set "${h}". Ensure it is an object before setting "${y}".`);if(_ instanceof Yh&&m instanceof Yh)_.mask=m.mask;else if(_ instanceof gt&&LO(m))_.set(m);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof _.copy=="function"&&m!=null&&m.constructor&&_.constructor===m.constructor)_.copy(m);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&Array.isArray(m))typeof _.fromArray=="function"?_.fromArray(m):_.set(...m);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof m=="number")typeof _.setScalar=="function"?_.setScalar(m):_.set(m);else{var f;g[y]=m,s&&!s.linear&&kO.includes(y)&&(f=g[y])!=null&&f.isTexture&&g[y].format===Os&&g[y].type===ea&&(g[y].colorSpace=Us)}}if(i!=null&&i.parent&&s!=null&&s.internal&&(t=i.object)!=null&&t.isObject3D&&c!==i.eventCount){const h=i.object,m=s.internal.interaction.indexOf(h);m>-1&&s.internal.interaction.splice(m,1),i.eventCount&&h.raycast!==null&&s.internal.interaction.push(h)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&sd(i),r}function sd(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function HO(r,e){r.manual||(QT(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const Ta=r=>r?.isObject3D;function rv(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function eA(r,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(r.delete(i),s.target.releasePointerCapture(i)))}function GO(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{eA(t.capturedMap,e,i,s)})}function WO(r){function e(m){const{internal:g}=r.getState(),y=m.offsetX-g.initialClick[0],_=m.offsetY-g.initialClick[1];return Math.round(Math.sqrt(y*y+_*_))}function t(m){return m.filter(g=>["Move","Over","Enter","Out","Leave"].some(y=>{var _;return(_=g.__r3f)==null?void 0:_.handlers["onPointer"+y]}))}function i(m,g){const y=r.getState(),_=new Set,b=[],M=g?g(y.internal.interaction):y.internal.interaction;for(let E=0;E<M.length;E++){const N=Uh(M[E]);N&&(N.raycaster.camera=void 0)}y.previousRoot||y.events.compute==null||y.events.compute(m,y);function A(E){const N=Uh(E);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var L;N.events.compute==null||N.events.compute(m,N,(L=N.previousRoot)==null?void 0:L.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(E,!0):[]}let R=M.flatMap(A).sort((E,N)=>{const L=Uh(E.object),U=Uh(N.object);return!L||!U?E.distance-N.distance:U.events.priority-L.events.priority||E.distance-N.distance}).filter(E=>{const N=rv(E);return _.has(N)?!1:(_.add(N),!0)});y.events.filter&&(R=y.events.filter(R,y));for(const E of R){let N=E.object;for(;N;){var w;(w=N.__r3f)!=null&&w.eventCount&&b.push({...E,eventObject:N}),N=N.parent}}if("pointerId"in m&&y.internal.capturedMap.has(m.pointerId))for(let E of y.internal.capturedMap.get(m.pointerId).values())_.has(rv(E.intersection))||b.push(E.intersection);return b}function s(m,g,y,_){if(m.length){const b={stopped:!1};for(const M of m){let A=Uh(M.object);if(A||M.object.traverseAncestors(R=>{const w=Uh(R);if(w)return A=w,!1}),A){const{raycaster:R,pointer:w,camera:E,internal:N}=A,L=new Y(w.x,w.y,0).unproject(E),U=I=>{var P,q;return(P=(q=N.capturedMap.get(I))==null?void 0:q.has(M.eventObject))!=null?P:!1},B=I=>{const P={intersection:M,target:g.target};N.capturedMap.has(I)?N.capturedMap.get(I).set(M.eventObject,P):N.capturedMap.set(I,new Map([[M.eventObject,P]])),g.target.setPointerCapture(I)},z=I=>{const P=N.capturedMap.get(I);P&&eA(N.capturedMap,M.eventObject,P,I)};let H={};for(let I in g){let P=g[I];typeof P!="function"&&(H[I]=P)}let j={...M,...H,pointer:w,intersections:m,stopped:b.stopped,delta:y,unprojectedPoint:L,ray:R.ray,camera:E,stopPropagation(){const I="pointerId"in g&&N.capturedMap.get(g.pointerId);if((!I||I.has(M.eventObject))&&(j.stopped=b.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(P=>P.eventObject===M.eventObject))){const P=m.slice(0,m.indexOf(M));c([...P,M])}},target:{hasPointerCapture:U,setPointerCapture:B,releasePointerCapture:z},currentTarget:{hasPointerCapture:U,setPointerCapture:B,releasePointerCapture:z},nativeEvent:g};if(_(j),b.stopped===!0)break}}}return m}function c(m){const{internal:g}=r.getState();for(const y of g.hovered.values())if(!m.length||!m.find(_=>_.object===y.object&&_.index===y.index&&_.instanceId===y.instanceId)){const b=y.eventObject.__r3f;if(g.hovered.delete(rv(y)),b!=null&&b.eventCount){const M=b.handlers,A={...y,intersections:m};M.onPointerOut==null||M.onPointerOut(A),M.onPointerLeave==null||M.onPointerLeave(A)}}}function f(m,g){for(let y=0;y<g.length;y++){const _=g[y].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(m)}}function h(m){switch(m){case"onPointerLeave":case"onPointerCancel":return()=>c([]);case"onLostPointerCapture":return g=>{const{internal:y}=r.getState();"pointerId"in g&&y.capturedMap.has(g.pointerId)&&requestAnimationFrame(()=>{y.capturedMap.has(g.pointerId)&&(y.capturedMap.delete(g.pointerId),c([]))})}}return function(y){const{onPointerMissed:_,internal:b}=r.getState();b.lastEvent.current=y;const M=m==="onPointerMove",A=m==="onClick"||m==="onContextMenu"||m==="onDoubleClick",w=i(y,M?t:void 0),E=A?e(y):0;m==="onPointerDown"&&(b.initialClick=[y.offsetX,y.offsetY],b.initialHits=w.map(L=>L.eventObject)),A&&!w.length&&E<=2&&(f(y,b.interaction),_&&_(y)),M&&c(w);function N(L){const U=L.eventObject,B=U.__r3f;if(!(B!=null&&B.eventCount))return;const z=B.handlers;if(M){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const H=rv(L),j=b.hovered.get(H);j?j.stopped&&L.stopPropagation():(b.hovered.set(H,L),z.onPointerOver==null||z.onPointerOver(L),z.onPointerEnter==null||z.onPointerEnter(L))}z.onPointerMove==null||z.onPointerMove(L)}else{const H=z[m];H?(!A||b.initialHits.includes(U))&&(f(y,b.interaction.filter(j=>!b.initialHits.includes(j))),H(L)):A&&b.initialHits.includes(U)&&f(y,b.interaction.filter(j=>!b.initialHits.includes(j)))}}s(w,y,E,N)}}return{handlePointer:h}}const BM=r=>!!(r!=null&&r.render),tA=Oe.createContext(null),XO=(r,e)=>{const t=TO((h,m)=>{const g=new Y,y=new Y,_=new Y;function b(E=m().camera,N=y,L=m().size){const{width:U,height:B,top:z,left:H}=L,j=U/B;N.isVector3?_.copy(N):_.set(...N);const I=E.getWorldPosition(g).distanceTo(_);if(QT(E))return{width:U/E.zoom,height:B/E.zoom,top:z,left:H,factor:1,distance:I,aspect:j};{const P=E.fov*Math.PI/180,q=2*Math.tan(P/2)*I,se=q*(U/B);return{width:se,height:q,top:z,left:H,factor:U/se,distance:I,aspect:j}}}let M;const A=E=>h(N=>({performance:{...N.performance,current:E}})),R=new Fe;return{set:h,get:m,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>r(m(),E),advance:(E,N)=>e(E,N,m()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qb,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=m();M&&clearTimeout(M),E.performance.current!==E.performance.min&&A(E.performance.min),M=setTimeout(()=>A(m().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:E=>h(N=>({...N,events:{...N.events,...E}})),setSize:(E,N,L=0,U=0)=>{const B=m().camera,z={width:E,height:N,top:L,left:U};h(H=>({size:z,viewport:{...H.viewport,...b(B,y,z)}}))},setDpr:E=>h(N=>{const L=KT(E);return{viewport:{...N.viewport,dpr:L,initialDpr:N.viewport.initialDpr||L}}}),setFrameloop:(E="always")=>{const N=m().clock;N.stop(),N.elapsedTime=0,E!=="never"&&(N.start(),N.elapsedTime=0),h(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Oe.createRef(),active:!1,frames:0,priority:0,subscribe:(E,N,L)=>{const U=m().internal;return U.priority=U.priority+(N>0?1:0),U.subscribers.push({ref:E,priority:N,store:L}),U.subscribers=U.subscribers.sort((B,z)=>B.priority-z.priority),()=>{const B=m().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(N>0?1:0),B.subscribers=B.subscribers.filter(z=>z.ref!==E))}}}}}),i=t.getState();let s=i.size,c=i.viewport.dpr,f=i.camera;return t.subscribe(()=>{const{camera:h,size:m,viewport:g,gl:y,set:_}=t.getState();if(m.width!==s.width||m.height!==s.height||g.dpr!==c){s=m,c=g.dpr,HO(h,m),g.dpr>0&&y.setPixelRatio(g.dpr);const b=typeof HTMLCanvasElement<"u"&&y.domElement instanceof HTMLCanvasElement;y.setSize(m.width,m.height,b)}h!==f&&(f=h,_(b=>({viewport:{...b.viewport,...b.viewport.getCurrentViewport(h)}})))}),t.subscribe(h=>r(h)),t};function nA(){const r=Oe.useContext(tA);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Hh(r=t=>t,e){return nA()(r,e)}function eS(r,e=0){const t=nA(),i=t.getState().internal.subscribe,s=JT(r);return Dm(()=>i(s,e,t),[e,i,t]),null}const jO=1,qO=8,YO=32,ZO=2;var QO={version:"9.5.0"};function JO(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var FM={exports:{}},kM={exports:{}},VM;function KO(){return VM||(VM=1,(function(r){r.exports=function(e){function t(o,l,p,v){return new Rd(o,l,p,v)}function i(){}function s(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}function f(o){if(c(o)!==o)throw Error(s(188))}function h(o){var l=o.alternate;if(!l){if(l=c(o),l===null)throw Error(s(188));return l!==o?null:o}for(var p=o,v=l;;){var T=p.return;if(T===null)break;var C=T.alternate;if(C===null){if(v=T.return,v!==null){p=v;continue}break}if(T.child===C.child){for(C=T.child;C;){if(C===p)return f(T),o;if(C===v)return f(T),l;C=C.sibling}throw Error(s(188))}if(p.return!==v.return)p=T,v=C;else{for(var F=!1,$=T.child;$;){if($===p){F=!0,p=T,v=C;break}if($===v){F=!0,v=T,p=C;break}$=$.sibling}if(!F){for($=C.child;$;){if($===p){F=!0,p=C,v=T;break}if($===v){F=!0,v=C,p=T;break}$=$.sibling}if(!F)throw Error(s(189))}}if(p.alternate!==v)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?o:l}function m(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=m(o),l!==null)return l;o=o.sibling}return null}function g(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(l=g(o),l!==null))return l;o=o.sibling}return null}function y(o){return o===null||typeof o!="object"?null:(o=Dr&&o[Dr]||o["@@iterator"],typeof o=="function"?o:null)}function _(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===mo?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case nl:return"Fragment";case sl:return"Profiler";case il:return"StrictMode";case If:return"Suspense";case Nr:return"SuspenseList";case cu:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case tl:return"Portal";case fa:return o.displayName||"Context";case lu:return(o._context.displayName||"Context")+".Consumer";case Jl:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Of:return l=o.displayName||null,l!==null?l:_(o.type)||"Memo";case us:l=o._payload,o=o._init;try{return _(o(l))}catch{}}return null}function b(o){return{current:o}}function M(o){0>cl||(o.current=Yf[cl],Yf[cl]=null,cl--)}function A(o,l){cl++,Yf[cl]=o.current,o.current=l}function R(o){return o>>>=0,o===0?32:31-(Zf(o)/Zg|0)|0}function w(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function E(o,l,p){var v=o.pendingLanes;if(v===0)return 0;var T=0,C=o.suspendedLanes,F=o.pingedLanes;o=o.warmLanes;var $=v&134217727;return $!==0?(v=$&~C,v!==0?T=w(v):(F&=$,F!==0?T=w(F):p||(p=$&~o,p!==0&&(T=w(p))))):($=v&~C,$!==0?T=w($):F!==0?T=w(F):p||(p=v&~o,p!==0&&(T=w(p)))),T===0?0:l!==0&&l!==T&&(l&C)===0&&(C=T&-T,p=l&-l,C>=p||C===32&&(p&4194048)!==0)?l:T}function N(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function L(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var o=sc;return sc<<=1,(sc&62914560)===0&&(sc=4194304),o}function B(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}function z(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function H(o,l,p,v,T,C){var F=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var $=o.entanglements,Me=o.expirationTimes,ke=o.hiddenUpdates;for(p=F&~p;0<p;){var tt=31-Es(p),Ge=1<<tt;$[tt]=0,Me[tt]=-1;var mt=ke[tt];if(mt!==null)for(ke[tt]=null,tt=0;tt<mt.length;tt++){var jt=mt[tt];jt!==null&&(jt.lane&=-536870913)}p&=~Ge}v!==0&&j(o,v,0),C!==0&&T===0&&o.tag!==0&&(o.suspendedLanes|=C&~(F&~l))}function j(o,l,p){o.pendingLanes|=l,o.suspendedLanes&=~l;var v=31-Es(l);o.entangledLanes|=l,o.entanglements[v]=o.entanglements[v]|1073741824|p&261930}function I(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var v=31-Es(p),T=1<<v;T&l|o[v]&l&&(o[v]|=l),p&=~T}}function P(o,l){var p=l&-l;return p=(p&42)!==0?1:q(p),(p&(o.suspendedLanes|l))!==0?0:p}function q(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function se(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ee(o){if(typeof pp=="function"&&Kg(o),Ts&&typeof Ts.setStrictMode=="function")try{Ts.setStrictMode(fl,o)}catch{}}function de(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}function oe(o){if(th===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);th=l&&l[1]||"",sr=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+th+o+sr}function Q(o,l){if(!o||xu)return"";xu=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(jt){var mt=jt}Reflect.construct(o,[],Ge)}else{try{Ge.call()}catch(jt){mt=jt}o.call(Ge.prototype)}}else{try{throw Error()}catch(jt){mt=jt}(Ge=o())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(jt){if(jt&&mt&&typeof jt.stack=="string")return[jt.stack,mt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),F=C[0],$=C[1];if(F&&$){var Me=F.split(`
`),ke=$.split(`
`);for(T=v=0;v<Me.length&&!Me[v].includes("DetermineComponentFrameRoot");)v++;for(;T<ke.length&&!ke[T].includes("DetermineComponentFrameRoot");)T++;if(v===Me.length||T===ke.length)for(v=Me.length-1,T=ke.length-1;1<=v&&0<=T&&Me[v]!==ke[T];)T--;for(;1<=v&&0<=T;v--,T--)if(Me[v]!==ke[T]){if(v!==1||T!==1)do if(v--,T--,0>T||Me[v]!==ke[T]){var tt=`
`+Me[v].replace(" at new "," at ");return o.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",o.displayName)),tt}while(1<=v&&0<=T);break}}}finally{xu=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?oe(p):""}function J(o,l){switch(o.tag){case 26:case 27:case 5:return oe(o.type);case 16:return oe("Lazy");case 13:return o.child!==l&&l!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Q(o.type,!1);case 11:return Q(o.type.render,!1);case 1:return Q(o.type,!0);case 31:return oe("Activity");default:return""}}function fe(o){try{var l="",p=null;do l+=J(o,p),p=o,o=o.return;while(o);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function we(o,l){if(typeof o=="object"&&o!==null){var p=mp.get(o);return p!==void 0?p:(l={value:o,source:l,stack:fe(l)},mp.set(o,l),l)}return{value:o,source:l,stack:fe(l)}}function Ce(o,l){Ir[ar++]=yu,Ir[ar++]=On,On=o,yu=l}function X(o,l,p){pa[qs++]=Yi,pa[qs++]=Ia,pa[qs++]=ma,ma=o;var v=Yi;o=Ia;var T=32-Es(v)-1;v&=~(1<<T),p+=1;var C=32-Es(l)+T;if(30<C){var F=T-T%5;C=(v&(1<<F)-1).toString(32),v>>=F,T-=F,Yi=1<<32-Es(l)+T|p<<T|v,Ia=C+o}else Yi=1<<C|p<<T|v,Ia=o}function re(o){o.return!==null&&(Ce(o,1),X(o,1,0))}function _e(o){for(;o===On;)On=Ir[--ar],Ir[ar]=null,yu=Ir[--ar],Ir[ar]=null;for(;o===ma;)ma=pa[--qs],pa[qs]=null,Ia=pa[--qs],pa[qs]=null,Yi=pa[--qs],pa[qs]=null}function Pe(o,l){pa[qs++]=Yi,pa[qs++]=Ia,pa[qs++]=ma,Yi=l.id,Ia=l.overflow,ma=o}function it(o,l){A(Zi,l),A(Or,o),A(ki,null),o=fg(l),M(ki),A(ki,o)}function he(){M(ki),M(Or),M(Zi)}function Ae(o){o.memoizedState!==null&&A(_u,o);var l=ki.current,p=ec(l,o.type);l!==p&&(A(Or,o),A(ki,p))}function qe(o){Or.current===o&&(M(ki),M(Or)),_u.current===o&&(M(_u),ui?ol._currentValue=rl:ol._currentValue2=rl)}function nt(o){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Be(we(l,o)),nh}function $e(o,l){if(!Zn)throw Error(s(175));zg(o.stateNode,o.type,o.memoizedProps,l,o)||nt(o,!0)}function xt(o){for(Ni=o.return;Ni;)switch(Ni.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Ni=Ni.return}}function Wt(o){if(!Zn||o!==Ni)return!1;if(!un)return xt(o),un=!0,!1;var l=o.tag;if(Ri?l!==3&&l!==27&&(l!==5||ic(o.type)&&!fs(o.type,o.memoizedProps))&&Qn&&nt(o):l!==3&&(l!==5||ic(o.type)&&!fs(o.type,o.memoizedProps))&&Qn&&nt(o),xt(o),l===13){if(!Zn)throw Error(s(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Qn=ip(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Qn=Fg(o)}else Qn=Ri&&l===27?Rg(o.type,Qn):Ni?Cg(o.stateNode):null;return!0}function Tt(){Zn&&(Qn=Ni=null,un=!1)}function Ne(){var o=rr;return o!==null&&(Cs===null?Cs=o:Cs.push.apply(Cs,o),rr=null),o}function Be(o){rr===null?rr=[o]:rr.push(o)}function Le(o,l,p){ui?(A(ga,l._currentValue),l._currentValue=p):(A(ga,l._currentValue2),l._currentValue2=p)}function Ye(o){var l=ga.current;ui?o._currentValue=l:o._currentValue2=l,M(ga)}function Z(o,l,p){for(;o!==null;){var v=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),o===p)break;o=o.return}}function St(o,l,p,v){var T=o.child;for(T!==null&&(T.return=o);T!==null;){var C=T.dependencies;if(C!==null){var F=T.child;C=C.firstContext;e:for(;C!==null;){var $=C;C=T;for(var Me=0;Me<l.length;Me++)if($.context===l[Me]){C.lanes|=p,$=C.alternate,$!==null&&($.lanes|=p),Z(C.return,p,o),v||(F=null);break e}C=$.next}}else if(T.tag===18){if(F=T.return,F===null)throw Error(s(341));F.lanes|=p,C=F.alternate,C!==null&&(C.lanes|=p),Z(F,p,o),F=null}else F=T.child;if(F!==null)F.return=T;else for(F=T;F!==null;){if(F===o){F=null;break}if(T=F.sibling,T!==null){T.return=F.return,F=T;break}F=F.return}T=F}}function st(o,l,p,v){o=null;for(var T=l,C=!1;T!==null;){if(!C){if((T.flags&524288)!==0)C=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var F=T.alternate;if(F===null)throw Error(s(387));if(F=F.memoizedProps,F!==null){var $=T.type;hi(T.pendingProps.value,F.value)||(o!==null?o.push($):o=[$])}}else if(T===_u.current){if(F=T.alternate,F===null)throw Error(s(387));F.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(o!==null?o.push(ol):o=[ol])}T=T.return}o!==null&&St(l,o,p,v),l.flags|=262144}function At(o){for(o=o.firstContext;o!==null;){var l=o.context;if(!hi(ui?l._currentValue:l._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function Xe(o){kn=o,Oa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function G(o){return ne(kn,o)}function O(o,l){return kn===null&&Xe(o),ne(o,l)}function ne(o,l){var p=ui?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:p,next:null},Oa===null){if(o===null)throw Error(s(308));Oa=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Oa=Oa.next=l;return p}function Se(){return{controller:new $g,data:new Map,refCount:0}}function De(o){o.refCount--,o.refCount===0&&Vi(sy,function(){o.controller.abort()})}function Ee(){}function ht(o){o!==Nn&&o.next===null&&(Nn===null?bu=Nn=o:Nn=Nn.next=o),va=!0,is||(is=!0,ft())}function Ke(o,l){if(!ih&&va){ih=!0;do for(var p=!1,v=bu;v!==null;){if(o!==0){var T=v.pendingLanes;if(T===0)var C=0;else{var F=v.suspendedLanes,$=v.pingedLanes;C=(1<<31-Es(42|o)+1)-1,C&=T&~(F&~$),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,dt(v,C))}else C=fn,C=E(v,v===nn?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==Ms),(C&3)===0||N(v,C)||(p=!0,dt(v,C));v=v.next}while(p);ih=!1}}function yt(){Dt()}function Dt(){va=is=!1;var o=0;_o!==0&&al()&&(o=_o);for(var l=ns(),p=null,v=bu;v!==null;){var T=v.next,C=Ve(v,l);C===0?(v.next=null,p===null?bu=T:p.next=T,T===null&&(Nn=p)):(p=v,(o!==0||(C&3)!==0)&&(va=!0)),v=T}Mi!==0&&Mi!==5||Ke(o),_o!==0&&(_o=0)}function Ve(o,l){for(var p=o.suspendedLanes,v=o.pingedLanes,T=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var F=31-Es(C),$=1<<F,Me=T[F];Me===-1?(($&p)===0||($&v)!==0)&&(T[F]=L($,l)):Me<=l&&(o.expiredLanes|=$),C&=~$}if(l=nn,p=fn,p=E(o,o===l?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Ms),v=o.callbackNode,p===0||o===l&&(Ln===2||Ln===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&Jf(v),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||N(o,p)){if(l=p&-p,l===o.callbackPriority)return l;switch(v!==null&&Jf(v),se(p)){case 2:case 8:p=Jg;break;case 32:p=vu;break;case 268435456:p=$f;break;default:p=vu}return v=Ze.bind(null,o),p=gu(p,v),o.callbackPriority=l,o.callbackNode=p,l}return v!==null&&v!==null&&Jf(v),o.callbackPriority=2,o.callbackNode=null,2}function Ze(o,l){if(Mi!==0&&Mi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(tr()&&o.callbackNode!==p)return null;var v=fn;return v=E(o,o===nn?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==Ms),v===0?null:(Ua(o,v,l),Ve(o,ns()),o.callbackNode!=null&&o.callbackNode===p?Ze.bind(null,o):null)}function dt(o,l){if(tr())return null;Ua(o,l,!0)}function ft(){Vd?Hd(function(){(on&6)!==0?gu(Kf,yt):Dt()}):gu(Kf,yt)}function at(){if(_o===0){var o=Pr;o===0&&(o=Qf,Qf<<=1,(Qf&261888)===0&&(Qf=256)),_o=o}return _o}function Jt(o,l){if(ac===null){var p=ac=[];gp=0,Pr=at(),Di={status:"pending",value:void 0,then:function(v){p.push(v)}}}return gp++,l.then(ie,ie),l}function ie(){if(--gp===0&&ac!==null){Di!==null&&(Di.status="fulfilled");var o=ac;ac=null,Pr=0,Di=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function rt(o,l){var p=[],v={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return o.then(function(){v.status="fulfilled",v.value=l;for(var T=0;T<p.length;T++)(0,p[T])(l)},function(T){for(v.status="rejected",v.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),v}function je(){var o=bo.current;return o!==null?o:nn.pooledCache}function lt(o,l){l===null?A(bo,bo.current):A(bo,l.pool)}function He(){var o=je();return o===null?null:{parent:ui?Jn._currentValue:Jn._currentValue2,pool:o}}function Ie(o,l){if(hi(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var p=Object.keys(o),v=Object.keys(l);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var T=p[v];if(!iy.call(l,T)||!hi(o[T],l[T]))return!1}return!0}function et(o){return o=o.status,o==="fulfilled"||o==="rejected"}function kt(o,l,p){switch(p=o[p],p===void 0?o.push(l):p!==l&&(l.then(Ee,Ee),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ji(o),o;default:if(typeof l.status=="string")l.then(Ee,Ee);else{if(o=nn,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=l,o.status="pending",o.then(function(v){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=v}},function(v){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ji(o),o}throw ds=l,Li}}function pn(o){try{var l=o._init;return l(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(ds=p,Li):p}}function vn(){if(ds===null)throw Error(s(459));var o=ds;return ds=null,o}function ji(o){if(o===Li||o===ya)throw Error(s(483))}function xs(o){var l=hl;return hl+=1,So===null&&(So=[]),kt(So,o,l)}function Jr(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Kr(o,l){throw l.$$typeof===el?Error(s(525)):(o=Object.prototype.toString.call(l),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Vo(o){function l(ve,ue){if(o){var be=ve.deletions;be===null?(ve.deletions=[ue],ve.flags|=16):be.push(ue)}}function p(ve,ue){if(!o)return null;for(;ue!==null;)l(ve,ue),ue=ue.sibling;return null}function v(ve){for(var ue=new Map;ve!==null;)ve.key!==null?ue.set(ve.key,ve):ue.set(ve.index,ve),ve=ve.sibling;return ue}function T(ve,ue){return ve=Xs(ve,ue),ve.index=0,ve.sibling=null,ve}function C(ve,ue,be){return ve.index=be,o?(be=ve.alternate,be!==null?(be=be.index,be<ue?(ve.flags|=67108866,ue):be):(ve.flags|=67108866,ue)):(ve.flags|=1048576,ue)}function F(ve){return o&&ve.alternate===null&&(ve.flags|=67108866),ve}function $(ve,ue,be,Je){return ue===null||ue.tag!==6?(ue=Nd(be,ve.mode,Je),ue.return=ve,ue):(ue=T(ue,be),ue.return=ve,ue)}function Me(ve,ue,be,Je){var It=be.type;return It===nl?tt(ve,ue,be.props.children,Je,be.key):ue!==null&&(ue.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===us&&pn(It)===ue.type)?(ue=T(ue,be.props),Jr(ue,be),ue.return=ve,ue):(ue=Rr(be.type,be.key,be.props,null,ve.mode,Je),Jr(ue,be),ue.return=ve,ue)}function ke(ve,ue,be,Je){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==be.containerInfo||ue.stateNode.implementation!==be.implementation?(ue=Ld(be,ve.mode,Je),ue.return=ve,ue):(ue=T(ue,be.children||[]),ue.return=ve,ue)}function tt(ve,ue,be,Je,It){return ue===null||ue.tag!==7?(ue=ua(be,ve.mode,Je,It),ue.return=ve,ue):(ue=T(ue,be),ue.return=ve,ue)}function Ge(ve,ue,be){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Nd(""+ue,ve.mode,be),ue.return=ve,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case nr:return be=Rr(ue.type,ue.key,ue.props,null,ve.mode,be),Jr(be,ue),be.return=ve,be;case tl:return ue=Ld(ue,ve.mode,be),ue.return=ve,ue;case us:return ue=pn(ue),Ge(ve,ue,be)}if(go(ue)||y(ue))return ue=ua(ue,ve.mode,be,null),ue.return=ve,ue;if(typeof ue.then=="function")return Ge(ve,xs(ue),be);if(ue.$$typeof===fa)return Ge(ve,O(ve,ue),be);Kr(ve,ue)}return null}function mt(ve,ue,be,Je){var It=ue!==null?ue.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return It!==null?null:$(ve,ue,""+be,Je);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case nr:return be.key===It?Me(ve,ue,be,Je):null;case tl:return be.key===It?ke(ve,ue,be,Je):null;case us:return be=pn(be),mt(ve,ue,be,Je)}if(go(be)||y(be))return It!==null?null:tt(ve,ue,be,Je,null);if(typeof be.then=="function")return mt(ve,ue,xs(be),Je);if(be.$$typeof===fa)return mt(ve,ue,O(ve,be),Je);Kr(ve,be)}return null}function jt(ve,ue,be,Je,It){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return ve=ve.get(be)||null,$(ue,ve,""+Je,It);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case nr:return ve=ve.get(Je.key===null?be:Je.key)||null,Me(ue,ve,Je,It);case tl:return ve=ve.get(Je.key===null?be:Je.key)||null,ke(ue,ve,Je,It);case us:return Je=pn(Je),jt(ve,ue,be,Je,It)}if(go(Je)||y(Je))return ve=ve.get(be)||null,tt(ue,ve,Je,It,null);if(typeof Je.then=="function")return jt(ve,ue,be,xs(Je),It);if(Je.$$typeof===fa)return jt(ve,ue,be,O(ue,Je),It);Kr(ue,Je)}return null}function mi(ve,ue,be,Je){for(var It=null,ai=null,Pt=ue,yn=ue=0,Hi=null;Pt!==null&&yn<be.length;yn++){Pt.index>yn?(Hi=Pt,Pt=null):Hi=Pt.sibling;var En=mt(ve,Pt,be[yn],Je);if(En===null){Pt===null&&(Pt=Hi);break}o&&Pt&&En.alternate===null&&l(ve,Pt),ue=C(En,ue,yn),ai===null?It=En:ai.sibling=En,ai=En,Pt=Hi}if(yn===be.length)return p(ve,Pt),un&&Ce(ve,yn),It;if(Pt===null){for(;yn<be.length;yn++)Pt=Ge(ve,be[yn],Je),Pt!==null&&(ue=C(Pt,ue,yn),ai===null?It=Pt:ai.sibling=Pt,ai=Pt);return un&&Ce(ve,yn),It}for(Pt=v(Pt);yn<be.length;yn++)Hi=jt(Pt,ve,yn,be[yn],Je),Hi!==null&&(o&&Hi.alternate!==null&&Pt.delete(Hi.key===null?yn:Hi.key),ue=C(Hi,ue,yn),ai===null?It=Hi:ai.sibling=Hi,ai=Hi);return o&&Pt.forEach(function(Sa){return l(ve,Sa)}),un&&Ce(ve,yn),It}function dc(ve,ue,be,Je){if(be==null)throw Error(s(151));for(var It=null,ai=null,Pt=ue,yn=ue=0,Hi=null,En=be.next();Pt!==null&&!En.done;yn++,En=be.next()){Pt.index>yn?(Hi=Pt,Pt=null):Hi=Pt.sibling;var Sa=mt(ve,Pt,En.value,Je);if(Sa===null){Pt===null&&(Pt=Hi);break}o&&Pt&&Sa.alternate===null&&l(ve,Pt),ue=C(Sa,ue,yn),ai===null?It=Sa:ai.sibling=Sa,ai=Sa,Pt=Hi}if(En.done)return p(ve,Pt),un&&Ce(ve,yn),It;if(Pt===null){for(;!En.done;yn++,En=be.next())En=Ge(ve,En.value,Je),En!==null&&(ue=C(En,ue,yn),ai===null?It=En:ai.sibling=En,ai=En);return un&&Ce(ve,yn),It}for(Pt=v(Pt);!En.done;yn++,En=be.next())En=jt(Pt,ve,yn,En.value,Je),En!==null&&(o&&En.alternate!==null&&Pt.delete(En.key===null?yn:En.key),ue=C(En,ue,yn),ai===null?It=En:ai.sibling=En,ai=En);return o&&Pt.forEach(function(ay){return l(ve,ay)}),un&&Ce(ve,yn),It}function No(ve,ue,be,Je){if(typeof be=="object"&&be!==null&&be.type===nl&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case nr:e:{for(var It=be.key;ue!==null;){if(ue.key===It){if(It=be.type,It===nl){if(ue.tag===7){p(ve,ue.sibling),Je=T(ue,be.props.children),Je.return=ve,ve=Je;break e}}else if(ue.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===us&&pn(It)===ue.type){p(ve,ue.sibling),Je=T(ue,be.props),Jr(Je,be),Je.return=ve,ve=Je;break e}p(ve,ue);break}else l(ve,ue);ue=ue.sibling}be.type===nl?(Je=ua(be.props.children,ve.mode,Je,be.key),Je.return=ve,ve=Je):(Je=Rr(be.type,be.key,be.props,null,ve.mode,Je),Jr(Je,be),Je.return=ve,ve=Je)}return F(ve);case tl:e:{for(It=be.key;ue!==null;){if(ue.key===It)if(ue.tag===4&&ue.stateNode.containerInfo===be.containerInfo&&ue.stateNode.implementation===be.implementation){p(ve,ue.sibling),Je=T(ue,be.children||[]),Je.return=ve,ve=Je;break e}else{p(ve,ue);break}else l(ve,ue);ue=ue.sibling}Je=Ld(be,ve.mode,Je),Je.return=ve,ve=Je}return F(ve);case us:return be=pn(be),No(ve,ue,be,Je)}if(go(be))return mi(ve,ue,be,Je);if(y(be)){if(It=y(be),typeof It!="function")throw Error(s(150));return be=It.call(be),dc(ve,ue,be,Je)}if(typeof be.then=="function")return No(ve,ue,xs(be),Je);if(be.$$typeof===fa)return No(ve,ue,O(ve,be),Je);Kr(ve,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,ue!==null&&ue.tag===6?(p(ve,ue.sibling),Je=T(ue,be),Je.return=ve,ve=Je):(p(ve,ue),Je=Nd(be,ve.mode,Je),Je.return=ve,ve=Je),F(ve)):p(ve,ue)}return function(ve,ue,be,Je){try{hl=0;var It=No(ve,ue,be,Je);return So=null,It}catch(Pt){if(Pt===Li||Pt===ya)throw Pt;var ai=t(29,Pt,null,ve.mode);return ai.lanes=Je,ai.return=ve,ai}}}function $r(){for(var o=lr,l=dl=lr=0;l<o;){var p=Ji[l];Ji[l++]=null;var v=Ji[l];Ji[l++]=null;var T=Ji[l];Ji[l++]=null;var C=Ji[l];if(Ji[l++]=null,v!==null&&T!==null){var F=v.pending;F===null?T.next=T:(T.next=F.next,F.next=T),v.pending=T}C!==0&&Bs(p,T,C)}}function yr(o,l,p,v){Ji[lr++]=o,Ji[lr++]=l,Ji[lr++]=p,Ji[lr++]=v,dl|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function Ho(o,l,p,v){return yr(o,l,p,v),Kn(o)}function es(o,l){return yr(o,null,null,l),Kn(o)}function Bs(o,l,p){o.lanes|=p;var v=o.alternate;v!==null&&(v.lanes|=p);for(var T=!1,C=o.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(T=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,T&&l!==null&&(T=31-Es(p),o=C.hiddenUpdates,v=o[T],v===null?o[T]=[l]:v.push(l),l.lane=p|536870912),C):null}function Kn(o){if(50<Mn)throw Mn=0,wu=null,Error(s(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}function Ai(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fs(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ks(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Vs(o,l,p){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(on&2)!==0){var T=v.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),v.pending=l,l=Kn(o),Bs(o,null,p),l}return yr(o,v,l,p),Kn(o)}function eo(o,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var v=l.lanes;v&=o.pendingLanes,p|=v,l.lanes=p,I(o,p)}}function Go(o,l){var p=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var T=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var F={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?T=C=F:C=C.next=F,p=p.next}while(p!==null);C===null?T=C=l:C=C.next=l}else T=C=l;p={baseState:v.baseState,firstBaseUpdate:T,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function Da(){if(ah){var o=Di;if(o!==null)throw o}}function _r(o,l,p,v){ah=!1;var T=o.updateQueue;Ys=!1;var C=T.firstBaseUpdate,F=T.lastBaseUpdate,$=T.shared.pending;if($!==null){T.shared.pending=null;var Me=$,ke=Me.next;Me.next=null,F===null?C=ke:F.next=ke,F=Me;var tt=o.alternate;tt!==null&&(tt=tt.updateQueue,$=tt.lastBaseUpdate,$!==F&&($===null?tt.firstBaseUpdate=ke:$.next=ke,tt.lastBaseUpdate=Me))}if(C!==null){var Ge=T.baseState;F=0,tt=ke=Me=null,$=C;do{var mt=$.lane&-536870913,jt=mt!==$.lane;if(jt?(fn&mt)===mt:(v&mt)===mt){mt!==0&&mt===Pr&&(ah=!0),tt!==null&&(tt=tt.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var mi=o,dc=$;mt=l;var No=p;switch(dc.tag){case 1:if(mi=dc.payload,typeof mi=="function"){Ge=mi.call(No,Ge,mt);break e}Ge=mi;break e;case 3:mi.flags=mi.flags&-65537|128;case 0:if(mi=dc.payload,mt=typeof mi=="function"?mi.call(No,Ge,mt):mi,mt==null)break e;Ge=Uf({},Ge,mt);break e;case 2:Ys=!0}}mt=$.callback,mt!==null&&(o.flags|=64,jt&&(o.flags|=8192),jt=T.callbacks,jt===null?T.callbacks=[mt]:jt.push(mt))}else jt={lane:mt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},tt===null?(ke=tt=jt,Me=Ge):tt=tt.next=jt,F|=mt;if($=$.next,$===null){if($=T.shared.pending,$===null)break;jt=$,$=jt.next,jt.next=null,T.lastBaseUpdate=jt,T.shared.pending=null}}while(!0);tt===null&&(Me=Ge),T.baseState=Me,T.firstBaseUpdate=ke,T.lastBaseUpdate=tt,C===null&&(T.shared.lanes=0),Br|=F,o.lanes=F,o.memoizedState=Ge}}function br(o,l){if(typeof o!="function")throw Error(s(191,o));o.call(l)}function Sr(o,l){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)br(p[o],l)}function to(o,l){o=ur,A(Mo,o),A(pl,l),ur=o|l.baseLanes}function Ga(){A(Mo,ur),A(pl,pl.current)}function k(){ur=Mo.current,M(pl),M(Mo)}function ae(o){var l=o.alternate;A(oi,oi.current&1),A(As,o),ws===null&&(l===null||pl.current!==null||l.memoizedState!==null)&&(ws=o)}function ye(o){A(oi,oi.current),A(As,o),ws===null&&(ws=o)}function ge(o){o.tag===22?(A(oi,oi.current),A(As,o),ws===null&&(ws=o)):ce()}function ce(){A(oi,oi.current),A(As,As.current)}function Qe(o){M(As),ws===o&&(ws=null),M(oi)}function pt(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||xo(p)||Vf(p)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function We(){throw Error(s(321))}function vt(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!hi(o[p],l[p]))return!1;return!0}function _t(o,l,p,v,T,C){return zr=C,Yt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Lt.H=o===null||o.memoizedState===null?ni:cr,mn=!1,C=p(v,T),mn=!1,Kt&&(C=Mt(l,p,v,T)),Nt(o),C}function Nt(o){Lt.H=Zs;var l=Ct!==null&&Ct.next!==null;if(zr=0,Ht=Ct=Yt=null,tn=!1,_a=0,Pa=null,l)throw Error(s(300));o===null||Xn||(o=o.dependencies,o!==null&&At(o)&&(Xn=!0))}function Mt(o,l,p,v){Yt=o;var T=0;do{if(Kt&&(Pa=null),_a=0,Kt=!1,25<=T)throw Error(s(301));if(T+=1,Ht=Ct=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}Lt.H=Eo,C=l(p,v)}while(Kt);return C}function Ot(){var o=Lt.H,l=o.useState()[0];return l=typeof l.then=="function"?zt(l):l,o=o.useState()[0],(Ct!==null?Ct.memoizedState:null)!==o&&(Yt.flags|=1024),l}function Sn(){var o=ss!==0;return ss=0,o}function zn(o,l,p){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~p}function Un(o){if(tn){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}tn=!1}zr=0,Ht=Ct=Yt=null,Kt=!1,_a=ss=0,Pa=null}function Xt(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Yt.memoizedState=Ht=o:Ht=Ht.next=o,Ht}function ot(){if(Ct===null){var o=Yt.alternate;o=o!==null?o.memoizedState:null}else o=Ct.next;var l=Ht===null?Yt.memoizedState:Ht.next;if(l!==null)Ht=l,Ct=o;else{if(o===null)throw Yt.alternate===null?Error(s(467)):Error(s(310));Ct=o,o={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ht===null?Yt.memoizedState=Ht=o:Ht=Ht.next=o}return Ht}function xn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zt(o){var l=_a;return _a+=1,Pa===null&&(Pa=[]),o=kt(Pa,o,l),l=Yt,(Ht===null?l.memoizedState:Ht.next)===null&&(l=l.alternate,Lt.H=l===null||l.memoizedState===null?ni:cr),o}function xi(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return zt(o);if(o.$$typeof===fa)return G(o)}throw Error(s(438,String(o)))}function La(o){var l=null,p=Yt.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var v=Yt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=xn(),Yt.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(o),v=0;v<o;v++)p[v]=Id;return l.index++,p}function Wn(o,l){return typeof l=="function"?l(o):l}function rs(o){var l=ot();return Tn(l,Ct,o)}function Tn(o,l,p){var v=o.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=p;var T=o.baseQueue,C=v.pending;if(C!==null){if(T!==null){var F=T.next;T.next=C.next,C.next=F}l.baseQueue=T=C,v.pending=null}if(C=o.baseState,T===null)o.memoizedState=C;else{l=T.next;var $=F=null,Me=null,ke=l,tt=!1;do{var Ge=ke.lane&-536870913;if(Ge!==ke.lane?(fn&Ge)===Ge:(zr&Ge)===Ge){var mt=ke.revertLane;if(mt===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ge===Pr&&(tt=!0);else if((zr&mt)===mt){ke=ke.next,mt===Pr&&(tt=!0);continue}else Ge={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Me===null?($=Me=Ge,F=C):Me=Me.next=Ge,Yt.lanes|=mt,Br|=mt;Ge=ke.action,mn&&p(C,Ge),C=ke.hasEagerState?ke.eagerState:p(C,Ge)}else mt={lane:Ge,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Me===null?($=Me=mt,F=C):Me=Me.next=mt,Yt.lanes|=Ge,Br|=Ge;ke=ke.next}while(ke!==null&&ke!==l);if(Me===null?F=C:Me.next=$,!hi(C,o.memoizedState)&&(Xn=!0,tt&&(p=Di,p!==null)))throw p;o.memoizedState=C,o.baseState=F,o.baseQueue=Me,v.lastRenderedState=C}return T===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function wi(o){var l=ot(),p=l.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var v=p.dispatch,T=p.pending,C=l.memoizedState;if(T!==null){p.pending=null;var F=T=T.next;do C=o(C,F.action),F=F.next;while(F!==T);hi(C,l.memoizedState)||(Xn=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),p.lastRenderedState=C}return[C,v]}function yi(o,l,p){var v=Yt,T=ot(),C=un;if(C){if(p===void 0)throw Error(s(407));p=p()}else p=l();var F=!hi((Ct||T).memoizedState,p);if(F&&(T.memoizedState=p,Xn=!0),T=T.queue,Ul(Wo.bind(null,v,T,o),[o]),T.getSnapshot!==l||F||Ht!==null&&Ht.memoizedState.tag&1){if(v.flags|=2048,Hs(9,{destroy:void 0},Pi.bind(null,v,T,p,l),null),nn===null)throw Error(s(349));C||(zr&127)!==0||Oi(v,l,p)}return p}function Oi(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=Yt.updateQueue,l===null?(l=xn(),Yt.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function Pi(o,l,p,v){l.value=p,l.getSnapshot=v,sa(l)&&Um(o)}function Wo(o,l,p){return p(function(){sa(l)&&Um(o)})}function sa(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!hi(o,p)}catch{return!0}}function Um(o){var l=es(o,2);l!==null&&ei(l,o,2)}function ad(o){var l=Xt();if(typeof o=="function"){var p=o;if(o=p(),mn){ee(!0);try{p()}finally{ee(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:o},l}function Gc(o,l,p,v){return o.baseState=p,Tn(o,Ct,typeof v=="function"?v:Wn)}function Mr(o,l,p,v,T){if(df(o))throw Error(s(485));if(o=l.action,o!==null){var C={payload:T,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};Lt.T!==null?p(!0):C.isTransition=!1,v(C),p=l.pending,p===null?(C.next=l.pending=C,rf(l,C)):(C.next=p.next,l.pending=p.next=C)}}function rf(o,l){var p=l.action,v=l.payload,T=o.state;if(l.isTransition){var C=Lt.T,F={};Lt.T=F;try{var $=p(T,v),Me=Lt.S;Me!==null&&Me(F,$),of(o,l,$)}catch(ke){no(o,l,ke)}finally{C!==null&&F.types!==null&&(C.types=F.types),Lt.T=C}}else try{C=p(T,v),of(o,l,C)}catch(ke){no(o,l,ke)}}function of(o,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){Xo(o,l,v)},function(v){return no(o,l,v)}):Xo(o,l,p)}function Xo(o,l,p){l.status="fulfilled",l.value=p,rd(l),o.state=p,l=o.pending,l!==null&&(p=l.next,p===l?o.pending=null:(p=p.next,l.next=p,rf(o,p)))}function no(o,l,p){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=p,rd(l),l=l.next;while(l!==v)}o.action=null}function rd(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function lf(o,l){return l}function od(o,l){if(un){var p=nn.formState;if(p!==null){e:{var v=Yt;if(un){if(Qn){var T=wg(Qn,hs);if(T){Qn=Cg(T),v=$d(T);break e}}nt(v)}v=!1}v&&(l=p[0])}}p=Xt(),p.memoizedState=p.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lf,lastRenderedState:l},p.queue=v,p=Fm.bind(null,Yt,v),v.dispatch=p,v=ad(!1);var C=hf.bind(null,Yt,!1,v.queue);return v=Xt(),T={state:l,dispatch:null,action:o,pending:null},v.queue=T,p=Mr.bind(null,Yt,T,C,p),T.dispatch=p,v.memoizedState=o,[l,p,!1]}function Dl(o){var l=ot();return Wa(l,Ct,o)}function Wa(o,l,p){if(l=Tn(o,l,lf)[0],o=rs(Wn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=zt(l)}catch(F){throw F===Li?ya:F}else v=l;l=ot();var T=l.queue,C=T.dispatch;return p!==l.memoizedState&&(Yt.flags|=2048,Hs(9,{destroy:void 0},ld.bind(null,T,p),null)),[v,C,o]}function ld(o,l){o.action=l}function Ll(o){var l=ot(),p=Ct;if(p!==null)return Wa(l,p,o);ot(),l=l.memoizedState,p=ot();var v=p.queue.dispatch;return p.memoizedState=o,[l,v,!1]}function Hs(o,l,p,v){return o={tag:o,create:p,deps:v,inst:l,next:null},l=Yt.updateQueue,l===null&&(l=xn(),Yt.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=o.next=o:(v=p.next,p.next=o,o.next=v,l.lastEffect=o),o}function cf(){return ot().memoizedState}function jo(o,l,p,v){var T=Xt();Yt.flags|=o,T.memoizedState=Hs(1|l,{destroy:void 0},p,v===void 0?null:v)}function Wc(o,l,p,v){var T=ot();v=v===void 0?null:v;var C=T.memoizedState.inst;Ct!==null&&v!==null&&vt(v,Ct.memoizedState.deps)?T.memoizedState=Hs(l,C,p,v):(Yt.flags|=o,T.memoizedState=Hs(1|l,C,p,v))}function Xc(o,l){jo(8390656,8,o,l)}function Ul(o,l){Wc(2048,8,o,l)}function Im(o){Yt.flags|=4;var l=Yt.updateQueue;if(l===null)l=xn(),Yt.updateQueue=l,l.events=[o];else{var p=l.events;p===null?l.events=[o]:p.push(o)}}function os(o){var l=ot().memoizedState;return Im({ref:l,nextImpl:o}),function(){if((on&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function io(o,l){return Wc(4,2,o,l)}function jc(o,l){return Wc(4,4,o,l)}function Il(o,l){if(typeof l=="function"){o=o();var p=l(o);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Om(o,l,p){p=p!=null?p.concat([o]):null,Wc(4,4,Il.bind(null,l,o),p)}function qc(){}function uf(o,l){var p=ot();l=l===void 0?null:l;var v=p.memoizedState;return l!==null&&vt(l,v[1])?v[0]:(p.memoizedState=[o,l],o)}function Ol(o,l){var p=ot();l=l===void 0?null:l;var v=p.memoizedState;if(l!==null&&vt(l,v[1]))return v[0];if(v=o(),mn){ee(!0);try{o()}finally{ee(!1)}}return p.memoizedState=[v,l],v}function Pl(o,l,p){return p===void 0||(zr&1073741824)!==0&&(fn&261930)===0?o.memoizedState=l:(o.memoizedState=p,o=Ar(),Yt.lanes|=o,Br|=o,p)}function cd(o,l,p,v){return hi(p,l)?p:pl.current!==null?(o=Pl(o,p,v),hi(o,l)||(Xn=!0),o):(zr&42)===0||(zr&1073741824)!==0&&(fn&261930)===0?(Xn=!0,o.memoizedState=p):(o=Ar(),Yt.lanes|=o,Br|=o,l)}function Pm(o,l,p,v,T){var C=ha();cn(C!==0&&8>C?C:8);var F=Lt.T,$={};Lt.T=$,hf(o,!1,l,p);try{var Me=T(),ke=Lt.S;if(ke!==null&&ke($,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var tt=rt(Me,v);Yc(o,l,tt,Yn(o))}else Yc(o,l,v,Yn(o))}catch(Ge){Yc(o,l,{then:function(){},status:"rejected",reason:Ge},Yn())}finally{cn(C),F!==null&&$.types!==null&&(F.types=$.types),Lt.T=F}}function zm(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:rl,baseState:rl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:rl},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:p},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function ud(){return G(ol)}function ff(){return ot().memoizedState}function Bm(){return ot().memoizedState}function qx(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var p=Yn();o=ks(p);var v=Vs(l,o,p);v!==null&&(ei(v,l,p),eo(v,l,p)),l={cache:Se()},o.payload=l;return}l=l.return}}function Yx(o,l,p){var v=Yn();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},df(o)?km(l,p):(p=Ho(o,l,p,v),p!==null&&(ei(p,o,v),Vm(p,l,v)))}function Fm(o,l,p){var v=Yn();Yc(o,l,p,v)}function Yc(o,l,p,v){var T={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(df(o))km(l,T);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var F=l.lastRenderedState,$=C(F,p);if(T.hasEagerState=!0,T.eagerState=$,hi($,F))return yr(o,l,T,0),nn===null&&$r(),!1}catch{}if(p=Ho(o,l,T,v),p!==null)return ei(p,o,v),Vm(p,l,v),!0}return!1}function hf(o,l,p,v){if(v={lane:2,revertLane:at(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},df(o)){if(l)throw Error(s(479))}else l=Ho(o,p,v,2),l!==null&&ei(l,o,2)}function df(o){var l=o.alternate;return o===Yt||l!==null&&l===Yt}function km(o,l){Kt=tn=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function Vm(o,l,p){if((p&4194048)!==0){var v=l.lanes;v&=o.pendingLanes,p|=v,l.lanes=p,I(o,p)}}function fd(o,l,p,v){l=o.memoizedState,p=p(v,l),p=p==null?l:Uf({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}function pf(o,l,p,v,T,C,F){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,C,F):l.prototype&&l.prototype.isPureReactComponent?!Ie(p,v)||!Ie(T,C):!0}function Hm(o,l,p,v){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==o&&Su.enqueueReplaceState(l,l.state,null)}function qo(o,l){var p=l;if("ref"in l){p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}if(o=o.defaultProps){p===l&&(p=Uf({},p));for(var T in o)p[T]===void 0&&(p[T]=o[T])}return p}function mf(o,l){try{var p=o.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function hd(o,l,p){try{var v=o.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function dd(o,l,p){return p=ks(p),p.tag=3,p.payload={element:null},p.callback=function(){mf(o,l)},p}function Gm(o){return o=ks(o),o.tag=3,o}function Wm(o,l,p,v){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var C=v.value;o.payload=function(){return T(C)},o.callback=function(){hd(l,p,v)}}var F=p.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(o.callback=function(){hd(l,p,v),typeof T!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var $=v.stack;this.componentDidCatch(v.value,{componentStack:$!==null?$:""})})}function Zx(o,l,p,v,T){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=p.alternate,l!==null&&st(l,p,T,!0),p=As.current,p!==null){switch(p.tag){case 31:case 13:return ws===null?ql():p.alternate===null&&si===0&&(si=3),p.flags&=-257,p.flags|=65536,p.lanes=T,v===or?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([v]):l.add(v),Ql(o,v,T)),!1;case 22:return p.flags|=65536,v===or?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([v]):p.add(v)),Ql(o,v,T)),!1}throw Error(s(435,p.tag))}return Ql(o,v,T),ql(),!1}if(un)return l=As.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,v!==nh&&(o=Error(s(422),{cause:v}),Be(we(o,p)))):(v!==nh&&(l=Error(s(423),{cause:v}),Be(we(l,p))),o=o.current.alternate,o.flags|=65536,T&=-T,o.lanes|=T,v=we(v,p),T=dd(o.stateNode,v,T),Go(o,T),si!==4&&(si=2)),!1;var C=Error(s(520),{cause:v});if(C=we(C,p),Eu===null?Eu=[C]:Eu.push(C),si!==4&&(si=2),l===null)return!0;v=we(v,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,o=T&-T,p.lanes|=o,o=dd(p.stateNode,v,o),Go(p,o),!1;case 1:if(l=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fr===null||!Fr.has(C))))return p.flags|=65536,T&=-T,p.lanes|=T,T=Gm(T),Wm(T,o,p,v),Go(p,T),!1}p=p.return}while(p!==null);return!1}function qi(o,l,p,v){l.child=o===null?vp(l,null,p,v):Qi(l,o.child,p,v)}function Xm(o,l,p,v,T){p=p.render;var C=l.ref;if("ref"in v){var F={};for(var $ in v)$!=="ref"&&(F[$]=v[$])}else F=v;return Xe(l),v=_t(o,l,p,F,C,T),$=Sn(),o!==null&&!Xn?(zn(o,l,T),Xa(o,l,T)):(un&&$&&re(l),l.flags|=1,qi(o,l,v,T),l.child)}function jm(o,l,p,v,T){if(o===null){var C=p.type;return typeof C=="function"&&!Ko(C)&&C.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=C,qm(o,l,C,v,T)):(o=Rr(p.type,null,v,l,l.mode,T),o.ref=l.ref,o.return=l,l.child=o)}if(C=o.child,!Qc(o,T)){var F=C.memoizedProps;if(p=p.compare,p=p!==null?p:Ie,p(F,v)&&o.ref===l.ref)return Xa(o,l,T)}return l.flags|=1,o=Xs(C,v),o.ref=l.ref,o.return=l,l.child=o}function qm(o,l,p,v,T){if(o!==null){var C=o.memoizedProps;if(Ie(C,v)&&o.ref===l.ref)if(Xn=!1,l.pendingProps=v=C,Qc(o,T))(o.flags&131072)!==0&&(Xn=!0);else return l.lanes=o.lanes,Xa(o,l,T)}return vf(o,l,p,v,T)}function Ym(o,l,p,v){var T=v.children,C=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,o!==null){for(v=l.child=o.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;v=T&~C}else v=0,l.child=null;return zl(o,l,C,p,v)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&lt(l,C!==null?C.cachePool:null),C!==null?to(l,C):Ga(),ge(l);else return v=l.lanes=536870912,zl(o,l,C!==null?C.baseLanes|p:p,p,v)}else C!==null?(lt(l,C.cachePool),to(l,C),ce(),l.memoizedState=null):(o!==null&&lt(l,null),Ga(),ce());return qi(o,l,T,p),l.child}function Yo(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function zl(o,l,p,v,T){var C=je();return C=C===null?null:{parent:ui?Jn._currentValue:Jn._currentValue2,pool:C},l.memoizedState={baseLanes:p,cachePool:C},o!==null&&lt(l,null),Ga(),ge(l),o!==null&&st(o,l,v,!0),l.childLanes=T,null}function gf(o,l){return l=so({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function pd(o,l,p){return Qi(l,o.child,null,p),o=gf(l,l.pendingProps),o.flags|=2,Qe(l),l.memoizedState=null,o}function Zm(o,l,p){var v=l.pendingProps,T=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(un){if(v.mode==="hidden")return o=gf(l,v),l.lanes=536870912,Yo(null,o);if(ye(l),(o=Qn)?(o=tp(o,hs),o!==null&&(l.memoizedState={dehydrated:o,treeContext:ma!==null?{id:Yi,overflow:Ia}:null,retryLane:536870912,hydrationErrors:null},p=Dd(o),p.return=l,l.child=p,Ni=l,Qn=null)):o=null,o===null)throw nt(l);return l.lanes=536870912,null}return gf(l,v)}var C=o.memoizedState;if(C!==null){var F=C.dehydrated;if(ye(l),T)if(l.flags&256)l.flags&=-257,l=pd(o,l,p);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(s(558));else if(Xn||st(o,l,p,!1),T=(p&o.childLanes)!==0,Xn||T){if(v=nn,v!==null&&(F=P(v,p),F!==0&&F!==C.retryLane))throw C.retryLane=F,es(o,F),ei(v,o,F),ps;ql(),l=pd(o,l,p)}else o=C.treeContext,Zn&&(Qn=Lg(F),Ni=l,un=!0,rr=null,hs=!1,o!==null&&Pe(l,o)),l=gf(l,v),l.flags|=4096;return l}return o=Xs(o.child,{mode:v.mode,children:v.children}),o.ref=l.ref,l.child=o,o.return=l,o}function Zc(o,l){var p=l.ref;if(p===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(o===null||o.ref!==p)&&(l.flags|=4194816)}}function vf(o,l,p,v,T){return Xe(l),p=_t(o,l,p,v,void 0,T),v=Sn(),o!==null&&!Xn?(zn(o,l,T),Xa(o,l,T)):(un&&v&&re(l),l.flags|=1,qi(o,l,p,T),l.child)}function md(o,l,p,v,T,C){return Xe(l),l.updateQueue=null,p=Mt(l,v,p,T),Nt(o),v=Sn(),o!==null&&!Xn?(zn(o,l,C),Xa(o,l,C)):(un&&v&&re(l),l.flags|=1,qi(o,l,p,C),l.child)}function Zo(o,l,p,v,T){if(Xe(l),l.stateNode===null){var C=ir,F=p.contextType;typeof F=="object"&&F!==null&&(C=G(F)),C=new p(v,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Su,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=v,C.state=l.memoizedState,C.refs={},Ai(l),F=p.contextType,C.context=typeof F=="object"&&F!==null?G(F):ir,C.state=l.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(fd(l,p,F,v),C.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&Su.enqueueReplaceState(C,C.state,null),_r(l,v,C,T),Da(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(o===null){C=l.stateNode;var $=l.memoizedProps,Me=qo(p,$);C.props=Me;var ke=C.context,tt=p.contextType;F=ir,typeof tt=="object"&&tt!==null&&(F=G(tt));var Ge=p.getDerivedStateFromProps;tt=typeof Ge=="function"||typeof C.getSnapshotBeforeUpdate=="function",$=l.pendingProps!==$,tt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($||ke!==F)&&Hm(l,C,v,F),Ys=!1;var mt=l.memoizedState;C.state=mt,_r(l,v,C,T),Da(),ke=l.memoizedState,$||mt!==ke||Ys?(typeof Ge=="function"&&(fd(l,p,Ge,v),ke=l.memoizedState),(Me=Ys||pf(l,p,Me,v,mt,ke,F))?(tt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=ke),C.props=v,C.state=ke,C.context=F,v=Me):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{C=l.stateNode,Fs(o,l),F=l.memoizedProps,tt=qo(p,F),C.props=tt,Ge=l.pendingProps,mt=C.context,ke=p.contextType,Me=ir,typeof ke=="object"&&ke!==null&&(Me=G(ke)),$=p.getDerivedStateFromProps,(ke=typeof $=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==Ge||mt!==Me)&&Hm(l,C,v,Me),Ys=!1,mt=l.memoizedState,C.state=mt,_r(l,v,C,T),Da();var jt=l.memoizedState;F!==Ge||mt!==jt||Ys||o!==null&&o.dependencies!==null&&At(o.dependencies)?(typeof $=="function"&&(fd(l,p,$,v),jt=l.memoizedState),(tt=Ys||pf(l,p,tt,v,mt,jt,Me)||o!==null&&o.dependencies!==null&&At(o.dependencies))?(ke||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,jt,Me),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,jt,Me)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===o.memoizedProps&&mt===o.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&mt===o.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=jt),C.props=v,C.state=jt,C.context=Me,v=tt):(typeof C.componentDidUpdate!="function"||F===o.memoizedProps&&mt===o.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&mt===o.memoizedState||(l.flags|=1024),v=!1)}return C=v,Zc(o,l),v=(l.flags&128)!==0,C||v?(C=l.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,o!==null&&v?(l.child=Qi(l,o.child,null,T),l.child=Qi(l,null,p,T)):qi(o,l,p,T),l.memoizedState=C.state,o=l.child):o=Xa(o,l,T),o}function Qm(o,l,p,v){return Tt(),l.flags|=256,qi(o,l,p,v),l.child}function gd(o){return{baseLanes:o,cachePool:He()}}function vd(o,l,p){return o=o!==null?o.childLanes&~p:0,l&&(o|=ms),o}function xd(o,l,p){var v=l.pendingProps,T=!1,C=(l.flags&128)!==0,F;if((F=C)||(F=o!==null&&o.memoizedState===null?!1:(oi.current&2)!==0),F&&(T=!0,l.flags&=-129),F=(l.flags&32)!==0,l.flags&=-33,o===null){if(un){if(T?ae(l):ce(),(o=Qn)?(o=Pg(o,hs),o!==null&&(l.memoizedState={dehydrated:o,treeContext:ma!==null?{id:Yi,overflow:Ia}:null,retryLane:536870912,hydrationErrors:null},p=Dd(o),p.return=l,l.child=p,Ni=l,Qn=null)):o=null,o===null)throw nt(l);return Vf(o)?l.lanes=32:l.lanes=536870912,null}var $=v.children;return v=v.fallback,T?(ce(),T=l.mode,$=so({mode:"hidden",children:$},T),v=ua(v,T,p,null),$.return=l,v.return=l,$.sibling=v,l.child=$,v=l.child,v.memoizedState=gd(p),v.childLanes=vd(o,F,p),l.memoizedState=ml,Yo(null,v)):(ae(l),xf(l,$))}var Me=o.memoizedState;if(Me!==null&&($=Me.dehydrated,$!==null)){if(C)l.flags&256?(ae(l),l.flags&=-257,l=Qo(o,l,p)):l.memoizedState!==null?(ce(),l.child=o.child,l.flags|=128,l=null):(ce(),$=v.fallback,T=l.mode,v=so({mode:"visible",children:v.children},T),$=ua($,T,p,null),$.flags|=2,v.return=l,$.return=l,v.sibling=$,l.child=v,Qi(l,o.child,null,p),v=l.child,v.memoizedState=gd(p),v.childLanes=vd(o,F,p),l.memoizedState=ml,l=Yo(null,v));else if(ae(l),Vf($))F=Hf($).digest,v=Error(s(419)),v.stack="",v.digest=F,Be({value:v,source:null,stack:null}),l=Qo(o,l,p);else if(Xn||st(o,l,p,!1),F=(p&o.childLanes)!==0,Xn||F){if(F=nn,F!==null&&(v=P(F,p),v!==0&&v!==Me.retryLane))throw Me.retryLane=v,es(o,v),ei(F,o,v),ps;xo($)||ql(),l=Qo(o,l,p)}else xo($)?(l.flags|=192,l.child=o.child,l=null):(o=Me.treeContext,Zn&&(Qn=Ug($),Ni=l,un=!0,rr=null,hs=!1,o!==null&&Pe(l,o)),l=xf(l,v.children),l.flags|=4096);return l}return T?(ce(),$=v.fallback,T=l.mode,Me=o.child,C=Me.sibling,v=Xs(Me,{mode:"hidden",children:v.children}),v.subtreeFlags=Me.subtreeFlags&65011712,C!==null?$=Xs(C,$):($=ua($,T,p,null),$.flags|=2),$.return=l,v.return=l,v.sibling=$,l.child=v,Yo(null,v),v=l.child,$=o.child.memoizedState,$===null?$=gd(p):(T=$.cachePool,T!==null?(Me=ui?Jn._currentValue:Jn._currentValue2,T=T.parent!==Me?{parent:Me,pool:Me}:T):T=He(),$={baseLanes:$.baseLanes|p,cachePool:T}),v.memoizedState=$,v.childLanes=vd(o,F,p),l.memoizedState=ml,Yo(o.child,v)):(ae(l),p=o.child,o=p.sibling,p=Xs(p,{mode:"visible",children:v.children}),p.return=l,p.sibling=null,o!==null&&(F=l.deletions,F===null?(l.deletions=[o],l.flags|=16):F.push(o)),l.child=p,l.memoizedState=null,p)}function xf(o,l){return l=so({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function so(o,l){return o=t(22,o,null,l),o.lanes=0,o}function Qo(o,l,p){return Qi(l,o.child,null,p),o=xf(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Jm(o,l,p){o.lanes|=l;var v=o.alternate;v!==null&&(v.lanes|=l),Z(o.return,l,p)}function Bl(o,l,p,v,T,C){var F=o.memoizedState;F===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:T,treeForkCount:C}:(F.isBackwards=l,F.rendering=null,F.renderingStartTime=0,F.last=v,F.tail=p,F.tailMode=T,F.treeForkCount=C)}function yd(o,l,p){var v=l.pendingProps,T=v.revealOrder,C=v.tail;v=v.children;var F=oi.current,$=(F&2)!==0;if($?(F=F&1|2,l.flags|=128):F&=1,A(oi,F),qi(o,l,v,p),v=un?yu:0,!$&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Jm(o,p,l);else if(o.tag===19)Jm(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(T){case"forwards":for(p=l.child,T=null;p!==null;)o=p.alternate,o!==null&&pt(o)===null&&(T=p),p=p.sibling;p=T,p===null?(T=l.child,l.child=null):(T=p.sibling,p.sibling=null),Bl(l,!1,T,p,C,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,T=l.child,l.child=null;T!==null;){if(o=T.alternate,o!==null&&pt(o)===null){l.child=T;break}o=T.sibling,T.sibling=p,p=T,T=o}Bl(l,!0,p,null,C,v);break;case"together":Bl(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function Xa(o,l,p){if(o!==null&&(l.dependencies=o.dependencies),Br|=l.lanes,(p&l.childLanes)===0)if(o!==null){if(st(o,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(s(153));if(l.child!==null){for(o=l.child,p=Xs(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=Xs(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}function Qc(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&At(o)))}function _d(o,l,p){switch(l.tag){case 3:it(l,l.stateNode.containerInfo),Le(l,Jn,o.memoizedState.cache),Tt();break;case 27:case 5:Ae(l);break;case 4:it(l,l.stateNode.containerInfo);break;case 10:Le(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ye(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(ae(l),l.flags|=128,null):(p&l.child.childLanes)!==0?xd(o,l,p):(ae(l),o=Xa(o,l,p),o!==null?o.sibling:null);ae(l);break;case 19:var T=(o.flags&128)!==0;if(v=(p&l.childLanes)!==0,v||(st(o,l,p,!1),v=(p&l.childLanes)!==0),T){if(v)return yd(o,l,p);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),A(oi,oi.current),v)break;return null;case 22:return l.lanes=0,Ym(o,l,p,l.pendingProps);case 24:Le(l,Jn,o.memoizedState.cache)}return Xa(o,l,p)}function bd(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps)Xn=!0;else{if(!Qc(o,p)&&(l.flags&128)===0)return Xn=!1,_d(o,l,p);Xn=(o.flags&131072)!==0}else Xn=!1,un&&(l.flags&1048576)!==0&&X(l,yu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var v=l.pendingProps;if(o=pn(l.elementType),l.type=o,typeof o=="function")Ko(o)?(v=qo(o,v),l.tag=1,l=Zo(null,l,o,v,p)):(l.tag=0,l=vf(null,l,o,v,p));else{if(o!=null){var T=o.$$typeof;if(T===Jl){l.tag=11,l=Xm(null,l,o,v,p);break e}else if(T===Of){l.tag=14,l=jm(null,l,o,v,p);break e}}throw l=_(o)||o,Error(s(306,l,""))}}return l;case 0:return vf(o,l,l.type,l.pendingProps,p);case 1:return v=l.type,T=qo(v,l.pendingProps),Zo(o,l,v,T,p);case 3:e:{if(it(l,l.stateNode.containerInfo),o===null)throw Error(s(387));var C=l.pendingProps;T=l.memoizedState,v=T.element,Fs(o,l),_r(l,C,null,p);var F=l.memoizedState;if(C=F.cache,Le(l,Jn,C),C!==T.cache&&St(l,[Jn],p,!0),Da(),C=F.element,Zn&&T.isDehydrated)if(T={element:C,isDehydrated:!1,cache:F.cache},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){l=Qm(o,l,C,p);break e}else if(C!==v){v=we(Error(s(424)),l),Be(v),l=Qm(o,l,C,p);break e}else for(Zn&&(Qn=Dg(l.stateNode.containerInfo),Ni=l,un=!0,rr=null,hs=!0),p=vp(l,null,C,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Tt(),C===v){l=Xa(o,l,p);break e}qi(o,l,C,p)}l=l.child}return l;case 26:if(da)return Zc(o,l),o===null?(p=rp(l.type,null,l.pendingProps,null))?l.memoizedState=p:un||(l.stateNode=jf(l.type,l.pendingProps,Zi.current,l)):l.memoizedState=rp(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:if(Ri)return Ae(l),o===null&&Ri&&un&&(v=l.stateNode=qf(l.type,l.pendingProps,Zi.current,ki.current,!1),Ni=l,hs=!0,Qn=ep(l.type,v,Qn)),qi(o,l,l.pendingProps.children,p),Zc(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&un&&(Xg(l.type,l.pendingProps,ki.current),(T=v=Qn)&&(v=Ig(v,l.type,l.pendingProps,hs),v!==null?(l.stateNode=v,Ni=l,Qn=Ng(v),hs=!1,T=!0):T=!1),T||nt(l)),Ae(l),T=l.type,C=l.pendingProps,F=o!==null?o.memoizedProps:null,v=C.children,fs(T,C)?v=null:F!==null&&fs(T,F)&&(l.flags|=32),l.memoizedState!==null&&(T=_t(o,l,Ot,null,null,p),ui?ol._currentValue=T:ol._currentValue2=T),Zc(o,l),qi(o,l,v,p),l.child;case 6:return o===null&&un&&(ap(l.pendingProps,ki.current),(o=p=Qn)&&(p=Og(p,l.pendingProps,hs),p!==null?(l.stateNode=p,Ni=l,Qn=null,o=!0):o=!1),o||nt(l)),null;case 13:return xd(o,l,p);case 4:return it(l,l.stateNode.containerInfo),v=l.pendingProps,o===null?l.child=Qi(l,null,v,p):qi(o,l,v,p),l.child;case 11:return Xm(o,l,l.type,l.pendingProps,p);case 7:return qi(o,l,l.pendingProps,p),l.child;case 8:return qi(o,l,l.pendingProps.children,p),l.child;case 12:return qi(o,l,l.pendingProps.children,p),l.child;case 10:return v=l.pendingProps,Le(l,l.type,v.value),qi(o,l,v.children,p),l.child;case 9:return T=l.type._context,v=l.pendingProps.children,Xe(l),T=G(T),v=v(T),l.flags|=1,qi(o,l,v,p),l.child;case 14:return jm(o,l,l.type,l.pendingProps,p);case 15:return qm(o,l,l.type,l.pendingProps,p);case 19:return yd(o,l,p);case 31:return Zm(o,l,p);case 22:return Ym(o,l,p,l.pendingProps);case 24:return Xe(l),v=G(Jn),o===null?(T=je(),T===null&&(T=nn,C=Se(),T.pooledCache=C,C.refCount++,C!==null&&(T.pooledCacheLanes|=p),T=C),l.memoizedState={parent:v,cache:T},Ai(l),Le(l,Jn,T)):((o.lanes&p)!==0&&(Fs(o,l),_r(l,null,null,p),Da()),T=o.memoizedState,C=l.memoizedState,T.parent!==v?(T={parent:v,cache:v},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),Le(l,Jn,v)):(v=C.cache,Le(l,Jn,v),v!==T.cache&&St(l,[Jn],p,!0))),qi(o,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function aa(o){o.flags|=4}function Jc(o){js&&(o.flags|=8)}function Km(o,l){if(o!==null&&o.child===l.child)return!1;if((l.flags&16)!==0)return!0;for(o=l.child;o!==null;){if((o.flags&8218)!==0||(o.subtreeFlags&8218)!==0)return!0;o=o.sibling}return!1}function Sd(o,l,p,v){if(dn)for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)fu(o,p.stateNode);else if(!(p.tag===4||Ri&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(js)for(var T=l.child;T!==null;){if(T.tag===5){var C=T.stateNode;p&&v&&(C=Ag(C,T.type,T.memoizedProps)),fu(o,C)}else if(T.tag===6)C=T.stateNode,p&&v&&(C=Kd(C,T.memoizedProps)),fu(o,C);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)C=T.child,C!==null&&(C.return=T),Sd(o,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===l)break;for(;T.sibling===null;){if(T.return===null||T.return===l)return;T=T.return}T.sibling.return=T.return,T=T.sibling}}function $m(o,l,p,v){var T=!1;if(js)for(var C=l.child;C!==null;){if(C.tag===5){var F=C.stateNode;p&&v&&(F=Ag(F,C.type,C.memoizedProps)),Qd(o,F)}else if(C.tag===6)F=C.stateNode,p&&v&&(F=Kd(F,C.memoizedProps)),Qd(o,F);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)T=C.child,T!==null&&(T.return=C),$m(o,C,!0,!0),T=!0;else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===l)break;for(;C.sibling===null;){if(C.return===null||C.return===l)return T;C=C.return}C.sibling.return=C.return,C=C.sibling}return T}function eg(o,l){if(js&&Km(o,l)){o=l.stateNode;var p=o.containerInfo,v=Zd();$m(v,l,!1,!1),o.pendingChildren=v,aa(l),Tg(p,v)}}function Md(o,l,p,v){if(dn)o.memoizedProps!==v&&aa(l);else if(js){var T=o.stateNode,C=o.memoizedProps;if((o=Km(o,l))||C!==v){var F=ki.current;C=Eg(T,p,C,v,!o,null),C===T?l.stateNode=T:(Jc(l),Ss(C,p,v,F)&&aa(l),l.stateNode=C,o&&Sd(C,l,!1,!1))}else l.stateNode=T}}function ls(o,l,p,v,T){if((o.mode&32)!==0&&(p===null?hu(l,v):nc(l,p,v))){if(o.flags|=16777216,(T&335544128)===T||Bd(l,v))if(ti(o.stateNode,l,v))o.flags|=8192;else if(hn())o.flags|=8192;else throw ds=or,sh}else o.flags&=-16777217}function Fl(o,l){if(up(l)){if(o.flags|=16777216,!fp(l))if(hn())o.flags|=8192;else throw ds=or,sh}else o.flags&=-16777217}function Kc(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?U():536870912,o.lanes|=l,fc|=l)}function kl(o,l){if(!un)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Bn(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,v=0;if(l)for(var T=o.child;T!==null;)p|=T.lanes|T.childLanes,v|=T.subtreeFlags&65011712,v|=T.flags&65011712,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)p|=T.lanes|T.childLanes,v|=T.subtreeFlags,v|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=v,o.childLanes=p,l}function tg(o,l,p){var v=l.pendingProps;switch(_e(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(l),null;case 1:return Bn(l),null;case 3:return p=l.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),Ye(Jn),he(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Wt(l)?aa(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ne())),eg(o,l),Bn(l),null;case 26:if(da){var T=l.type,C=l.memoizedState;return o===null?(aa(l),C!==null?(Bn(l),Fl(l,C)):(Bn(l),ls(l,T,null,v,p))):C?C!==o.memoizedState?(aa(l),Bn(l),Fl(l,C)):(Bn(l),l.flags&=-16777217):(C=o.memoizedProps,dn?C!==v&&aa(l):Md(o,l,T,v),Bn(l),ls(l,T,C,v,p)),null}case 27:if(Ri){if(qe(l),p=Zi.current,T=l.type,o!==null&&l.stateNode!=null)dn?o.memoizedProps!==v&&aa(l):Md(o,l,T,v);else{if(!v){if(l.stateNode===null)throw Error(s(166));return Bn(l),null}o=ki.current,Wt(l)?$e(l,o):(o=qf(T,v,p,o,!0),l.stateNode=o,aa(l))}return Bn(l),null}case 5:if(qe(l),T=l.type,o!==null&&l.stateNode!=null)Md(o,l,T,v);else{if(!v){if(l.stateNode===null)throw Error(s(166));return Bn(l),null}if(C=ki.current,Wt(l))$e(l,C),Hg(l.stateNode,T,v,C)&&(l.flags|=64);else{var F=Pd(T,v,Zi.current,C,l);Jc(l),Sd(F,l,!1,!1),l.stateNode=F,Ss(F,T,v,C)&&aa(l)}}return Bn(l),ls(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,p),null;case 6:if(o&&l.stateNode!=null)p=o.memoizedProps,dn?p!==v&&aa(l):js&&(p!==v?(o=Zi.current,p=ki.current,Jc(l),l.stateNode=Lr(v,o,p,l)):l.stateNode=o.stateNode);else{if(typeof v!="string"&&l.stateNode===null)throw Error(s(166));if(o=Zi.current,p=ki.current,Wt(l)){if(!Zn)throw Error(s(176));if(o=l.stateNode,p=l.memoizedProps,v=null,T=Ni,T!==null)switch(T.tag){case 27:case 5:v=T.memoizedProps}ey(o,p,l,v)||nt(l,!0)}else Jc(l),l.stateNode=Lr(v,o,p,l)}return Bn(l),null;case 31:if(p=l.memoizedState,o===null||o.memoizedState!==null){if(v=Wt(l),p!==null){if(o===null){if(!v)throw Error(s(318));if(!Zn)throw Error(s(556));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(557));np(o,l)}else Tt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bn(l),o=!1}else p=Ne(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return l.flags&256?(Qe(l),l):(Qe(l),null);if((l.flags&128)!==0)throw Error(s(558))}return Bn(l),null;case 13:if(v=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(T=Wt(l),v!==null&&v.dehydrated!==null){if(o===null){if(!T)throw Error(s(318));if(!Zn)throw Error(s(344));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(s(317));Bg(T,l)}else Tt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bn(l),T=!1}else T=Ne(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(Qe(l),l):(Qe(l),null)}return Qe(l),(l.flags&128)!==0?(l.lanes=p,l):(p=v!==null,o=o!==null&&o.memoizedState!==null,p&&(v=l.child,T=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(T=v.alternate.memoizedState.cachePool.pool),C=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==T&&(v.flags|=2048)),p!==o&&p&&(l.child.flags|=8192),Kc(l,l.updateQueue),Bn(l),null);case 4:return he(),eg(o,l),o===null&&In(l.stateNode.containerInfo),Bn(l),null;case 10:return Ye(l.type),Bn(l),null;case 19:if(M(oi),v=l.memoizedState,v===null)return Bn(l),null;if(T=(l.flags&128)!==0,C=v.rendering,C===null)if(T)kl(v,!1);else{if(si!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(C=pt(o),C!==null){for(l.flags|=128,kl(v,!1),o=C.updateQueue,l.updateQueue=o,Kc(l,o),l.subtreeFlags=0,o=p,p=l.child;p!==null;)Nf(p,o),p=p.sibling;return A(oi,oi.current&1|2),un&&Ce(l,v.treeForkCount),l.child}o=o.sibling}v.tail!==null&&ns()>Ro&&(l.flags|=128,T=!0,kl(v,!1),l.lanes=4194304)}else{if(!T)if(o=pt(C),o!==null){if(l.flags|=128,T=!0,o=o.updateQueue,l.updateQueue=o,Kc(l,o),kl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!un)return Bn(l),null}else 2*ns()-v.renderingStartTime>Ro&&p!==536870912&&(l.flags|=128,T=!0,kl(v,!1),l.lanes=4194304);v.isBackwards?(C.sibling=l.child,l.child=C):(o=v.last,o!==null?o.sibling=C:l.child=C,v.last=C)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ns(),o.sibling=null,p=oi.current,A(oi,T?p&1|2:p&1),un&&Ce(l,v.treeForkCount),o):(Bn(l),null);case 22:case 23:return Qe(l),k(),v=l.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(p&536870912)!==0&&(l.flags&128)===0&&(Bn(l),l.subtreeFlags&6&&(l.flags|=8192)):Bn(l),p=l.updateQueue,p!==null&&Kc(l,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==p&&(l.flags|=2048),o!==null&&M(bo),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Ye(Jn),Bn(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function Ed(o,l){switch(_e(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Ye(Jn),he(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return qe(l),null;case 31:if(l.memoizedState!==null){if(Qe(l),l.alternate===null)throw Error(s(340));Tt()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(Qe(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(s(340));Tt()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return M(oi),null;case 4:return he(),null;case 10:return Ye(l.type),null;case 22:case 23:return Qe(l),k(),o!==null&&M(bo),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Ye(Jn),null;case 25:return null;default:return null}}function ng(o,l){switch(_e(l),l.tag){case 3:Ye(Jn),he();break;case 26:case 27:case 5:qe(l);break;case 4:he();break;case 31:l.memoizedState!==null&&Qe(l);break;case 13:Qe(l);break;case 19:M(oi);break;case 10:Ye(l.type);break;case 22:case 23:Qe(l),k(),o!==null&&M(bo);break;case 24:Ye(Jn)}}function ja(o,l){try{var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var T=v.next;p=T;do{if((p.tag&o)===o){v=void 0;var C=p.create,F=p.inst;v=C(),F.destroy=v}p=p.next}while(p!==T)}}catch($){Ft(l,l.return,$)}}function qa(o,l,p){try{var v=l.updateQueue,T=v!==null?v.lastEffect:null;if(T!==null){var C=T.next;v=C;do{if((v.tag&o)===o){var F=v.inst,$=F.destroy;if($!==void 0){F.destroy=void 0,T=l;var Me=p,ke=$;try{ke()}catch(tt){Ft(T,Me,tt)}}}v=v.next}while(v!==C)}}catch(tt){Ft(l,l.return,tt)}}function Vl(o){var l=o.updateQueue;if(l!==null){var p=o.stateNode;try{Sr(l,p)}catch(v){Ft(o,o.return,v)}}}function yf(o,l,p){p.props=qo(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(v){Ft(o,l,v)}}function Hl(o,l){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var v=$l(o.stateNode);break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof p=="function"?o.refCleanup=p(v):p.current=v}}catch(T){Ft(o,l,T)}}function ts(o,l){var p=o.ref,v=o.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(T){Ft(o,l,T)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){Ft(o,l,T)}else p.current=null}function Jo(o){var l=o.type,p=o.memoizedProps,v=o.stateNode;try{gg(v,l,p,o)}catch(T){Ft(o,o.return,T)}}function $c(o,l,p){try{vg(o.stateNode,o.type,p,l,o)}catch(v){Ft(o,o.return,v)}}function Td(o){return o.tag===5||o.tag===3||(da?o.tag===26:!1)||(Ri?o.tag===27&&ll(o.type):!1)||o.tag===4}function Er(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Td(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(Ri&&o.tag===27&&ll(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _f(o,l,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?yg(p,o,l):Xd(p,o);else if(v!==4&&(Ri&&v===27&&ll(o.type)&&(p=o.stateNode,l=null),o=o.child,o!==null))for(_f(o,l,p),o=o.sibling;o!==null;)_f(o,l,p),o=o.sibling}function eu(o,l,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?xg(p,o,l):Wd(p,o);else if(v!==4&&(Ri&&v===27&&ll(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(eu(o,l,p),o=o.sibling;o!==null;)eu(o,l,p),o=o.sibling}function Ad(o,l,p){o=o.containerInfo;try{Jd(o,p)}catch(v){Ft(l,l.return,v)}}function ig(o){var l=o.stateNode,p=o.memoizedProps;try{bi(o.type,p,l,o)}catch(v){Ft(o,o.return,v)}}function Qx(o,l){for(Pf(o.containerInfo),di=l;di!==null;)if(o=di,l=o.child,(o.subtreeFlags&1028)!==0&&l!==null)l.return=o,di=l;else for(;di!==null;){o=di;var p=o.alternate;switch(l=o.flags,o.tag){case 0:if((l&4)!==0&&(l=o.updateQueue,l=l!==null?l.events:null,l!==null))for(var v=0;v<l.length;v++){var T=l[v];T.ref.impl=T.nextImpl}break;case 11:case 15:break;case 1:if((l&1024)!==0&&p!==null){l=void 0,v=o,T=p.memoizedProps,p=p.memoizedState;var C=v.stateNode;try{var F=qo(v.type,T);l=C.getSnapshotBeforeUpdate(F,p),C.__reactInternalSnapshotBeforeUpdate=l}catch($){Ft(v,v.return,$)}}break;case 3:(l&1024)!==0&&dn&&Yd(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=o.sibling,l!==null){l.return=o.return,di=l;break}di=o.return}}function sg(o,l,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:cs(o,p),v&4&&ja(5,p);break;case 1:if(cs(o,p),v&4)if(o=p.stateNode,l===null)try{o.componentDidMount()}catch(F){Ft(p,p.return,F)}else{var T=qo(p.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(T,l,o.__reactInternalSnapshotBeforeUpdate)}catch(F){Ft(p,p.return,F)}}v&64&&Vl(p),v&512&&Hl(p,p.return);break;case 3:if(cs(o,p),v&64&&(v=p.updateQueue,v!==null)){if(o=null,p.child!==null)switch(p.child.tag){case 27:case 5:o=$l(p.child.stateNode);break;case 1:o=p.child.stateNode}try{Sr(v,o)}catch(F){Ft(p,p.return,F)}}break;case 27:Ri&&l===null&&v&4&&ig(p);case 26:case 5:if(cs(o,p),l===null){if(v&4)Jo(p);else if(v&64){o=p.type,l=p.memoizedProps,T=p.stateNode;try{kg(T,o,l,p)}catch(F){Ft(p,p.return,F)}}}v&512&&Hl(p,p.return);break;case 12:cs(o,p);break;case 31:cs(o,p),v&4&&oa(o,p);break;case 13:cs(o,p),v&4&&nu(o,p),v&64&&(v=p.memoizedState,v!==null&&(v=v.dehydrated,v!==null&&(p=Jx.bind(null,p),Gf(v,p))));break;case 22:if(v=p.memoizedState!==null||li,!v){l=l!==null&&l.memoizedState!==null||ci,T=li;var C=ci;li=v,(ci=l)&&!C?ca(o,p,(p.subtreeFlags&8772)!==0):cs(o,p),li=T,ci=C}break;case 30:break;default:cs(o,p)}}function wd(o){var l=o.alternate;l!==null&&(o.alternate=null,wd(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&zf(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function ra(o,l,p){for(p=p.child;p!==null;)tu(o,l,p),p=p.sibling}function tu(o,l,p){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(fl,p)}catch{}switch(p.tag){case 26:if(da){ci||ts(p,l),ra(o,l,p),p.memoizedState?yo(p.memoizedState):p.stateNode&&cp(p.stateNode);break}case 27:if(Ri){ci||ts(p,l);var v=ii,T=pi;ll(p.type)&&(ii=p.stateNode,pi=!1),ra(o,l,p),Fi(p.stateNode),ii=v,pi=T;break}case 5:ci||ts(p,l);case 6:if(dn){if(v=ii,T=pi,ii=null,ra(o,l,p),ii=v,pi=T,ii!==null)if(pi)try{jd(ii,p.stateNode)}catch(C){Ft(p,l,C)}else try{_g(ii,p.stateNode)}catch(C){Ft(p,l,C)}}else ra(o,l,p);break;case 18:dn&&ii!==null&&(pi?Wf(ii,p.stateNode):sp(ii,p.stateNode));break;case 4:dn?(v=ii,T=pi,ii=p.stateNode.containerInfo,pi=!0,ra(o,l,p),ii=v,pi=T):(js&&Ad(p.stateNode,p,Zd()),ra(o,l,p));break;case 0:case 11:case 14:case 15:qa(2,p,l),ci||qa(4,p,l),ra(o,l,p);break;case 1:ci||(ts(p,l),v=p.stateNode,typeof v.componentWillUnmount=="function"&&yf(p,l,v)),ra(o,l,p);break;case 21:ra(o,l,p);break;case 22:ci=(v=ci)||p.memoizedState!==null,ra(o,l,p),ci=v;break;default:ra(o,l,p)}}function oa(o,l){if(Zn&&l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ty(o)}catch(p){Ft(l,l.return,p)}}}function nu(o,l){if(Zn&&l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ny(o)}catch(p){Ft(l,l.return,p)}}function la(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new yp),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new yp),l;default:throw Error(s(435,o.tag))}}function Tr(o,l){var p=la(o);l.forEach(function(v){if(!p.has(v)){p.add(v);var T=Kx.bind(null,o,v);v.then(T,T)}})}function zi(o,l){var p=l.deletions;if(p!==null)for(var v=0;v<p.length;v++){var T=p[v],C=o,F=l;if(dn){var $=F;e:for(;$!==null;){switch($.tag){case 27:if(Ri){if(ll($.type)){ii=$.stateNode,pi=!1;break e}break}case 5:ii=$.stateNode,pi=!1;break e;case 3:case 4:ii=$.stateNode.containerInfo,pi=!0;break e}$=$.return}if(ii===null)throw Error(s(160));tu(C,F,T),ii=null,pi=!1}else tu(C,F,T);C=T.alternate,C!==null&&(C.return=null),T.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)iu(l,o),l=l.sibling}function iu(o,l){var p=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:zi(l,o),Bi(o),v&4&&(qa(3,o,o.return),ja(3,o),qa(5,o,o.return));break;case 1:zi(l,o),Bi(o),v&512&&(ci||p===null||ts(p,p.return)),v&64&&li&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:if(da){var T=Dn;if(zi(l,o),Bi(o),v&512&&(ci||p===null||ts(p,p.return)),v&4){v=p!==null?p.memoizedState:null;var C=o.memoizedState;p===null?C===null?o.stateNode===null?o.stateNode=jg(T,o.type,o.memoizedProps,o):lp(T,o.type,o.stateNode):o.stateNode=op(T,C,o.memoizedProps):v!==C?(v===null?p.stateNode!==null&&cp(p.stateNode):yo(v),C===null?lp(T,o.type,o.stateNode):op(T,C,o.memoizedProps)):C===null&&o.stateNode!==null&&$c(o,o.memoizedProps,p.memoizedProps)}break}case 27:if(Ri){zi(l,o),Bi(o),v&512&&(ci||p===null||ts(p,p.return)),p!==null&&v&4&&$c(o,o.memoizedProps,p.memoizedProps);break}case 5:if(zi(l,o),Bi(o),v&512&&(ci||p===null||ts(p,p.return)),dn){if(o.flags&32){T=o.stateNode;try{qd(T)}catch(Ge){Ft(o,o.return,Ge)}}v&4&&o.stateNode!=null&&(T=o.memoizedProps,$c(o,T,p!==null?p.memoizedProps:T)),v&1024&&(rc=!0)}else js&&o.alternate!==null&&(o.alternate.stateNode=o.stateNode);break;case 6:if(zi(l,o),Bi(o),v&4&&dn){if(o.stateNode===null)throw Error(s(162));v=o.memoizedProps,p=p!==null?p.memoizedProps:v,T=o.stateNode;try{mg(T,p,v)}catch(Ge){Ft(o,o.return,Ge)}}break;case 3:if(da?(qg(),T=Dn,Dn=mu(l.containerInfo),zi(l,o),Dn=T):zi(l,o),Bi(o),v&4){if(dn&&Zn&&p!==null&&p.memoizedState.isDehydrated)try{Vg(l.containerInfo)}catch(Ge){Ft(o,o.return,Ge)}if(js){v=l.containerInfo,p=l.pendingChildren;try{Jd(v,p)}catch(Ge){Ft(o,o.return,Ge)}}}rc&&(rc=!1,bf(o));break;case 4:da?(p=Dn,Dn=mu(o.stateNode.containerInfo),zi(l,o),Bi(o),Dn=p):(zi(l,o),Bi(o)),v&4&&js&&Ad(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:zi(l,o),Bi(o);break;case 31:zi(l,o),Bi(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Tr(o,v)));break;case 13:zi(l,o),Bi(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Tu=ns()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Tr(o,v)));break;case 22:T=o.memoizedState!==null;var F=p!==null&&p.memoizedState!==null,$=li,Me=ci;if(li=$||T,ci=Me||F,zi(l,o),ci=Me,li=$,Bi(o),v&8192&&(l=o.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(p===null||F||li||ci||ao(o)),dn)){e:if(p=null,dn)for(l=o;;){if(l.tag===5||da&&l.tag===26){if(p===null){F=p=l;try{C=F.stateNode,T?$x(C):Sg(F.stateNode,F.memoizedProps)}catch(Ge){Ft(F,F.return,Ge)}}}else if(l.tag===6){if(p===null){F=l;try{var ke=F.stateNode;T?bg(ke):Mg(ke,F.memoizedProps)}catch(Ge){Ft(F,F.return,Ge)}}}else if(l.tag===18){if(p===null){F=l;try{var tt=F.stateNode;T?Gg(tt):Wg(F.stateNode)}catch(Ge){Ft(F,F.return,Ge)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}}v&4&&(v=o.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Tr(o,p))));break;case 19:zi(l,o),Bi(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Tr(o,v)));break;case 30:break;case 21:break;default:zi(l,o),Bi(o)}}function Bi(o){var l=o.flags;if(l&2){try{for(var p,v=o.return;v!==null;){if(Td(v)){p=v;break}v=v.return}if(dn){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(Ri){var T=p.stateNode,C=Er(o);eu(o,C,T);break}case 5:var F=p.stateNode;p.flags&32&&(qd(F),p.flags&=-33);var $=Er(o);eu(o,$,F);break;case 3:case 4:var Me=p.stateNode.containerInfo,ke=Er(o);_f(o,ke,Me);break;default:throw Error(s(161))}}}catch(tt){Ft(o,o.return,tt)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function bf(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;bf(l),l.tag===5&&l.flags&1024&&kd(l.stateNode),o=o.sibling}}function cs(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)sg(o,l.alternate,l),l=l.sibling}function ao(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:qa(4,l,l.return),ao(l);break;case 1:ts(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&yf(l,l.return,p),ao(l);break;case 27:Ri&&Fi(l.stateNode);case 26:case 5:ts(l,l.return),ao(l);break;case 22:l.memoizedState===null&&ao(l);break;case 30:ao(l);break;default:ao(l)}o=o.sibling}}function ca(o,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,T=o,C=l,F=C.flags;switch(C.tag){case 0:case 11:case 15:ca(T,C,p),ja(4,C);break;case 1:if(ca(T,C,p),v=C,T=v.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ke){Ft(v,v.return,ke)}if(v=C,T=v.updateQueue,T!==null){var $=v.stateNode;try{var Me=T.shared.hiddenCallbacks;if(Me!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Me.length;T++)br(Me[T],$)}catch(ke){Ft(v,v.return,ke)}}p&&F&64&&Vl(C),Hl(C,C.return);break;case 27:Ri&&ig(C);case 26:case 5:ca(T,C,p),p&&v===null&&F&4&&Jo(C),Hl(C,C.return);break;case 12:ca(T,C,p);break;case 31:ca(T,C,p),p&&F&4&&oa(T,C);break;case 13:ca(T,C,p),p&&F&4&&nu(T,C);break;case 22:C.memoizedState===null&&ca(T,C,p),Hl(C,C.return);break;case 30:break;default:ca(T,C,p)}l=l.sibling}}function ro(o,l){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&De(p))}function Cd(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&De(o))}function $n(o,l,p,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Sf(o,l,p,v),l=l.sibling}function Sf(o,l,p,v){var T=l.flags;switch(l.tag){case 0:case 11:case 15:$n(o,l,p,v),T&2048&&ja(9,l);break;case 1:$n(o,l,p,v);break;case 3:$n(o,l,p,v),T&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&De(o)));break;case 12:if(T&2048){$n(o,l,p,v),o=l.stateNode;try{var C=l.memoizedProps,F=C.id,$=C.onPostCommit;typeof $=="function"&&$(F,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Me){Ft(l,l.return,Me)}}else $n(o,l,p,v);break;case 31:$n(o,l,p,v);break;case 13:$n(o,l,p,v);break;case 23:break;case 22:C=l.stateNode,F=l.alternate,l.memoizedState!==null?C._visibility&2?$n(o,l,p,v):Gl(o,l):C._visibility&2?$n(o,l,p,v):(C._visibility|=2,ys(o,l,p,v,(l.subtreeFlags&10256)!==0||!1)),T&2048&&ro(F,l);break;case 24:$n(o,l,p,v),T&2048&&Cd(l.alternate,l);break;default:$n(o,l,p,v)}}function ys(o,l,p,v,T){for(T=T&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var C=o,F=l,$=p,Me=v,ke=F.flags;switch(F.tag){case 0:case 11:case 15:ys(C,F,$,Me,T),ja(8,F);break;case 23:break;case 22:var tt=F.stateNode;F.memoizedState!==null?tt._visibility&2?ys(C,F,$,Me,T):Gl(C,F):(tt._visibility|=2,ys(C,F,$,Me,T)),T&&ke&2048&&ro(F.alternate,F);break;case 24:ys(C,F,$,Me,T),T&&ke&2048&&Cd(F.alternate,F);break;default:ys(C,F,$,Me,T)}l=l.sibling}}function Gl(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=o,v=l,T=v.flags;switch(v.tag){case 22:Gl(p,v),T&2048&&ro(v.alternate,v);break;case 24:Gl(p,v),T&2048&&Cd(v.alternate,v);break;default:Gl(p,v)}l=l.sibling}}function Ya(o,l,p){if(o.subtreeFlags&Qs)for(o=o.child;o!==null;)oo(o,l,p),o=o.sibling}function oo(o,l,p){switch(o.tag){case 26:if(Ya(o,l,p),o.flags&Qs)if(o.memoizedState!==null)Yg(p,Dn,o.memoizedState,o.memoizedProps);else{var v=o.stateNode,T=o.type;o=o.memoizedProps,((l&335544128)===l||Bd(T,o))&&Bf(p,v,T,o)}break;case 5:Ya(o,l,p),o.flags&Qs&&(v=o.stateNode,T=o.type,o=o.memoizedProps,((l&335544128)===l||Bd(T,o))&&Bf(p,v,T,o));break;case 3:case 4:da?(v=Dn,Dn=mu(o.stateNode.containerInfo),Ya(o,l,p),Dn=v):Ya(o,l,p);break;case 22:o.memoizedState===null&&(v=o.alternate,v!==null&&v.memoizedState!==null?(v=Qs,Qs=16777216,Ya(o,l,p),Qs=v):Ya(o,l,p));break;default:Ya(o,l,p)}}function Mf(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Wl(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];di=v,Gs(v,o)}Mf(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ef(o),o=o.sibling}function Ef(o){switch(o.tag){case 0:case 11:case 15:Wl(o),o.flags&2048&&qa(9,o,o.return);break;case 3:Wl(o);break;case 12:Wl(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,su(o)):Wl(o);break;default:Wl(o)}}function su(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];di=v,Gs(v,o)}Mf(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:qa(8,l,l.return),su(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,su(l));break;default:su(l)}o=o.sibling}}function Gs(o,l){for(;di!==null;){var p=di;switch(p.tag){case 0:case 11:case 15:qa(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:De(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,di=v;else e:for(p=o;di!==null;){v=di;var T=v.sibling,C=v.return;if(wd(v),v===p){di=null;break e}if(T!==null){T.return=C,di=T;break e}di=C}}}function lo(o){var l=qt(o);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(s(364));return l}if(o=fi(o),o===null)throw Error(s(362));return o.stateNode.current}function co(o,l){var p=o.tag;switch(l.$$typeof){case ba:if(o.type===l.value)return!0;break;case lc:e:{for(l=l.value,o=[o,0],p=0;p<o.length;){var v=o[p++],T=v.tag,C=o[p++],F=l[C];if(T!==5&&T!==26&&T!==27||!vo(v)){for(;F!=null&&co(v,F);)C++,F=l[C];if(C===l.length){l=!0;break e}else for(v=v.child;v!==null;)o.push(v,C),v=v.sibling}}l=!1}return l;case cc:if((p===5||p===26||p===27)&&Gd(o.stateNode,l.value))return!0;break;case To:if((p===5||p===6||p===26||p===27)&&(o=du(o),o!==null&&0<=o.indexOf(l.value)))return!0;break;case Mu:if((p===5||p===26||p===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Xl(o){switch(o.$$typeof){case ba:return"<"+(_(o.value)||"Unknown")+">";case lc:return":has("+(Xl(o)||"")+")";case cc:return'[role="'+o.value+'"]';case To:return'"'+o.value+'"';case Mu:return'[data-testname="'+o.value+'"]';default:throw Error(s(365))}}function jl(o,l){var p=[];o=[o,0];for(var v=0;v<o.length;){var T=o[v++],C=T.tag,F=o[v++],$=l[F];if(C!==5&&C!==26&&C!==27||!vo(T)){for(;$!=null&&co(T,$);)F++,$=l[F];if(F===l.length)p.push(T);else for(T=T.child;T!==null;)o.push(T,F),T=T.sibling}}return p}function _s(o,l){if(!Ci)throw Error(s(363));o=lo(o),o=jl(o,l),l=[],o=Array.from(o);for(var p=0;p<o.length;){var v=o[p++],T=v.tag;if(T===5||T===26||T===27)vo(v)||l.push(v.stateNode);else for(v=v.child;v!==null;)o.push(v),v=v.sibling}return l}function Yn(){return(on&2)!==0&&fn!==0?fn&-fn:Lt.T!==null?at():tc()}function Ar(){if(ms===0)if((fn&536870912)===0||un){var o=ul;ul<<=1,(ul&3932160)===0&&(ul=262144),ms=o}else ms=536870912;return o=As.current,o!==null&&(o.flags|=32),ms}function ei(o,l,p){(o===nn&&(Ln===2||Ln===9)||o.cancelPendingCommit!==null)&&(ri(o,0),Qa(o,fn,ms,!1)),z(o,p),((on&2)===0||o!==nn)&&(o===nn&&((on&2)===0&&(Co|=p),si===4&&Qa(o,fn,ms,!1)),ht(o))}function Ua(o,l,p){if((on&6)!==0)throw Error(s(327));var v=!p&&(l&127)===0&&(l&o.expiredLanes)===0||N(o,l),T=v?og(o,l):Ja(o,l,!0),C=v;do{if(T===0){Ao&&!v&&Qa(o,l,0,!1);break}else{if(p=o.current.alternate,C&&!ag(p)){T=Ja(o,l,!1),C=!1;continue}if(T===2){if(C=l,o.errorRecoveryDisabledLanes&C)var F=0;else F=o.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){l=F;e:{var $=o;T=Eu;var Me=Zn&&$.current.memoizedState.isDehydrated;if(Me&&(ri($,F).flags|=256),F=Ja($,F,!1),F!==2){if(wo&&!Me){$.errorRecoveryDisabledLanes|=C,Co|=C,T=4;break e}C=Cs,Cs=T,C!==null&&(Cs===null?Cs=C:Cs.push.apply(Cs,C))}T=F}if(C=!1,T!==2)continue}}if(T===1){ri(o,0),Qa(o,l,0,!0);break}e:{switch(v=o,C=T,C){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Qa(v,l,ms,!za);break e;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(T=Tu+300-ns(),10<T)){if(Qa(v,l,ms,!za),E(v,0,!0)!==0)break e;fr=l,v.timeoutHandle=zd(Za.bind(null,v,p,Cs,Au,rh,l,ms,Co,fc,za,C,"Throttled",-0,0),T);break e}Za(v,p,Cs,Au,rh,l,ms,Co,fc,za,C,null,-0,0)}}break}while(!0);ht(o)}function Za(o,l,p,v,T,C,F,$,Me,ke,tt,Ge,mt,jt){if(o.timeoutHandle=Ms,Ge=l.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge=Fd(),oo(l,C,Ge);var mi=(C&62914560)===C?Tu-ns():(C&4194048)===C?vl-ns():0;if(mi=pg(Ge,mi),mi!==null){fr=C,o.cancelPendingCommit=mi($a.bind(null,o,l,C,p,v,T,F,$,Me,tt,Ge,null,mt,jt)),Qa(o,C,F,!ke);return}}$a(o,l,C,p,v,T,F,$,Me)}function ag(o){for(var l=o;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var T=p[v],C=T.getSnapshot;T=T.value;try{if(!hi(C(),T))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Qa(o,l,p,v){l&=~uc,l&=~Co,o.suspendedLanes|=l,o.pingedLanes&=~l,v&&(o.warmLanes|=l),v=o.expirationTimes;for(var T=l;0<T;){var C=31-Es(T),F=1<<C;v[C]=-1,T&=~F}p!==0&&j(o,p,l)}function Tf(){return(on&6)===0?(Ke(0),!1):!0}function Af(){if(ln!==null){if(Ln===0)var o=ln.return;else o=ln,Oa=kn=null,Un(o),So=null,hl=0,o=ln;for(;o!==null;)ng(o.alternate,o),o=o.return;ln=null}}function ri(o,l){var p=o.timeoutHandle;p!==Ms&&(o.timeoutHandle=Ms,dg(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),fr=0,Af(),nn=o,ln=p=Xs(o.current,null),fn=l,Ln=0,Si=null,za=!1,Ao=N(o,l),wo=!1,fc=ms=uc=Co=Br=si=0,Cs=Eu=null,rh=!1,(l&8)!==0&&(l|=l&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=l;0<v;){var T=31-Es(v),C=1<<T;l|=o[T],v&=~C}return ur=l,$r(),p}function Fn(o,l){Yt=null,Lt.H=Zs,l===Li||l===ya?(l=vn(),Ln=3):l===sh?(l=vn(),Ln=4):Ln=l===ps?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Si=l,ln===null&&(si=1,mf(o,we(l,o.current)))}function hn(){var o=As.current;return o===null?!0:(fn&4194048)===fn?ws===null:(fn&62914560)===fn||(fn&536870912)!==0?o===ws:!1}function wr(){var o=Lt.H;return Lt.H=Zs,o===null?Zs:o}function Ws(){var o=Lt.A;return Lt.A=oc,o}function ql(){si=4,za||(fn&4194048)!==fn&&As.current!==null||(Ao=!0),(Br&134217727)===0&&(Co&134217727)===0||nn===null||Qa(nn,fn,ms,!1)}function Ja(o,l,p){var v=on;on|=2;var T=wr(),C=Ws();(nn!==o||fn!==l)&&(Au=null,ri(o,l)),l=!1;var F=si;e:do try{if(Ln!==0&&ln!==null){var $=ln,Me=Si;switch(Ln){case 8:Af(),F=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(l=!0);var ke=Ln;if(Ln=0,Si=null,Ka(o,$,Me,ke),p&&Ao){F=0;break e}break;default:ke=Ln,Ln=0,Si=null,Ka(o,$,Me,ke)}}rg(),F=si;break}catch(tt){Fn(o,tt)}while(!0);return l&&o.shellSuspendCounter++,Oa=kn=null,on=v,Lt.H=T,Lt.A=C,ln===null&&(nn=null,fn=0,$r()),F}function rg(){for(;ln!==null;)uo(ln)}function og(o,l){var p=on;on|=2;var v=wr(),T=Ws();nn!==o||fn!==l?(Au=null,Ro=ns()+500,ri(o,l)):Ao=N(o,l);e:do try{if(Ln!==0&&ln!==null){l=ln;var C=Si;t:switch(Ln){case 1:Ln=0,Si=null,Ka(o,l,C,1);break;case 2:case 9:if(et(C)){Ln=0,Si=null,wf(l);break}l=function(){Ln!==2&&Ln!==9||nn!==o||(Ln=7),ht(o)},C.then(l,l);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:et(C)?(Ln=0,Si=null,wf(l)):(Ln=0,Si=null,Ka(o,l,C,7));break;case 5:var F=null;switch(ln.tag){case 26:F=ln.memoizedState;case 5:case 27:var $=ln,Me=$.type,ke=$.pendingProps;if(F?fp(F):ti($.stateNode,Me,ke)){Ln=0,Si=null;var tt=$.sibling;if(tt!==null)ln=tt;else{var Ge=$.return;Ge!==null?(ln=Ge,Zl(Ge)):ln=null}break t}}Ln=0,Si=null,Ka(o,l,C,5);break;case 6:Ln=0,Si=null,Ka(o,l,C,6);break;case 8:Af(),si=6;break e;default:throw Error(s(462))}}Yl();break}catch(mt){Fn(o,mt)}while(!0);return Oa=kn=null,Lt.H=v,Lt.A=T,on=p,ln!==null?0:(nn=null,fn=0,$r(),si)}function Yl(){for(;ln!==null&&!Qg();)uo(ln)}function uo(o){var l=bd(o.alternate,o,ur);o.memoizedProps=o.pendingProps,l===null?Zl(o):ln=l}function wf(o){var l=o,p=l.alternate;switch(l.tag){case 15:case 0:l=md(p,l,l.pendingProps,l.type,void 0,fn);break;case 11:l=md(p,l,l.pendingProps,l.type.render,l.ref,fn);break;case 5:Un(l);default:ng(p,l),l=ln=Nf(l,ur),l=bd(p,l,ur)}o.memoizedProps=o.pendingProps,l===null?Zl(o):ln=l}function Ka(o,l,p,v){Oa=kn=null,Un(l),So=null,hl=0;var T=l.return;try{if(Zx(o,T,l,p,fn)){si=1,mf(o,we(p,o.current)),ln=null;return}}catch(C){if(T!==null)throw ln=T,C;si=1,mf(o,we(p,o.current)),ln=null;return}l.flags&32768?(un||v===1?o=!0:Ao||(fn&536870912)!==0?o=!1:(za=o=!0,(v===2||v===9||v===3||v===6)&&(v=As.current,v!==null&&v.tag===13&&(v.flags|=16384))),fo(l,o)):Zl(l)}function Zl(o){var l=o;do{if((l.flags&32768)!==0){fo(l,za);return}o=l.return;var p=tg(l.alternate,l,ur);if(p!==null){ln=p;return}if(l=l.sibling,l!==null){ln=l;return}ln=l=o}while(l!==null);si===0&&(si=5)}function fo(o,l){do{var p=Ed(o.alternate,o);if(p!==null){p.flags&=32767,ln=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(o=o.sibling,o!==null)){ln=o;return}ln=o=p}while(o!==null);si=6,ln=null}function $a(o,l,p,v,T,C,F,$,Me){o.cancelPendingCommit=null;do tr();while(Mi!==0);if((on&6)!==0)throw Error(s(327));if(l!==null){if(l===o.current)throw Error(s(177));if(C=l.lanes|l.childLanes,C|=dl,H(o,p,C,F,$,Me),o===nn&&(ln=nn=null,fn=0),xl=l,kr=o,fr=p,hc=C,oh=T,_p=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,_i(vu,function(){return au(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=Lt.T,Lt.T=null,T=ha(),cn(2),F=on,on|=4;try{Qx(o,l,p)}finally{on=F,cn(T),Lt.T=v}}Mi=1,Cr(),er(),Cf()}}function Cr(){if(Mi===1){Mi=0;var o=kr,l=xl,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=Lt.T,Lt.T=null;var v=ha();cn(2);var T=on;on|=4;try{iu(l,o),hg(o.containerInfo)}finally{on=T,cn(v),Lt.T=p}}o.current=l,Mi=2}}function er(){if(Mi===2){Mi=0;var o=kr,l=xl,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=Lt.T,Lt.T=null;var v=ha();cn(2);var T=on;on|=4;try{sg(o,l.alternate,l)}finally{on=T,cn(v),Lt.T=p}}Mi=3}}function Cf(){if(Mi===4||Mi===3){Mi=0,dp();var o=kr,l=xl,p=fr,v=_p;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Mi=5:(Mi=0,xl=kr=null,Rf(o,o.pendingLanes));var T=o.pendingLanes;if(T===0&&(Fr=null),se(p),l=l.stateNode,Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(fl,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=Lt.T,T=ha(),cn(2),Lt.T=null;try{for(var C=o.onRecoverableError,F=0;F<v.length;F++){var $=v[F];C($.value,{componentStack:$.stack})}}finally{Lt.T=l,cn(T)}}(fr&3)!==0&&tr(),ht(o),T=o.pendingLanes,(p&261930)!==0&&(T&42)!==0?o===wu?Mn++:(Mn=0,wu=o):Mn=0,Zn&&pu(),Ke(0)}}function Rf(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,De(l)))}function tr(){return Cr(),er(),Cf(),au()}function au(){if(Mi!==5)return!1;var o=kr,l=hc;hc=0;var p=se(fr),v=32>p?32:p;p=Lt.T;var T=ha();try{cn(v),Lt.T=null,v=oh,oh=null;var C=kr,F=fr;if(Mi=0,xl=kr=null,fr=0,(on&6)!==0)throw Error(s(331));var $=on;if(on|=4,Ef(C.current),Sf(C,C.current,F,v),on=$,Ke(0,!1),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(fl,C)}catch{}return!0}finally{cn(T),Lt.T=p,Rf(o,l)}}function ho(o,l,p){l=we(p,l),l=dd(o.stateNode,l,2),o=Vs(o,l,2),o!==null&&(z(o,2),ht(o))}function Ft(o,l,p){if(o.tag===3)ho(o,o,p);else for(;l!==null;){if(l.tag===3){ho(l,o,p);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Fr===null||!Fr.has(v))){o=we(p,o),p=Gm(2),v=Vs(l,p,2),v!==null&&(Wm(p,v,l,o),z(v,2),ht(v));break}}l=l.return}}function Ql(o,l,p){var v=o.pingCache;if(v===null){v=o.pingCache=new Js;var T=new Set;v.set(l,T)}else T=v.get(l),T===void 0&&(T=new Set,v.set(l,T));T.has(p)||(wo=!0,T.add(p),o=lg.bind(null,o,l,p),l.then(o,o))}function lg(o,l,p){var v=o.pingCache;v!==null&&v.delete(l),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,nn===o&&(fn&p)===p&&(si===4||si===3&&(fn&62914560)===fn&&300>ns()-Tu?(on&2)===0&&ri(o,0):uc|=p,fc===fn&&(fc=0)),ht(o)}function cg(o,l){l===0&&(l=U()),o=es(o,l),o!==null&&(z(o,l),ht(o))}function Jx(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),cg(o,p)}function Kx(o,l){var p=0;switch(o.tag){case 31:case 13:var v=o.stateNode,T=o.memoizedState;T!==null&&(p=T.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(s(314))}v!==null&&v.delete(l),cg(o,p)}function _i(o,l){return gu(o,l)}function Rd(o,l,p,v){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Xs(o,l){var p=o.alternate;return p===null?(p=t(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,l=o.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Nf(o,l){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,l=p.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Rr(o,l,p,v,T,C){var F=0;if(v=o,typeof o=="function")Ko(o)&&(F=1);else if(typeof o=="string")F=da&&Ri?Xf(o,p,ki.current)?26:hp(o)?27:5:da?Xf(o,p,ki.current)?26:5:Ri&&hp(o)?27:5;else e:switch(o){case cu:return o=t(31,p,l,T),o.elementType=cu,o.lanes=C,o;case nl:return ua(p.children,T,C,l);case il:F=8,T|=24;break;case sl:return o=t(12,p,l,T|2),o.elementType=sl,o.lanes=C,o;case If:return o=t(13,p,l,T),o.elementType=If,o.lanes=C,o;case Nr:return o=t(19,p,l,T),o.elementType=Nr,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case fa:F=10;break e;case lu:F=9;break e;case Jl:F=11;break e;case Of:F=14;break e;case us:F=16,v=null;break e}F=29,p=Error(s(130,o===null?"null":typeof o,"")),v=null}return l=t(F,p,l,T),l.elementType=o,l.type=v,l.lanes=C,l}function ua(o,l,p,v){return o=t(7,o,v,l),o.lanes=p,o}function Nd(o,l,p){return o=t(6,o,null,l),o.lanes=p,o}function Dd(o){var l=t(18,null,null,0);return l.stateNode=o,l}function Ld(o,l,p){return l=t(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function ug(o,l,p,v,T,C,F,$,Me){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ms,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B(0),this.hiddenUpdates=B(null),this.identifierPrefix=v,this.onUncaughtError=T,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function po(o,l,p,v,T,C,F,$,Me,ke,tt,Ge){return o=new ug(o,l,p,F,Me,ke,tt,Ge,$),l=1,C===!0&&(l|=24),C=t(3,null,null,l),o.current=C,C.stateNode=o,l=Se(),l.refCount++,o.pooledCache=l,l.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:l},Ai(C),o}function Df(o){return o?(o=ir,o):ir}function ru(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=h(l),o=o!==null?m(o):null,o===null?null:$l(o.stateNode)}function Ud(o,l,p,v,T,C){T=Df(T),v.context===null?v.context=T:v.pendingContext=T,v=ks(l),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=Vs(o,v,l),p!==null&&(ei(p,o,l),eo(p,o,l))}function $o(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function ou(o,l){$o(o,l),(o=o.alternate)&&$o(o,l)}var en={},Lf=Ph,bs=AO,Uf=Object.assign,el=Symbol.for("react.element"),nr=Symbol.for("react.transitional.element"),tl=Symbol.for("react.portal"),nl=Symbol.for("react.fragment"),il=Symbol.for("react.strict_mode"),sl=Symbol.for("react.profiler"),lu=Symbol.for("react.consumer"),fa=Symbol.for("react.context"),Jl=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Nr=Symbol.for("react.suspense_list"),Of=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),cu=Symbol.for("react.activity"),Id=Symbol.for("react.memo_cache_sentinel"),Dr=Symbol.iterator,mo=Symbol.for("react.client.reference"),go=Array.isArray,Lt=Lf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Od=e.rendererVersion,uu=e.rendererPackageName,Kl=e.extraDevToolsConfig,$l=e.getPublicInstance,fg=e.getRootHostContext,ec=e.getChildHostContext,Pf=e.prepareForCommit,hg=e.resetAfterCommit,Pd=e.createInstance;e.cloneMutableInstance;var fu=e.appendInitialChild,Ss=e.finalizeInitialChildren,fs=e.shouldSetTextContent,Lr=e.createTextInstance;e.cloneMutableTextInstance;var zd=e.scheduleTimeout,dg=e.cancelTimeout,Ms=e.noTimeout,ui=e.isPrimaryRenderer;e.warnsIfNotActing;var dn=e.supportsMutation,js=e.supportsPersistence,Zn=e.supportsHydration,qt=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var In=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var cn=e.setCurrentUpdatePriority,ha=e.getCurrentUpdatePriority,tc=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var al=e.shouldAttemptEagerTransition,zf=e.detachDeletedInstance;e.requestPostPaintCallback;var hu=e.maySuspendCommit,nc=e.maySuspendCommitOnUpdate,Bd=e.maySuspendCommitInSyncRender,ti=e.preloadInstance,Fd=e.startSuspendingCommit,Bf=e.suspendInstance;e.suspendOnActiveViewTransition;var pg=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var rl=e.NotPendingTransition,ol=e.HostTransitionContext,kd=e.resetFormInstance;e.bindToConsole;var Vd=e.supportsMicrotasks,Hd=e.scheduleMicrotask,Ci=e.supportsTestSelectors,fi=e.findFiberRoot,Ff=e.getBoundingRect,du=e.getTextContent,vo=e.isHiddenSubtree,Gd=e.matchAccessibilityRole,Ur=e.setFocusIfFocusable,kf=e.setupIntersectionObserver,Wd=e.appendChild,Xd=e.appendChildToContainer,mg=e.commitTextUpdate,gg=e.commitMount,vg=e.commitUpdate,xg=e.insertBefore,yg=e.insertInContainerBefore,_g=e.removeChild,jd=e.removeChildFromContainer,qd=e.resetTextContent,$x=e.hideInstance,bg=e.hideTextInstance,Sg=e.unhideInstance,Mg=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Yd=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Eg=e.cloneInstance,Zd=e.createContainerChildSet,Qd=e.appendChildToContainerChildSet,Tg=e.finalizeContainerChildren,Jd=e.replaceContainerChildren,Ag=e.cloneHiddenInstance,Kd=e.cloneHiddenTextInstance,xo=e.isSuspenseInstancePending,Vf=e.isSuspenseInstanceFallback,Hf=e.getSuspenseInstanceFallbackErrorDetails,Gf=e.registerSuspenseInstanceRetry,wg=e.canHydrateFormStateMarker,$d=e.isFormStateMarkerMatching,Cg=e.getNextHydratableSibling,Rg=e.getNextHydratableSiblingAfterSingleton,Ng=e.getFirstHydratableChild,Dg=e.getFirstHydratableChildWithinContainer,Lg=e.getFirstHydratableChildWithinActivityInstance,Ug=e.getFirstHydratableChildWithinSuspenseInstance,ep=e.getFirstHydratableChildWithinSingleton,Ig=e.canHydrateInstance,Og=e.canHydrateTextInstance,tp=e.canHydrateActivityInstance,Pg=e.canHydrateSuspenseInstance,zg=e.hydrateInstance,ey=e.hydrateTextInstance,np=e.hydrateActivityInstance,Bg=e.hydrateSuspenseInstance,Fg=e.getNextHydratableInstanceAfterActivityInstance,ip=e.getNextHydratableInstanceAfterSuspenseInstance,kg=e.commitHydratedInstance,Vg=e.commitHydratedContainer,ty=e.commitHydratedActivityInstance,ny=e.commitHydratedSuspenseInstance,Hg=e.finalizeHydratedChildren,pu=e.flushHydrationEvents;e.clearActivityBoundary;var sp=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Wf=e.clearSuspenseBoundaryFromContainer,Gg=e.hideDehydratedBoundary,Wg=e.unhideDehydratedBoundary,ic=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Xg=e.validateHydratableInstance,ap=e.validateHydratableTextInstance,da=e.supportsResources,Xf=e.isHostHoistableType,mu=e.getHoistableRoot,rp=e.getResource,op=e.acquireResource,yo=e.releaseResource,jg=e.hydrateHoistable,lp=e.mountHoistable,cp=e.unmountHoistable,jf=e.createHoistableInstance,qg=e.prepareToCommitHoistables,up=e.mayResourceSuspendCommit,fp=e.preloadResource,Yg=e.suspendResource,Ri=e.supportsSingletons,qf=e.resolveSingletonInstance,bi=e.acquireSingletonInstance,Fi=e.releaseSingletonInstance,hp=e.isHostSingletonType,ll=e.isSingletonScope,Yf=[],cl=-1,ir={},Es=Math.clz32?Math.clz32:R,Zf=Math.log,Zg=Math.LN2,Qf=256,ul=262144,sc=4194304,gu=bs.unstable_scheduleCallback,Jf=bs.unstable_cancelCallback,Qg=bs.unstable_shouldYield,dp=bs.unstable_requestPaint,ns=bs.unstable_now,Kf=bs.unstable_ImmediatePriority,Jg=bs.unstable_UserBlockingPriority,vu=bs.unstable_NormalPriority,$f=bs.unstable_IdlePriority,pp=bs.log,Kg=bs.unstable_setDisableYieldValue,fl=null,Ts=null,hi=typeof Object.is=="function"?Object.is:de,eh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},iy=Object.prototype.hasOwnProperty,th,sr,xu=!1,mp=new WeakMap,Ir=[],ar=0,On=null,yu=0,pa=[],qs=0,ma=null,Yi=1,Ia="",ki=b(null),Or=b(null),Zi=b(null),_u=b(null),Ni=null,Qn=null,un=!1,rr=null,hs=!1,nh=Error(s(519)),ga=b(null),kn=null,Oa=null,$g=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(p,v){o.push(v)}};this.abort=function(){l.aborted=!0,o.forEach(function(p){return p()})}},Vi=bs.unstable_scheduleCallback,sy=bs.unstable_NormalPriority,Jn={$$typeof:fa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},bu=null,Nn=null,is=!1,va=!1,ih=!1,_o=0,ac=null,gp=0,Pr=0,Di=null,xa=Lt.S;Lt.S=function(o,l){vl=ns(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Jt(o,l),xa!==null&&xa(o,l)};var bo=b(null),Li=Error(s(460)),sh=Error(s(474)),ya=Error(s(542)),or={then:function(){}},ds=null,So=null,hl=0,Qi=Vo(!0),vp=Vo(!1),Ji=[],lr=0,dl=0,Ys=!1,ah=!1,pl=b(null),Mo=b(0),As=b(null),ws=null,oi=b(0),zr=0,Yt=null,Ct=null,Ht=null,tn=!1,Kt=!1,mn=!1,ss=0,_a=0,Pa=null,xp=0,Zs={readContext:G,use:xi,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};Zs.useEffectEvent=We;var ni={readContext:G,use:xi,useCallback:function(o,l){return Xt().memoizedState=[o,l===void 0?null:l],o},useContext:G,useEffect:Xc,useImperativeHandle:function(o,l,p){p=p!=null?p.concat([o]):null,jo(4194308,4,Il.bind(null,l,o),p)},useLayoutEffect:function(o,l){return jo(4194308,4,o,l)},useInsertionEffect:function(o,l){jo(4,2,o,l)},useMemo:function(o,l){var p=Xt();l=l===void 0?null:l;var v=o();if(mn){ee(!0);try{o()}finally{ee(!1)}}return p.memoizedState=[v,l],v},useReducer:function(o,l,p){var v=Xt();if(p!==void 0){var T=p(l);if(mn){ee(!0);try{p(l)}finally{ee(!1)}}}else T=l;return v.memoizedState=v.baseState=T,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:T},v.queue=o,o=o.dispatch=Yx.bind(null,Yt,o),[v.memoizedState,o]},useRef:function(o){var l=Xt();return o={current:o},l.memoizedState=o},useState:function(o){o=ad(o);var l=o.queue,p=Fm.bind(null,Yt,l);return l.dispatch=p,[o.memoizedState,p]},useDebugValue:qc,useDeferredValue:function(o,l){var p=Xt();return Pl(p,o,l)},useTransition:function(){var o=ad(!1);return o=Pm.bind(null,Yt,o.queue,!0,!1),Xt().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,p){var v=Yt,T=Xt();if(un){if(p===void 0)throw Error(s(407));p=p()}else{if(p=l(),nn===null)throw Error(s(349));(fn&127)!==0||Oi(v,l,p)}T.memoizedState=p;var C={value:p,getSnapshot:l};return T.queue=C,Xc(Wo.bind(null,v,C,o),[o]),v.flags|=2048,Hs(9,{destroy:void 0},Pi.bind(null,v,C,p,l),null),p},useId:function(){var o=Xt(),l=nn.identifierPrefix;if(un){var p=Ia,v=Yi;p=(v&~(1<<32-Es(v)-1)).toString(32)+p,l="_"+l+"R_"+p,p=ss++,0<p&&(l+="H"+p.toString(32)),l+="_"}else p=xp++,l="_"+l+"r_"+p.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:ud,useFormState:od,useActionState:od,useOptimistic:function(o){var l=Xt();l.memoizedState=l.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=hf.bind(null,Yt,!0,p),p.dispatch=l,[o,l]},useMemoCache:La,useCacheRefresh:function(){return Xt().memoizedState=qx.bind(null,Yt)},useEffectEvent:function(o){var l=Xt(),p={impl:o};return l.memoizedState=p,function(){if((on&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},cr={readContext:G,use:xi,useCallback:uf,useContext:G,useEffect:Ul,useImperativeHandle:Om,useInsertionEffect:io,useLayoutEffect:jc,useMemo:Ol,useReducer:rs,useRef:cf,useState:function(){return rs(Wn)},useDebugValue:qc,useDeferredValue:function(o,l){var p=ot();return cd(p,Ct.memoizedState,o,l)},useTransition:function(){var o=rs(Wn)[0],l=ot().memoizedState;return[typeof o=="boolean"?o:zt(o),l]},useSyncExternalStore:yi,useId:ff,useHostTransitionStatus:ud,useFormState:Dl,useActionState:Dl,useOptimistic:function(o,l){var p=ot();return Gc(p,Ct,o,l)},useMemoCache:La,useCacheRefresh:Bm};cr.useEffectEvent=os;var Eo={readContext:G,use:xi,useCallback:uf,useContext:G,useEffect:Ul,useImperativeHandle:Om,useInsertionEffect:io,useLayoutEffect:jc,useMemo:Ol,useReducer:wi,useRef:cf,useState:function(){return wi(Wn)},useDebugValue:qc,useDeferredValue:function(o,l){var p=ot();return Ct===null?Pl(p,o,l):cd(p,Ct.memoizedState,o,l)},useTransition:function(){var o=wi(Wn)[0],l=ot().memoizedState;return[typeof o=="boolean"?o:zt(o),l]},useSyncExternalStore:yi,useId:ff,useHostTransitionStatus:ud,useFormState:Ll,useActionState:Ll,useOptimistic:function(o,l){var p=ot();return Ct!==null?Gc(p,Ct,o,l):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:La,useCacheRefresh:Bm};Eo.useEffectEvent=os;var Su={enqueueSetState:function(o,l,p){o=o._reactInternals;var v=Yn(),T=ks(v);T.payload=l,p!=null&&(T.callback=p),l=Vs(o,T,v),l!==null&&(ei(l,o,v),eo(l,o,v))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var v=Yn(),T=ks(v);T.tag=1,T.payload=l,p!=null&&(T.callback=p),l=Vs(o,T,v),l!==null&&(ei(l,o,v),eo(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=Yn(),v=ks(p);v.tag=2,l!=null&&(v.callback=l),l=Vs(o,v,p),l!==null&&(ei(l,o,p),eo(l,o,p))}},ps=Error(s(461)),Xn=!1,ml={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},li=!1,ci=!1,rc=!1,yp=typeof WeakSet=="function"?WeakSet:Set,di=null,ii=null,pi=!1,Dn=null,Qs=8192,oc={getCacheForType:function(o){var l=G(Jn),p=l.data.get(o);return p===void 0&&(p=o(),l.data.set(o,p)),p},cacheSignal:function(){return G(Jn).controller.signal}},ba=0,lc=1,cc=2,Mu=3,To=4;if(typeof Symbol=="function"&&Symbol.for){var gl=Symbol.for;ba=gl("selector.component"),lc=gl("selector.has_pseudo_class"),cc=gl("selector.role"),Mu=gl("selector.test_id"),To=gl("selector.text")}var Js=typeof WeakMap=="function"?WeakMap:Map,on=0,nn=null,ln=null,fn=0,Ln=0,Si=null,za=!1,Ao=!1,wo=!1,ur=0,si=0,Br=0,Co=0,uc=0,ms=0,fc=0,Eu=null,Cs=null,rh=!1,Tu=0,vl=0,Ro=1/0,Au=null,Fr=null,Mi=0,kr=null,xl=null,fr=0,hc=0,oh=null,_p=null,Mn=0,wu=null;return en.attemptContinuousHydration=function(o){if(o.tag===13||o.tag===31){var l=es(o,67108864);l!==null&&ei(l,o,67108864),ou(o,67108864)}},en.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13||o.tag===31){var l=Yn();l=q(l);var p=es(o,l);p!==null&&ei(p,o,l),ou(o,l)}},en.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var l=w(o.pendingLanes);if(l!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var p=1<<31-Es(l);o.entanglements[1]|=p,l&=~p}ht(o),(on&6)===0&&(Ro=ns()+500,Ke(0))}}break;case 31:case 13:l=es(o,2),l!==null&&ei(l,o,2),Tf(),ou(o,2)}},en.batchedUpdates=function(o,l){return o(l)},en.createComponentSelector=function(o){return{$$typeof:ba,value:o}},en.createContainer=function(o,l,p,v,T,C,F,$,Me,ke){return po(o,l,!1,null,p,v,C,null,F,$,Me,ke)},en.createHasPseudoClassSelector=function(o){return{$$typeof:lc,value:o}},en.createHydrationContainer=function(o,l,p,v,T,C,F,$,Me,ke,tt,Ge,mt,jt){var mi;return o=po(p,v,!0,o,T,C,$,jt,Me,ke,tt,Ge),o.context=Df(null),p=o.current,v=Yn(),v=q(v),T=ks(v),T.callback=(mi=l)!=null?mi:null,Vs(p,T,v),l=v,o.current.lanes=l,z(o,l),ht(o),o},en.createPortal=function(o,l,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tl,key:v==null?null:""+v,children:o,containerInfo:l,implementation:p}},en.createRoleSelector=function(o){return{$$typeof:cc,value:o}},en.createTestNameSelector=function(o){return{$$typeof:Mu,value:o}},en.createTextSelector=function(o){return{$$typeof:To,value:o}},en.defaultOnCaughtError=function(o){console.error(o)},en.defaultOnRecoverableError=function(o){eh(o)},en.defaultOnUncaughtError=function(o){eh(o)},en.deferredUpdates=function(o){var l=Lt.T,p=ha();try{return cn(32),Lt.T=null,o()}finally{cn(p),Lt.T=l}},en.discreteUpdates=function(o,l,p,v,T){var C=Lt.T,F=ha();try{return cn(2),Lt.T=null,o(l,p,v,T)}finally{cn(F),Lt.T=C,on===0&&(Ro=ns()+500)}},en.findAllNodes=_s,en.findBoundingRects=function(o,l){if(!Ci)throw Error(s(363));l=_s(o,l),o=[];for(var p=0;p<l.length;p++)o.push(Ff(l[p]));for(l=o.length-1;0<l;l--){p=o[l];for(var v=p.x,T=v+p.width,C=p.y,F=C+p.height,$=l-1;0<=$;$--)if(l!==$){var Me=o[$],ke=Me.x,tt=ke+Me.width,Ge=Me.y,mt=Ge+Me.height;if(v>=ke&&C>=Ge&&T<=tt&&F<=mt){o.splice(l,1);break}else if(v!==ke||p.width!==Me.width||mt<C||Ge>F){if(!(C!==Ge||p.height!==Me.height||tt<v||ke>T)){ke>v&&(Me.width+=ke-v,Me.x=v),tt<T&&(Me.width=T-ke),o.splice(l,1);break}}else{Ge>C&&(Me.height+=Ge-C,Me.y=C),mt<F&&(Me.height=F-Ge),o.splice(l,1);break}}}return o},en.findHostInstance=ru,en.findHostInstanceWithNoPortals=function(o){return o=h(o),o=o!==null?g(o):null,o===null?null:$l(o.stateNode)},en.findHostInstanceWithWarning=function(o){return ru(o)},en.flushPassiveEffects=tr,en.flushSyncFromReconciler=function(o){var l=on;on|=1;var p=Lt.T,v=ha();try{if(cn(2),Lt.T=null,o)return o()}finally{cn(v),Lt.T=p,on=l,(on&6)===0&&Ke(0)}},en.flushSyncWork=Tf,en.focusWithin=function(o,l){if(!Ci)throw Error(s(363));for(o=lo(o),l=jl(o,l),l=Array.from(l),o=0;o<l.length;){var p=l[o++],v=p.tag;if(!vo(p)){if((v===5||v===26||v===27)&&Ur(p.stateNode))return!0;for(p=p.child;p!==null;)l.push(p),p=p.sibling}}return!1},en.getFindAllNodesFailureDescription=function(o,l){if(!Ci)throw Error(s(363));var p=0,v=[];o=[lo(o),0];for(var T=0;T<o.length;){var C=o[T++],F=C.tag,$=o[T++],Me=l[$];if((F!==5&&F!==26&&F!==27||!vo(C))&&(co(C,Me)&&(v.push(Xl(Me)),$++,$>p&&(p=$)),$<l.length))for(C=C.child;C!==null;)o.push(C,$),C=C.sibling}if(p<l.length){for(o=[];p<l.length;p++)o.push(Xl(l[p]));return`findAllNodes was able to match part of the selector:
  `+(v.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},en.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return $l(o.child.stateNode);default:return o.child.stateNode}},en.injectIntoDevTools=function(){var o={bundleType:0,version:Od,rendererPackageName:uu,currentDispatcherRef:Lt,reconcilerVersion:"19.2.0"};if(Kl!==null&&(o.rendererConfig=Kl),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)o=!0;else{try{fl=l.inject(o),Ts=l}catch{}o=!!l.checkDCE}}return o},en.isAlreadyRendering=function(){return(on&6)!==0},en.observeVisibleRects=function(o,l,p,v){if(!Ci)throw Error(s(363));o=_s(o,l);var T=kf(o,p,v).disconnect;return{disconnect:function(){T()}}},en.shouldError=function(){return null},en.shouldSuspend=function(){return!1},en.startHostTransition=function(o,l,p,v){if(o.tag!==5)throw Error(s(476));var T=zm(o).queue;Pm(o,T,l,rl,p===null?i:function(){var C=zm(o);return C.next===null&&(C=o.alternate.memoizedState),Yc(o,C.next.queue,{},Yn()),p(v)})},en.updateContainer=function(o,l,p,v){var T=l.current,C=Yn();return Ud(T,C,o,l,p,v),C},en.updateContainerSync=function(o,l,p,v){return Ud(l.current,2,o,l,p,v),2},en},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})})(kM)),kM.exports}var HM;function $O(){return HM||(HM=1,FM.exports=KO()),FM.exports}var eP=$O();const tP=JO(eP);function nP(r){const e=tP(r);return e.injectIntoDevTools(),e}const iA=0,Kh={},iP=/^three(?=[A-Z])/,jx=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let sP=0;const aP=r=>typeof r=="function";function rP(r){if(aP(r)){const e=`${sP++}`;return Kh[e]=r,e}else Object.assign(Kh,r)}function sA(r,e){const t=jx(r),i=Kh[t];if(r!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function oP(r,e,t){var i;return r=jx(r)in Kh?r:r.replace(iP,""),sA(r,e),r==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,sx(e.object,t,r,e)}function lP(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?rx(r.parent,r):Ta(r.object)&&(r.object.visible=!1),r.isHidden=!0,sd(r)}}function aA(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?ax(r.parent,r):Ta(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,sd(r)}}function tS(r,e,t){const i=e.root.getState();if(!(!r.parent&&r.object!==i.scene)){if(!e.object){var s,c;const f=Kh[jx(e.type)];e.object=(s=e.props.object)!=null?s:new f(...(c=e.props.args)!=null?c:[]),e.object.__r3f=e}if(Rc(e.object,e.props),e.props.attach)ax(r,e);else if(Ta(e.object)&&Ta(r.object)){const f=r.object.children.indexOf(t?.object);if(t&&f!==-1){const h=r.object.children.indexOf(e.object);if(h!==-1){r.object.children.splice(h,1);const m=h<f?f-1:f;r.object.children.splice(m,0,e.object)}else e.object.parent=r.object,r.object.children.splice(f,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const f of e.children)tS(e,f);sd(e)}}function A_(r,e){e&&(e.parent=r,r.children.push(e),tS(r,e))}function GM(r,e,t){if(!e||!t)return;e.parent=r;const i=r.children.indexOf(t);i!==-1?r.children.splice(i,0,e):r.children.push(e),tS(r,e,t)}function rA(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():J_.unstable_scheduleCallback(J_.unstable_IdlePriority,e)}}function $_(r,e,t){if(!e)return;e.parent=null;const i=r.children.indexOf(e);i!==-1&&r.children.splice(i,1),e.props.attach?rx(r,e):Ta(e.object)&&Ta(r.object)&&(r.object.remove(e.object),GO(ZT(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let c=e.children.length-1;c>=0;c--){const f=e.children[c];$_(e,f,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&rA(e.object),t===void 0&&sd(e)}function cP(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const fv=[];function uP(){for(const[t]of fv){const i=t.parent;if(i){t.props.attach?rx(i,t):Ta(t.object)&&Ta(i.object)&&i.object.remove(t.object);for(const s of t.children)s.props.attach?rx(t,s):Ta(s.object)&&Ta(t.object)&&t.object.remove(s.object)}t.isHidden&&aA(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&rA(t.object)}for(const[t,i,s]of fv){t.props=i;const c=t.parent;if(c){var r,e;const f=Kh[jx(t.type)];t.object=(r=t.props.object)!=null?r:new f(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,cP(s,t.object),Rc(t.object,t.props),t.props.attach?ax(c,t):Ta(t.object)&&Ta(c.object)&&c.object.add(t.object);for(const h of t.children)h.props.attach?ax(t,h):Ta(h.object)&&Ta(t.object)&&t.object.add(h.object);sd(t)}}fv.length=0}const w_=()=>{},WM={};let ov=iA;const fP=0,hP=4,eb=nP({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:oP,removeChild:$_,appendChild:A_,appendInitialChild:A_,insertBefore:GM,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||A_(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||$_(t,e)},insertInContainerBefore(r,e,t){const i=r.getState().scene.__r3f;!e||!t||!i||GM(i,e,t)},getRootHostContext:()=>WM,getChildHostContext:()=>WM,commitUpdate(r,e,t,i,s){var c,f,h;sA(e,i);let m=!1;if((r.type==="primitive"&&t.object!==i.object||((c=i.args)==null?void 0:c.length)!==((f=t.args)==null?void 0:f.length)||(h=i.args)!=null&&h.some((y,_)=>{var b;return y!==((b=t.args)==null?void 0:b[_])}))&&(m=!0),m)fv.push([r,{...i},s]);else{const y=FO(r,i);Object.keys(y).length&&(Object.assign(r.props,y),Rc(r.object,y))}(s.sibling===null||(s.flags&hP)===fP)&&uP()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r?.object,prepareForCommit:()=>null,preparePortalMount:r=>sx(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:lP,unhideInstance:aA,createTextInstance:w_,hideTextInstance:w_,unhideTextInstance:w_,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Oe.createContext(null),setCurrentUpdatePriority(r){ov=r},getCurrentUpdatePriority(){return ov},resolveUpdatePriority(){var r;if(ov!==iA)return ov;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ZO;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qO;default:return YO}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:QO.version,applyViewTransitionName(r,e,t){},restoreViewTransitionName(r,e){},cancelViewTransitionName(r,e,t){},cancelRootViewTransitionName(r){},restoreRootViewTransitionName(r){},InstanceMeasurement:null,measureInstance:r=>null,wasInstanceInViewport:r=>!0,hasInstanceChanged:(r,e)=>!1,hasInstanceAffectedParent:(r,e)=>!1,suspendOnActiveViewTransition(r,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(r){},createViewTransitionInstance:r=>null,getCurrentGestureOffset(r){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(r,e){return r},cloneMutableTextInstance(r){return r},cloneRootViewTransitionContainer(r){throw new Error("Not implemented.")},removeRootViewTransitionClone(r,e){throw new Error("Not implemented.")},createFragmentInstance:r=>null,updateFragmentInstanceFiber(r,e){},commitNewChildToFragmentInstance(r,e){},deleteChildFromFragmentInstance(r,e){},measureClonedInstance:r=>null,maySuspendCommitOnUpdate:(r,e,t)=>!1,maySuspendCommitInSyncRender:(r,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(r,e)=>null}),nf=new Map,Ih={objects:"shallow",strict:!1};function dP(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:i,top:s,left:c}=r.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:c}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function pP(r){const e=nf.get(r),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,c=i||XO(ib,jM),f=t||eb.createContainer(c,jO,null,!1,null,"",s,s,s,null);e||nf.set(r,{fiber:f,store:c});let h,m,g=!1,y=null;return{async configure(_={}){let b;y=new Promise(X=>b=X);let{gl:M,size:A,scene:R,events:w,onCreated:E,shadows:N=!1,linear:L=!1,flat:U=!1,legacy:B=!1,orthographic:z=!1,frameloop:H="always",dpr:j=[1,2],performance:I,raycaster:P,camera:q,onPointerMissed:se}=_,ee=c.getState(),de=ee.gl;if(!ee.gl){const X={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},re=typeof M=="function"?await M(X):M;BM(re)?de=re:de=new WT({...X,...M}),ee.set({gl:de})}let oe=ee.raycaster;oe||ee.set({raycaster:oe=new PT});const{params:Q,...J}=P||{};if(gi.equ(J,oe,Ih)||Rc(oe,{...J}),gi.equ(Q,oe.params,Ih)||Rc(oe,{params:{...oe.params,...Q}}),!ee.camera||ee.camera===m&&!gi.equ(m,q,Ih)){m=q;const X=q?.isCamera,re=X?q:z?new Hc(0,0,0,0,.1,1e3):new Wi(75,0,.1,1e3);X||(re.position.z=5,q&&(Rc(re,q),re.manual||("aspect"in q||"left"in q||"right"in q||"bottom"in q||"top"in q)&&(re.manual=!0,re.updateProjectionMatrix())),!ee.camera&&!(q!=null&&q.rotation)&&re.lookAt(0,0,0)),ee.set({camera:re}),oe.camera=re}if(!ee.scene){let X;R!=null&&R.isScene?(X=R,sx(X,c,"",{})):(X=new Tb,sx(X,c,"",{}),R&&Rc(X,R)),ee.set({scene:X})}w&&!ee.events.handlers&&ee.set({events:w(c)});const fe=dP(r,A);if(gi.equ(fe,ee.size,Ih)||ee.setSize(fe.width,fe.height,fe.top,fe.left),j&&ee.viewport.dpr!==KT(j)&&ee.setDpr(j),ee.frameloop!==H&&ee.setFrameloop(H),ee.onPointerMissed||ee.set({onPointerMissed:se}),I&&!gi.equ(I,ee.performance,Ih)&&ee.set(X=>({performance:{...X.performance,...I}})),!ee.xr){var we;const X=(Pe,it)=>{const he=c.getState();he.frameloop!=="never"&&jM(Pe,!0,he,it)},re=()=>{const Pe=c.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?X:null),Pe.gl.xr.isPresenting||ib(Pe)},_e={connect(){const Pe=c.getState().gl;Pe.xr.addEventListener("sessionstart",re),Pe.xr.addEventListener("sessionend",re)},disconnect(){const Pe=c.getState().gl;Pe.xr.removeEventListener("sessionstart",re),Pe.xr.removeEventListener("sessionend",re)}};typeof((we=de.xr)==null?void 0:we.addEventListener)=="function"&&_e.connect(),ee.set({xr:_e})}if(de.shadowMap){const X=de.shadowMap.enabled,re=de.shadowMap.type;if(de.shadowMap.enabled=!!N,gi.boo(N))de.shadowMap.type=qp;else if(gi.str(N)){var Ce;const _e={basic:nE,percentage:kh,soft:qp,variance:Wu};de.shadowMap.type=(Ce=_e[N])!=null?Ce:qp}else gi.obj(N)&&Object.assign(de.shadowMap,N);(X!==de.shadowMap.enabled||re!==de.shadowMap.type)&&(de.shadowMap.needsUpdate=!0)}return bn.enabled=!B,g||(de.outputColorSpace=L?Ic:Us,de.toneMapping=U?mr:ux),ee.legacy!==B&&ee.set(()=>({legacy:B})),ee.linear!==L&&ee.set(()=>({linear:L})),ee.flat!==U&&ee.set(()=>({flat:U})),M&&!gi.fun(M)&&!BM(M)&&!gi.equ(M,de,Ih)&&Rc(de,M),h=E,g=!0,b(),this},render(_){return!g&&!y&&this.configure(),y.then(()=>{eb.updateContainer(W.jsx(mP,{store:c,children:_,onCreated:h,rootElement:r}),f,null,()=>{})}),c},unmount(){oA(r)}}}function mP({store:r,children:e,onCreated:t,rootElement:i}){return Dm(()=>{const s=r.getState();s.set(c=>({internal:{...c.internal,active:!0}})),t&&t(s),r.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),W.jsx(tA.Provider,{value:r,children:e})}function oA(r,e){const t=nf.get(r),i=t?.fiber;if(i){const s=t?.store.getState();s&&(s.internal.active=!1),eb.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var c,f,h,m;s.events.disconnect==null||s.events.disconnect(),(c=s.gl)==null||(f=c.renderLists)==null||f.dispose==null||f.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(m=s.gl)!=null&&m.xr&&s.xr.disconnect(),PO(s.scene),nf.delete(r)}catch{}},500)})}}const gP=new Set,vP=new Set,xP=new Set;function C_(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function nm(r,e){switch(r){case"before":return C_(gP,e);case"after":return C_(vP,e);case"tail":return C_(xP,e)}}let R_,N_;function tb(r,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(i=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),R_=e.internal.subscribers;for(let s=0;s<R_.length;s++)N_=R_[s],N_.ref.current(N_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let ox=!1,nb=!1,D_,XM,Oh;function lA(r){XM=requestAnimationFrame(lA),ox=!0,D_=0,nm("before",r),nb=!0;for(const t of nf.values()){var e;Oh=t.store.getState(),Oh.internal.active&&(Oh.frameloop==="always"||Oh.internal.frames>0)&&!((e=Oh.gl.xr)!=null&&e.isPresenting)&&(D_+=tb(r,Oh))}if(nb=!1,nm("after",r),D_===0)return nm("tail",r),ox=!1,cancelAnimationFrame(XM)}function ib(r,e=1){var t;if(!r)return nf.forEach(i=>ib(i.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):nb?r.internal.frames=2:r.internal.frames=1,ox||(ox=!0,requestAnimationFrame(lA)))}function jM(r,e=!0,t,i){if(e&&nm("before",r),t)tb(r,t,i);else for(const s of nf.values())tb(r,s.store.getState());e&&nm("after",r)}const L_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yP(r){const{handlePointer:e}=WO(r);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(L_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=r.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:i,events:s}=r.getState();if(s.disconnect==null||s.disconnect(),i(c=>({events:{...c.events,connected:t}})),s.handlers)for(const c in s.handlers){const f=s.handlers[c],[h,m]=L_[c];t.addEventListener(h,f,{passive:m})}},disconnect:()=>{const{set:t,events:i}=r.getState();if(i.connected){if(i.handlers)for(const s in i.handlers){const c=i.handlers[s],[f]=L_[s];i.connected.removeEventListener(f,c)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function qM(r,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...i),e)}}function _P({debounce:r,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[c,f]=Oe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=Oe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c,orientationHandler:null}),m=r?typeof r=="number"?r:r.scroll:null,g=r?typeof r=="number"?r:r.resize:null,y=Oe.useRef(!1);Oe.useEffect(()=>(y.current=!0,()=>{y.current=!1}));const[_,b,M]=Oe.useMemo(()=>{const E=()=>{if(!h.current.element)return;const{left:N,top:L,width:U,height:B,bottom:z,right:H,x:j,y:I}=h.current.element.getBoundingClientRect(),P={left:N,top:L,width:U,height:B,bottom:z,right:H,x:j,y:I};h.current.element instanceof HTMLElement&&i&&(P.height=h.current.element.offsetHeight,P.width=h.current.element.offsetWidth),Object.freeze(P),y.current&&!EP(h.current.lastBounds,P)&&f(h.current.lastBounds=P)};return[E,g?qM(E,g):E,m?qM(E,m):E]},[f,i,m,g]);function A(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",M,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function R(){h.current.element&&(h.current.resizeObserver=new s(M),h.current.resizeObserver.observe(h.current.element),e&&h.current.scrollContainers&&h.current.scrollContainers.forEach(E=>E.addEventListener("scroll",M,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{M()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const w=E=>{!E||E===h.current.element||(A(),h.current.element=E,h.current.scrollContainers=cA(E),R())};return SP(M,!!e),bP(b),Oe.useEffect(()=>{A(),R()},[e,M,b]),Oe.useEffect(()=>A,[]),[w,c,_]}function bP(r){Oe.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[r])}function SP(r,e){Oe.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[r,e])}function cA(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(r);return[t,i,s].some(c=>c==="auto"||c==="scroll")&&e.push(r),[...e,...cA(r.parentElement)]}const MP=["x","y","top","bottom","left","right","width","height"],EP=(r,e)=>MP.every(t=>r[t]===e[t]);function TP({ref:r,children:e,fallback:t,resize:i,style:s,gl:c,events:f=yP,eventSource:h,eventPrefix:m,shadows:g,linear:y,flat:_,legacy:b,orthographic:M,frameloop:A,dpr:R,performance:w,raycaster:E,camera:N,scene:L,onPointerMissed:U,onCreated:B,...z}){Oe.useMemo(()=>rP(mO),[]);const H=UO(),[j,I]=_P({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=Oe.useRef(null),q=Oe.useRef(null);Oe.useImperativeHandle(r,()=>P.current);const se=JT(U),[ee,de]=Oe.useState(!1),[oe,Q]=Oe.useState(!1);if(ee)throw ee;if(oe)throw oe;const J=Oe.useRef(null);Dm(()=>{const we=P.current;if(I.width>0&&I.height>0&&we){J.current||(J.current=pP(we));async function Ce(){await J.current.configure({gl:c,scene:L,events:f,shadows:g,linear:y,flat:_,legacy:b,orthographic:M,frameloop:A,dpr:R,performance:w,raycaster:E,camera:N,size:I,onPointerMissed:(...X)=>se.current==null?void 0:se.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(h?DO(h)?h.current:h:q.current),m&&X.setEvents({compute:(re,_e)=>{const Pe=re[m+"X"],it=re[m+"Y"];_e.pointer.set(Pe/_e.size.width*2-1,-(it/_e.size.height)*2+1),_e.raycaster.setFromCamera(_e.pointer,_e.camera)}}),B?.(X)}}),J.current.render(W.jsx(H,{children:W.jsx(OO,{set:Q,children:W.jsx(Oe.Suspense,{fallback:W.jsx(IO,{set:de}),children:e??null})})}))}Ce()}}),Oe.useEffect(()=>{const we=P.current;if(we)return()=>oA(we)},[]);const fe=h?"none":"auto";return W.jsx("div",{ref:q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:fe,...s},...z,children:W.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:W.jsx("canvas",{ref:P,style:{display:"block"},children:t})})})}function AP(r){return W.jsx(qT,{children:W.jsx(TP,{...r})})}function lx(){return lx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},lx.apply(null,arguments)}const Lm=new Y,nS=new Y,wP=new Y,YM=new Fe;function CP(r,e,t){const i=Lm.setFromMatrixPosition(r.matrixWorld);i.project(e);const s=t.width/2,c=t.height/2;return[i.x*s+s,-(i.y*c)+c]}function RP(r,e){const t=Lm.setFromMatrixPosition(r.matrixWorld),i=nS.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),c=e.getWorldDirection(wP);return s.angleTo(c)>Math.PI/2}function NP(r,e,t,i){const s=Lm.setFromMatrixPosition(r.matrixWorld),c=s.clone();c.project(e),YM.set(c.x,c.y),t.setFromCamera(YM,e);const f=t.intersectObjects(i,!0);if(f.length){const h=f[0].distance;return s.distanceTo(t.ray.origin)<h}return!0}function DP(r,e){if(e instanceof Hc)return e.zoom;if(e instanceof Wi){const t=Lm.setFromMatrixPosition(r.matrixWorld),i=nS.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,c=t.distanceTo(i);return 1/(2*Math.tan(s/2)*c)}else return 1}function LP(r,e,t){if(e instanceof Wi||e instanceof Hc){const i=Lm.setFromMatrixPosition(r.matrixWorld),s=nS.setFromMatrixPosition(e.matrixWorld),c=i.distanceTo(s),f=(t[1]-t[0])/(e.far-e.near),h=t[1]-f*e.far;return Math.round(f*c+h)}}const sb=r=>Math.abs(r)<1e-10?0:r;function uA(r,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=sb(e[s]*r.elements[s])+(s!==15?",":")");return t+i}const UP=(r=>e=>uA(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),IP=(r=>(e,t)=>uA(e,r(t),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]);function OP(r){return r&&typeof r=="object"&&"current"in r}const PP=Oe.forwardRef(({children:r,eps:e=.001,style:t,className:i,prepend:s,center:c,fullscreen:f,portal:h,distanceFactor:m,sprite:g=!1,transform:y=!1,occlude:_,onOcclude:b,castShadow:M,receiveShadow:A,material:R,geometry:w,zIndexRange:E=[16777271,0],calculatePosition:N=CP,as:L="div",wrapperClass:U,pointerEvents:B="auto",...z},H)=>{const{gl:j,camera:I,scene:P,size:q,raycaster:se,events:ee,viewport:de}=Hh(),[oe]=Oe.useState(()=>document.createElement(L)),Q=Oe.useRef(null),J=Oe.useRef(null),fe=Oe.useRef(0),we=Oe.useRef([0,0]),Ce=Oe.useRef(null),X=Oe.useRef(null),re=h?.current||ee.connected||j.domElement.parentNode,_e=Oe.useRef(null),Pe=Oe.useRef(!1),it=Oe.useMemo(()=>_&&_!=="blending"||Array.isArray(_)&&_.length&&OP(_[0]),[_]);Oe.useLayoutEffect(()=>{const $e=j.domElement;_&&_==="blending"?($e.style.zIndex=`${Math.floor(E[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[_]),Oe.useLayoutEffect(()=>{if(J.current){const $e=Q.current=JM.createRoot(oe);if(P.updateMatrixWorld(),y)oe.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const xt=N(J.current,I,q);oe.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${xt[0]}px,${xt[1]}px,0);transform-origin:0 0;`}return re&&(s?re.prepend(oe):re.appendChild(oe)),()=>{re&&re.removeChild(oe),$e.unmount()}}},[re,y]),Oe.useLayoutEffect(()=>{U&&(oe.className=U)},[U]);const he=Oe.useMemo(()=>y?{position:"absolute",top:0,left:0,width:q.width,height:q.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none",...f&&{top:-q.height/2,left:-q.width/2,width:q.width,height:q.height},...t},[t,c,f,q,y]),Ae=Oe.useMemo(()=>({position:"absolute",pointerEvents:B}),[B]);Oe.useLayoutEffect(()=>{if(Pe.current=!1,y){var $e;($e=Q.current)==null||$e.render(Oe.createElement("div",{ref:Ce,style:he},Oe.createElement("div",{ref:X,style:Ae},Oe.createElement("div",{ref:H,className:i,style:t,children:r}))))}else{var xt;(xt=Q.current)==null||xt.render(Oe.createElement("div",{ref:H,style:he,className:i,children:r}))}});const qe=Oe.useRef(!0);eS($e=>{if(J.current){I.updateMatrixWorld(),J.current.updateWorldMatrix(!0,!1);const xt=y?we.current:N(J.current,I,q);if(y||Math.abs(fe.current-I.zoom)>e||Math.abs(we.current[0]-xt[0])>e||Math.abs(we.current[1]-xt[1])>e){const Wt=RP(J.current,I);let Tt=!1;it&&(Array.isArray(_)?Tt=_.map(Ye=>Ye.current):_!=="blending"&&(Tt=[P]));const Ne=qe.current;if(Tt){const Ye=NP(J.current,I,se,Tt);qe.current=Ye&&!Wt}else qe.current=!Wt;Ne!==qe.current&&(b?b(!qe.current):oe.style.display=qe.current?"block":"none");const Be=Math.floor(E[0]/2),Le=_?it?[E[0],Be]:[Be-1,0]:E;if(oe.style.zIndex=`${LP(J.current,I,Le)}`,y){const[Ye,Z]=[q.width/2,q.height/2],St=I.projectionMatrix.elements[5]*Z,{isOrthographicCamera:st,top:At,left:Xe,bottom:G,right:O}=I,ne=UP(I.matrixWorldInverse),Se=st?`scale(${St})translate(${sb(-(O+Xe)/2)}px,${sb((At+G)/2)}px)`:`translateZ(${St}px)`;let De=J.current.matrixWorld;g&&(De=I.matrixWorldInverse.clone().transpose().copyPosition(De).scale(J.current.scale),De.elements[3]=De.elements[7]=De.elements[11]=0,De.elements[15]=1),oe.style.width=q.width+"px",oe.style.height=q.height+"px",oe.style.perspective=st?"":`${St}px`,Ce.current&&X.current&&(Ce.current.style.transform=`${Se}${ne}translate(${Ye}px,${Z}px)`,X.current.style.transform=IP(De,1/((m||10)/400)))}else{const Ye=m===void 0?1:DP(J.current,I)*m;oe.style.transform=`translate3d(${xt[0]}px,${xt[1]}px,0) scale(${Ye})`}we.current=xt,fe.current=I.zoom}}if(!it&&_e.current&&!Pe.current)if(y){if(Ce.current){const xt=Ce.current.children[0];if(xt!=null&&xt.clientWidth&&xt!=null&&xt.clientHeight){const{isOrthographicCamera:Wt}=I;if(Wt||w)z.scale&&(Array.isArray(z.scale)?z.scale instanceof Y?_e.current.scale.copy(z.scale.clone().divideScalar(1)):_e.current.scale.set(1/z.scale[0],1/z.scale[1],1/z.scale[2]):_e.current.scale.setScalar(1/z.scale));else{const Tt=(m||10)/400,Ne=xt.clientWidth*Tt,Be=xt.clientHeight*Tt;_e.current.scale.set(Ne,Be,1)}Pe.current=!0}}}else{const xt=oe.children[0];if(xt!=null&&xt.clientWidth&&xt!=null&&xt.clientHeight){const Wt=1/de.factor,Tt=xt.clientWidth*Wt,Ne=xt.clientHeight*Wt;_e.current.scale.set(Tt,Ne,1),Pe.current=!0}_e.current.lookAt($e.camera.position)}});const nt=Oe.useMemo(()=>({vertexShader:y?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[y]);return Oe.createElement("group",lx({},z,{ref:J}),_&&!it&&Oe.createElement("mesh",{castShadow:M,receiveShadow:A,ref:_e},w||Oe.createElement("planeGeometry",null),R||Oe.createElement("shaderMaterial",{side:Xr,vertexShader:nt.vertexShader,fragmentShader:nt.fragmentShader})))}),zP=r=>r;function BP(r,e=zP){const t=Ph.useSyncExternalStore(r.subscribe,Ph.useCallback(()=>e(r.getState()),[r,e]),Ph.useCallback(()=>e(r.getInitialState()),[r,e]));return Ph.useDebugValue(t),t}const ZM=r=>{const e=XT(r),t=i=>BP(e,i);return Object.assign(t,e),t},FP=(r=>r?ZM(r):ZM);function kP(r,e,t){const i=Hh(M=>M.size),s=Hh(M=>M.viewport),c=typeof r=="number"?r:i.width*s.dpr,f=i.height*s.dpr,h=(typeof r=="number"?t:r)||{},{samples:m=0,depth:g,...y}=h,_=g??h.depthBuffer,b=Oe.useMemo(()=>{const M=new Ra(c,f,{minFilter:qn,magFilter:qn,type:Yr,...y});return _&&(M.depthTexture=new ef(c,f,Is)),M.samples=m,M},[]);return Oe.useLayoutEffect(()=>{b.setSize(c,f),m&&(b.samples=m)},[m,b,c,f]),Oe.useEffect(()=>()=>b.dispose(),[]),b}const VP=r=>typeof r=="function",HP=Oe.forwardRef(({envMap:r,resolution:e=256,frames:t=1/0,children:i,makeDefault:s,...c},f)=>{const h=Hh(({set:w})=>w),m=Hh(({camera:w})=>w),g=Hh(({size:w})=>w),y=Oe.useRef(null);Oe.useImperativeHandle(f,()=>y.current,[]);const _=Oe.useRef(null),b=kP(e);Oe.useLayoutEffect(()=>{c.manual||y.current.updateProjectionMatrix()},[g,c]),Oe.useLayoutEffect(()=>{y.current.updateProjectionMatrix()}),Oe.useLayoutEffect(()=>{if(s){const w=m;return h(()=>({camera:y.current})),()=>h(()=>({camera:w}))}},[y,s,h]);let M=0,A=null;const R=VP(i);return eS(w=>{R&&(t===1/0||M<t)&&(_.current.visible=!1,w.gl.setRenderTarget(b),A=w.scene.background,r&&(w.scene.background=r),w.gl.render(w.scene,y.current),w.scene.background=A,w.gl.setRenderTarget(null),_.current.visible=!0,M++)}),Oe.createElement(Oe.Fragment,null,Oe.createElement("orthographicCamera",lx({left:g.width/-2,right:g.width/2,top:g.height/2,bottom:g.height/-2,ref:y},c),!R&&i),Oe.createElement("group",{ref:_},R&&i(b.texture)))}),iS=FP((r,e)=>({phase:"MENU",hp:100,maxHp:100,ammo:12,maxAmmo:12,isReloading:!1,actions:{startGame:()=>r({phase:"PLAYING",hp:100,ammo:12}),resetGame:()=>r({phase:"MENU"}),takeDamage:t=>r(i=>{const s=i.hp-t;return{hp:s,phase:s<=0?"GAMEOVER":i.phase}}),shoot:()=>{const t=e();return t.ammo>0&&!t.isReloading?(r({ammo:t.ammo-1}),!0):!1},reload:()=>{const t=e();!t.isReloading&&t.ammo<t.maxAmmo&&(r({isReloading:!0}),setTimeout(()=>r({isReloading:!1,ammo:t.maxAmmo}),1500))}}})),GP=()=>W.jsxs("group",{children:[W.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.1,0],receiveShadow:!0,children:[W.jsx("planeGeometry",{args:[200,200]}),W.jsx("meshStandardMaterial",{color:"#111"})]}),W.jsx("gridHelper",{args:[200,40,3355443,1118481],position:[0,0,0]}),[...Array(15)].map((r,e)=>W.jsxs("mesh",{position:[Math.random()*60-30,1.5,Math.random()*60-30],castShadow:!0,receiveShadow:!0,children:[W.jsx("boxGeometry",{args:[3,3,3]}),W.jsx("meshStandardMaterial",{color:"#222"}),W.jsxs("lineSegments",{children:[W.jsx("edgesGeometry",{args:[new Fc(3,3,3)]}),W.jsx("lineBasicMaterial",{color:"#444"})]})]},e)),W.jsx("directionalLight",{position:[50,50,25],intensity:1,castShadow:!0}),W.jsx("ambientLight",{intensity:.4})]}),WP=()=>{const[r,e]=Oe.useState({w:!1,a:!1,s:!1,d:!1,j:!1,k:!1,l:!1,i:!1,o:!1});return Oe.useEffect(()=>{const t=s=>{const c=s.key.toLowerCase();["w","a","s","d","j","k","l","i","o"].includes(c)&&e(f=>({...f,[c]:!0}))},i=s=>{const c=s.key.toLowerCase();["w","a","s","d","j","k","l","i","o"].includes(c)&&e(f=>({...f,[c]:!1}))};return window.addEventListener("keydown",t),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",i)}},[]),r},XP=({setPlayerRef:r})=>{const e=Oe.useRef(null),t=WP(),{isReloading:i,phase:s}=iS();return Oe.useEffect(()=>{e.current&&r(e)},[r]),eS(()=>{if(!e.current||s!=="PLAYING")return;const c=.15;t.w&&(e.current.position.z-=c),t.s&&(e.current.position.z+=c),t.a&&(e.current.position.x-=c),t.d&&(e.current.position.x+=c)}),W.jsxs("group",{ref:e,children:[W.jsxs("mesh",{position:[0,1,0],castShadow:!0,children:[W.jsx("boxGeometry",{args:[1,2,1]}),W.jsx("meshStandardMaterial",{color:"white"})]}),i&&W.jsx(PP,{position:[0,2.5,0],children:W.jsx("div",{className:"text-red-500 font-bold animate-pulse whitespace-nowrap bg-black/50 px-2 py-1 border border-red-500 text-[10px]",children:"RELOADING..."})})]})},jP=()=>{const{hp:r,maxHp:e,ammo:t,maxAmmo:i,phase:s}=iS();return s!=="PLAYING"?null:W.jsxs("div",{className:"absolute inset-0 pointer-events-none p-10 flex flex-col justify-between font-mono",children:[W.jsxs("div",{className:"flex items-center gap-3",children:[W.jsx("div",{className:"bg-black/50 border border-white/10 px-3 py-1 text-xs text-white",children:"HP"}),W.jsx("div",{className:"w-48 h-3 bg-neutral-900 border border-white/10",children:W.jsx("div",{className:"h-full bg-red-600 transition-all",style:{width:`${r/e*100}%`}})})]}),W.jsx("div",{className:"flex justify-end items-end",children:W.jsx("div",{className:"bg-black/80 p-6 border border-white/10",children:W.jsxs("div",{className:"text-5xl font-bold text-white",children:[t," ",W.jsxs("span",{className:"text-xl text-neutral-500",children:["/ ",i]})]})})}),W.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-30 text-white",children:W.jsx(dw,{size:32})})]})},qP=()=>{const{phase:r,actions:e}=iS();return r==="PLAYING"?null:r==="GAMEOVER"?W.jsxs("div",{className:"absolute inset-0 bg-red-900/90 flex flex-col items-center justify-center font-mono text-white p-8 text-center z-50",children:[W.jsx(Sw,{size:64,className:"mb-4 text-black animate-bounce"}),W.jsx("h1",{className:"text-6xl font-black uppercase mb-2 text-black",children:"TERMINATED"}),W.jsx("button",{onClick:e.resetGame,className:"bg-black text-white px-10 py-4 font-bold uppercase hover:bg-white hover:text-black transition-all pointer-events-auto",children:"REBOOT SYSTEM"})]}):W.jsxs("div",{className:"absolute inset-0 bg-black flex flex-col items-center justify-center z-50 text-white font-mono pointer-events-auto",children:[W.jsx("h1",{className:"text-5xl md:text-7xl font-black tracking-tighter mb-8 text-white uppercase",children:"PROTOCOL_SURVIVAL"}),W.jsxs("button",{onClick:e.startGame,className:"bg-white text-black py-4 px-10 font-bold tracking-widest hover:bg-red-600 hover:text-white transition-all uppercase flex items-center gap-2",children:[W.jsx($M,{size:14})," Initialize"]})]})},YP=()=>{const r=Oe.useRef(null);return W.jsxs("div",{className:"w-full h-full relative",children:[W.jsxs(AP,{shadows:!0,dpr:[1,2],style:{pointerEvents:"auto",background:"#000"},children:[W.jsx(HP,{makeDefault:!0,position:[30,30,30],zoom:35}),W.jsx("ambientLight",{intensity:.5}),W.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),W.jsx(GP,{}),W.jsx(XP,{setPlayerRef:e=>{r.current=e.current}})]}),W.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[W.jsx(qP,{}),W.jsx(jP,{})]})]})},ZP=({setCursorHovering:r})=>W.jsxs("section",{id:"protocol-survival",className:"w-full bg-[#050505] relative overflow-hidden border-b border-white/5",onMouseEnter:()=>r(!1),children:[W.jsx("div",{className:"max-w-[1800px] mx-auto px-6 md:px-12 pt-20 pb-10",children:W.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:[W.jsxs("div",{className:"border-l-4 border-red-600 pl-6",children:[W.jsx("div",{className:"text-[10px] font-mono text-red-500 font-bold tracking-[0.3em] mb-2 uppercase animate-pulse",children:"> INTERNAL_STRESS_TEST // PHASE_01"}),W.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter uppercase",children:["PROTOCOL",W.jsx("br",{}),"SURVIVAL"]})]}),W.jsx("div",{className:"max-w-md text-right",children:W.jsx("p",{className:"text-xs font-mono text-neutral-500 uppercase leading-relaxed",children:"Experimental interactive module built with React Three Fiber. Testing system scalability and real-time state management within the digital architecture terminal."})})]})}),W.jsxs("div",{className:"w-full h-[70vh] md:h-[85vh] relative bg-black group",children:[W.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/20 to-transparent z-10"}),W.jsx("div",{className:"w-full h-full cursor-crosshair",children:W.jsx(YP,{})}),W.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 border-t border-l border-white/30"}),W.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 border-t border-r border-white/30"}),W.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 border-b border-l border-white/30"}),W.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 border-b border-r border-white/30"})]}),W.jsxs("div",{className:"max-w-[1800px] mx-auto px-6 md:px-12 py-6 flex justify-between items-center opacity-30",children:[W.jsx("div",{className:"text-[8px] font-mono text-white tracking-widest uppercase",children:"WASD to Move // CLICK to Neutralize // R to Reload"}),W.jsx("div",{className:"text-[8px] font-mono text-white tracking-widest uppercase",children:"v1.0.4_BUILD_2026"})]})]}),QP=()=>W.jsx("section",{className:"w-full bg-[#050505] py-10 px-6 md:px-12 border-b border-white/5",children:W.jsx("div",{className:"max-w-[1800px] mx-auto flex justify-center",children:W.jsx("div",{className:"w-full max-w-4xl aspect-[21/9] bg-neutral-900 border border-white/10 flex items-center justify-center group overflow-hidden",children:W.jsx("div",{className:"text-white/20 font-mono text-[10px] tracking-[0.5em] uppercase group-hover:text-red-500 transition-colors",children:"[ TUTORIAL_INTERFACE_IMAGE_PLACEHOLDER ]"})})})}),JP=({setCursorHovering:r,navigateTo:e})=>{const t=Oe.useRef([]),[i,s]=Oe.useState("PRIVACY POLICY"),c=h=>{h&&!t.current.includes(h)&&t.current.push(h)};Oe.useEffect(()=>{const h="!@#$%^&*()_+-=[]{}|;:,.<>?/",m="PRIVACY POLICY";let g=0;const y=setInterval(()=>{s(m.split("").map((_,b)=>b<g?m[b]:h[Math.floor(Math.random()*h.length)]).join("")),g>=m.length&&clearInterval(y),g+=1/2},50);return()=>clearInterval(y)},[]),Oe.useEffect(()=>{const h=new IntersectionObserver(g=>{g.forEach(y=>{y.isIntersecting&&(y.target.classList.add("opacity-100","translate-y-0","filter-none"),y.target.classList.remove("opacity-0","translate-y-16","blur-sm"))})},{threshold:.1}),m=setTimeout(()=>{t.current.forEach(g=>g&&h.observe(g))},100);return()=>{clearTimeout(m),h.disconnect()}},[]);const f="opacity-0 translate-y-16 blur-sm transition-all duration-[1000ms] ease-[cubic-bezier(0.2,0.8,0.2,1)] will-change-transform";return W.jsxs("div",{className:"pt-32 pb-20 px-6 md:px-12 max-w-[1800px] mx-auto min-h-screen bg-white text-black font-sans",children:[W.jsxs("button",{onClick:()=>e("home"),className:`flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-black/40 hover:text-black transition-all mb-16 group ${f}`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[W.jsx(ow,{size:16,className:"group-hover:-translate-x-1 transition-transform"}),W.jsx("span",{children:"Return to Terminal"})]}),W.jsxs("article",{className:"max-w-4xl",children:[W.jsxs("div",{ref:c,className:`${f} mb-20 border-l-4 border-black pl-8`,children:[W.jsxs("div",{className:"text-[10px] font-mono text-red-600 font-bold tracking-[0.3em] mb-4 flex items-center gap-2",children:[W.jsx(KS,{size:12})," SECURE_DOCUMENT // V.2026"]}),W.jsx("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter leading-tight mb-6 uppercase",children:i}),W.jsxs("p",{className:"font-mono text-xs uppercase tracking-widest text-black/40",children:["Effective date: ",W.jsx("span",{className:"text-black",children:"January 13, 2026"})]})]}),W.jsxs("div",{className:"space-y-24 font-medium",children:[W.jsx("section",{ref:c,className:`${f} delay-100`,children:W.jsx("p",{className:"text-xl md:text-2xl leading-relaxed tracking-tight",children:'Nando M. ("us", "we", or "our") operates the digital architecture terminal. This policy outlines our surgical approach to data precision and how we safeguard your personal infrastructure.'})}),W.jsxs("section",{ref:c,className:`${f} delay-150`,children:[W.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[W.jsx("span",{className:"text-xs font-mono bg-black text-white px-2 py-1",children:"01"}),W.jsx("h2",{className:"text-3xl font-bold uppercase tracking-tighter",children:"Information Architecture"})]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 ml-4",children:[W.jsxs("div",{className:"space-y-4",children:[W.jsx("h3",{className:"text-sm font-mono uppercase tracking-widest border-b border-black/10 pb-2",children:"Personal Parameters"}),W.jsxs("ul",{className:"space-y-2 text-black/60 font-mono text-sm",children:[W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Identity: Name, Email"]}),W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Professional: Company, Role"]}),W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Contact: Encrypted metadata"]})]})]}),W.jsxs("div",{className:"space-y-4",children:[W.jsx("h3",{className:"text-sm font-mono uppercase tracking-widest border-b border-black/10 pb-2",children:"System Usage"}),W.jsxs("ul",{className:"space-y-2 text-black/60 font-mono text-sm",children:[W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Protocol: IP, Browser Version"]}),W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Analytics: Interaction paths"]}),W.jsxs("li",{className:"flex items-center gap-2",children:[W.jsx("div",{className:"w-1 h-1 bg-black"})," Hardware: OS, Device identifiers"]})]})]})]})]}),W.jsxs("section",{ref:c,className:`${f} delay-200`,children:[W.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[W.jsx("span",{className:"text-xs font-mono bg-black text-white px-2 py-1",children:"02"}),W.jsx("h2",{className:"text-3xl font-bold uppercase tracking-tighter",children:"Logical Execution"})]}),W.jsxs("div",{className:"bg-black/5 p-8 border-r-4 border-black",children:[W.jsx("p",{className:"text-black/70 mb-6 font-mono text-sm uppercase tracking-widest",children:"Processing Intent:"}),W.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm font-bold uppercase",children:[W.jsxs("li",{className:"flex items-center gap-3",children:[W.jsx(_w,{size:16})," Service Optimization"]}),W.jsxs("li",{className:"flex items-center gap-3",children:[W.jsx(mw,{size:16})," User Flow Analysis"]}),W.jsxs("li",{className:"flex items-center gap-3",children:[W.jsx(vw,{size:16})," Encrypted Support"]}),W.jsxs("li",{className:"flex items-center gap-3",children:[W.jsx(KS,{size:16})," Fraud Prevention"]})]})]})]})]})]}),W.jsx("div",{className:"fixed bottom-10 right-10 opacity-5 pointer-events-none hidden md:block",children:W.jsx("div",{className:"text-[150px] font-black leading-none",children:"PRIVACY"})})]})},KP=()=>{const r=Oe.useRef(null);return Oe.useEffect(()=>{const e=r.current;if(!e||!e.parentElement)return;const t=e.getContext("2d");if(!t)return;let i=e.width=e.parentElement.offsetWidth,s=e.height=e.parentElement.offsetHeight;const c=[],f=25;class h{x;y;vx;vy;size;life;constructor(){this.reset()}reset(){this.x=Math.random()*i,this.y=Math.random()*s,this.vx=(Math.random()-.5)*1.5,this.vy=(Math.random()-.5)*1.5,this.size=Math.random()*2+1,this.life=Math.random()*100+50}update(){this.x+=this.vx,this.y+=this.vy,this.life--,(this.life<=0||this.x<0||this.x>i||this.y<0||this.y>s)&&this.reset()}draw(){t&&(t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=`rgba(0, 0, 0, ${this.life/150})`,t.fill(),c.forEach(_=>{const b=_.x-this.x,M=_.y-this.y,A=Math.sqrt(b*b+M*M);A<120&&(t.beginPath(),t.strokeStyle=`rgba(0, 0, 0, ${.15*(1-A/120)})`,t.lineWidth=.5,t.moveTo(this.x,this.y),t.lineTo(_.x,_.y),t.stroke())}))}}for(let y=0;y<f;y++)c.push(new h);const m=()=>{t.clearRect(0,0,i,s),c.forEach(y=>{y.update(),y.draw()}),requestAnimationFrame(m)};m();const g=()=>{e.parentElement&&(i=e.width=e.parentElement.offsetWidth,s=e.height=e.parentElement.offsetHeight)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),W.jsx("canvas",{ref:r,className:"absolute inset-0 z-0 opacity-40 pointer-events-none mix-blend-multiply"})},$P=({openContact:r})=>{const t=({href:i,children:s,label:c})=>W.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"group relative cursor-pointer text-neutral-500 hover:text-black transition-colors duration-300 flex flex-col items-center md:items-start",children:[W.jsx("span",{className:"text-[10px] uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity bg-black text-white px-1 -ml-1 mb-1",children:c}),W.jsxs("div",{className:"flex items-center gap-2",children:[W.jsx("span",{className:"text-lg md:text-xl font-bold tracking-tight group-hover:underline decoration-2 underline-offset-4",children:s}),W.jsx(fw,{size:16,className:"opacity-0 -translate-x-2 -translate-y-2 group-hover:opacity-100 group-hover:translate-x-0 group-hover:translate-y-0 transition-all duration-300"})]})]});return W.jsx("footer",{className:"bg-white text-black pt-24 pb-0 px-6 md:px-12 border-t border-black relative overflow-hidden",children:W.jsxs("div",{className:"max-w-[1800px] mx-auto relative z-10 mb-20",children:[W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 mb-24",children:[W.jsxs("div",{className:"relative",children:[W.jsx("div",{className:"absolute -top-20 -left-20 w-[150%] h-[150%] z-0 overflow-hidden opacity-40 pointer-events-none",children:W.jsx(KP,{})}),W.jsxs("div",{className:"relative z-10 pointer-events-auto",children:[W.jsxs("h2",{className:"text-5xl md:text-8xl font-bold tracking-tighter leading-[0.9] mb-8 uppercase",children:["Ready to ",W.jsx("br",{})," elevate your ",W.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-black to-neutral-400",children:"digital presence?"})]}),W.jsxs("button",{onClick:r,className:"group flex items-center gap-4 text-xl border-b-2 border-black pb-2 hover:pl-6 transition-all duration-300 font-bold uppercase bg-white/80 backdrop-blur-sm",children:[W.jsx("span",{children:"Initiate Project"}),W.jsx(cw,{className:"group-hover:translate-x-2 transition-transform"})]})]})]}),W.jsxs("div",{className:"flex flex-col justify-end items-start md:items-end gap-10 relative z-10",children:[W.jsxs("div",{className:"flex flex-col md:flex-row gap-12 md:gap-20",children:[W.jsx(t,{href:"https://www.linkedin.com/in/nddomaul/",label:"Connect",children:"LinkedIn"}),W.jsx(t,{href:"https://www.instagram.com/nddomaul/",label:"Follow",children:"Instagram"}),W.jsx(t,{href:"mailto:contact@nandomaul.online",label:"Write",children:"Email"})]}),W.jsxs("p",{className:"text-neutral-400 max-w-xs text-right hidden md:block font-mono text-xs mt-8 uppercase",children:["Based in Jakarta.",W.jsx("br",{}),"Operating Globally."]})]})]}),W.jsxs("div",{className:"border-t-2 border-black pt-8 flex flex-col md:flex-row justify-between items-center text-[10px] uppercase tracking-widest text-black font-bold font-mono pb-8",children:[W.jsxs("div",{children:[" ",2026," Nando M. All Systems Operational."]}),W.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0 opacity-50",children:[W.jsx("span",{className:"animate-pulse",children:""}),W.jsx("span",{children:"STATUS: ONLINE"})]})]})]})})},ez=()=>{const[r,e]=Oe.useState("home"),[t,i]=Oe.useState(!1),[s,c]=Oe.useState(!1),[f,h]=Oe.useState(!1),m=Oe.useRef(null),g=`
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    .animate-marquee { animation: marquee 35s linear infinite; }
    @keyframes float-rotate-aggressive {
      0% { transform: rotateY(-15deg) rotateX(10deg) translateY(0px); }
      50% { transform: rotateY(15deg) rotateX(-10deg) translateY(-30px); }
      100% { transform: rotateY(-15deg) rotateX(10deg) translateY(0px); }
    }
    .animate-float-rotate-aggressive { animation: float-rotate-aggressive 8s ease-in-out infinite; }
    @keyframes scan-fast { 0% { transform: translateY(-100%); opacity: 0; } 50% { opacity: 1; } 100% { transform: translateY(500%); opacity: 0; } }
    .animate-scan-fast { animation: scan-fast 2s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
    @keyframes glitch-1 { 0% { transform: translate(0) } 20% { transform: translate(-2px, 2px) } 40% { transform: translate(-2px, -2px) } 60% { transform: translate(2px, 2px) } 80% { transform: translate(2px, -2px) } 100% { transform: translate(0) } }
    .animate-glitch-1 { animation: glitch-1 0.2s infinite linear alternate-reverse; }
    @keyframes spin-slow-3d { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }
    .animate-spin-slow-3d { animation: spin-slow-3d 20s linear infinite; }
  `;Oe.useEffect(()=>{window.history.state||window.history.replaceState({page:"home"},"","/"),setTimeout(()=>i(!0),700)},[]);const y=(_,b)=>{i(!1),setTimeout(()=>{e(_),i(!0),m.current&&m.current.scrollTo(0,0),b&&setTimeout(()=>{const M=document.getElementById(b);M&&M.scrollIntoView({behavior:"smooth"})},100)},700)};return W.jsxs("div",{className:"cursor-auto font-sans antialiased text-black bg-white selection:bg-black selection:text-white",children:[W.jsx("style",{dangerouslySetInnerHTML:{__html:g}}),W.jsx("div",{className:`fixed inset-0 z-[10000] bg-black transition-transform duration-700 ease-in-out origin-top ${t?"scale-y-0 pointer-events-none":"scale-y-100"}`,children:W.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:W.jsx("div",{className:"text-white font-mono text-xl animate-bounce font-bold",children:"INITIALIZING SYSTEM..."})})}),W.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 px-6 py-6 md:px-12 flex justify-between items-center bg-white/90 backdrop-blur-md border-b border-black/5",children:[W.jsxs("div",{className:"text-xl font-black tracking-tighter cursor-pointer uppercase",onClick:()=>y("home"),children:["NANDO M",W.jsx("span",{className:"text-red-600 animate-pulse",children:"_"})]}),W.jsxs("div",{className:"hidden md:flex items-center gap-10",children:[W.jsx("button",{onClick:()=>y("home","experience"),className:"text-[10px] font-bold uppercase tracking-widest hover:text-red-600 transition-colors",children:"Experience"}),W.jsx("button",{onClick:()=>y("home","skillset"),className:"text-[10px] font-bold uppercase tracking-widest hover:text-red-600 transition-colors",children:"Skillset"}),W.jsx("button",{onClick:()=>c(!0),className:"bg-black text-white px-6 py-2 text-[10px] font-bold uppercase tracking-widest hover:bg-red-600 transition-colors shadow-[4px_4px_0px_rgba(0,0,0,0.1)]",children:"CONTACT"})]})]}),W.jsxs("div",{ref:m,className:"h-screen w-full overflow-y-auto overflow-x-hidden scroll-smooth",children:[r==="home"&&W.jsxs(W.Fragment,{children:[W.jsx(Aw,{navigateTo:y,setCursorHovering:h}),W.jsx(ZP,{setCursorHovering:h}),W.jsx(QP,{}),W.jsx(Rw,{navigateTo:y,setCursorHovering:h})]}),r==="privacy-policy"&&W.jsx(JP,{setCursorHovering:h,navigateTo:y}),W.jsx($P,{navigateTo:y,openContact:()=>c(!0)})]})]})};JM.createRoot(document.getElementById("root")).render(W.jsx(Oe.StrictMode,{children:W.jsx(ez,{})}));
